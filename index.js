"use strict";var an=Object.defineProperty;var Et=Object.getOwnPropertySymbols;var un=Object.prototype.hasOwnProperty;var fn=Object.prototype.propertyIsEnumerable;var Wt=(e,i,d)=>i in e?an(e,i,{enumerable:true,configurable:true,writable:true,value:d}):e[i]=d;var ut=(e,i)=>{for(var d in i||(i={}))if(un.call(i,d))Wt(e,d,i[d]);if(Et)for(var d of Et(i)){if(fn.call(i,d))Wt(e,d,i[d])}return e};var c="";var ve='"';var Ae="'";var re=" ";var he="\n";var _t="\r\n";function Dt(e){if(typeof e==="string"){return{html:"HTML",liquid:"Liquid",xml:"XML",jsx:"JSX",tsx:"TSX",json:"JSON",yaml:"YAML",css:"CSS",scss:"SCSS",sass:"SASS",less:"LESS",javascript:"JavaScript",typescript:"TypeScript"}[e]}}function $e(e){if(typeof e==="string"){return{text:"ignore",auto:"ignore",markup:"markup",html:"markup",liquid:"markup",xml:"markup",javascript:"script",typescript:"script",jsx:"script",tsx:"script",json:"script",less:"style",scss:"style",sass:"style",css:"style"}[e]}}function tt(e){if(typeof e==="string"){return{text:4,auto:4,markup:1,html:1,liquid:1,xml:1,javascript:2,typescript:2,jsx:2,tsx:2,json:2,less:3,scss:3,sass:3,css:3}[e]}}function kt(e,i){const d={lexer:i,language:Dt(e),chars:0};const f=Date.now();return v=>{const l=+(Date.now()-f).toFixed(0);d.time=l>1e3?`${l}s`:`${l}ms`;d.chars=v;d.size=cn(v);return d}}function We(e,i=re){if(e<=0)return i;let d=c;let f=1;do{d+=i}while(f++<e);return d}function n(e,i){return e?e.charCodeAt(0)===i:false}function Qe(e,i){return n(e[e.length-1],i)}function E(e,i){return n(e,i)===false}function bt(e,i){return Qe(e,i)===false}function de(e){return/\s/.test(e)}function Ee(e){return/\d/.test(e)}function cn(e){const i=1024;const d=1048576;const f=1073741824;if(e<i)return e+" B";else if(e<d)return(e/i).toFixed(1)+" KB";else if(e<f)return(e/d).toFixed(1)+" MB";else return(e/f).toFixed(1)+" GB"}function yt(e){return`\\${e}`}var Je=Object.assign;var xt=Object.defineProperties;var Pe=Array.isArray;function nt(e){let i=s.count;let d=s.stack.index;let f=0;let v=0;let l=0;let h=0;let r=0;let b=0;let B=0;let t=true;const{count:u}=s;const T=s.stack.token;const ee=s.stack.index;const o=s.lineOffset;const p=e.lexer[u]==="style";const L=p&&T==="global";const N=p?[";","separator"]:[",","separator"];const ue=[];const se={begin:[],ender:[],lexer:[],lines:[],stack:[],token:[],types:[]};function a(y,$){let S=y[0];let Q=$[0];if(e.types[S]==="comment"){do{S=S+1}while(S<u&&e.types[S]==="comment");if(e.token[S]===void 0)return 1}if(e.types[Q]==="comment"){do{Q=Q+1}while(Q<u&&e.types[Q]==="comment");if(e.token[Q]===void 0)return 1}if(p===true){if(e.token[S].indexOf("@import")===0||e.token[Q].indexOf("@import")===0){return S<Q?-1:1}if(e.types[S]!==e.types[Q]){if(e.types[S]==="function")return 1;if(e.types[S]==="variable")return-1;if(e.types[S]==="selector")return 1;if(e.types[S]==="property"&&e.types[Q]!=="variable")return-1;if(e.types[S]==="mixin"&&e.types[Q]!=="property"&&e.types[Q]!=="variable")return-1}}if(e.token[S].toLowerCase()>e.token[Q].toLowerCase())return 1;return-1}h=i;do{if(e.begin[i]===d||L&&i<h&&n(e.token[i],125)&&e.begin[e.begin[i]]===-1){if(e.types[i].indexOf("liquid")>-1)return;if(e.token[i]===N[0]||p===true&&n(e.token[i],125)&&E(e.token[i+1],59)){t=true;r=i+1}else if(p===true&&n(e.token[i-1],125)){t=true;r=i}if(r===0&&e.types[0]==="comment"){do{r=r+1}while(e.types[r]==="comment")}else if(e.types[r]==="comment"&&e.lines[r]<2){r=r+1}if(t===true&&(e.token[i]===N[0]||p===true&&n(e.token[i-1],125))&&r<=h){if(p===true&&"};".indexOf(e.token[h])<0){h=h+1}else if(p===false&&E(e.token[h],44)){h=h+1}ue.push([r,h]);if(p===true&&n(e.token[r],125)){h=r}else{h=r-1}}}i=i-1}while(i>d);if(ue.length>0&&ue[ue.length-1][0]>i+1){f=ue[ue.length-1][0]-1;if(e.types[f]==="comment"&&e.lines[f]>1){do{f=f-1}while(f>0&&e.types[f]==="comment");ue[ue.length-1][0]=f+1}if(e.types[i+1]==="comment"&&i===-1){do{i=i+1}while(e.types[i+1]==="comment")}ue.push([i+1,f])}if(ue.length>1){if(p===true||s.language==="json"||n(e.token[i-1],61)||n(e.token[i-1],58)||n(e.token[i-1],40)||n(e.token[i-1],91)||n(e.token[i-1],44)||e.types[i-1]==="word"||i===0){ue.sort(a);B=ue.length;t=false;d=0;do{b=ue[d][1];if(p===true){l=b;if(e.types[l]==="comment")l=l-1;if(n(e.token[l],125)){b=b+1;N[0]="}";N[1]="end"}else{N[0]=";";N[1]="separator"}}f=ue[d][0];if(p===true&&e.types[b-1]!=="end"&&e.types[b]==="comment"&&e.types[b+1]!=="comment"&&d<B-1){b=b+1}if(f<b){do{if(p===false&&d===B-1&&f===b-2&&n(e.token[f],44)&&e.lexer[f]==="script"&&e.types[f+1]==="comment"){v=v+1}else{s.push(se,{begin:e.begin[f],ender:e.begin[f],lexer:e.lexer[f],lines:e.lines[f],stack:e.stack[f],token:e.token[f],types:e.types[f]},c);v=v+1}if(e.token[f]===N[0]&&(p===true||e.begin[f]===e.begin[ue[d][0]])){t=true}else if(e.token[f]!==N[0]&&e.types[f]!=="comment"){t=false}f=f+1}while(f<b)}if(t===false&&se.token[se.token.length-1]!=="x;"&&(p===true||d<B-1)){f=se.types.length-1;if(se.types[f]==="comment"){do{f=f-1}while(f>0&&se.types[f]==="comment")}f=f+1;s.splice({data:se,howmany:0,index:f,record:{begin:ee,stack:L?"global":T,ender:s.count,lexer:se.lexer[f-1],lines:0,token:N[0],types:N[1]}});v=v+1}d=d+1}while(d<B);s.splice({data:e,howmany:v,index:i+1});s.lineOffset=o;s.concat(e,se)}}}function St(e,i,d){if(Pe(e)===false)return e;if(i==="normal"){return Qt.call({array:e,recursive:d},e)}if(i==="descend")return $t.call({recursive:d},e);return Tt.call({recursive:d},e)}function ft(e,i){let d=e;let f=-1;const{data:v}=s;const l=[];const h=s.stack.length<2?[-1]:[s.stack[s.stack.length-2][1]];do{if(d>0&&v.types[d].indexOf("attribute")>-1&&v.types[d].indexOf("end")<0&&v.types[d-1].indexOf("start")<0&&v.types[d-1].indexOf("attribute")<0&&v.lexer[d]==="markup"){h.push(d-1)}if(d>0&&v.types[d-1].indexOf("attribute")>-1&&v.types[d].indexOf("attribute")<0&&v.lexer[h[h.length-1]]==="markup"&&v.types[h[h.length-1]].indexOf("start")<0){h.pop()}if(v.begin[d]!==h[h.length-1]){v.begin[d]=h.length>0?h[h.length-1]:-1}if(v.types[d].indexOf("else")>-1){if(h.length>0){h[h.length-1]=d}else{h.push(d)}}if(v.types[d].indexOf("end")>-1)h.pop();if(v.types[d].indexOf("start")>-1)h.push(d);d=d+1}while(d<i);d=i;do{d=d-1;if(v.types[d].indexOf("end")>-1){l.push(d);f=f+1}v.ender[d]=f>-1?l[f]:-1;if(v.types[d].indexOf("start")>-1){l.pop();f=f-1}}while(d>e)}function Tt(e){let i=0;const d=e.length;const f=e;const v=f.map((r=>r[1]));const l=()=>{let r=0;const b=f.length;if(r<b){do{if(Pe(f[r])===true)f[r]=Tt.apply(this,f[r]);r=r+1}while(r<b)}};const h=(r=c)=>{let b=i;let B=0;let t=0;let u=0;let T=[];let ee=f[i];const o=typeof ee;if(b<d){do{if(f[b]<ee||typeof f[b]<o){ee=f[b];T=[b]}else if(f[b]===ee){T.push(b)}b=b+1}while(b<d)}t=T.length;b=i;B=t+i;if(b<B){do{ee[1]=v[b];f[T[u]]=f[b];f[b]=ee;u=u+1;b=b+1}while(b<B)}i=i+t;if(i<d){h()}else{if(this.recursive===true)l();e=f}return r};h();return e}function $t(e){let i=0;const d=e.length;const f=e;const v=()=>{const h=f.length;let r=0;if(r<h){do{if(Pe(f[r]))f[r]=$t.apply(this,f[r]);r=r+1}while(r<h)}};const l=(h="")=>{let r=i;let b=0;let B=0;let t=0;let u=f[i];let T=[];let ee=c;const o=typeof u;if(r<d){do{ee=typeof f[r];if(f[r]>u||ee>o){u=f[r];T=[r]}else if(f[r]===u){T.push(r)}r=r+1}while(r<d)}B=T.length;r=i;b=B+i;if(r<b){do{f[T[t]]=f[r];f[r]=u;t=t+1;r=r+1}while(r<b)}i=i+B;if(i<d){l()}else{if(this.recursive===true)v();e=f}return h};l();return e}function Qt(e){let i=e;const d=[e[0]];const f=()=>{let l=0;const h=i.length;if(l<h){do{if(Pe(i[l]))i[l]=Qt.apply(this,i[l]);l=l+1}while(l<h)}};const v=l=>{let h=0;const r=[];const b=i.length;if(h<b){do{if(i[h]!==l)r.push(i[h]);h=h+1}while(h<b)}i=r;if(r.length>0){d.push(r[0]);v(r[0])}else{if(this.recursive===true)f();e=i}};v(this.array[0]);return e}function pn(e={embedded:{schema:[{language:"json"}],style:[{language:"css"}],stylesheet:[{language:"css"},{language:"scss",argument:/['"]scss['"]/}],javascript:[{language:"javascript"}]},tags:["form","paginate","capture","case","comment","for","if","raw","tablerow","unless","schema","style","script","stylesheet","javascript"],control:["if","unless","case"],else:["else","elsif"],singletons:["include","layout","section","assign","liquid","break","continue","cycle","decrement","echo","increment","render","when"]}){const i=new Set(e.else);const d=new Set(e.control);const f=new Set(e.tags);const v=new Set(e.singletons);const l={};h(e.embedded);return{get grammar(){return e},get tags(){return f},get control(){return d},get else(){return i},get singleton(){return v},get embed(){return l},extend(r){for(const b in r){if(Pe(r[b])){for(const B of r[b]){if(b==="tags"&&f.has(B)===false){e.tags.push(B);f.add(B)}else if(b==="else"&&i.has(B)===false){e.else.push(B);i.add(B)}else if(b==="control"&&d.has(B)){e.control.push(B);d.add(B)}else if(b==="singletons"&&v.has(B)===false){e.singletons.push(B);v.add(B)}}}else if(b==="embedded"){if(typeof r[b]==="object"){h(r[b])}}}}};function h(r){for(const b in r){for(const{language:B,argument:t=null}of r[b]){if(!(b in l)){l[b]={tag:b,language:B,args:new Map([[new Set,{tag:b,language:B}]])}}if(t){for(const[u]of l[b].args){if(u===null)continue;if(Pe(t)){for(const T of t)if(!u.has(T))u.add(T)}else{const T=new RegExp(t);if(u.size>0){for(const ee of u){if(!(ee instanceof RegExp))continue;if(ee.source!==T.source)u.add(T)}}else{u.add(T)}}}}}}}}function dn(e={tags:["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"]}){const i=new Set(e.tags);return{get grammar(){return e},get tags(){return i},extend(d){for(const f in d){if(Pe(d[f])){for(const v of d[f]){if(f==="tags"&&i.has(v)===false){e.tags.push(v);i.add(v)}}}}}}}function hn(e={embedded:{script:[{language:"javascript"},{language:"json",attribute:{type:["application/json","application/ld+json"]}},{language:"jsx",attribute:{type:["text/jsx","application/jsx"]}}],style:[{language:"css"}]},voids:["area","base","br","col","command","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],tags:["a","abbr","acronym","address","applet","article","aside","audio","b","basefont","bdi","bdo","big","blockquote","body","button","canvas","caption","center","cite","code","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","fieldset","figcaption","figure","figure","font","footer","form","frame","frameset","h1","h6","head","header","html","i","iframe","ins","isindex","kbd","label","legend","fieldset","li","main","map","mark","marquee","menu","meter","nav","noframes","frame","noscript","object","ol","optgroup","option","output","p","object","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","picture","video","audio","span","strike","strong","style","sub","summary","details","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","audio","video","tt","u","ul","var","video"]}){const i=new Set(e.tags);const d=new Set(e.voids);const f={};v(e.embedded);return{get grammar(){return e},get tags(){return i},get voids(){return d},get embed(){return f},extend(l){for(const h in l){if(Pe(l[h])){for(const r of l[h]){if(h==="tags"&&i.has(r)===false){e.tags.push(r);i.add(r)}else if(h==="voids"&&d.has(r)===false){e.voids.push(r);d.add(r)}}}else if(h==="embedded"){if(typeof l[h]==="object"){v(l[h])}}}}};function v(l){for(const h in l){if(!(h in f))f[h]={tag:h,attr:new Map};for(const{language:r,attribute:b}of l[h]){if(!("language"in f[h]))f[h].language=r;if(!f[h].attr.has(r)){f[h].attr.set(r,{tag:h,language:r,attr:new Map})}if(b){const B=f[h].attr.get(r);for(const t in b){if(!B.attr.has(t)){B.attr.set(t,{tag:h,language:r,attr:t,value:new Set})}const u=f[h].attr.get(r).attr.get(t);if(Pe(b[t])){for(const T of b[t])if(!u.value.has(T))u.value.add(T)}else{const T=new RegExp(b[t]);if(u.value.size>0){for(const ee of u.value){if(!(ee instanceof RegExp))continue;if(ee.source!==T.source)u.value.add(T)}}else{u.value.add(T)}}}}}}}}function gn(e={units:["%","cap","ch","cm","deg","dpcm","dpi","dppx","em","ex","fr","grad","Hz","ic","in","kHz","lh","mm","ms","mS","pc","pt","px","Q","rad","rem","rlh","s","turn","vb","vh","vi","vmax","vmin","vw"],atrules:["@charset","@color-profile","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@supports"],webkit:{classes:["webkit-any","webkit-any-link*","webkit-autofill"],elements:["webkit-file-upload-button","webkit-inner-spin-button","webkit-input-placeholder","webkit-meter-bar","webkit-meter-even-less-good-value","webkit-meter-inner-element","webkit-meter-optimum-value","webkit-meter-suboptimum-value","webkit-outer-spin-button","webkit-progress-bar","webkit-progress-inner-element","webkit-progress-value","webkit-search-cancel-button","webkit-search-results-button","webkit-slider-runnable-track","webkit-slider-thumb"]},pseudo:{classes:["active","any-link","checked","default","defined","disabled","empty","enabled","first","first-child","first-of-type","fullscreen","focus","focus-visible","focus-within","host","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","modal","not","nth-child","nth-col","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","picture-in-picture","placeholder-shown","paused","playing","read-only","read-write","required","right","root","scope","target","valid","visited","where"],elements:["after","backdrop","before","cue","cue-region","first-letter","first-line","file-selector-button","marker","part","placeholder","selection","slotted"],functions:["after","before","first-letter","first-line","host","host-context","part","slotted","lang","not","nth-child","nth-col","nth-last-child","nth-last-of-type","nth-of-type","where"]}}){const i=new Set(e.units);const d=new Set(e.atrules);const f=new Set(e.pseudo.classes);const v=new Set(e.pseudo.elements);const l=new Set(e.pseudo.functions);const h=new Set(e.webkit.elements);const r=new Set(e.webkit.classes);return{get grammar(){return e},get units(){return i},get pseudoClasses(){return f},get pseudoElements(){return v},get pseudoFunctions(){return l},get webkitElements(){return h},get webkitClasses(){return r},atrules(b){return d.has(b.slice(0,b.indexOf("(")).trim())},extend(b){for(const B in b){if(Pe(b[B])){for(const t of b[B]){if(B==="units"&&!i.has(t)){e[B].push(t);i.add(t)}else if(B==="atrules"&&!d.has(t)){e[B].push(t);d.add(t)}}}if(typeof b[B]==="object"){for(const t in b[B]){if(Pe(b[B][t])){for(const u of b[B][t]){if(B==="webkit"){if(t==="elements"){e[B][t].push(u);h.add(u)}else if(t==="classes"){e[B][t].push(u);r.add(u)}}else if(B==="pseudo"){if(t==="elements"){e[B][t].push(u);v.add(u)}else if(t==="classes"){e[B][t].push(u);f.add(u)}else if(t==="functions"){e[B][t].push(u);l.add(u)}}}}}}}}}}function mn(e={keywords:["ActiveXObject","ArrayBuffer","AudioContext","Canvas","CustomAnimation","DOMParser","DataView","Date","Error","EvalError","FadeAnimation","FileReader","Flash","Float32Array","Float64Array","FormField","Frame","Generator","HotKey","Image","Iterator","Intl","Int16Array","Int32Array","Int8Array","InternalError","Loader","Map","MenuItem","MoveAnimation","Notification","ParallelArray","Point","Promise","Proxy","RangeError","Rectangle","ReferenceError","Reflect","RegExp","ResizeAnimation","RotateAnimation","Set","SQLite","ScrollBar","Set","Shadow","StopIteration","Symbol","SyntaxError","Text","TextArea","Timer","TypeError","URL","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","URIError","WeakMap","WeakSet","Web","Window","XMLHttpRequest"]}){const i=new Set(e.keywords);return{get grammar(){return e},get keywords(){return i},extend(d){for(const f in d){if(Pe(d[f])){for(const v of d[f]){if(f==="keywords"&&!i.has(v)){e[f].push(v);i.add(v)}}}}}}}var Ce=function(){const e=gn();const i=pn();const d=mn();const f=hn();const v=dn();return{html:f,liquid:i,js:d,css:e,svg:v,extend(l){if(typeof l==="object"){for(const h in l){if(h==="liquid"){i.extend(l.liquid)}else if(h==="html"){f.extend(l.html)}else if(h==="css"){e.extend(l.css)}else if(h==="js"){d.extend(l.js)}else if(h==="svg"){d.extend(l.js)}}}return{get html(){return f.grammar},get liquid(){return i.grammar},get js(){return d.grammar},get css(){return e.grammar},get svg(){return e.grammar}}}}}();var it=/\S/;var Ue=/^\s+$/;var Ft=/\s*/;var Ve=/\s+/g;var Ze=/^\s+/;var Te=/\s+$/;var ze=/^[\t\v\f\r \u00a0\u2000-\u200b\u2028-\u2029\u3000]+/;var st=/[\t\v\f \u00a0\u2000-\u200b\u2028-\u2029\u3000]+$/;var rt=/[\t\v\r \u00a0\u2000-\u200b\u2028-\u2029\u3000]+/g;var wt=/^\n+/;var Ht=/({%-?\s*(?:comment\s*-?%}|#)|<!-{2})\s*esthetic-ignore-(start|next|end)\b/;var Xe=/(\/[*/]|{%-?\s*(?:comment\s*-?%}|#)|<!-{2})\s*esthetic-ignore-start\b/;var ct=/^\/\/\s*esthetic-ignore-start\b/;var zt=/^\/\*{1,2}(?:\s*|\n\s*\*\s*)esthetic-ignore-start\b/;var Gt=/(\/[*/]|{%-?\s*(?:comment\s*-?%}|#)|<!--)\s*esthetic-ignore-next\b/;var lt=/^<!--+/;var ot=/--+>$/;var Jt=/{%-?|-?%}/g;var Vt=/^{%-?\s*liquid\b/;var Ut=/^{%-?\s*(?:#|comment\b)/;var Zt=/^{%-?\s*#/;var Lt=/(\/|\\|\||\*|\[|\]|\{|\})/g;function Ye(e){const{rules:i}=s;const d=[];const f=[];const v=e.begin.replace(Lt,yt);const l=n(e.begin[0],123)&&n(e.begin[1],37);const h=new RegExp(`^(${v}\\s*esthetic-ignore-start)`);const r=new RegExp(`(${v}\\s*)`);const b=l?new RegExp(`\\s*${e.ender.replace(Jt,(j=>n(j,123)?"{%-?\\s*":"\\s*-?%}"))}$`):new RegExp(e.ender.replace(Lt,yt));let B=e.start;let t=0;let u=0;let T=0;let ee=0;let o=[];let p=c;let L=c;let N=false;let ue=false;let se=false;let a=c;let y=e.ender.length-1;let $=e.ender.charAt(y);let S=0;function Q(){if(Ue.test(o[t+1])||o[t+1]===c){do{t=t+1}while(t<ee&&(Ue.test(o[t+1])||o[t+1]===c))}if(t<ee-1)f.push(c)}function Y(){let j=he;B=B+1;do{d.push(e.chars[B]);if(d.slice(d.length-19).join(c)==="esthetic-ignore-end"){if(l){const z=e.chars.indexOf("{",B);if(n(e.chars[z+1],37)){const F=e.chars.slice(z,e.chars.indexOf("}",z+1)+1).join(c);if(b.test(F))e.ender=F}}B=B+1;break}B=B+1}while(B<e.end);t=B;y=e.begin.length-1;$=e.begin.charAt(y);do{if(e.begin==="/*"&&n(e.chars[t-1],47)&&(n(e.chars[t],42)||n(e.chars[t],47))){break}if(e.begin!=="/*"&&e.chars[t]===$&&e.chars.slice(t-y,t+1).join(c)===e.begin){break}t=t-1}while(t>e.start);if(e.begin==="/*"&&n(e.chars[t],42)){j="*/"}else if(e.begin!=="/*"){j=e.ender}y=j.length-1;$=j.charAt(y);if(j!==he||e.chars[B]!==he){do{d.push(e.chars[B]);if(j===he&&e.chars[B+1]===he)break;if(e.chars[B]===$&&e.chars.slice(B-y,B+1).join(c)===j)break;B=B+1}while(B<e.end)}if(e.chars[B]===he)B=B-1;a=d.join(c).replace(st,c);return[a,B]}do{d.push(e.chars[B]);if(n(e.chars[B],10))s.lineOffset=s.lines(B,s.lineOffset);if(e.chars[B]===$&&e.chars.slice(B-y,B+1).join(c)===e.ender)break;B=B+1}while(B<e.end);a=d.join(c);if(h.test(a)===true)return Y();if(l===true&&i.liquid.preserveComment||l===false&&i.markup.preserveComment||s.lexer==="style"&&i.style.preserveComment||s.lexer==="script"&&i.style.preserveComment||i.wrap<1||B===e.end||a.length<=i.wrap&&a.indexOf(he)<0||e.begin==="/*"&&a.indexOf(he)>0&&a.replace(he,c).indexOf(he)>0&&/\n(?!(\s*\*))/.test(a)===false){return[a,B]}t=e.start;if(t>0&&E(e.chars[t-1],10)&&de(e.chars[t-1])){do{t=t-1}while(t>0&&E(e.chars[t-1],10)&&de(e.chars[t-1]))}p=e.chars.slice(t,e.start).join(c);const H=new RegExp(he+p,"g");o=a.replace(/\r\n/g,he).replace(H,he).split(he);ee=o.length;o[0]=o[0].replace(r,c);o[ee-1]=o[ee-1].replace(b,c);if(ee<2)o=o[0].split(re);if(o[0]===c){o[0]=e.begin}else{o.splice(0,0,e.begin)}ee=o.length;t=0;do{L=t<ee-1?o[t+1].replace(ze,c):c;if(Ue.test(o[t])===true||o[t]===c){Q()}else if(o[t].replace(ze,c).length>i.wrap&&o[t].replace(ze,c).indexOf(re)>i.wrap){o[t]=o[t].replace(ze,c);u=o[t].indexOf(re);f.push(o[t].slice(0,u));o[t]=o[t].slice(u+1);t=t-1}else{S=t<1?i.wrap-e.begin.length+1:i.wrap;o[t]=(e.begin==="/*"&&o[t].indexOf("/*")!==0?"   ":c)+o[t].replace(ze,c).replace(st,c).replace(Ve,re);T=o[t].replace(ze,c).indexOf(re);u=o[t].length;if(u>S&&T>0&&T<S){u=S;do{u=u-1;if(de(o[t].charAt(u))&&u<=i.wrap)break}while(u>0);if(/^\s*\d+\.\s/.test(o[t])===true&&/^\s*\d+\.\s/.test(o[t+1])===false){o.splice(t+1,0,"1. ")}if(Ue.test(o[t+1])===true||o[t+1]===c){f.push(o[t].slice(0,u));o[t]=o[t].slice(u+1);N=true;t=t-1}else if(/^\s*[*-]\s/.test(o[t+1])){f.push(o[t].slice(0,u));o[t]=o[t].slice(u+1);ue=true;t=t-1}else if(/^\s*\d+\.\s/.test(o[t+1])){f.push(o[t].slice(0,u));o[t]=o[t].slice(u+1);se=true;t=t-1}else if(o[t].replace(ze,c).indexOf(re)<i.wrap){o[t+1]=o[t].length>i.wrap?o[t].slice(u+1)+s.crlf+o[t+1]:o[t].slice(u+1)+re+o[t+1]}if(N===false&&ue===false&&se===false){o[t]=o[t].slice(0,u)}}else if(o[t+1]!==void 0&&(o[t].length+L.indexOf(re)>i.wrap&&L.indexOf(re)>0||o[t].length+L.length>i.wrap&&L.indexOf(re)<0)){f.push(o[t]);t=t+1}else if(o[t+1]!==void 0&&Ue.test(o[t+1])===false&&o[t+1]!==c&&/^\s*(?:[*-]|\d+\.)\s/.test(o[t+1])===false){f.push(o[t]);N=true}else{f.push(o[t]);N=true}ue=false;se=false}t=t+1}while(t<ee);if(f.length>0){if(f[f.length-1].length>i.wrap-(e.ender.length+1)){f.push(e.ender)}else{f.push(e.ender)}a=f.join(s.crlf)}else{o[o.length-1]=o[o.length-1]+e.ender;a=o.join(s.crlf)}return[a,B]}function pt(e){const{wrap:i}=s.rules;const{preserveComment:d}=s.rules[s.lexer];let f=e.start;let v=0;let l=c;let h=[];function r(){let B=c;do{v=v+1;if(n(e.chars[v+1],10))return}while(v<e.end&&de(e.chars[v]));if(e.chars[v]+e.chars[v+1]==="//"){h=[];do{h.push(e.chars[v]);v=v+1}while(v<e.end&&E(e.chars[v],10));B=h.join(c);if(/^\/\/ (?:[*-]|\d+\.)/.test(B)===false&&/^\/\/\s*$/.test(B)===false){l=`${l} ${B.replace(/(^\/\/\s*)/,c).replace(void 0,c)}`;f=v-1;r()}}}function b(){const B=[];const t={ender:-1,types:"comment",lexer:e.lexer,lines:s.lineOffset};if(s.count>-1){t.begin=s.stack.index;t.stack=s.stack.token;t.token=s.data.token[s.count]}else{t.begin=-1;t.stack="global";t.token=c}let u=0;let T=0;l=l.replace(/\s+/g,re).replace(void 0,c);T=l.length;if(i>T)return;do{u=i;if(E(l[u],32)){do{u=u-1}while(u>0&&E(l[u],32));if(u<3){u=i;do{u=u+1}while(u<T-1&&E(l[u],32))}}B.push(l.slice(0,u));l=`// ${l.slice(u).replace(void 0,c)}`;T=l.length}while(i<T);u=0;T=B.length;do{t.token=B[u];s.push(s.data,t,c);t.lines=2;s.lineOffset=2;u=u+1}while(u<T)}do{h.push(e.chars[f]);f=f+1}while(f<e.end&&E(e.chars[f],10));if(f===e.end){e.chars.push(he)}else{f=f-1}l=h.join(c).replace(void 0,c);if(ct.test(l)===true){let B=he;f=f+1;do{h.push(e.chars[f]);f=f+1}while(f<e.end&&(E(e.chars[f-1],100)||n(e.chars[f-1],100)&&h.slice(h.length-19).join(c)!=="esthetic-ignore-end"));v=f;do{}while(v>e.start&&n(e.chars[v-1],47)&&(n(e.chars[v],42)||n(e.chars[v],47)));if(n(e.chars[v],42))B="*/";if(B!==he||E(e.chars[f],10)){do{h.push(e.chars[f]);if(B===he&&n(e.chars[f+1],10))break;f=f+1}while(f<e.end&&(B===he||B==="*/"&&(n(e.chars[f-1],42)||n(e.chars[f],47))))}if(e.chars[f]===he)f=f-1;l=h.join(c).replace(void 0,c);return[l,f]}if(l==="//"||d===true)return[l,f];l=l.replace(/(\/\/\s*)/,"// ");if(i<1||f===e.end-1&&s.data.begin[s.count]<1)return[l,f];v=f+1;r();b();return[l,f]}var Ct={global:{crlf:{default:false,description:"If line termination should be Windows (CRLF) format. Unix (LF) format is the default.",lexer:"all",type:"boolean"},endNewline:{default:false,description:"Insert an empty line at the end of output.",lexer:"all",type:"boolean"},indentSize:{default:2,description:'The number of "indentChar" values to comprise a single indentation.',lexer:"all",type:"number"},indentChar:{default:" ",description:"The string characters to comprise a single indentation. Any string combination is accepted.",lexer:"all",type:"string"},language:{description:"The language name",lexer:"all",type:"select",default:"auto",values:[{rule:"auto",description:"Prettify will automatically detect the language"},{rule:"text",description:"Plain Text"},{rule:"html",description:"HTML"},{rule:"liquid",description:"HTML + Liquid"},{rule:"javascript",description:"JavaScript"},{rule:"jsx",description:"JSX"},{rule:"typescript",description:"TypeScript"},{rule:"tsx",description:"TSX"},{rule:"json",description:"JSON"},{rule:"css",description:"CSS"},{rule:"scss",description:"SCSS"},{rule:"less",description:"LESS"},{rule:"xml",description:"XML"}]},preserveLine:{default:2,description:"The maximum number of consecutive empty lines to retain.",lexer:"all",type:"number"},wrap:{default:0,description:"Character width limit before applying word wrap. A 0 value disables this option. A negative value concatenates script strings.",lexer:"all",type:"number"}},liquid:{commentNewline:{default:false,description:"If a blank new line should be forced above comments.",lexer:"all",type:"boolean"},commentIndent:{default:false,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",lexer:"all",type:"boolean"},correct:{default:false,description:"Automatically correct some sloppiness in code.",lexer:"markup",type:"boolean"},delimiterTrims:{default:"preserve",description:"How delimiter whitespace trim dashes should handled on Liquid tokens. You should avoid setting this to force in order to avoid stripping whitespace between text content.",lexer:"markup",type:"select",values:[{rule:"preserve",description:"All trim dash occurances of trims intact"},{rule:"strip",description:"Removes all trim dash occurances for tags and output tokens"},{rule:"force",description:"Applies trime dashes to all tags and output tokens"},{rule:"tags",description:"Applies trim dashes to tags tokens only"},{rule:"output",description:"Applies trim dashes to output object tokens only"}]},ignoreTagList:{default:[],description:"A list of liquid tag to ignore",lexer:"liquid",type:"array"},indentAttributes:{default:false,description:"Whether or not markup tags with Liquid contained attributes should apply indentation",lexer:"liquid",type:"boolean"},preserveComment:{default:false,description:"Prevent comment reformatting due to option wrap.",lexer:"markup",type:"boolean"},normalizeSpacing:{default:true,description:"Whether or not to normalize the distributed spacing contained in Liquid tokens.",lexer:"markup",type:"boolean"},lineBreakSeparator:{default:"default",description:"Controls the placement of Liquid tag separator type characters in newline structures.",lexer:"markup",type:"select",values:[{rule:"default",description:"Leave line break character intace"},{rule:"before",description:"Place line break character at the start of expressions"},{rule:"after",description:"Place line break character at the end of expressions"}]},quoteConvert:{lexer:"all",description:"If the quotes should be converted to single quotes or double quotes.",type:"select",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}]}},markup:{attributeSort:{default:false,description:"Alphanumerically sort markup attributes. Attribute sorting is ignored on tags that contain attributes template attributes.",lexer:"markup",type:"boolean"},attributeSortList:{default:[],description:"A comma separated list of attribute names. Attributes will be sorted according to this list and then alphanumerically. This option requires 'attributeSort' have a value of true.",lexer:"markup",type:"array"},attributeCasing:{default:"preserve",description:"Controls the casing of attribute values and keys.",type:"select",lexer:"markup",values:[{rule:"preserve",description:"All tag attribute keys/values are preserved and left intact."},{rule:"lowercase",description:"All tag attribute keys/values are converted to lowercase"},{rule:"lowercase-name",description:"Only attribute keys are converted to lowercase"},{rule:"lowercase-value",description:"Only attribute values are converted to lowercase"}]},commentNewline:{default:false,description:"If a blank new line should be forced above comments.",lexer:"all",type:"boolean"},commentIndent:{default:false,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",lexer:"all",type:"boolean"},correct:{default:false,description:"Automatically correct some sloppiness in code.",lexer:"markup",type:"boolean"},delimiterForce:{description:"Whether or not ending HTML tag delimiters should be forced onto a newline. This will emulate the style of Prettier's singleAttributePerLine formatting option, wherein the last > delimiter character breaks itself onto a new line",default:false,lexer:"markup",type:"boolean"},forceAttribute:{default:false,description:"If all markup attributes should be indented each onto their own line. This option accepts either a boolean or number value, depending on your preferences you can either force attributes based a count limit, disable forcing or always enable enforcing.",lexer:"markup",type:["number","boolean"],multi:{number:{default:1,description:"Optionally define an attribute force threshold. When the number of attributes exceeds this limit then they will be forced, otherwise they will be left intact."},boolean:{default:false,description:"Whether or not to enforce the rule. A value of true will always force attributes, whereas a value of false will never force attributes."}}},forceLeadAttribute:{default:false,description:"Forces leading attribute onto a newline when using wrap based indentation.",lexer:"markup",type:"boolean"},forceIndent:{default:false,description:"Will force indentation upon all content and tags without regard for the creation of new text nodes.",lexer:"markup",type:"boolean"},ignoreJS:{default:false,description:"Whether to ignore embedded regions of tags identified to contain JavaScript",lexer:"markup",type:"boolean"},ignoreCSS:{default:false,description:"Whether to ignore embedded regions of tags identified to contain CSS",lexer:"markup",type:"boolean"},ignoreJSON:{default:false,description:"Whether HTML <script> tags annotated with a JSON identifiable attribute should be ignored from beautification.",lexer:"markup",type:"boolean"},preserveAttributes:{default:false,description:"If markup tags should have their insides preserved. This option is only available to markup and does not support child tokens that require a different lexer.",lexer:"markup",type:"boolean"},preserveComment:{default:false,description:"Prevent comment reformatting due to option wrap.",lexer:"markup",type:"boolean"},preserveText:{default:false,description:"If text in the provided markup code should be preserved exactly as provided. This option eliminates beautification and wrapping of text content.",lexer:"markup",type:"boolean"},selfCloseSpace:{default:false,description:'Markup self-closing tags end will end with " />" instead of "/>".',lexer:"markup",type:"boolean"},selfCloseSVG:{default:true,description:"Whether or not SVG type tags should be converted to self closing void types.",lexer:"markup",type:"boolean"},stripAttributeLines:{default:false,description:"Whether or not newlines contained within tag attributes should be removed or preserved.",lexer:"markup",type:"boolean"},quoteConvert:{lexer:"all",description:"If the quotes should be converted to single quotes or double quotes.",type:"select",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}]}},style:{correct:{default:false,description:"Automatically correct some sloppiness in code.",lexer:"style",type:"boolean"},classPadding:{description:"Inserts new line characters between every CSS code block.",default:false,type:"boolean",lexer:"style"},commentNewline:{default:false,description:"If a blank new line should be forced above comments.",lexer:"all",type:"boolean"},commentIndent:{default:false,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",lexer:"all",type:"boolean"},sortSelectors:{default:false,type:"boolean",description:"If comma separated CSS selectors should present on a single line of code.",lexer:"style"},sortProperties:{lexer:"style",description:"This option will alphabetically sort CSS properties contained within classes.",default:false,type:"boolean"},noLeadZero:{lexer:"style",description:"This will eliminate leading zeros from numbers expressed within values.",default:false,type:"boolean"},preserveComment:{default:false,description:"Prevent comment reformatting due to option wrap.",lexer:"markup",type:"boolean"},atRuleSpace:{default:true,description:"Insert a single whitespace character betwen @ rules.",type:"boolean",lexer:"style"},quoteConvert:{lexer:"style",description:"If the quotes should be converted to single quotes or double quotes.",type:"select",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}]}},script:{arrayFormat:{lexer:"script",description:"Determines if all array indexes should be indented, never indented, or left to the default",type:"select",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},braceAllman:{lexer:"script",default:false,description:'Determines if opening curly braces will exist on the same line as their condition or be forced onto a new line, otherwise known as "Allman Style" indentation.',type:"boolean"},bracePadding:{default:false,description:"This will create a newline before and after objects values",type:"boolean",lexer:"script"},braceNewline:{default:false,description:"If true an empty line will be inserted after opening curly braces and before closing curly braces.",type:"boolean",lexer:"script"},braceStyle:{default:"none",description:"Emulates JSBeautify's brace_style option using existing Prettify options",type:"select",lexer:"script",values:[{rule:"none",description:"Ignores this option"},{rule:"collapse",description:"Sets formatObject to indent and neverflatten to true."},{rule:"collapse-preserve-inline",description:"Sets formatObject to inline and bracePadding to true"},{rule:"expand",description:"Sets objectIndent to indent and braceNewline + neverflatten to true."}]},caseSpace:{default:false,type:"boolean",description:"If the colon separating a case's expression (of a switch/case block) from its statement should be followed by a space instead of indentation thereby keeping the case on a single line of code.",lexer:"script"},commentNewline:{default:false,description:"If a blank new line should be forced above comments.",lexer:"all",type:"boolean"},commentIndent:{default:false,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",lexer:"all",type:"boolean"},correct:{default:false,description:"Automatically correct some sloppiness in code.",lexer:"markup",type:"boolean"},elseNewline:{lexer:"script",default:false,type:"boolean",description:'If keyword "else" is forced onto a new line.'},endComma:{description:"If there should be a trailing comma in arrays and objects.",type:"select",lexer:"script",default:"none",values:[{rule:"none",description:"Ignore this option"},{rule:"always",description:"Always ensure there is a tailing comma"},{rule:"never",description:"Remove trailing commas"}]},objectSort:{default:false,description:"This option will alphabetically sort object properties in JSON objects",type:"boolean",lexer:"script"},objectIndent:{description:"This option will alphabetically sort object properties in JSON objects",type:"select",lexer:"script",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},functionSpace:{lexer:"script",default:true,type:"boolean",description:"Inserts a space following the function keyword for anonymous functions."},functionNameSpace:{lexer:"script",default:true,type:"boolean",description:"If a space should follow a JavaScript function name."},methodChain:{lexer:"script",default:-1,description:"When to break consecutively chained methods and properties onto separate lines. A negative value disables this option. A value of 0 ensures method chainsare never broken.",type:"number"},preserveComment:{default:false,description:"Prevent comment reformatting due to option wrap.",lexer:"markup",type:"boolean"},ternaryLine:{lexer:"script",description:"If ternary operators in JavaScript `?` and `:` should remain on the same line.",type:"boolean",default:false},neverFlatten:{lexer:"script",default:true,description:"If destructured lists in script should never be flattend.",type:"boolean"},noCaseIndent:{lexer:"script",description:"If the colon separating a case's expression (of a switch/case block) from its statement should be followed by a space instead of indentation, thereby keeping the case on a single line of code.",default:false,type:"boolean"},noSemicolon:{lexer:"script",description:"Removes semicolons that would be inserted by ASI. This option is in conflict with option `attemptCorrection` and takes precedence over conflicting features. Use of this option is a possible security/stability risk.",default:false,type:"boolean"},quoteConvert:{lexer:"style",description:"If the quotes should be converted to single quotes or double quotes.",type:"select",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}]},variableList:{lexer:"script",description:"If consecutive JavaScript variables should be merged into a comma separated list or if variables in a list should be separated. each â€” Ensure each reference is a single declaration statement.",type:"select",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"each",description:"Ensure each reference is a single declaration statement"},{rule:"list",description:"Ensure consecutive declarations are a comma separated list"}]},vertical:{lexer:"script",description:"If lists of assignments and properties should be vertically aligned",type:"boolean",default:false}}};function je(e,i=NaN){if(typeof e!=="string")return c;if(E(e,60)&&E(e,123))return e;if(n(e,60)){const v=e.search(/[\s>]/);const l=e.slice(n(e[1],47)?2:1,v);return n(l,63)&&Qe(l,63)?"xml":isNaN(i)?l:l.slice(i)}const d=n(e[2],45)?e.slice(3).trimStart():e.slice(2).trimStart();const f=d.slice(0,d.search(/[\s=|!<>,.[]|-?[%}]}/));return isNaN(i)?f:f.slice(i)}function Xt(e){const i=e.indexOf("{");return n(e[i+1],123)}function Rt(e){const i=e.indexOf("{");if(n(e[i+1],37)){let d;d=e.slice(i+(n(e[i+2],45)?3:2)).trimStart();d=d.slice(0,d.search(/[\s=|!<>,.[]|-?[%}]}/));return d.startsWith("end")?false:Ce.liquid.else.has(d)}return false}function Yt(e){const i=e.indexOf("=");if(i>-1){if(n(e[i+1],34)||n(e[i+1],39)){return/{%-?\s*end[a-z]+/.test(e.slice(i,e.lastIndexOf(e[i+1])))}}return false}function vt(e){if(Ke(e))return/{%-?\s*end\w+/.test(e);return false}function Ke(e,i=false){let d;if(i){if(n(e[0],123)&&n(e[1],37)&&n(e[e.length-2],37)&&n(e[e.length-1],125)){d=e.slice(n(e[2],45)?3:2).trimStart();if(n(d,34)||n(d,39))return false;d=d.slice(0,d.search(/[\s=|!<"'>,.[]|-?[%}]}/));return d.startsWith("end")?false:Ce.liquid.tags.has(d)}return false}let f=e.indexOf("{");if(f===-1)return false;do{if(n(e[f+1],37)){d=e.slice(f+(n(e[f+2],45)?3:2)).trimStart();d=d.slice(0,d.search(/[\s=|!<>,.[]|-?[%}]}/));return d.startsWith("end")?false:Ce.liquid.tags.has(d)}f=e.indexOf("{",f+1)}while(f>-1);return false}function dt(e){let i=e;if(Array.isArray(e))i=e.join(c);const d=i.indexOf("{");if(n(i[d+1],37)){if(n(i[d+2],45))return i.slice(d+3).trimStart().startsWith("end");return i.slice(d+2).trimStart().startsWith("end")}return false}function ht(e,i){if(i===1){return n(e[0],123)&&(n(e[1],37)||n(e[1],123))}else if(i===6){return n(e[0],123)&&n(e[1],37)}else if(i===7){return n(e[0],123)&&n(e[1],123)}else if(i===8){return n(e[e.length-2],37)&&n(e[e.length-1],125)}else if(i===9){return n(e[e.length-2],125)&&n(e[e.length-1],125)}else if(i===4){return/{[{%]/.test(e)}else if(i===5){return/{[{%]/.test(e)&&/[%}]}/.test(e)}else if(i===2){const d=e.length;return n(e[d-1],125)&&(n(e[d-2],37)||n(e[d-2],125))}else if(i===3){const d=e.length;return n(e[0],123)&&(n(e[1],37)||n(e[1],123))&&(n(e[d-1],125)&&(n(e[d-2],37)||n(e[d-2],125)))}}function gt(e,i,d){if(i==="html"){if(!(e in Ce.html.embed))return false;const f=Ce.html.embed[e];if(f.attr.size>0){for(const v of f.attr.values()){if(!d)return v;if(v.attr.has(d[0])&&v.attr.get(d[0]).value.has(d[1])){return v.attr.get(d[0])}}}return f.attr.has(d[0])?f.attr.get(d[0]).attr.has(d[1])?f.attr.get(d[0]).attr.get(d[1]):f.attr.get(d[0]):f}else if(i==="liquid"){if(!(e in Ce.liquid.embed))return false;const f=Ce.liquid.embed[e];if(f.args.size>0&&d){const v=d.slice(d.indexOf(e)+e.length).match(/\s*(.*)(?=\s)/)[0];for(const[l,h]of f.args){if(l.has(v)){return h}else{for(const r of l){if(r instanceof RegExp&&r.test(v))return h}}}}return f}}function Kt(e,i){if(typeof i!=="undefined")return e in Ce[i].embed;return e in Ce.html.embed||e in Ce.liquid.embed}function At(e){const{data:i,rules:d}=s;const f=e||s.source;const v=s.language==="jsx"||s.language==="tsx";const l=new Set(d.liquid.ignoreTagList);const h=d.markup.attributeSortList.length;const r=Pe(f)?f:f.split(c);const b=r.length;const B={start:-1,tname:[],index:[]};let t=0;let u;let T=false;let ee=At?s.language:"html";let o=0;function L(q,O=c,M){if(O===c&&M===void 0){s.push(i,q,c)}else if(typeof O==="object"&&!O.length){Je(q,O);s.push(i,q,c)}else if(Pe(O)){for(const ie of O){Je(q,ie);s.push(i,q,c)}}else if(M){Je(q,M);s.push(i,q,O)}else{console.log("isssue")}}function N(q){if(s.language!=="html"&&s.language!=="liquid"&&v===false)return q;if(/(?:{[=#/]|%[>\]])|\}%[>\]]/.test(q))return q;if(!ht(q,3))return q;if(d.liquid.delimiterTrims==="force"){if(n(q[1],37)){if(E(q[2],45))q=q.replace(/^{%/,"{%-");if(E(q[q.length-3],45))q=q.replace(/%}$/,"-%}")}else{if(E(q[2],45))q=q.replace(/^{{/,"{{-");if(E(q[q.length-3],45))q=q.replace(/}}$/,"-}}")}}else if(d.liquid.delimiterTrims==="strip"){q=q.replace(/^{%-/,"{%").replace(/-%}$/,"%}").replace(/^{{-/,"{{").replace(/-}}$/,"}}")}else if(d.liquid.delimiterTrims==="tags"&&n(q[1],37)){if(E(q[2],45))q=q.replace(/^{%/,"{%-");if(E(q[q.length-3],45))q=q.replace(/%}$/,"-%}")}else if(d.liquid.delimiterTrims==="outputs"&&n(q[1],123)){if(E(q[2],45))q=q.replace(/^{{/,"{{-");if(E(q[q.length-3],45))q=q.replace(/}}$/,"-}}")}if(d.liquid.normalizeSpacing===false)return q;if(Ut.test(q)||Vt.test(q))return q;let O;let M=0;return q.split(/(["']{1})/).map(((ie,P,A)=>{const _=n(ie[0],34)||n(ie[0],39);if(M>0||_&&M===0&&E(A[P-1],92)||_){if(M===0)O=ie.charCodeAt(0);if(M===1&&E(A[P-1],92)){if(O===ie.charCodeAt(0))M=2;return ie}if(M!==2){M=M===0?1:M===1?n(A[P-1],92)?1:2:0;return ie}M=0}return ie.replace(rt,re).replace(/^({[{%]-?)/,"$1 ").replace(/([!=]=|[<>]=?)/g," $1 ").replace(new RegExp(" +(?=[|[\\],:.])|(?<=[[.]) +","g"),c).replace(new RegExp("(\\||(?<=[^=!<>])(?:(?<=assign[^=]+)=(?=[^=!<>])|=$))","g")," $1 ").replace(/([:,]$|[:,](?=\S))/g,"$1 ").replace(/(-?[%}]})$/," $1").replace(rt,re)})).join(c)}function ue(q,O=c){if(q<1)return O;let M=c;const ie=r.lastIndexOf(he,q);if(ie>-1){M=f.slice(ie+1,q);if(M.length>0&&M.trim().length<1)return O?M+O:M}return O}function se(q,O=r){let M=q;let ie=1;while(n(O[M++],10))ie=ie+1;return ie}function a(q,O=-1,M=false){if(!M)return f.slice(q,O).trimStart();return f.slice(q,O)}function y(q){let O=q;do{O=O-1}while(n(r[O],92));O=q-O;return O%2===1}function Q(q){if(d.markup.correct===false||n(q[q.length-2],47))return q;return/\/\s+>$/.test(q)?`${q.slice(0,q.lastIndexOf("/"))}${d.markup.selfCloseSpace?"/>":" />"}`:`${q.slice(0,-1)}${d.markup.selfCloseSpace?"/>":" />"}`}function Y(q,O=true){const M=q.indexOf("=");if(M>0){const ie=q.indexOf(ve);if(M<ie&&ie>0){return O?[q.slice(0,M),q.slice(M+1)]:[q.slice(0,M),q.slice(M+2,-1)]}const P=q.indexOf(Ae);if(M<P&&P>0){return O?[q.slice(0,M),q.slice(M+1)]:[q.slice(0,M),q.slice(M+2,-1)]}}return[q,c]}function H(q){console.log(q)}function j(q){const O={lexer:"markup",lines:s.lineOffset,stack:s.stack.token!=="global"?s.stack.token:"global",begin:s.stack.index,token:c,types:c,ender:-1};let M=c;let ie=c;let P=c;let A=c;let _=c;let G=false;let ne=false;let X=0;let oe=false;let fe=false;let ye=false;let ge=false;let C=[];function V(){if(P!=="cdata")return xe();return xe()}function m(){if(O.types.indexOf("liquid")===-1)return V();if(n(M[0],123)&&n(M[1],37)){if(Ce.liquid.else.has(A)){O.types="liquid_else"}else if(Ce.liquid.tags.has(A)){O.types="liquid_start"}else if(A.startsWith("end")){const D=A.slice(3);if(Ce.liquid.tags.has(D)){O.types="liquid_end"}else{O.stack=D;O.types="liquid_end";let I=0;do{if(i.types[I]==="liquid"&&i.stack[I]===D){i.types[I]="liquid_start";break}I=i.stack.indexOf(D,I+1)}while(I>-1)}}else{O.stack=A}}if(d.liquid.quoteConvert==="double"){O.token=O.token.replace(/'/g,ve)}else if(d.liquid.quoteConvert==="single"){O.token=O.token.replace(/"/g,Ae)}return V()}function g(){if(A==="svg")B.start=s.count+1;if(Ce.svg.tags.has(A)&&B.start>0){if(O.types==="start"){O.types="singleton";B.tname.push(A);B.index.push(s.count+1)}else if(O.types==="end"){const D=B.tname.indexOf(A);const I=B.tname.lastIndexOf(A);if(D>-1){if(I===D){i.types[B.index[I]]="start";B.tname.splice(I,1);B.index.splice(I,1)}else{if(i.begin[s.count]===B.index[D]){i.types[i.begin[s.count]]="start";B.tname.splice(D,1);B.index.splice(D,1)}else{i.types[B.index[I]]="start"}}}if(A==="svg")B.start=-1}}return m()}function w(){if(ge&&ne===false&&P!=="xml"){if(Ce.html.voids.has(A)){O.types=P="singleton";if(E(M[M.length-2],47)){O.token=Q(M)}}else if(n(M[M.length-2],47)&&n(M[M.length-1],62)){O.types=P="singleton"}else{O.types=P="start"}}return g()}function x(){if(s.count<1)return w();let D=c;if(Gt.test(i.token[s.count])){if(Ce.html.voids.has(A)){O.token=M.replace(">",C.map((([I])=>I)).join(re)+">");O.types="ignore";return L(O)}if(P.indexOf("liquid")>-1&&Ce.liquid.tags.has(A)){D=`end${A}`}ne=true;ye=false}else if(Kt(A,"liquid")&&l.has(A)){D=null}if(D!==null&&ye===false&&ne===true&&(q===">"||q==="}}"||q==="%}")){const I=[];{ye=true;t=t+1;if(t<b){if(P!=="json_preserve"&&P!=="script_preserve"&&P!=="style_preserve"&&P!=="liquid_json_preserve"&&P!=="liquid_script_preserve"&&P!=="liquid_style_preserve"){P="ignore"}let U=c;let ke=0;let ae=-1;let me=c;let le=0;let K=0;let be=false;do{if(n(r[t],10))s.lines(t);I.push(r[t]);if(U===c){U=n(r[t],34)?ve:n(r[t],39)?Ae:c;if(n(r[t],123)&&(n(r[t+1],123)||n(r[t+1],37))){ae=n(r[t+1],37)?r.indexOf("}",t)+1:r.indexOf("}",t)+2;me=a(n(r[t+2],45)?t+3:t+2,ae);if(me.startsWith(A)){ke=ke+1}else if(me.startsWith(D)){if(ke>0){ke=ke-1}else{if(n(r[t+1],123))ae=ae+1;if(n(r[ae-2],37)){I.push(...r.slice(t+1,ae));P="liquid_ignore";t=ae-1;break}}}}else if(n(r[t],60)&&ge===true){be=n(r[t+1],47)}else if(r[t]===ie&&E(r[t-1],47)){if(be===true){X=X-1;if(X<0)break}else{X=X+1}}}else if(n(r[t],U.charCodeAt(U.length-1))){K=0;le=U.length-1;if(n(U[le],125)){if(a(t+(n(r[t+2],45)?3:2),r.indexOf("%",t+2)).startsWith(D))break}else if(le>-1){do{if(E(r[t-K],U.charCodeAt(le)))break;K=K+1;le=le-1}while(le>-1)}if(le<0)U=c}t=t+1}while(t<b)}}if(P==="ignore"){if(!s.is("types","ignore"))i.types[s.count]="ignore";const U=s.iterator+r.slice(s.iterator,t).join(c).search(it);let ke=ue(U);if(ke===c){const ae=i.token[s.count].search(it);ke=ae>0?We(i.token[s.count].search(it)):c}C=[];M=ke+r.slice(U,t-I.length+1).join(c)+I.join(c);O.types="ignore";O.token=M}else if(P==="liquid_ignore"){if(!s.is("types","ignore"))i.types[s.count]="ignore";M=ue(t-M.length-I.length+1,M)+I.join(c);P="ignore";O.types="ignore";O.token=M}else{if(P.startsWith("liquid_"));else{O.types="start";xe(true);const U=I.lastIndexOf("<");const ke=I.slice(0,U).join(c);if(!it.test(ke)){L(O,[{lexer:"markup",types:"end",token:I.slice(U).join(c).trim()}])}else{L(O,[{lexer:"markup",types:P,token:ke},{lexer:"markup",types:"end",token:I.slice(U).join(c).trim()}])}T=false;u=ee;return we()}}}return w()}function R(){if(n(M,60)&&n(M[1],47))return x();let D=C.length-1;if(n(M,60)){if(D>-1){do{const I=gt(A,"html",Y(C[D][0],false));if(I!==false){if(I.language==="json"&&d.markup.ignoreJSON){P="json_preserve";ne=true;break}else if(I.language==="javascript"&&d.markup.ignoreJS){P="script_preserve";ne=true;break}else if(I.language==="css"&&d.markup.ignoreCSS){P="style_preserve";ne=true;break}else{u=I.language;P="start";T=true;ne=false;break}}D=D-1}while(D>-1)}else{const I=gt(A,"html");if(I!==false){if(I.language==="json"&&d.markup.ignoreJSON){P="json_preserve";ne=true}else if(I.language==="javascript"&&d.markup.ignoreJS){P="script_preserve";ne=true}else if(I.language==="css"&&d.markup.ignoreCSS){P="style_preserve";ne=true}else{u=I.language;P="start";T=true;ne=false}}}}else if(Ke(M,true)){const I=gt(A,"liquid",M);if(I!==false){if(l.has(A)){ne=true;ye=false;return x()}T=true;u=I.language}}return x()}function xe(D=false){L(O);const I=s.count;const U=A.replace(/\/$/,c);const ke=d.markup.quoteConvert;let ae=0;let me=0;let le=0;let be=c;let Oe=c;let Re=C.length;function De(){if(s.attributes.has(I)){if(ae+1===Re&&bt(O.token,62)){O.token=O.token+">"}}let Ne=O.types.indexOf("liquid_attribute")>-1;if(ne===true||ke==="none"||O.types.indexOf("attribute")<0||Ne===false&&ke==="single"&&O.token.indexOf(ve)<0||Ne===false&&ke==="double"&&O.token.indexOf(Ae)<0){L(O)}else{let Be=0;let He=false;const Le=O.token.split(c);const _e=O.token.indexOf("=");const mt=Le.length-1;if(E(Le[_e+1],34)&&E(Le[Le.length-1],34)&&ke==="single"&&Ne===false){L(O)}else if(E(Le[_e+1],39)&&E(Le[Le.length-1],39)&&ke==="double"&&Ne===false){L(O)}else{Be=_e+2;if(Ne===false){if(ke==="double"){if(O.token.slice(_e+2,mt).indexOf(ve)>-1)He=true;Le[_e+1]=ve;Le[Le.length-1]=ve}else if(ke==="single"){if(O.token.slice(_e+2,mt).indexOf(Ae)>-1)He=true;Le[_e+1]=Ae;Le[Le.length-1]=Ae}}if(He===true||Ne===true){Ne=false;do{if(n(Le[Be-1],123)&&(n(Le[Be],37)||n(Le[Be],123))){Ne=true}else if(n(Le[Be],125)&&(n(Le[Be-1],37)||n(Le[Be-1],125))){Ne=false}if(Ne===true){if(n(Le[Be],34)&&ke==="double"){Le[Be]=Ae}else if(n(Le[Be],39)&&ke==="single"){Le[Be]=ve}}else{if(n(Le[Be],39)&&ke==="double"){Le[Be]=ve}else if(n(Le[Be],34)&&ke==="single"){Le[Be]=Ae}}Be=Be+1}while(Be<mt)}L(O,{token:Le.join(c)})}}}function Fe(){if(!(!v&&!oe&&!fe))return;if(h===0){C=St(C,c,false);return}const Ne=[];le=0;me=0;Re=C.length;do{me=0;do{be=C[me][0].split("=")[0];if(d.markup.attributeSortList[le]===be){Ne.push(C[me]);C.splice(me,1);Re=Re-1;break}me=me+1}while(me<Re);le=le+1}while(le<h);C=St(C,c,false);C=Ne.concat(C);Re=C.length}function et(){L(O,"jsx_attribute",{token:`${be}={`,types:"jsx_attribute_start"});s.external("jsx",Oe.slice(1,Oe.length-1));O.begin=s.count;if(/\s\}$/.test(Oe)){Oe=Oe.slice(0,Oe.length-1);Oe=Te.exec(Oe)[0];O.lines=Oe.indexOf("\n")<0?1:Oe.split("\n").length}else{O.lines=0}O.begin=s.stack.index;O.stack=s.stack.token;O.token="}";O.types="jsx_attribute_end";De()}function Se(){if(vt(C[ae][0])){O.types="liquid_attribute_chain";O.token=C[ae][0]}else if(dt(C[ae][0])){O.token=C[ae][0];O.types="liquid_attribute_end";O.ender=O.begin}else if(Ke(C[ae][0],true)){O.types="liquid_attribute_start";O.begin=s.count;O.token=C[ae][0];De();return true}else if(Rt(C[ae][0])){O.types="liquid_attribute_else";O.token=C[ae][0]}else{O.types="attribute";O.token=C[ae][0]}De();return false}if(C.length<1){if(D!==true)return;return we()}if(n(C[C.length-1][0],47)){C.pop();M=M.replace(/>$/,"/>")}me=C.length;le=1;if(le<me){do{be=C[le-1][0];if(n(be[be.length-1],61)&&C[le][0].indexOf("=")<0){C[le-1][0]=be+C[le][0];C.splice(le,1);me=me-1;le=le-1}le=le+1}while(le<me)}if(d.markup.attributeSort)Fe();O.begin=I;O.stack=U;O.types="attribute";if(ae<Re){do{if(C[ae]===void 0)break;O.lines=C[ae][1];C[ae][0]=C[ae][0].replace(Te,c);if(v===true&&/^\/[/*]/.test(C[ae][0])){O.types="comment_attribute";O.token=C[ae][0];De();ae=ae+1;continue}if(C[ae][1]<=1&&vt(C[ae][0])){if(!Yt(C[ae][0])){O.types="liquid_attribute_chain";O.token=C[ae][0];De();ae=ae+1;continue}}me=C[ae][0].indexOf("=");le=C[ae][0].indexOf(ve);C[ae][0].indexOf(Ae);if(me<0){if(dt(C[ae][0])){O.token=C[ae][0];O.types="liquid_attribute_end";O.ender=O.begin}else if(Ke(C[ae][0],true)){O.types="liquid_attribute_start";O.begin=s.count;O.token=C[ae][0]}else if(Rt(C[ae][0])){O.types="liquid_attribute_else";O.token=C[ae][0]}else if(Xt(C[ae][0])){O.types="liquid_attribute";O.token=C[ae][0]}else if(n(C[ae][0],35)||n(C[ae][0],91)||n(C[ae][0],123)||n(C[ae][0],40)||v===true){O.token=C[ae][0]}else{O.types="liquid_attribute";O.token=d.markup.attributeCasing==="preserve"?C[ae][0]:C[ae][0].toLowerCase()}De()}else if(ht(C[ae][0],6)){Se()}else{be=C[ae][0].slice(0,me);Oe=C[ae][0].slice(me+1);if(d.markup.attributeCasing==="lowercase-name"){be=be.toLowerCase();C[ae][0]=be+"="+Oe}else if(d.markup.attributeCasing==="lowercase-value"){Oe=Oe.toLowerCase();C[ae][0]=be+"="+Oe}else if(d.markup.attributeCasing==="lowercase"){be=be.toLowerCase();Oe=Oe.toLowerCase();C[ae][0]=be+"="+Oe}if(d.markup.correct===true&&E(Oe,60)&&E(Oe,123)&&E(Oe,61)&&E(Oe,34)&&E(Oe,39)){Oe=ve+Oe+ve}if(v===true&&/^\s*{/.test(Oe)){et();O.types="attribute";O.begin=I;O.stack=U}else{if(ht(be,6)){Se()}else{O.types="attribute";O.token=C[ae][0];De()}}}ae=ae+1}while(ae<Re)}if(!D)return we()}function Z(D,I){D=D.trimStart().split(/\s/)[0];if(D==="comment"||l.has(D)){const U=f.indexOf("{%",I);let ke=U;if(r[U+1].charCodeAt(0)===45)ke=U+1;ke=f.indexOf(`end${D}`,ke);if(ke>0){ke=r.indexOf("}",ke);if(ke>0&&r[ke-1].charCodeAt(0)===37){if(D!=="comment"){P="ignore";ne=true;_=f.slice(t,I+1);q=f.slice(U,ke+1)}else{P="comment";_=f.slice(t,I+1);q=f.slice(U,ke+1)}}}}}function pe(D){s.iterator=t;const I=Ye({chars:r,end:b,lexer:"markup",begin:_,start:t,ender:q});M=I[0];t=I[1];if(Ht.test(M)){if(Xe.test(M)){let U;if(M.startsWith("\x3c!--")){U=M.indexOf("--\x3e")+3}else if(Zt.test(M)){U=M.indexOf("%}")+2}else{U=M.indexOf("%}",M.indexOf("%}")+2)+2}L(O,[{token:ue(s.iterator,M.slice(0,U)),types:"ignore"},{token:M.slice(U).replace(wt,c),types:"ignore",lines:se(U,M)}])}else{L(O,{token:ue(s.iterator,M),types:"ignore"});s.iterator=t+1}}else{if(n(M[0],123)&&n(M[1],37)&&D===false){const U=M.indexOf("%}",2)+2;const ke=M.lastIndexOf("{%");M=N(M.slice(0,U))+M.slice(U,ke)+N(M.slice(ke))}O.token=M;O.types="comment";return R()}}function ce(D){const I=t;let U=t+D;do{if(n(r[U],62)){t=U;return f.slice(I,U+1)}U=U+1}while(U<b)}function te(){if(q==="---"){_="---";P="ignore";ye=true}else if(n(r[t],60)){if(n(r[t+1],123)&&(n(r[t+2],123)||n(r[t+2],37))){const D=ce(3);G=true;s.stack.push(["liquid_bad",s.count]);L(O,{token:D,types:"liquid_start_bad"});return}else if(n(r[t+1],47)){if(n(r[t+2],123)&&(n(r[t+3],123)||n(r[t+3],37))){const D=ce(3);L(O,{token:D,types:"liquid_end_bad"});return}else{P="end";q=">"}}else if(n(r[t+1],33)){if((n(r[t+2],100)||n(r[t+2],68))&&(n(r[t+3],111)||n(r[t+3],79))&&(n(r[t+4],99)||n(r[t+4],67))&&(n(r[t+5],116)||n(r[t+5],84))&&(n(r[t+6],121)||n(r[t+6],89))&&(n(r[t+7],112)||n(r[t+7],80))&&(n(r[t+8],101)||n(r[t+8],69))){q=">";P="doctype";ye=true}else if(n(r[t+2],45)&&n(r[t+3],45)){q="--\x3e";_="\x3c!--";P="comment"}else if(n(r[t+2],91)&&r[t+3].charCodeAt(0)===67&&r[t+4].charCodeAt(0)===68&&r[t+5].charCodeAt(0)===65&&r[t+6].charCodeAt(0)===84&&r[t+7].charCodeAt(0)===65&&n(r[t+8],91)){q="]]>";P="cdata";ye=true}}else if(n(r[t+1],63)){q="?>";if(r[t+2].charCodeAt(0)===120&&r[t+3].charCodeAt(0)===109&&r[t+4].charCodeAt(0)===109){P="xml";ge=true}else{ye=true;P="liquid"}}else if(n(r[t+1],112)&&n(r[t+2],114)&&n(r[t+3],101)&&(n(r[t+4],62)||de(r[t+4]))){q="</pre>";P="ignore";ye=true}else{ge=true;q=">"}}else if(n(r[t],123)){if(v){T=true;G=true;s.stack.push(["script",s.count]);L(O,{token:"{",types:"script_start"});return}if(n(r[t+1],123)){ye=true;q="}}";P="liquid"}else if(n(r[t+1],37)){ye=true;q="%}";P="liquid";const D=r.indexOf("}",t+2);if(n(r[D-1],37)){let I=f.slice(t+2,D-1);if(n(I,45)){_="{%-";I=I.slice(1).trimStart()}else{_="{%";I=I.trimStart()}if(n(I[I.length-1],45)){q="-%}";I=I.slice(0,I.length-1).trimEnd()}else{q="%}";I=I.trimEnd()}Z(I,D);if(n(I,35)){P="comment";q="%}";ie=q.charAt(q.length-1);return pe(true)}}else{ye=true;q="%}";P="liquid"}}else{ye=true;q=r[t+1]+"}";P="liquid"}}if(ye!==true&&d.markup.preserveAttributes===true){ye=true}if(G)return R();ie=q.charAt(q.length-1);if(P==="comment"&&(n(r[t],60)||n(r[t],123)&&n(r[t+1],37))){return pe()}else if(t<b){return qe()}return R()}function we(){if(d.wrap>0&&v===true){let D=0;let I=s.count;let U=0;if(i.types[I].indexOf("attribute")>-1){do{D=D+i.token[I].length+1;I=I-1}while(i.lexer[I]!=="markup"||i.types[I].indexOf("attribute")>-1);if(i.lines[I]===1)D=D+i.token[I].length+1}else if(i.lines[I]===1){D=i.token[I].length+1}U=I-1;if(D>0&&i.types[U]!=="script_end"){if(i.types[U].indexOf("attribute")>-1){do{D=D+i.token[U].length+1;U=U-1}while(i.lexer[U]!=="markup"||i.types[U].indexOf("attribute")>-1);if(i.lines[U]===1)D=D+i.token[U].length+1}else if(i.lines[U]===1){D=i.token[U].length+1}}}s.lineOffset=0}function qe(){const D=[];let I=0;let U=0;let ke=0;let ae=0;let me=0;let le=0;let K=c;let be=c;let Oe=0;let Re=false;let De=false;let Fe=false;let et=false;let Se=[];function Ne(Be){let He;let Le=c;if(Be===true){Le=Se.join(c);He=Y(Le);K=c;if(He[0]==="data-esthetic-ignore")ne=true}else{Le=Se.join(c);if(v===false||v&&bt(Le,125))Le=Le.replace(Ve,re);He=Y(Le);if(He[0]==="data-esthetic-ignore")ne=true;if(v&&n(Se[0],123)&&n(Se[Se.length-1],125))Oe=0}if(n(Le[0],123)&&n(Le[1],37))fe=true;Le=Le.replace(/^\u0020/,c).replace(/\u0020$/,c);Se=Le.replace(/\r\n/g,he).split(he);if(Se.length<1)Se[0]=Se[0].replace(Te,c);Le=N(Se.join(s.crlf));if(d.markup.stripAttributeLines===true&&le>=1){le=1}if(C.length>0){const _e=C.length-1;if(o===0&&(n(Le,61)||n(Le,45))){C[_e][0]=C[_e][0]+Le;C[_e][1]=le;Le=c}}if(Be===false){if(Ke(Le))o=o+1;if(dt(Le))o=o-1}if(Le!==c&&Le!==re)C.push([Le,le]);if(C.length>0){const[_e]=C[C.length-1];if(_e.indexOf("=â€œ")>0){s.error=H("Invalid quote character (â€œ, &#x201c) used.")}else if(_e.indexOf("=â€")>0){s.error=H("Invalid quote character (â€, &#x201d) used.")}}Se=[];le=n(r[t],10)?2:1}if(s.error)return;do{if(n(r[t],10))le=s.lines(t,le);if(_==="---"&&q==="---"&&P==="ignore"){D.push(r[t]);if(t>3&&n(r[t],45)&&n(r[t-1],45)&&n(r[t-2],45))break;t=t+1;continue}if(ye===true||(de(r[t])===false&&E(K,125)||n(K,125))){D.push(r[t]);if(Re===false&&n(r[t-1],123)&&(n(r[t],123)||n(r[t],37))){Re=true}else if(Re===true&&n(r[t],125)&&(n(r[t-1],125)||n(r[t-1],37))){Re=false}if(P==="end"&&D.length>2&&n(D[0],60)&&n(D[1],47)&&(n(D[D.length-1],47)||n(D[D.length-1],60))){if(d.markup.correct){D.pop();D.push(">")}else{s.error=H({lineNumber:s.lineNumber,message:[`Missing closing delimiter character: ${D.join(c)}`,"\nTIP","esthetic can autofix these issues when the correct rule is enabled"]});return}break}if(n(D[0],60)&&n(D[1],62)&&n(q,62)){return L(O,"(empty)",{token:"<>",types:"start"})}if(n(D[0],60)&&n(D[1],47)&&n(D[2],62)&&n(q,62)){return L(O,{token:"</>",types:"end"})}}if(P==="cdata"&&n(r[t],62)&&n(r[t-1],93)&&E(r[t-2],93)){s.error=H(`CDATA tag (${D.join(c)}) not properly terminated with "]]>`);break}if(P==="comment"){K=c;if(r[t]===ie&&D.length>q.length+1){U=D.length;I=q.length-1;if(I>-1){do{U=U-1;if(E(D[U],q.charCodeAt(I)))break;I=I-1}while(I>-1)}if(I<0)break}}else{if(K===c){if(n(D[0],60)&&n(D[1],33)&&P!=="cdata"){if(P==="doctype"&&n(r[t],62))break;if(n(r[t],91)){if(n(r[t+1],60)){P="start";break}if(de(r[t+1])){do{t=t+1;if(n(r[t],10))le=s.lines(t,le)}while(t<b-1&&de(r[t+1]))}if(n(r[t+1],60)){P="start";break}}}if(v){if(n(r[t],123)){Oe=Oe+1}else if(n(r[t],125)){Oe=Oe-1}}if(n(r[t],60)&&ge===true&&ye===false&&D.length>1&&/>{2,3}/.test(q)===false){s.error=H(`Invalid structure detected ${r.slice(t,t+8).join(c)}`);break}if(de(r[t])===false&&De===true&&r[t]!==ie){X=0;De=false;K=be;D.pop();if(t<b){do{if(n(r[t],10)&&Fe===false){le=s.lines(t,le)}if(d.markup.preserveAttributes===true){D.push(r[t])}else{Se.push(r[t])}if(E(K,34)||E(K,39)){if(n(r[t-1],123)&&(n(r[t],37)||n(r[t],123))){Re=true}else if(n(r[t],125)&&(n(r[t-1],125)||n(r[t-1],37))){Re=false}}if(v===false&&Fe===false&&Re===true&&d.markup.preserveAttributes===false){while(t<b){t=t+1;if(n(r[t],10))le=s.lines(t,le);if(n(Se[0],61)&&(n(Se[1],123)||n(Se[1],37))&&(n(Se[Se.length-2],125)||n(Se[Se.length-2],37))&&n(Se[Se.length-1],125)){Re=false;K=c;Ne(false);break}if(n(Se[0],61)&&E(Se[1],123)){Re=false;K=c;Ne(false);break}Se.push(r[t]);if(n(Se[0],61)&&n(r[t+1],62)){Re=false;C[C.length-1][0]+=Se.join(c);Se=[];K=c;break}if(E(Se[0],61)&&n(r[t],125)&&(n(r[t-1],125)||n(r[t-1],37))){Re=false;K=c;Ne(false);break}}}if(v===false&&(n(r[t],60)||n(r[t],62))&&(K===c||n(K,62))){if(K===c&&n(r[t],60)){K=">";ke=1}else if(n(K,62)){if(n(r[t],60)){ke=ke+1}else if(n(r[t],62)){ke=ke-1;if(ke===0){K=c;X=0;Ne(false);break}}}}else if(K===c){if(r[t+1]===ie){if(Qe(Se,47)||Qe(Se,63)&&P==="xml"){Se.pop();ye===false||D.pop();t=t-1}if(Se.length>0)Ne(false);break}if(v===false&&n(r[t],123)&&n(r[t-1],61)){K="}"}else if(n(r[t],34)||n(r[t],39)){K=r[t];if(Fe===false&&Re===false)Fe=true;if(n(r[t-1],61)&&(n(r[t+1],60)||n(r[t+1],123)&&n(r[t+2],37)||de(r[t+1])&&E(r[t-1],61))){X=t}}else if(n(r[t],40)){K=")";me=1}else if(v){if((n(r[t-1],61)||de(r[t-1]))&&n(r[t],123)){K="}";ae=1}else if(n(r[t],47)){if(n(r[t+1],42)){K="*/"}else if(n(r[t+1],47)){K=he}}}else if(n(D[0],123)&&n(r[t],123)&&(n(r[t+1],123)||n(r[t+1],37))){K=n(r[t+1],123)?"}}":r[t+1]+"}"}if(de(r[t])&&K===c){if(n(Se[Se.length-2],61)){I=t+1;if(I<b){do{if(de(r[I])===false){if(n(r[I],34)||n(r[I],39)){t=I-1;et=true;Se.pop()}break}I=I+1}while(I<b)}}if(et===true){et=false}else if(Oe===0||Oe===1&&n(Se[0],123)){Se.pop();if(Se.length>0)Ne(false);De=true;break}}}else if(n(r[t],40)&&n(K,41)){me=me+1}else if(n(r[t],41)&&n(K,41)){me=me-1;if(me===0){K=c;if(n(r[t+1],q.charCodeAt(0))){Ne(false);break}}}else if(v===true&&(n(K,125)||n(K,10)&&n(r[t],10)||n(K,42)&&n(r[t-1],42)&&n(r[t],47))){if(n(r[t],96)){t=t+1;do{Se.push(r[t]);if(n(r[t],96))break;t=t+1}while(t<r.length)}if(n(K,125)){if(n(r[t],125)&&r[t]!==K){ae=ae+1}else if(r[t]===K){ae=ae-1;if(ae===0){Oe=0;K=c;M=Se.join(c);if(d.markup.preserveAttributes===false){if(v){if(!/^\s*$/.test(M))C.push([M,le])}else{M=M.replace(Ve,re);if(M!==re)C.push([M,le])}}Se=[];le=1;break}}}else{be=c;oe=true;M=Se.join(c);if(M!==re)C.push([M,le]);Se=[];le=n(K,10)?2:1;K=c;break}}else if(n(r[X-1],61)&&n(r[t],123)&&n(r[t+1],37)&&(n(K,34)||n(K,39))){K=K+"{%";X=0}else if(n(r[t-1],37)&&n(r[t],125)&&(K==='"{%'||K==="'{%")){K=K[0];X=0}else if(n(r[t],60)&&n(q,62)&&n(r[X-1],61)&&(n(K,34)||n(K,39))){K=K+"<";X=0}else if(n(r[t],62)&&(K==='"<'||K==="'<")){K=K.charAt(0);X=0}else if(X===0&&E(K,62)&&(K.length<2||E(K,34)&&E(K,39))){U=0;I=K.length-1;if(I>-1){do{if(E(r[t-U],K.charCodeAt(I)))break;U=U+1;I=I-1}while(I>-1)}if(I<0&&Re===false&&Fe===true){Fe=false;Ne(true);if(r[t+1]===ie)break}if(I===0&&n(r[t],62)&&Fe===true&&Re===false);}else if(X>0&&de(r[t])===false){X=0}t=t+1}while(t<b)}}else if(n(q,10)===false&&(n(r[t],34)||n(r[t],39))){K=r[t]}else if(P!=="comment"&&E(q,10)&&n(r[t],60)&&n(r[t+1],33)&&n(r[t+2],45)&&n(r[t+3],45)&&i.types[s.count]!=="conditional"){K="--\x3e"}else if(n(r[t],123)&&E(D[0],123)&&E(q,10)&&(n(r[t+1],123)||n(r[t+1],37))){if(n(r[t+1],123)){K="}}"}else{K=r[t+1]+"}";if(Se.length<1&&(C.length<1||de(r[t-1]))){D.pop();do{if(n(r[t],10))le=le+1;Se.push(r[t]);t=t+1}while(t<b&&r[t-1]+r[t]!==K);Se.push("}");C.push([Se.join(c),le]);Se=[];le=1;K=c}}if(K===q)K=c}else if(ge&&E(q,10)&&E(r[t-1],60)&&de(r[t])){De=true}else if(ge&&v&&n(r[t],47)&&(n(r[t+1],42)||n(r[t+1],47))){De=true;D[D.length-1]=re;be=n(r[t+1],42)?"*/":he;Se.push(r[t])}else if(Re===false&&(r[t]===ie||n(q,10)&&n(r[t+1],60))&&(D.length>q.length+1||n(D[0],93))&&(v===false||Oe===0)){if(n(q,10)){if(de(D[D.length-1])){do{D.pop();t=t-1}while(de(D[D.length-1]))}break}U=D.length;I=q.length-1;if(I>-1){do{U=U-1;if(D[U]!==q.charAt(I))break;I=I-1}while(I>-1)}if(I<0){if(n(D[U],62)&&n(r[t],62)&&n(r[t-1],125)&&de(r[t+1])&&C.length>0&&C[C.length-1][1]===0){C[C.length-1][1]=n(r[t+1],32)?1:2}break}}}else if(n(r[t],K.charCodeAt(K.length-1))&&(v===true&&n(q,125)&&(E(r[t-1],92)||y(t)===false)||(v===false||E(q,125)))){U=0;I=K.length-1;if(I>-1){do{if(E(r[t-U],K.charCodeAt(I)))break;U=U+1;I=I-1}while(I>-1)}if(I<0)K=c}}t=t+1}while(t<b);X=0;M=D.join(c);A=je(M);if(ne===false)M=N(M);if(A==="xml"){ee="xml"}else if(ee===c&&A==="html"){ee="html"}O.token=M;O.types=P;if(ye===false&&v===false){M=M.replace(Ve,re)}return R()}return te()}function z(){const q=t;const O=v===true&&n(i.token[s.count],123);const M="([{!=,;.?:&<>";let ie=[];let P=c;let A=s.lineOffset;let _=c;if(T===true){if(O===true){_="script"}else if(s.stack.index>-1){_=je(i.token[s.stack.index])}else{_=je(i.token[i.begin[s.count]])}}const J={begin:s.stack.index,ender:-1,lexer:"markup",lines:A,stack:je(s.stack.token)||"global",token:c,types:"content"};function G(){return i.types[s.count]==="liquid_start"&&i.token[s.count].indexOf("<!")===0&&i.token[s.count].indexOf("<![")<0&&i.token[s.count].charCodeAt(i.token[s.count].length-1)===91}function ne(){let oe=t-1;let fe=0;if(E(r[t-1],92))return false;if(oe>-1){do{if(E(r[oe],92))break;fe=fe+1;oe=oe-1}while(oe>-1)}return fe%2===1}if(t<b){let oe=c;let fe=c;let ye=-1;let ge=c;let C=0;do{if(n(r[t],10))A=s.lines(t,A);if(T===true){if(fe===c){if(n(r[t],47)){if(n(r[t+1],42)){fe="*"}else if(n(r[t+1],47)){fe="/"}else if(!v&&_==="script"&&E(r[t-1],60)&&M.indexOf(r[t-1])>-1){fe="r"}}else if(ne()===false&&(n(r[t],34)||n(r[t],39)||n(r[t],96))){fe=r[t]}else if(n(r[t],123)&&O===true){C=C+1}else if(n(r[t],125)&&O===true){if(C===0){ge=ie.join(c).replace(Ze,c).replace(Te,c);s.external(u,ge);s.stack.update(s.stack.index+1);if(i.types[s.count]==="end"&&i.lexer[i.begin[s.count]-1]==="script"){L(J,{lexer:"script",types:"separator",token:d.markup.correct===true?";":"x;"});J.lexer="markup"}L(J,{token:"}",types:"script_end"});s.stack.pop();break}C=C-1}if(i.types[s.count]==="liquid_start"){ye=r.indexOf("%",t);if(n(r[ye-1],123)){oe=a(ye+2,r.indexOf("%",ye+(n(r[ye+1],45)?3:2)));if(oe.startsWith(`end${_}`)){ie=r.slice(t,ye-2);if(ie.length<1)break;ge=ie.join(c).replace(Ze,c).replace(Te,c);s.external(u,ge);t=t+ie.length;oe=r.slice(t,r.indexOf("}",t)+1).join(c).replace(Ze,c).replace(Te,c);t=t+oe.length;L(J,{types:"liquid_end",token:N(oe)});break}}}else{if(_==="script"){oe=r.slice(t+1,t+9).join(c).toLowerCase();if(oe==="</script"){ge=ie.join(c).trimEnd();if(ie.length<1)break;if(lt.test(ge)&&ot.test(ge)){L(J,{token:"\x3c!--",types:"comment"});ge=ge.replace(lt,c).replace(ot,c);s.external("javascript",ge);L(J,{token:"--\x3e"})}else{s.external(u,ge)}break}}else if(_==="style"){if(n(r[t+1],60)&&n(r[t+2],47)){oe=r.slice(t+1,t+8).join(c).toLowerCase();if(oe==="</style"){ge=ie.join(c).trimEnd();if(ie.length<1)break;if(lt.test(ge)&&ot.test(ge)){L(J,{token:"\x3c!--",types:"comment"});ge=ge.replace(lt,c).replace(ot,c);s.external("css",ge);L(J,{token:"--\x3e"})}else{s.external(u,ge)}break}}}}}else if(fe===r[t]&&ne()===false&&(n(fe,34)||n(fe,39)||n(fe,96)||n(fe,42)&&n(r[t+1],47))){fe=c}else if(n(fe,96)&&n(r[t],36)&&n(r[t+1],123)&&ne()===false){fe="}"}else if(n(fe,125)&&n(r[t],125)&&ne()===false){fe="`"}else if(n(fe,47)&&(n(r[t],10)||n(r[t],13))){fe=c}else if(fe==="r"&&n(r[t],47)&&ne()===false){fe=c}else if(n(fe,47)&&n(r[t],62)&&n(r[t-1],45)&&n(r[t-2],45)){oe=f.slice(t+1,t+11).toLowerCase();oe=oe.slice(0,oe.length-2);if(_==="script"&&oe==="</script")fe=c;oe=oe.slice(0,oe.length-1);if(_==="style"&&oe==="</style")fe=c}}if(G()===true&&n(r[t],93)){t=t-1;A=0;P=ie.join(c).replace(Te,c);L(J,{token:P});break}if(T===false&&ie.length>0&&(n(r[t],60)&&E(r[t+1],61)&&Ee(r[t+1])===false&&de(r[t+1])===false||n(r[t],91)&&n(r[t+1],37)||n(r[t],123)&&(v===true||n(r[t+1],123)||n(r[t+1],37)))){t=t-1;A=0;P=s.stack.token==="comment"?ie.join(c):ie.join(c).replace(Te,c);J.token=P;if(d.wrap>0&&d.markup.preserveText===false){let m=function(){if(n(P[W],32)){V.push(P.slice(0,W));P=P.slice(W+1);k=P.length;W=d.wrap;return}do{W=W-1}while(W>0&&E(P[W],32));if(W>0){V.push(P.slice(0,W));P=P.slice(W+1);k=P.length;W=d.wrap}else{W=d.wrap;do{W=W+1}while(W<k&&E(P[W],32));V.push(P.slice(0,W));P=P.slice(W+1);k=P.length;W=d.wrap}};let W=d.wrap;let k=P.length;const V=[];if(i.token[i.begin[s.count]]==="<a>"&&i.token[i.begin[i.begin[s.count]]]==="<li>"&&i.lines[i.begin[s.count]]===0&&s.lineOffset===0&&P.length<d.wrap){L(J);break}if(k<d.wrap){L(J);break}if(s.lineOffset<1&&s.count>-1){let g=s.count;do{W=W-i.token[g].length;if(i.types[g].indexOf("attribute")>-1)W=W-1;if(i.lines[g]>0&&i.types[g].indexOf("attribute")<0)break;g=g-1}while(g>0&&W>0);if(W<1)W=P.indexOf(re)}P=ie.join(c).replace(Ze,c).replace(Te,c).replace(Ve,re);do{m()}while(W<k);if(P!==c&&E(P,32))V.push(P);P=V.join(s.crlf);P=c+P+c}else{const W=P.indexOf(he);if(W>-1){L(J,{token:P.slice(0,W)});P=P.slice(W);if(wt.test(P)){J.lines=1}else{J.lines=2;P=P.replace(Ze,c)}}}A=0;L(J,{token:P});break}ie.push(r[t]);t=t+1}while(t<b)}if(t>q&&t<b){if(de(r[t])){let oe=t;s.lineOffset=s.lineOffset+1;do{if(n(r[oe],10)){s.lineNumber=s.lineNumber+1;s.lineOffset=s.lineOffset+1}oe=oe-1}while(oe>q&&de(r[oe]))}else{s.lineOffset=0}}else if(t!==q||t===q&&T===false){P=ie.join(c).replace(Te,c);A=0;if(J.token!==P){L(J,{token:P});s.lineOffset=0}}T=false}function F(){s.lineOffset=1;do{if(n(r[t],10)){s.lineIndex=t;s.lineOffset=s.lineOffset+1;s.lineNumber=s.lineNumber+1}if(de(r[t+1])===false)break;t=t+1}while(t<b)}if(s.language==="html"||s.language==="liquid")ee="html";do{if(s.error)return i;if(de(r[t])){F()}else if(n(r[t],60)){j(c)}else if(n(r[t],123)&&(v||n(r[t+1],123)||n(r[t+1],37))){j(c)}else if(n(r[t],45)&&n(r[t+1],45)&&n(r[t+2],45)){j("---")}else{z()}t=t+1}while(t<b);return i}function en(){const{data:e,references:i,rules:d,source:f}=s;const v=s.language==="json"?d.json:d.script;const l=Pe(f)?f:f.split(c);const h=l.length;const r=[];const b=[];const B=[];const t=[0,c];const u=[false];const T={count:[],index:[],word:[]};let ee=-1;let o=0;let p=c;let L=c;let N=[];let ue=0;let se=-1;let a=-1;let y=[];let $;let S;let Q;const Y=["autoescape","block","capture","case","comment","embed","filter","for","form","if","macro","paginate","raw","sandbox","spaceless","tablerow","unless","verbatim"];function H(){T.count.pop();T.index.pop();T.word.pop();ee=ee-1}function j(m=c){const g={begin:s.stack.index,ender:-1,lexer:"script",lines:s.lineOffset,stack:s.stack.token,token:p,types:L};s.push(e,g,m)}function z(m,g){let w=g===true?o:o+1;let x=c;if(typeof m!=="number"||m<1)m=1;if(n(l[o],47)){if(n(l[o+1],47)){x=he}else if(n(l[o+1],42)){x="/"}}if(w<h){do{if(de(l[w])===false){if(n(l[w],47)){if(x===c){if(n(l[w+1],47)){x=he}else if(n(l[w+1],42)){x="/"}}else if(n(x,47)&&n(l[w-1],42)){x=c}}if(x===c&&l[w-1]+l[w]!=="*/")return l.slice(w,w+m).join(c)}else if(n(x,10)&&n(l[w],10)){x=c}w=w+1}while(w<h)}return c}function F(m){const g=m;do{m=m-1}while(n(l[m],92)&&m>0);return(g-m)%2===1}function q(m){const g=z(1,false);const w=s.stack.length===0?c:s.stack.token;const x={begin:e.begin[s.count],ender:e.begin[s.count],lexer:e.lexer[s.count],lines:e.lines[s.count],stack:e.stack[s.count],token:e.token[s.count],types:e.types[s.count]};if(Xe.test(p)){return}if(L==="start"||L==="type_start"){return}if(s.language==="json"){return}if(n(g,123)||n(x.token,59)||n(x.token,44)||x.stack==="class"||x.stack==="map"||x.stack==="attribute"||e.types[x.begin-1]==="generic"||w==="initializer"){return}if(n(x.token,125)&&e.stack[x.begin-1]==="global"&&e.types[x.begin-1]!=="operator"&&x.stack===e.stack[s.count-1]){return}if(x.stack==="array"&&E(x.token,93)){return}if(n(e.token[e.begin[s.count]],123)&&x.stack==="data_type"){return}if(x.types!==void 0&&x.types.indexOf("liquid")>-1&&x.types.indexOf("template_string")<0){return}if(n(g,59)&&m===false){return}if(e.lexer[s.count-1]!=="script"&&(o<h&&h===f.length-1||h<f.length-1)){return}let R=0;if(n(x.token,125)&&(x.stack==="function"||x.stack==="if"||x.stack==="else"||x.stack==="for"||x.stack==="do"||x.stack==="while"||x.stack==="switch"||x.stack==="class"||x.stack==="try"||x.stack==="catch"||x.stack==="finally"||x.stack==="block")){if(x.stack==="function"&&(e.stack[x.begin-1]==="data_type"||e.types[x.begin-1]==="type")){R=x.begin;do{R=R-1}while(R>0&&E(e.token[R],41)&&e.stack[R]!=="arguments");R=e.begin[R]}else{R=e.begin[x.begin-1]}if(n(e.token[R],40)){R=R-1;if(e.token[R-1]==="function")R=R-1;if(e.stack[R-1]==="object"||e.stack[R-1]==="switch")return;if(E(e.token[R-1],61)&&E(e.token[R-1],58)&&e.token[R-1]!=="return")return}else{return}}if(x.types==="comment"||w==="method"||w==="paren"||w==="expression"||w==="array"||w==="object"||w==="switch"&&x.stack!=="method"&&n(e.token[e.begin[s.count]],40)&&e.token[e.begin[s.count]-1]!=="return"&&e.types[e.begin[s.count]-1]!=="operator"){return}if(e.stack[s.count]==="expression"&&(e.token[e.begin[s.count]-1]!=="while"||e.token[e.begin[s.count]-1]==="while"&&e.stack[e.begin[s.count]-2]!=="do")){return}if(g!==c&&"=<>+*?|^:&%~,.()]".indexOf(g)>-1&&m===false)return;if(x.types==="comment"){R=s.count;do{R=R-1}while(R>0&&e.types[R]==="comment");if(R<1)return;x.token=e.token[R];x.types=e.types[R];x.stack=e.stack[R]}if(x.token===void 0||x.types==="start"||x.types==="separator"||x.types==="operator"&&x.token!=="++"&&x.token!=="--"||x.token==="x}"||x.token==="var"||x.token==="let"||x.token==="const"||x.token==="else"||x.token.indexOf("#!/")===0||x.token==="instanceof"){return}if(x.stack==="method"&&(e.token[x.begin-1]==="function"||e.token[x.begin-2]==="function")){return}if(v.variableList==="list")T.index[ee]=s.count;p=v.correct===true?";":"x;";L="separator";R=s.lineOffset;s.lineOffset=0;j();s.lineOffset=R;fe()}function O(){let m=s.count;if(e.types[m]==="comment"){do{m=m-1}while(m>0&&e.types[m]==="comment")}if(e.token[m]==="from")m=m-2;if(e.token[m]==="x;")s.splice({data:e,howmany:1,index:m})}function M(){let m=s.count;do{m=m-1}while(m>-1&&e.token[m]==="x}");if(e.stack[m]==="else")return j();m=m+1;s.splice({data:e,howmany:0,index:m,record:{begin:e.begin[m],ender:-1,lexer:"script",lines:s.lineOffset,stack:e.stack[m],token:p,types:L}});j()}function ie(){q(false);if(se>-1)k();Q=Ye({chars:l,end:h,lexer:"script",begin:"/*",start:o,ender:"*/"});o=Q[1];if(e.token[s.count]==="var"||e.token[s.count]==="let"||e.token[s.count]==="const"){$=s.pop(e);j();s.push(e,$,c);if(e.lines[s.count-2]===0)e.lines[s.count-2]=e.lines[s.count];e.lines[s.count]=0}else if(Q[0]!==c){p=Q[0];L=Xe.test(p)?"ignore":"comment";if(p.indexOf("# sourceMappingURL=")===2){t[0]=s.count+1;t[1]=p}s.push(e,{begin:s.stack.index,ender:-1,lexer:"script",lines:s.lineOffset,stack:s.stack.token,token:p,types:L},c)}if(/\/\*\s*global\s+/.test(e.token[s.count])&&e.types.indexOf("word")<0){i[0]=e.token[s.count].replace(/\/\*\s*global\s+/,c).replace("*/",c).replace(/,\s+/g,",").split(",")}}function P(){q(false);fe();if(se>-1)k();Q=pt({chars:l,end:h,lexer:"script",begin:"//",start:o,ender:he});o=Q[1];if(Q[0]!==c){p=Q[0];L=Xe.test(p)?"ignore":"comment";if(p.indexOf("# sourceMappingURL=")===2){t[0]=s.count+1;t[1]=p}s.push(e,{begin:s.stack.index,ender:-1,lexer:"script",lines:s.lineOffset,stack:s.stack.token,token:p,types:L},c)}}function A(){let m=0;let g=0;let w=o+1;let x=false;const R=h;const xe=["/"];if(w<R){do{xe.push(l[w]);if(E(l[w-1],92)||n(l[w-2],92)){if(n(l[w],91))x=true;if(n(l[w],93))x=false}if(n(l[w],47)&&x===false){if(n(l[w-1],92)){g=0;m=w-1;if(m>0){do{if(n(l[m],92))g=g+1;else break;m=m-1}while(m>0)}if(g%2===0)break}else{break}}w=w+1}while(w<R)}if(l[w+1]==="g"||l[w+1]==="i"||l[w+1]==="m"||l[w+1]==="y"||l[w+1]==="u"){xe.push(l[w+1]);if(l[w+2]!==l[w+1]&&(l[w+2]==="g"||l[w+2]==="i"||l[w+2]==="m"||l[w+2]==="y"||l[w+2]==="u")){xe.push(l[w+2]);if(l[w+3]!==l[w+1]&&l[w+3]!==l[w+2]&&(l[w+3]==="g"||l[w+3]==="i"||l[w+3]==="m"||l[w+3]==="y"||l[w+3]==="u")){xe.push(l[w+3]);if(l[w+4]!==l[w+1]&&l[w+4]!==l[w+2]&&l[w+4]!==l[w+3]&&(l[w+4]==="g"||l[w+4]==="i"||l[w+4]==="m"||l[w+4]==="y"||l[w+4]==="u")){xe.push(l[w+4]);if(l[w+5]!==l[w+1]&&l[w+5]!==l[w+2]&&l[w+5]!==l[w+3]&&l[w+5]!==l[w+4]&&(l[w+5]==="g"||l[w+5]==="i"||l[w+5]==="m"||l[w+5]==="y"||l[w+5]==="u")){xe.push(l[w+4]);o=w+5}else{o=w+4}}else{o=w+3}}else{o=w+2}}else{o=w+1}}else{o=w}return xe.join(c)}function _(){const m=[l[o]];let g=0;let w=n(m[0],46);let x=/zz/;if(o<h-2&&l[o]==="0"){if(l[o+1]==="x"){x=/[0-9a-fA-F]/}else if(l[o+1]==="o"){x=/[0-9]/}else if(l[o+1]==="b"){x=/0|1/}if(x.test(l[o+2])){m.push(l[o+1]);g=o+1;do{g=g+1;m.push(l[g])}while(x.test(l[g+1]));o=g;return m.join(c)}}g=o+1;if(g<h){do{if(Ee(l[g])||n(l[g],46)&&w===false){m.push(l[g]);if(n(l[g],46))w=true}else{break}g=g+1}while(g<h)}if(g<h-1&&(Ee(l[g-1])||Ee(l[g-2])&&(n(l[g-1],45)||n(l[g-1],43)))&&(l[g]==="e"||l[g]==="E")){m.push(l[g]);if(n(l[g+1],45)||n(l[g+1],43)){m.push(l[g+1]);g=g+1}w=false;g=g+1;if(g<h){do{if(Ee(l[g])||n(l[g],46)&&w===false){m.push(l[g]);if(n(l[g],46))w=true}else{break}g=g+1}while(g<h)}}o=g-1;return m.join(c)}function J(){let m=0;let g=0;let w=h;let x=c;const R=["=","<",">","+","*","?","|","^",":","&","%","~"];const xe=R.length;if(se>-1)k();if(n(l[o],47)&&(s.count>-1&&(L!=="word"&&L!=="reference"||p==="typeof"||p==="return"||p==="else")&&L!=="number"&&L!=="string"&&L!=="end")){if(p==="return"||p==="typeof"||p==="else"||L!=="word"){p=A();L="regex"}else{p="/";L="operator"}j();return"regex"}if(n(l[o],63)&&("+-*/.?".indexOf(l[o+1])>-1||n(l[o+1],58)&&R.join(c).indexOf(l[o+2])<0)){if(n(l[o+1],46)&&Ee(l[o+2])===false){x="?."}else if(n(l[o+1],63)){x="??"}if(x===c)return"?"}if(n(l[o],58)&&"+-*/".indexOf(l[o+1])>-1)return":";if(o<h-1){if(E(l[o],60)&&n(l[o+1],60))return l[o];if(n(l[o],33)&&n(l[o+1],47))return"!";if(n(l[o],45)){u[u.length-1]=false;if(n(l[o+1],45)){x="--"}else if(n(l[o+1],61)){x="-="}else if(n(l[o+1],62)){x="->"}if(x===c)return"-"}if(n(l[o],43)){u[u.length-1]=false;if(n(l[o+1],43)){x="++"}else if(n(l[o+1],61)){x="+="}if(x===c)return"+"}if(n(l[o],61)&&E(l[o+1],61)&&E(l[o+1],33)&&E(l[o+1],62)){u[u.length-1]=false;return"="}}if(n(l[o],59)){if(s.language==="typescript"){if(e.stack[s.count]==="arguments"){if(e.token[s.count]==="?"){s.pop(e);x="?:";o=o-1}u[u.length-1]=true}else if(n(p,41)&&(e.token[e.begin[s.count]-1]==="function"||e.token[e.begin[s.count]-2]==="function")){u[u.length-1]=true}else if(L==="reference"){m=s.count;let Z=false;do{if(e.begin[m]===e.begin[s.count]){if(m<s.count&&e.token[m]===":"&&e.types[m+1]!=="type")Z=true;if(e.token[m]==="?"&&Z===false)break;if(e.token[m]===";"||e.token[m]==="x;")break;if(e.token[m]==="var"||e.token[m]==="let"||e.token[m]==="const"||e.types[m]==="type"){u[u.length-1]=true;break}}else{if(e.types[m]==="type_end"){u[u.length-1]=true;break}m=e.begin[m]}m=m-1}while(m>e.begin[s.count])}}else if(e.token[s.count-1]==="["&&(e.types[s.count]==="word"||e.types[s.count]==="reference")){s.stack.update("attribute");e.stack[s.count]="attribute"}}if(x===c){if(n(l[o+1],43)&&n(l[o+2],43)||n(l[o+1],45)&&n(l[o+2],45)){x=l[o]}else{const Z=[l[o]];m=o+1;if(m<w){do{if(n(l[m],43)&&n(l[m+1],43)||n(l[m],45)&&n(l[m+1],45))break;g=0;if(g<xe){do{if(l[m]===R[g]){Z.push(R[g]);break}g=g+1}while(g<xe)}if(g===xe)break;m=m+1}while(m<w)}x=Z.join(c)}}o=o+(x.length-1);if(x==="=>"&&n(p,41)){m=s.count;w=e.begin[m];do{if(e.begin[m]===w)e.stack[m]="method";m=m-1}while(m>w-1)}return x}function G(){const m=[l[o]];o=o+1;if(o<h){do{m.push(l[o]);if(n(l[o],96)&&(E(l[o-1],92)||!F(o-1)))break;if(n(l[o-1],36)&&n(l[o],123)&&(E(l[o-2],92)||!F(o-2)))break;o=o+1}while(o<h)}return m.join(c)}function ne(){let m=0;let g=false;let w=false;let x=0;let R=0;let xe=0;let Z=c;let pe=c;let ce=c;const te=[];const we=u[u.length-1];const qe="0123456789=<>+-*?|^:&.,;%(){}[]~";function D(){if(n(p,40))s.stack.update("paren",s.count);s.external("html",te.join(c))}if(se>-1)k();pe=s.count>0?e.token[s.count-1]:c;ce=s.count>0?e.types[s.count-1]:c;Z=z(1,false);if(s.language!=="jsx"&&s.language!=="tsx"&&Ee(Z)===false&&(p==="function"||pe==="=>"||pe==="void"||pe==="."||p==="return"||L==="operator"||e.stack[s.count]==="arguments"||L==="type"&&pe==="type"||L==="reference"&&(ce==="operator"||pe==="function"||pe==="class"||pe==="new")||L==="type"&&ce==="operator")){const I=[];let U=0;let ke=0;m=o;do{I.push(l[m]);if(n(l[m],60)){U=U+1}else if(n(l[m],62)){U=U-1;if(U<1)break}m=m+1}while(m<h);ke=o;o=m;Z=z(1,false);if(n(l[m],62)&&(we===true||pe==="=>"||pe==="."||ce!=="operator"||ce==="operator"&&(n(Z,40)||n(Z,61)))){L="generic";p=I.join(c).replace(/^<\s+/,"<").replace(/\s+>$/,">").replace(/,\s*/g,", ");j();return}o=ke}m=s.count;if(e.types[m]==="comment"){do{m=m-1}while(m>0&&e.types[m]==="comment")}if(we===false&&z(1,false)!==">"&&(E(l[o],60)&&qe.indexOf(l[o+1])>-1||e.token[m]==="++"||e.token[m]==="--"||de(l[o+1])===true||Ee(l[o+1])===true&&(L==="operator"||L==="string"||L==="number"||L==="reference"||L==="word"&&p!=="return"))){L="operator";p=J();return j()}if(s.language!=="typescript"&&(e.token[m]==="return"||e.types[m]==="operator"||e.types[m]==="start"||e.types[m]==="separator"||e.types[m]==="jsx_attribute_start"||n(e.token[m],125)&&s.stack.token==="global")){L="markup";s.language="jsx";do{te.push(l[o]);if(n(l[o],123)){R=R+1;g=true}else if(n(l[o],125)){R=R-1;if(R===0)g=false}else if(n(l[o],60)&&g===false){if(n(l[o+1],60)){do{te.push(l[o]);o=o+1}while(o<h&&n(l[o+1],60))}x=x+1;if(n(z(1,false),47))w=true}else if(n(l[o],62)&&g===false){if(n(l[o+1],62)){do{te.push(l[o]);o=o+1}while(n(l[o+1],62))}x=x-1;if(w===true){xe=xe-1}else if(E(l[o-1],47)){xe=xe+1}if(x===0&&R===0&&xe<1){Z=z(2,false);if(E(Z,60))return D();if(n(Z,60)&&qe.indexOf(Z.charAt(1))<0&&de(Z.charAt(1))===false){m=o+1;do{m=m+1;if(n(l[m],62)||de(l[m-1])&&qe.indexOf(l[m])<0)break;if(qe.indexOf(l[m])>-1)return D()}while(m<h)}else{return D()}}w=false}o=o+1}while(o<h);return D()}L="operator";p=J();j()}function X(){let m=true;let g="+";let w=c;let x=c;let R=c;let xe=c;let Z=0;let pe=0;let ce=0;const te=[];function we(){pe=e.begin[pe]-1;if(e.types[pe]==="end"){we()}else if(n(e.token[pe-1],46)){qe()}}function qe(){pe=pe-2;if(e.types[pe]==="end"){we()}else if(n(e.token[pe-1],46)){qe()}}function D(){let U=0;if(U<te.length){do{s.push(e,te[U],c);U=U+1}while(U<te.length)}}function I(U){return{begin:e.begin[U],ender:e.ender[U],lexer:e.lexer[U],lines:e.lines[U],stack:e.stack[U],token:e.token[U],types:e.types[U]}}w=e.token[s.count];x=e.token[s.count-1];R=e.token[s.count-2];if(w!=="++"&&w!=="--"&&x!=="++"&&x!=="--"){pe=s.count;if(e.types[pe]==="end"){we()}else if(n(e.token[pe-1],46)){qe()}}if(e.token[pe-1]==="++"||e.token[pe-1]==="--"){if("startendoperator".indexOf(e.types[pe-2])>-1)return;ce=pe;if(ce<s.count+1){do{te.push(I(ce));ce=ce+1}while(ce<s.count+1);s.splice({data:e,howmany:s.count-pe,index:pe})}}else{if(v.correct===false||w!=="++"&&w!=="--"&&x!=="++"&&x!=="--"){return}xe=z(1,false);if((w==="++"||w==="--")&&(n(l[o],59)||n(xe,59)||n(l[o],125)||n(xe,125)||n(l[o],41)||n(xe,41))){g=e.stack[s.count];if(g==="array"||g==="method"||g==="object"||g==="paren"||g==="notation"||e.token[e.begin[s.count]-1]==="while"&&g!=="while"){return}ce=s.count;do{ce=ce-1;if(e.token[ce]==="return")return;if(e.types[ce]==="end"){do{ce=e.begin[ce]-1}while(e.types[ce]==="end"&&ce>0)}}while(ce>0&&(n(e.token[ce],46)||e.types[ce]==="word"||e.types[ce]==="reference"||e.types[ce]==="end"));if(n(e.token[ce],44)&&E(l[o],59)&&E(xe,59)&&E(l[o],125)&&E(xe,125)&&E(l[o],41)&&E(xe,41)){return}if(e.types[ce]==="operator"){if(e.stack[ce]==="switch"&&n(e.token[ce],58)){do{ce=ce-1;if(e.types[ce]==="start"){Z=Z-1;if(Z<0)break}else if(e.types[ce]==="end"){Z=Z+1}if(n(e.token[ce],63)&&Z===0)return}while(ce>0)}else{return}}m=false;g=w==="--"?"-":"+"}else if(n(R,91)||n(R,59)||n(R,123)||n(R,125)||n(R,40)||n(R,41)||n(R,44)||R==="return"||R==="x;"){if(w==="++"||w==="--"){if(n(R,91)||n(R,40)||n(R,44)||R==="return")return;if(w==="--")g="-";m=false}else if(x==="--"||w==="--"){g="-"}}else{return}if(m===false)$=s.pop(e);pe=s.count;if(e.types[pe]==="end"){we()}else if(n(e.token[pe-1],46)){qe()}ce=pe;if(ce<s.count+1){do{te.push(I(ce));ce=ce+1}while(ce<s.count+1)}}if(m===true){s.splice({data:e,howmany:1,index:pe-1});p="=";L="operator";j();D();p=g;L="operator";j();p="1";L="number";j()}else{p="=";L="operator";j();D();p=g;L="operator";j();p="1";L="number";j()}p=e.token[s.count];L=e.types[s.count];if(n(xe,125)&&E(l[o],59))q(false)}function oe(m,g,w){let x=0;let R=false;let xe=false;let Z=[m];let pe;const ce=g.split(c);const te=ce.length;const we=o;const qe=o+m.length;const D=v.quoteConvert;function I(){let ke=0;Z=[];L=w;x=o;if(w==="string"&&de(l[x+1])){ke=1;do{x=x+1;if(n(l[x],10))ke=ke+1}while(x<h&&de(l[x+1])===true);s.lineOffset=ke}}function U(){let ke=c;function ae(me){if(s.language!=="javascript"&&s.language!=="typescript"&&s.language!=="jsx"&&s.language!=="tsx"){const le=be=>be.replace(/\s*$/," ");const K=be=>be.replace(/^\s*/," ");if(/\{(#|\/|(%>)|(%\]))/.test(me)||/\}%(>|\])/.test(me))return me;me=me.replace(/\{((\{+)|%-?)\s*/g,le);me=me.replace(/\s*((\}\}+)|(-?%\}))/g,K);return me}return me}if(n(m,34)&&D==="single"){Z[0]=Ae;Z[Z.length-1]=Ae}else if(n(m,39)&&D==="double"){Z[0]=ve;Z[Z.length-1]=ve}else if(R===true){ke=Z[Z.length-1];Z.pop();Z.pop();Z.push(ke)}o=x;if(g===he){o=o-1;Z.pop()}p=Z.join(c);if(n(m,34)||n(m,39)||m==="{{"||m==="{%"){p=ae(p)}if(m==="{%"||m==="{{"){pe=W(p);L=pe[0];j(pe[1]);return}if(w==="string"){L="string";if(s.language==="json"){p=p.replace(/\u0000/g,"\\u0000").replace(/\u0001/g,"\\u0001").replace(/\u0002/g,"\\u0002").replace(/\u0003/g,"\\u0003").replace(/\u0004/g,"\\u0004").replace(/\u0005/g,"\\u0005").replace(/\u0006/g,"\\u0006").replace(/\u0007/g,"\\u0007").replace(/\u0008/g,"\\u0008").replace(/\u0009/g,"\\u0009").replace(/\u000a/g,"\\u000a").replace(/\u000b/g,"\\u000b").replace(/\u000c/g,"\\u000c").replace(/\u000d/g,"\\u000d").replace(/\u000e/g,"\\u000e").replace(/\u000f/g,"\\u000f").replace(/\u0010/g,"\\u0010").replace(/\u0011/g,"\\u0011").replace(/\u0012/g,"\\u0012").replace(/\u0013/g,"\\u0013").replace(/\u0014/g,"\\u0014").replace(/\u0015/g,"\\u0015").replace(/\u0016/g,"\\u0016").replace(/\u0017/g,"\\u0017").replace(/\u0018/g,"\\u0018").replace(/\u0019/g,"\\u0019").replace(/\u001a/g,"\\u001a").replace(/\u001b/g,"\\u001b").replace(/\u001c/g,"\\u001c").replace(/\u001d/g,"\\u001d").replace(/\u001e/g,"\\u001e").replace(/\u001f/g,"\\u001f")}else if(m.indexOf("#!")===0){p=p.slice(0,p.length-1);s.lineOffset=2}else if(s.stack.token!=="object"||s.stack.token==="object"&&E(z(1,false),58)&&E(e.token[s.count],44)&&E(e.token[s.count],123)){if(p.length>d.wrap&&d.wrap>0||d.wrap!==0&&n(e.token[s.count],43)&&(n(e.token[s.count-1],46)||n(e.token[s.count-1],39))){let me=p;let le=c;let K=D==="double"?ve:D==="single"?Ae:me.charAt(0);const be=d.wrap;const Oe=/u[0-9a-fA-F]{4}/;const Re=/x[0-9a-fA-F]{2}/;me=me.slice(1,me.length-1);if(n(e.token[s.count],43)&&(n(e.token[s.count-1],46)||n(e.token[s.count-1],39))){s.pop(e);K=e.token[s.count].charAt(0);me=e.token[s.count].slice(1,e.token[s.count].length-1)+me;s.pop(e)}if(me.length>be&&be>0){do{le=me.slice(0,be);if(n(le[be-5],92)&&Oe.test(me.slice(be-4,be+1))){le=le.slice(0,be-5)}else if(n(le[be-4],92)&&Oe.test(me.slice(be-3,be+2))){le=le.slice(0,be-4)}else if(n(le[be-3],92)&&(Oe.test(me.slice(be-2,be+3))||Re.test(me.slice(be-2,be+1)))){le=le.slice(0,be-3)}else if(n(le[be-2],92)&&(Oe.test(me.slice(be-1,be+4))||Re.test(me.slice(be-1,be+2)))){le=le.slice(0,be-2)}else if(n(le[be-1],92)){le=le.slice(0,be-1)}le=K+le+K;me=me.slice(le.length-2);p=le;L="string";j(c);s.lineOffset=0;p="+";L="operator";j(c)}while(me.length>be)}p=me===c?K+K:K+me+K;L="string"}}}else if(/\{\s*\?>$/.test(p)){L="liquid_start"}else{L=w}if(p.length>0)j(c)}if(se>-1)k();if(n(l[o-1],92)&&F(o-1)===true&&(n(l[o],34)||n(l[o],39))){s.pop(e);if(n(e.token[0],123)){if(n(l[o],34)){m=ve;g='\\"';Z=[ve]}else{m=Ae;g="\\'";Z=[Ae]}R=true}else{if(n(l[o],34)){Z=['\\"'];U();return}Z=["\\'"];U();return}}x=qe;if(x<h){do{if(E(e.token[0],123)&&E(e.token[0],91)&&D!=="none"&&(n(l[x],34)||n(l[x],39))){if(n(l[x-1],92)){if(F(x-1)===true){if(D==="double"&&n(l[x],39)){Z.pop()}else if(D==="single"&&n(l[x],34)){Z.pop()}}}else if(D==="double"&&n(l[x],34)&&n(l[o],39)){l[x]=ve}else if(D==="single"&&n(l[x],39)&&n(l[o],34)){l[x]=Ae}Z.push(l[x])}else if(x>we){xe=true;if(n(l[x],123)&&n(l[x+1],37)&&l[x+2]!==m){U();oe("{%","%}","liquid");I()}else if(n(l[x],123)&&n(l[x+1],123)&&l[x+2]!==m){U();oe("{{","}}","liquid");I()}else{xe=false;Z.push(l[x])}}else{Z.push(l[x])}if(s.language!=="json"&&s.language!=="javascript"&&(n(m,34)||n(m,39))&&(xe===true||x>we)&&E(l[x-1],92)&&E(l[x],34)&&E(l[x],39)&&(n(l[x],10)||x===h-1===true)){s.error="Unterminated string in script on line number "+s.lineNumber;break}if(l[x]===ce[te-1]&&(E(l[x-1],92)||F(x-1)===false)){if(te===1)break;if(Z[x-qe]===ce[0]&&Z.slice(x-qe-te+2).join(c)===g)break}x=x+1}while(x<h)}U()}function fe(){let m=c;const g=z(5,false);const w=s.count;const x=s.lineOffset;if(s.language==="json"||b.length<1||b[b.length-1].charAt(0)!=="x"||/^x?(;|\}|\))$/.test(p)===false){return}if(e.stack[s.count]==="do"&&g==="while"&&n(e.token[s.count],125)){return}if(n(p,59)&&e.token[w-1]==="x{"){m=e.token[e.begin[w-2]-1];if(e.token[w-2]==="do"||n(e.token[w-2],41)&&"ifforwhilecatch".indexOf(m)>-1){$=s.pop(e);p=v.correct===true?"}":"x}";L="end";S=s.stack.entry;j();b.pop();s.lineOffset=x;return}$=s.pop(e);p=v.correct===true?"}":"x}";L="end";S=s.stack.entry;j();b.pop();p=";";L="end";s.push(e,$,c);s.lineOffset=x;return}p=v.correct===true?"}":"x}";L="end";if(e.token[s.count]==="x}")return;if(g==="else"&&e.stack[s.count]==="if"&&(n(e.token[s.count],59)||e.token[s.count]==="x;")){S=s.stack.entry;j();b.pop();s.lineOffset=x;return}do{S=s.stack.entry;j();b.pop();if(e.stack[s.count]==="do")break}while(b[b.length-1]==="x{");s.lineOffset=x}function ye(){let m=s.count;if(e.stack[m]==="object"&&v.objectSort===true){p=",";L="separator";O();j()}else{do{m=m-1}while(m>0&&e.types[m-1]==="comment");s.splice({data:e,howmany:0,index:m,record:{begin:e.begin[m],ender:-1,lexer:"script",lines:s.lineOffset,stack:e.stack[m],token:",",types:"separator"}});j()}}function ge(m){let g=false;let w=false;const x=z(1,false);const R=n(e.token[s.count],40)?s.count:e.begin[s.count];function xe(){let Z=0;const pe=e.token[R-1]==="Array";const ce=pe?"[":"{";const te=pe?"]":"}";const we=pe?"array":"object";if(pe===true&&e.types[s.count]==="number"){Z=Number(e.token[s.count]);$=s.pop(e)}$=s.pop(e);$=s.pop(e);$=s.pop(e);s.stack.pop();p=ce;L="start";j(we);if(Z>0){p=",";L="separator";do{j();Z=Z-1}while(Z>0)}p=te;L="end";j()}if(se>-1)k();if(B.length>0){if(B[B.length-1]===0){B.pop()}else{B[B.length-1]=B[B.length-1]-1}}if(n(m,41)||m==="x)"||n(m,93)){if(v.correct===true)X();O()}if(n(m,41)||m==="x)")q(false);if(ee>-1){if(n(m,125)&&(v.variableList==="list"&&T.count[ee]===0||e.token[s.count]==="x;"&&v.variableList==="each")){H()}T.count[ee]=T.count[ee]-1;if(T.count[ee]<0)H()}if(n(p,44)&&e.stack[s.count]!=="initializer"&&(n(m,93)&&n(e.token[s.count-1],91)||n(m,125))){$=s.pop(e)}if(n(m,41)||m==="x)"){p=m;if(r.length>0){N=r[r.length-1];if(N.length>1&&E(x,123)&&(N[0]==="if"||N[0]==="for"||N[0]==="with"||N[0]==="while"&&e.stack[N[1]-2]!==void 0&&e.stack[N[1]-2]!=="do")){g=true}}}else if(n(m,93)){p="]"}else if(n(m,125)){if(E(p,44)&&v.correct===true){X()}if(s.stack.length>0&&s.stack.token!=="object"){q(true)}if(v.objectSort===true&&s.stack.token==="object"){nt(e)}if(L==="comment"){p=e.token[s.count];L=e.types[s.count]}p="}"}if(s.stack.token==="data_type"){L="type_end"}else{L="end"}r.pop();S=s.stack.entry;if(n(m,41)&&v.correct===true&&R-s.count<2&&(n(e.token[s.count],40)||e.types[s.count]==="number")&&(e.token[R-1]==="Array"||e.token[R-1]==="Object")&&e.token[R-2]==="new"){xe();w=true}if(b[b.length-1]==="x{"&&n(m,125)){fe();b.pop();if(e.stack[s.count]!=="try"){if(E(x,58)&&E(x,59)&&e.token[e.begin[o]-1]!=="?")fe()}p="}"}else{b.pop()}if(v.endComma!==void 0&&v.endComma!=="none"&&s.stack.token==="array"||s.stack.token==="object"||s.stack.token==="data_type"){if(v.endComma==="always"&&E(e.token[s.count],44)){const Z=s.stack.index;let pe=s.count;do{if(e.begin[pe]===Z){if(n(e.token[pe],44))break}else{pe=e.begin[pe]}pe=pe-1}while(pe>Z);if(pe>Z){const ce=L;const te=p;p=",";L="separator";j();p=te;L=ce}}else if(v.endComma==="never"&&n(e.token[s.count],44)){s.pop(e)}}if(w===false){j();if(n(p,125)&&e.stack[s.count]!=="object"&&e.stack[s.count]!=="class"&&e.stack[s.count]!=="data_type"){i.pop();fe()}}if(g===true){p=v.correct===true?"{":"x{";L="start";j(N[0]);b.push("x{");N[1]=s.count}u.pop();if(s.stack.token!=="data_type")u[u.length-1]=false}function C(m){let g=s.count;let w=c;let x=c;let R=c;let xe=false;b.push(m);if(n(m,123)&&(e.types[s.count]==="type"||e.types[s.count]==="type_end"||e.types[s.count]==="generic")){let Z=0;if(e.types[s.count]==="type_end")g=e.begin[s.count];Z=g;do{g=g-1;if(e.begin[g]!==Z&&e.begin[g]!==-1)break;if(n(e.token[g],58))break}while(g>e.begin[g]);if(n(e.token[g],58)&&e.stack[g-1]==="arguments"){u.push(false);xe=true}else{u.push(u[u.length-1])}g=s.count}else if(n(m,91)&&e.types[s.count]==="type_end"){u.push(true)}else{u.push(u[u.length-1])}if(se>-1){k();g=s.count}if(ee>-1)T.count[ee]=T.count[ee]+1;if(e.token[g-1]==="function"){r.push(["function",g+1])}else{r.push([p,g+1])}p=m;if(u[u.length-1]===true){L="type_start"}else{L="start"}if(n(m,40)||m==="x("){O()}else if(n(m,91)){if(a>-1){if(e.begin[a-1]===e.begin[e.begin[g]-1]||e.token[e.begin[g]]==="x("){a=-1;if(v.correct===true){ge(")")}else{ge("x)")}O();p="{";L="start"}}else if(n(p,41)){O()}if(L==="comment"&&n(e.token[g-1],41)){p=e.token[g];e.token[g]="{";L=e.types[g];e.types[g]="start"}}w=(()=>{let Z=s.count;if(e.types[Z]==="comment"){do{Z=Z-1}while(Z>0&&e.types[Z]==="comment")}return e.token[Z]})();x=e.stack[g]===void 0?c:(()=>{let Z=s.count;if(e.types[Z]==="comment"){do{Z=Z-1}while(Z>0&&e.types[Z]==="comment")}return e.token[e.begin[Z]-1]})();if(n(p,123)&&(e.types[g]==="word"||n(e.token[g],93))){let Z=g;if(n(e.token[Z],93)){do{Z=e.begin[Z]-1}while(n(e.token[Z],93))}do{if(e.types[Z]==="start"||e.types[Z]==="end"||e.types[Z]==="operator")break;Z=Z-1}while(Z>0);if(n(e.token[Z],58)&&e.stack[Z-1]==="arguments"){R="function";i.push(y);y=[]}}if(L==="type_start"){R="data_type"}else if(R===c&&(n(p,123)||p==="x{")){if(w==="else"||w==="do"||w==="try"||w==="finally"||w==="switch"){R=w}else if(B[B.length-1]===0&&w!=="return"){B.pop();R="class"}else if(e.token[g-1]==="class"){R="class"}else if(n(e.token[g],93)&&n(e.token[g-1],91)){R="array"}else if((e.types[g]==="word"||e.types[g]==="reference")&&(e.types[g-1]==="word"||e.types[g-1]==="reference"||e.token[g-1]==="?"&&(e.types[g-2]==="word"||e.types[g-2]==="reference"))&&e.token[g]!=="in"&&e.token[g-1]!=="export"&&e.token[g-1]!=="import"){R="map"}else if(e.stack[g]==="method"&&e.types[g]==="end"&&(e.types[e.begin[g]-1]==="word"||e.types[e.begin[g]-1]==="reference")&&e.token[e.begin[g]-2]==="new"){R="initializer"}else if(n(p,123)&&(n(w,41)||w==="x)")&&(e.types[e.begin[g]-1]==="word"||e.types[e.begin[g]-1]==="reference"||e.token[e.begin[g]-1]==="]")){if(x==="if"){R="if"}else if(x==="for"){R="for"}else if(x==="while"){R="while"}else if(x==="class"){R="class"}else if(x==="switch"||e.token[e.begin[g]-1]==="switch"){R="switch"}else if(x==="catch"){R="catch"}else{R="function"}}else if(n(p,123)&&(n(w,59)||w==="x;")){R="block"}else if(n(p,123)&&n(e.token[g],58)&&e.stack[g]==="switch"){R="block"}else if(e.token[g-1]==="import"||e.token[g-2]==="import"||e.token[g-1]==="export"||e.token[g-2]==="export"){R="object"}else if(n(w,41)&&(N[0]==="function"||N[0]==="if"||N[0]==="for"||N[0]==="class"||N[0]==="while"||N[0]==="switch"||N[0]==="catch")){R=N[0]}else if(e.stack[g]==="notation"){R="function"}else if((e.types[g]==="number"||e.types[g]==="string"||e.types[g]==="word"||e.types[g]==="reference")&&(e.types[g-1]==="word"||e.types[g-1]==="reference")&&e.token[e.begin[g]-1]!=="for"){R="function"}else if(s.stack.length>0&&E(e.token[g],58)&&s.stack.token==="object"&&(n(e.token[e.begin[g]-2],123)||n(e.token[e.begin[g]-2],44))){R="function"}else if(e.types[N[1]-1]==="markup"&&e.token[N[1]-3]==="function"){R="function"}else if(w==="=>"){R="function"}else if(xe===true||e.types[s.count]==="type_end"&&e.stack[e.begin[s.count]-2]==="arguments"){R="function"}else if(n(w,41)&&e.stack[g]==="method"&&(e.types[e.begin[g]-1]==="word"||e.types[e.begin[g]-1]==="property"||e.types[e.begin[g]-1]==="reference")){R="function"}else if(n(p,123)&&e.types[g]==="word"&&e.token[g]!=="return"&&e.token[g]!=="in"&&e.token[g]!=="import"&&e.token[g]!=="const"&&e.token[g]!=="let"&&e.token[g]!==c){R="block"}else if(n(p,123)&&"if|else|for|while|function|class|switch|catch|finally".indexOf(e.stack[g])>-1&&(e.token[g]==="x}"||n(e.token[g],125))){R="block"}else if(e.stack[g]==="arguments"){R="function"}else if(e.types[g]==="generic"){do{g=g-1;if(e.token[g]==="function"||e.stack[g]==="arguments"){R="function";break}if(e.token[g]==="interface"){R="map";break}if(n(e.token[g],59)){R="object";break}}while(g>e.begin[s.count])}else{R="object"}if(R!=="object"&&R!=="class"){if(R==="function"){i.push(y);y=[]}else{i.push([])}}}else if(n(p,91)){R="array"}else if(n(p,40)||p==="x("){if(w==="function"||e.token[g-1]==="function"||e.token[g-1]==="function*"||e.token[g-2]==="function"){R="arguments"}else if(n(e.token[g-1],46)||n(e.token[e.begin[g]-2],46)){R="method"}else if(e.types[g]==="generic"){R="method"}else if(n(e.token[g],125)&&e.stack[g]==="function"){R="method"}else if(w==="if"||w==="for"||w==="class"||w==="while"||w==="catch"||w==="finally"||w==="switch"||w==="with"){R="expression"}else if(e.types[g]==="word"||e.types[g]==="property"||e.types[g]==="reference"){R="method"}else{R="paren"}}j(R);if(B.length>0)B[B.length-1]=B[B.length-1]+1}function W(m){let g=2;let w=0;let x=c;const R=m.slice(0,2);const xe=m.length;if(n(m[2],45))g=g+1;if(de(m.charAt(g))===true){do{g=g+1}while(de(m.charAt(g))===true&&g<xe)}w=g;do{w=w+1}while(de(m.charAt(w))===false&&m.charAt(w)!=="("&&w<xe);if(w===xe)w=m.length-2;x=m.slice(g,w);if(x==="else"||R==="{%"&&(x==="elseif"||x==="when"||x==="elif"||x==="elsif")){return["liquid_else",`liquid_${x}`]}if(R==="{{"){if(x==="end")return["liquid_end",c];if(x==="define"||x==="form"||x==="if"||x==="unless"||x==="range"||x==="with"){return["liquid_start",`liquid_${x}`]}return["liquid",c]}w=Y.length-1;if(w>-1){do{if(x===Y[w]&&x!=="block"){return["liquid_start",`liquid_${x}`]}if(x==="end"+Y[w]){return["liquid_end",c]}w=w-1}while(w>-1)}return["liquid",c]}function k(){let m=se;let g=1;let w=c;let x=c;let R=p;let xe=L;const Z=[];function pe(){b.push("x{");s.splice({data:e,howmany:1,index:s.count-3})}function ce(te,we,qe){const D=e.begin[te];let I=0;do{if(e.token[te]===we&&e.types[te]==="word"){if(qe===true){e.types[te]="reference"}else if(e.begin[te]>D&&e.token[e.begin[te]]==="{"&&e.stack[te]!=="object"&&e.stack[te]!=="class"&&e.stack[te]!=="data_type"){if(e.stack[te]==="function"){e.types[te]="reference"}else{I=e.begin[te];do{if(e.stack[I]==="function"){e.types[te]="reference";break}I=e.begin[I]}while(I>D)}}}te=te-1}while(te>D)}do{Z.push(l[m]);if(n(l[m],92));m=m+1}while(m<o);if(p.charAt(0)==="â€œ"){s.error=`Quote looking character (â€œ, \\u201c) used instead of actual quotes on line number ${s.lineNumber}`}else if(p.charAt(0)==="â€"){s.error=`Quote looking character (â€, \\u201d) used instead of actual quotes on line number ${s.lineNumber}`}w=Z.join(c);se=-1;if(s.count>0&&w==="function"&&n(e.token[s.count],40)&&(n(e.token[s.count-1],123)||e.token[s.count-1]==="x{")){e.types[s.count]="start"}if(s.count>1&&w==="function"&&n(p,40)&&(n(e.token[s.count-1],125)||e.token[s.count-1]==="x}")){if(n(e.token[s.count-1],125)){m=s.count-2;if(m>-1){do{if(e.types[m]==="end"){g=g+1}else if(e.types[m]==="start"||e.types[m]==="end"){g=g-1}if(g===0)break;m=m-1}while(m>-1)}if(n(e.token[m],123)&&n(e.token[m-1],41)){g=1;m=m-2;if(m>-1){do{if(e.types[m]==="end"){g=g+1}else if(e.types[m]==="start"||e.types[m]==="end"){g=g-1}if(g===0)break;m=m-1}while(m>-1)}if(e.token[m-1]!=="function"&&e.token[m-2]!=="function"){e.types[s.count]="start"}}}else{e.types[s.count]="start"}}if(v.correct===true&&(w==="Object"||w==="Array")&&n(l[o+1],40)&&n(l[o+2],41)&&n(e.token[s.count-1],61)&&e.token[s.count]==="new"){if(w==="Object"){e.token[s.count]="{";p="}";e.stack[s.count]="object";s.stack.update("object")}else{e.token[s.count]="[";p="]";e.stack[s.count]="array";s.stack.update("array")}e.types[s.count]="start";L="end";l[o+1]=c;l[o+2]=c;o=o+2}else{g=s.count;m=g;if(v.variableList!=="none"&&(w==="var"||w==="let"||w==="const")){if(e.types[g]==="comment"){do{g=g-1}while(g>0&&e.types[g]==="comment")}if(v.variableList==="list"&&ee>-1&&T.index[ee]===g&&w===T.word[ee]){p=",";L="separator";e.token[g]=p;e.types[g]=L;T.count[ee]=0;T.index[ee]=g;T.word[ee]=w;return}ee=ee+1;T.count.push(0);T.index.push(g);T.word.push(w);g=m}else if(ee>-1&&w!==T.word[ee]&&s.count===T.index[ee]&&n(e.token[T.index[ee]],59)&&p!==T.word[ee]&&v.variableList==="list"){H()}if(w==="from"&&e.token[s.count]==="x;"&&n(e.token[s.count-1],125)){O()}if(w==="while"&&e.token[s.count]==="x;"&&n(e.token[s.count-1],125)){let te=0;let we=s.count-2;if(we>-1){do{if(e.types[we]==="end"){te=te+1}else if(e.types[we]==="start"){te=te-1}if(te<0){if(n(e.token[we],123)&&e.token[we-1]==="do")O();return}we=we-1}while(we>-1)}}if(xe==="comment"){let te=s.count;do{te=te-1}while(te>0&&e.types[te]==="comment");xe=e.types[te];R=e.token[te]}x=z(2,false);if(w==="void"){if(R===":"&&e.stack[s.count-1]==="arguments"){L="type"}else{L="word"}}else if((s.stack.token==="object"||s.stack.token==="class"||s.stack.token==="data_type")&&(n(e.token[s.count],123)||(n(e.token[e.begin[s.count]],123)&&n(e.token[s.count],44)||e.types[s.count]==="liquid_end"&&(n(e.token[e.begin[s.count]-1],123)||n(e.token[e.begin[s.count]-1],44))))){if(w==="return"||w==="break"){L="word"}else{L="property"}}else if(u[u.length-1]===true||(s.language==="typescript"||s.language==="flow")&&R==="type"){L="type"}else if(i.length>0&&(R==="function"||R==="class"||R==="const"||R==="let"||R==="var"||R==="new"||R==="void")){L="reference";i[i.length-1].push(w);if(s.language==="javascript"||s.language==="jsx"||s.language==="typescript"||s.language==="tsx"){if(R==="var"||R==="function"&&e.types[s.count-1]!=="operator"&&e.types[s.count-1]!=="start"&&e.types[s.count-1]!=="end"){ce(s.count,w,true)}else{ce(s.count,w,false)}}else{ce(s.count,w,false)}}else if(s.stack.token==="arguments"&&L!=="operator"){L="reference";y.push(w)}else if(n(R,44)&&e.stack[s.count]!=="method"&&(e.stack[s.count]!=="expression"||e.token[e.begin[s.count]-1]==="for")){let te=s.count;const we=s.stack.index;do{if(e.begin[te]===we){if(e.token[te]===";")break;if(e.token[te]==="var"||e.token[te]==="let"||e.token[te]==="const"||e.token[te]==="type"){break}}else if(e.types[te]==="end"){te=e.begin[te]}te=te-1}while(te>we);if(i.length>0&&e.token[te]==="var"){L="reference";i[i.length-1].push(w);if(s.language==="javascript"||s.language==="jsx"||s.language==="typescript"||s.language==="tsx"){ce(te,w,true)}else{ce(te,w,false)}}else if(i.length>0&&(e.token[te]==="let"||e.token[te]==="const"||e.token[te]==="type"&&(s.language==="typescript"||s.language==="tsx"))){L="reference";i[i.length-1].push(w);ce(te,w,false)}else{L="word"}}else if(s.stack.token!=="object"||s.stack.token==="object"&&p!==","&&p!=="{"){let te=i.length;let we=0;if(te>0){do{te=te-1;we=i[te].length;if(we>0){do{we=we-1;if(w===i[te][we])break}while(we>0);if(w===i[te][we])break}}while(te>0);if(i[te][we]===w&&R!=="."){L="reference"}else{L="word"}}else{L="word"}}else{L="word"}p=w;if(w==="from"&&e.token[s.count]==="}")O()}j();if(w==="class")B.push(0);if(w==="do"){x=z(1,true);if(x!=="{"){p=v.correct===true?"{":"x{";L="start";b.push("x{");j("do")}}if(w==="else"){x=z(2,true);let te=s.count-1;if(e.types[te]==="comment"){do{te=te-1}while(te>0&&e.types[te]==="comment")}if(e.token[te]==="x}"){if(e.token[s.count]==="else"){if(e.stack[s.count-1]!=="if"&&e.types[s.count-1]!=="comment"&&e.stack[s.count-1]!=="else"){b.pop();s.splice({data:e,howmany:0,index:s.count-1,record:{begin:e.begin[e.begin[e.begin[s.count-1]-1]-1],ender:-1,lexer:"script",lines:0,stack:"if",token:v.correct===true?"}":"x}",types:"end"}});if(s.stack.length>1){s.stack.splice(s.stack.length-2,1);s.stack.update(s.count)}}else if(e.token[s.count-2]==="x}"&&S[0]!=="if"&&e.stack[s.count]==="else"){pe()}else if(e.token[s.count-2]==="}"&&e.stack[s.count-2]==="if"&&S[0]==="if"&&e.token[S[1]-1]!=="if"&&e.token[e.begin[s.count-1]]==="x{"){pe()}}else if(e.token[s.count]==="x}"&&e.stack[s.count]==="if"){pe()}}if(x!=="if"&&E(x,123)){p=v.correct===true?"{":"x{";L="start";b.push("x{");j("else")}}if((w==="for"||w==="if"||w==="switch"||w==="catch")&&e.token[s.count-1]!=="."){x=z(1,true);if(x!=="("){a=s.count;if(v.correct===true){C("(")}else{C("x(")}}}}function V(){s.lineOffset=1;do{if(n(l[o],10)){s.lineIndex=o;s.lineOffset=s.lineOffset+1;s.lineNumber=s.lineNumber+1}if(de(l[o+1])===false)break;o=o+1}while(o<h)}do{if(de(l[o])){if(se>-1)k();V();if(s.lineOffset>1&&ue<s.count&&E(l[o+1],59)&&E(l[o+1],125)){q(false);ue=s.count}}else if(n(l[o],123)&&n(l[o+1],37)){oe("{%","%}","liquid")}else if(n(l[o],123)&&n(l[o+1],123)){oe("{{","}}","liquid")}else if(n(l[o],60)&&n(l[o+1],33)&&n(l[o+2],45)&&n(l[o+3],45)){oe("\x3c!--","--\x3e","comment")}else if(n(l[o],60)){ne()}else if(n(l[o],47)&&(o===h-1||n(l[o+1],42))){ie()}else if((s.count<0||e.lines[s.count]>0)&&n(l[o],35)&&n(l[o+1],33)&&(n(l[o+2],47)||n(l[o+3],91))){oe("#!"+l[o+2],he,"string")}else if(n(l[o],47)&&(o===h-1||n(l[o+1],47))){P()}else if(n(l[o],96)||n(l[o],125)&&s.stack.token==="template_string"){if(se>-1)k();p=G();if(n(p,125)&&p.slice(p.length-2)==="${"){L="template_string_else";j("template_string")}else if(p.slice(p.length-2)==="${"){L="template_string_start";j("template_string")}else if(n(p[0],125)){L="template_string_end";j()}else{L="string";j()}}else if(n(l[o],34)||n(l[o],39)){oe(l[o],l[o],"string")}else if(n(l[o],45)&&(o<h-1&&E(l[o+1],61)&&E(l[o+1],45))&&(L==="number"||L==="word"||L==="reference")&&p!=="return"&&(L==="word"||L==="reference"||L==="number"||n(p,41)||n(p,93))){if(se>-1)k();p="-";L="operator";j()}else if(se===-1&&(l[o]!=="0"||l[o]==="0"&&l[o+1]!=="b")&&(Ee(l[o])||o!==h-2&&n(l[o],45)&&n(l[o+1],46)&&Ee(l[o+2])||o!==h-1&&(n(l[o],45)||n(l[o],46))&&Ee(l[o+1]))){if(se>-1)k();if(L==="end"&&n(l[o],45)){p="-";L="operator"}else{p=_();L="number"}j()}else if(n(l[o],58)&&n(l[o+1],58)){if(se>-1)k();if(v.correct===true)X();O();o=o+1;p="::";L="separator";j()}else if(n(l[o],44)){if(se>-1)k();if(v.correct===true)X();if(u[u.length-1]===true&&e.stack[s.count].indexOf("type")<0){u[u.length-1]=false}if(L==="comment"){ye()}else if(ee>-1&&T.count[ee]===0&&v.variableList==="each"){O();p=";";L="separator";j();p=T.word[ee];L="word";j();T.index[ee]=s.count}else{p=",";L="separator";O();j()}}else if(n(l[o],46)){if(se>-1)k();u[u.length-1]=false;if(n(l[o+1],46)&&n(l[o+2],46)){p="...";L="operator";o=o+2}else{O();p=".";L="separator"}if(de(l[o-1]))s.lineOffset=1;j()}else if(n(l[o],59)){if(se>-1)k();if(u[u.length-1]===true&&e.stack[s.count].indexOf("type")<0){u[u.length-1]=false}if(B[B.length-1]===0)B.pop();if(ee>-1&&T.count[ee]===0){if(v.variableList==="each"){H()}else{T.index[ee]=s.count+1}}if(v.correct===true)X();p=";";L="separator";if(e.token[s.count]==="x}"){M()}else{j()}fe()}else if(n(l[o],40)||n(l[o],91)||n(l[o],123)){C(l[o])}else if(n(l[o],41)||n(l[o],93)||n(l[o],125)){ge(l[o])}else if(se<0&&e.stack[s.count]==="object"&&n(l[o],42)&&E(l[o+1],61)&&Ee(l[o+1])===false&&de(l[o+1])===false){se=o}else if(n(l[o],61)||n(l[o],38)||n(l[o],60)||n(l[o],62)||n(l[o],43)||n(l[o],45)||n(l[o],42)||n(l[o],47)||n(l[o],33)||n(l[o],63)||n(l[o],124)||n(l[o],94)||n(l[o],58)||n(l[o],37)||n(l[o],94)){p=J();if(p==="regex"){p=e.token[s.count]}else if(n(p,42)&&e.token[s.count]==="function"){e.token[s.count]="function*"}else{L="operator";if(E(p,33)&&p!=="++"&&p!=="--")O();j()}}else if(se<0&&l[o]!==c){se=o}if(ee>-1&&s.count===T.index[ee]+1&&n(e.token[T.index[ee]],59)&&p!==T.word[ee]&&L!=="comment"&&v.variableList==="list"){H()}o=o+1}while(o<h);if(se>-1)k();if((E(e.token[s.count],125)&&n(e.token[0],123)||E(e.token[0],123))&&(E(e.token[s.count],93)&&n(e.token[0],91)||E(e.token[0],91))){q(false)}if(t[0]===s.count){p=he+t[1];L="string";j()}if(e.token[s.count]==="x;"&&(n(e.token[s.count-1],125)||n(e.token[s.count-1],93))&&e.begin[s.count-1]===0){s.pop(e)}if(v.objectSort&&e.begin.length>0){ft(0,s.count+1)}return e}function tn(){const{data:e,rules:i,source:d}=s;const f=d.split(c);const v=d.length;const l=[];const h=[];let r=0;let b=c;let B=c;function t(a){s.push(e,{begin:s.stack.index,ender:-1,lexer:"style",lines:s.lineOffset,stack:s.stack.token,token:B,types:b},a)}function u(a){const y=a;do{a=a-1}while(n(f[a],92)&&a>0);return(y-a)%2===1}function T(a){const y=a.replace(/\s*!important/," !important").split(c);const $=/-?transition$/.test(e.token[s.count-2]);const S=[];const Q=/(\s|\(|,)-?0+\.?\d+([a-z]|\)|,|\s)/g;const Y=/(\s|\(|,)-?\.?\d+([a-z]|\)|,|\s)/g;let H=0;let j=0;let z=c;let F=y.length;let q=[];const O=J=>J;function M(J){J=J.replace(/\s*/g,c);return/\/\d/.test(J)&&a.indexOf("url(")===0?J:` ${J.charAt(0)} ${J.charAt(1)}`}function ie(J){if(i.style.noLeadZero===true){return J.replace(/^-?\D0+(\.|\d)/,(G=>G.replace(/0+/,c)))}else if(/0*\./.test(J)){return J.replace(/0*\./,"0.")}else if(/0+/.test(/\d+/.exec(J)[0])){return/^\D*0+\D*$/.test(J)?J.replace(/0+/,"0"):J.replace(/\d+/.exec(J)[0],/\d+/.exec(J)[0].replace(/^0+/,c))}return J}function P(J){return J.replace(",",", ")}function A(J){return`${J} `}function _(){const J=H-1;let G=J;if(J<1)return true;do{G=G-1}while(G>0&&n(y[G],92));return(J-G)%2===1}if(H<F){do{q.push(y[H]);if(E(y[H-1],92)||_()===false){if(z===c){if(n(y[H],34)){z=ve;j=j+1}else if(n(y[H],39)){z=Ae;j=j+1}else if(n(y[H],40)){z=")";j=j+1}else if(n(y[H],91)){z="]";j=j+1}}else if(n(y[H],40)&&n(z,41)||n(y[H],91)&&n(z,93)){j=j+1}else if(y[H]===z){j=j-1;if(j===0)z=c}}if(z===c&&n(y[H],32)){q.pop();S.push(O(q.join(c)));q=[]}H=H+1}while(H<F)}S.push(O(q.join(c)));F=S.length;H=0;if(H<F){do{if(i.style.noLeadZero===true&&/^-?0+\.\d+[a-z]/.test(S[H])===true){S[H]=S[H].replace(/0+\./,".")}else if(i.style.noLeadZero===false&&/^-?\.\d+[a-z]/.test(S[H])){S[H]=S[H].replace(".","0.")}else if(Q.test(S[H])||Y.test(S[H])){S[H]=S[H].replace(Q,ie).replace(Y,ie)}else if(/^(0+([a-z]{2,3}|%))$/.test(S[H])&&$===false){S[H]="0"}else if(/^(0+)/.test(S[H])){S[H]=S[H].replace(/0+/,"0");if(/\d/.test(S[H].charAt(1)))S[H]=S[H].substr(1)}else if(/^url\((?!('|"))/.test(S[H])&&S[H].charCodeAt(S[H].length-1)===41){z=S[H].charAt(S[H].indexOf("url(")+4);if(z!=="@"&&E(z,40)&&E(z,60)){if(i.style.quoteConvert==="double"){S[H]=S[H].replace(/url\(/,'url("').replace(/\)$/,'")')}else{S[H]=S[H].replace(/url\(/,"url('").replace(/\)$/,"')")}}}if(/^(\+|-)?\d+(\.\d+)?(e-?\d+)?\D+$/.test(S[H])){if(!Ce.css.units.has(S[H].replace(/(\+|-)?\d+(\.\d+)?(e-?\d+)?/,c))){S[H]=S[H].replace(/(\+|-)?\d+(\.\d+)?(e-?\d+)?/,A)}}if(/^\w+\(/.test(S[H])&&S[H].charAt(S[H].length-1)===")"&&(S[H].indexOf("url(")!==0||S[H].indexOf("url(")===0&&S[H].indexOf(re)>0)){S[H]=S[H].replace(/,\S/g,P)}H=H+1}while(H<F)}z=S.join(re);return z.charAt(0)+z.slice(1).replace(/\s*(\/|\+|\*)\s*(\d|\$)/,M)}function ee(){const a=[];const y=[];const $=i.style.quoteConvert;let S=r;let Q=0;let Y=c;let H=null;let j=false;function z(){y.push(f[S]);if(de(f[S+1])){do{S=S+1}while(S<v&&de(f[S+1]))}}if(S<v){do{if(n(f[S],34)||n(f[S],39)){if(H===null)H=false;if(a[a.length-1]===f[S]&&(E(f[S-1],92)||u(S-1)===false)){a.pop();if($==="double"){f[S]=ve}else if($==="single"){f[S]=Ae}}else if(E(a[a.length-1],34)&&E(a[a.length-1],39)&&(E(f[S-1],92)||u(S-1)===false)){a.push(f[S]);if($==="double"){f[S]=ve}else if($==="single"){f[S]=Ae}}else if(n(f[S-1],92)&&$!=="none"){if(u(S-1)===true){if($==="double"&&n(f[S],39)){y.pop()}else if($==="single"&&n(f[S],34)){y.pop()}}}else if($==="double"&&n(f[S],34)){f[S]='\\"'}else if($==="single"&&n(f[S],39)){f[S]="\\'"}y.push(f[S])}else if(E(f[S-1],92)||u(S-1)===false){if(n(f[S],40)){if(H===null)H=true;a.push(")");z()}else if(n(f[S],91)){H=false;a.push("]");z()}else if((n(f[S],35)||n(f[S],64))&&n(f[S+1],123)){H=false;y.push(f[S]);S=S+1;a.push("}");z()}else if(f[S]===a[a.length-1]){y.push(f[S]);a.pop()}else{y.push(f[S])}}else{y.push(f[S])}if(s.stack.token==="map"&&a.length===0&&(n(f[S+1],44)||n(f[S+1],41))){if(n(f[S+1],41)&&n(e.token[s.count],40)){s.pop(e);s.stack.pop();y.splice(0,0,"(")}else{break}}if(n(f[S+1],58)){Q=S;if(de(f[Q])){do{Q=Q-1}while(de(f[Q]))}Y=f.slice(Q-6,Q+1).join(c);if(Y.indexOf("filter")===Y.length-6||Y.indexOf("progid")===Y.length-6){Y="filter"}}if(a.length===0){if(n(f[S+1],59)&&u(S+1)===true||n(f[S+1],58)&&E(f[S],58)&&E(f[S+2],58)&&Y!=="filter"&&Y!=="progid"||(n(f[S+1],123)||n(f[S+1],125))||n(f[S+1],47)&&(n(f[S+2],42)||n(f[S+2],47))){Q=y.length-1;if(de(y[Q])){do{Q=Q-1;S=S-1;y.pop()}while(de(y[Q]))}break}if(n(f[S+1],44))break}S=S+1}while(S<v)}r=S;if(s.stack.token==="map"&&n(y[0],40)){l[l.length-1]=l[l.length-1]-1}B=y.join(c).replace(/\s+/g,re).replace(/^\s/,c).replace(/\s$/,c);if(H===true){if(Ce.css.atrules(B)&&i.style.atRuleSpace===true){e.token[s.count]=e.token[s.count].replace(/\s*\(/g," (").replace(/\s*\)\s*/g,") ").replace(/,\(/g,", (")}else{B=B.replace(/\s+\(/g,"(").replace(/\s+\)/g,")").replace(/,\(/g,", (")}}if(b==="colon"&&e.types[s.count-1]==="start"){if(Ce.css.pseudoClasses.has(B)){e.token[s.count]=B=":"+B;b="pseudo";j=true}}else if(s.count>-1&&e.token[s.count].indexOf("extend(")===0){b="pseudo"}else if(H===true&&Ee(B.charAt(0))===false&&/^rgba?\(/.test(B)===false&&B.indexOf("url(")!==0&&(B.indexOf(re)<0||B.indexOf(re)>B.indexOf("("))&&B.charAt(B.length-1)===")"){if(n(e.token[s.count],58)){b="value"}else{B=B.replace(/,\u0020?/g,", ");b="function"}B=T(B)}else if(s.count>-1&&Ae.indexOf(e.token[s.count].charAt(0))>-1&&e.types[s.count]==="variable"){b="item"}else if(n(y[0],64)||y[0]==="$"){if(e.types[s.count]==="colon"&&i.language==="css"&&(e.types[s.count-1]==="property"||e.types[s.count-1]==="variable")){b="value"}else if(s.count>-1){b="item";Y=e.token[s.count];S=Y.indexOf("(");if(n(Y[Y.length-1],41)&&S>0){Y=Y.slice(S+1,Y.length-1);e.token[s.count]=e.token[s.count].slice(0,S+1)+T(Y)+")"}}B=T(B)}else{b="item"}if(j===false){t(c)}else{j=false}}function o(a){let y=s.count;let $=0;let S=c;const Q=[];function Y(){if(s.count<0)return;if(y>0&&(e.types[y]==="comment"||e.types[y]==="ignore")){do{y=y-1;Q.push(e.token[y])}while(y>0&&e.lexer[y]==="style"&&(e.types[y]==="comment"||e.types[y]==="ignore"))}$=y-1;if($>0&&(e.types[$]==="comment"||e.types[$]==="ignore")){do{$=$-1}while($>0&&e.lexer[y]==="style"&&(e.types[$]==="comment"||e.types[$]==="ignore"))}if($<0)$=0;if(y<0)y=0;S=e.token[y][0]}function H(z){return z.replace(/\s*&/," &").replace(/\s*&\s*{/," & {").replace(/\s*>\s*/g," > ").replace(/\s*\+\s*/g," + ")}function j(z){let F=z;const q=e.begin[F];e.token[z]=e.token[z].replace(/\s*&/," &").replace(/\s*&\s*{/," & {").replace(/\s*>\s*/g," > ").replace(/\s*\+\s*/g," + ").replace(/:\s+/g,": ").replace(/^\s+/,c).replace(/\s+$/,c).replace(/\s+::\s+/,"::");if(E(e.token[F],44)&&e.types[F]!=="comment"){e.types[F]="selector"}if(n(e.token[F-1],44)||n(e.token[F-1],58)||e.types[F-1]==="comment"||e.types[F-1]==="pseudo"){if(e.types[F-1]==="colon"&&(e.types[F]==="selector"||e.types[F]==="at_rule")&&(e.types[F-2]==="template"||e.types[F-2]==="liquid_start"||e.types[F-2]==="liquid_else"||e.types[F-2]==="liquid_end")){e.token[F-1]=":"+e.token[F]+re;e.types[F-1]="selector";s.splice({data:e,howmany:1,index:F})}else if(e.types[F-1]==="pseudo"){e.token[F-1]=`${e.token[F-1]}${e.token[F]}`;e.types[F-1]="selector";s.splice({data:e,howmany:1,index:F})}else if(e.types[F-2]==="comment"){e.token[F-1]=H(`${e.token[F-1]}${e.token[F]}`);e.types[F-1]="selector";s.splice({data:e,howmany:1,index:F})}else{do{F=F-1;if(e.begin[F]===q){if(n(e.token[F],59))break;if(E(e.token[F],44)&&e.types[F]!=="comment"){e.types[F]="selector"}if(e.token[F]===":"&&E(e.token[F-1],59)){e.token[F-1]=H(`${e.token[F-1]}:${e.token[F+1]}`);s.splice({data:e,howmany:2,index:F})}}else{break}}while(F>0)}}F=s.count;if(i.style.sortSelectors===true&&n(e.token[F-1],44)){const O=[e.token[F]];do{F=F-1;if(e.types[F]==="comment"||e.types[F]==="ignore"){do{F=F-1}while(F>0&&(e.types[F]==="comment"||e.types[F]==="ignore"))}if(n(e.token[F],44))F=F-1;O.push(e.token[F])}while(F>0&&(n(e.token[F-1],44)||e.types[F-1]==="selector"||e.types[F-1]==="comment"||e.types[F-1]==="ignore"));O.sort();F=s.count;e.token[F]=O.pop();do{F=F-1;if(e.types[F]==="comment"||e.types[F]==="ignore"){do{F=F-1}while(F>0&&(e.types[F]==="comment"||e.types[F]==="ignore"))}if(n(e.token[F],44))F=F-1;e.token[F]=O.pop()}while(F>0&&(n(e.token[F-1],44)||e.types[F-1]==="selector"||e.types[F-1]==="comment"||e.types[F-1]==="ignore"))}y=s.count;Y()}Y();if(a==="start"&&(e.types[y]==="value"||e.types[y]==="variable")){e.types[y]="item"}if(e.lexer[s.count-1]!=="style"||$<0){if(a==="colon"){if(n(S,36)||n(S,64)){e.types[y]="variable"}else if(e.stack[y]!=="global"&&(e.types[y]!=="comment"||e.types[y]!=="ignore")){e.types[y]="property"}}else if(e.lexer[y]==="style"){e.types[y]="selector";j(y)}}else if(a==="start"&&e.types[y]==="function"&&e.lexer[y]==="style"){e.types[y]="selector";j(y)}else if(e.types[y]==="item"&&e.lexer[y]==="style"){if(a==="start"){j(y);e.types[y]="selector";if(e.token[y]===":")e.types[$]="selector";if(e.token[y].indexOf("=â€œ")>0){s.error=`Invalid Quote (â€œ, \\201c) used on line number ${s.lineNumber}`}else if(e.token[y].indexOf("=â€")>0){s.error=`Invalid Quote (â€, \\201d) used on line number ${s.lineNumber}`}}else if(a==="end"){if(n(S,36)||n(S,64)){e.types[y]="variable"}else{e.types[y]="value"}e.token[y]=T(e.token[y])}else if(a==="separator"){if(e.types[$]==="colon"||n(e.token[$],44)||n(e.token[$],123)){if(E(f[r],59)&&(e.types[$]==="selector"||e.types[$]==="at_rule"||n(e.token[$],123))){e.types[y]="selector";j(y)}else if(n(e.token[y],36)||n(e.token[y],64)){e.types[y]="variable"}else{e.types[y]="value"}e.token[y]=T(e.token[y]);if(e.token[y].charAt(0)==="â€œ"){s.error=`Invalid Quote (â€œ, \\201c) used on line number ${s.lineNumber}`}else if(e.token[y].charAt(0)==="â€"){s.error=`Invalid (â€, \\201d) used on line number ${s.lineNumber}`}}else{if(n(S,36)||n(S,64)){e.types[y]="variable"}else if(e.types[$]==="value"||e.types[$]==="variable"){e.token[$]=e.token[$]+e.token[y];s.pop(e)}else{e.types[y]="value"}}}else if(a==="colon"){if(n(S,36)||n(S,64)){e.types[y]="variable"}else{e.types[y]="property"}}else if(n(e.token[$],64)&&(e.types[$-2]!=="variable"&&e.types[$-2]!=="property"||e.types[$-1]==="separator")){e.types[$]="variable";b="variable";e.token[$]=T(e.token[$])}else if(a==="comment"){if(n(S,46)||n(S,35)){e.types[y]="selector"}}}}function p(){let a=s.count;do{a=a-1}while(a>0&&e.types[a]==="comment");if(e.token[a]===";")return;s.splice({data:e,howmany:0,index:a+1,record:{begin:s.stack.index,ender:-1,lexer:"style",lines:s.lineOffset,stack:s.stack.token,token:";",types:"separator"}})}function L(a,y){const $=[];let S=c;let Q=c;let Y=0;let H=a.length;function j(z){const F=s.count>0?e.types[s.count-1]:e.types[s.count];if(b==="item"){if(F==="colon"){e.types[s.count]="value"}else{o(F)}}if(n(f[r+1],32));b=z;if(b.indexOf("start")>-1||b.indexOf("else")>-1){t(B)}else{t(c)}}h[h.length-1]=true;if(r<v){do{$.push(f[r]);if(S===c){if(n(f[r],34)){S=ve}else if(n(f[r],39)){S=Ae}else if(n(f[r],47)){if(n(f[r+1],47)){S="/"}else if(n(f[r+1],42)){S="*"}}else if(f[r+1]===y.charAt(0)){do{Y=Y+1;r=r+1;$.push(f[r])}while(r<v&&Y<y.length&&f[r+1]===y.charAt(Y));if(Y===y.length){S=$.join(c);if(de(S.charAt(H))){do{H=H+1}while(de(S.charAt(H)))}Y=H;do{Y=Y+1}while(Y<y.length&&!de(S.charAt(Y)));if(Y===S.length)Y=Y-y.length;if(a==="{%"){if(n(S[2],45)){S=S.replace(/^{%-\s*/,"{%- ");S=S.endsWith("-%}")?S.replace(/\s*-%}$/," -%}"):S.replace(/\s*%}$/," %}");Q=S.slice(4)}else{S=S.replace(/^{%\s*/,"{% ");S=S.endsWith("-%}")?S.replace(/\s*-%}$/," -%}"):S.replace(/\s*%}$/," %}");Q=S.slice(3)}}if(a==="{{"){if(n(S[2],45)){S=S.replace(/^{{-\s*/,"{{- ");S=S.endsWith("-}}")?S.replace(/\s*-}}$/," -}}"):S.replace(/\s*}}$/," }}")}else{S=S.replace(/^{{\s*/,"{{ ");S=S.endsWith("-}}")?S.replace(/\s*-}}$/," -}}"):S.replace(/\s*%}}$/," }}")}}if(b==="item"&&e.types[s.count-1]==="colon"&&(e.types[s.count-2]==="property"||e.types[s.count-2]==="variable")){b="value";e.types[s.count]="value";if(Number.isNaN(Number(e.token[s.count]))===true&&e.token[s.count].charAt(e.token[s.count].length-1)!==")"){e.token[s.count]=e.token[s.count]+S}else{e.token[s.count]=e.token[s.count]+re+S}return}B=S;if(a==="{%"){const z=Array.from(Ce.liquid.tags);let F=z.length-1;Q=Q.slice(0,Q.indexOf(re));if(Q.indexOf("(")>0){Q=Q.slice(0,Q.indexOf("("))}if(Ce.liquid.else.has(Q)){j("liquid_else");return}F=z.length-1;if(F>-1){do{if(Q===z[F]){j("liquid_start");return}if(Q==="end"+z[F]){j("liquid_end");return}F=F-1}while(F>-1)}}else if(a==="{{"){let z=S.slice(2);const F=z.length;let q=0;do{q=q+1}while(q<F&&de(z.charAt(q))===false&&z.charCodeAt(H)!==40);z=z.slice(0,q);if(n(z[z.length-2],125))z=z.slice(0,z.length-2);if(z==="end"){j("liquid_end");return}}j("liquid");return}Y=0}}else if(S===f[r]){if(n(S,34)||n(S,39)){S=c}else if(n(S,47)&&(f[r]==="\r"||n(f[r],10))){S=c}else if(n(S,42)&&n(f[r+1],47)){S=c}}r=r+1}while(r<v)}}function N(a){let y;if(a){y=pt({chars:f,start:r,end:v,lexer:"style",begin:"//",ender:he});B=y[0];b=ct.test(B)?"ignore":"comment"}else{y=Ye({chars:f,start:r,end:v,lexer:"style",begin:"/*",ender:"*/"});B=y[0];b=zt.test(B)?"ignore":"comment"}t(c);r=y[1]}function ue(){const a=s.lineOffset;const y={data:{margin:[c,c,c,c,false],padding:[c,c,c,c,false]},last:{margin:0,padding:0},removes:[]};const $=s.stack.index;function S(j){if(e.token[Y-2]===j){const z=e.token[Y].replace(/\s*!important\s*/g,c).split(re);const F=z.length;if(e.token[Y].indexOf("!important")>-1)y.data[j[4]]=true;if(F>3){if(y.data[j][0]===c)y.data[j][0]=z[0];if(y.data[j][1]===c)y.data[j][1]=z[1];if(y.data[j][2]===c)y.data[j][2]=z[2];if(y.data[j][3]===c)y.data[j][3]=z[3]}else if(F>2){if(y.data[j][0]===c)y.data[j][0]=z[0];if(y.data[j][1]===c)y.data[j][1]=z[1];if(y.data[j][2]===c)y.data[j][2]=z[2];if(y.data[j][3]===c)y.data[j][3]=z[1]}else if(F>1){if(y.data[j][0]===c)y.data[j][0]=z[0];if(y.data[j][1]===c)y.data[j][1]=z[1];if(y.data[j][2]===c)y.data[j][2]=z[0];if(y.data[j][3]===c)y.data[j][3]=z[1]}else{if(y.data[j][0]===c)y.data[j][0]=z[0];if(y.data[j][1]===c)y.data[j][1]=z[0];if(y.data[j][2]===c)y.data[j][2]=z[0];if(y.data[j][3]===c)y.data[j][3]=z[0]}}else if(e.token[Y-2]===`${j}-bottom`){if(y.data[j][2]===c)y.data[j][2]=e.token[Y]}else if(e.token[Y-2]===`${j}-left`){if(y.data[j][3]===c)y.data[j][3]=e.token[Y]}else if(e.token[Y-2]===`${j}-right`){if(y.data[j][1]===c)y.data[j][1]=e.token[Y]}else if(e.token[Y-2]===`${j}-top`){if(y.data[j][0]===c)y.data[j][0]=e.token[Y]}else{return}y.removes.push([Y,j]);y.last[j]=Y}function Q(){let j=0;let z=c;const F=/^(0+([a-z]+|%))/;const q=y.removes.length;const O=y.data.margin[0]!==c&&y.data.margin[1]!==c&&y.data.margin[2]!==c&&y.data.margin[3]!==c;const M=y.data.padding[0]!==c&&y.data.padding[1]!==c&&y.data.padding[2]!==c&&y.data.padding[3]!==c;function ie(P){if(F.test(y.data[P][0])===true)y.data[P][0]="0";if(F.test(y.data[P][1])===true)y.data[P][1]="0";if(F.test(y.data[P][2])===true)y.data[P][2]="0";if(F.test(y.data[P][3])===true)y.data[P][3]="0";if(y.data[P][0]===y.data[P][1]&&y.data[P][0]===y.data[P][2]&&y.data[P][0]===y.data[P][3]){z=y.data[P][0]}else if(y.data[P][0]===y.data[P][2]&&y.data[P][1]===y.data[P][3]&&y.data[P][0]!==y.data[P][1]){z=`${y.data[P][0]} ${y.data[P][1]}`}else if(y.data[P][1]===y.data[P][3]&&y.data[P][0]!==y.data[P][2]){z=`${y.data[P][0]} ${y.data[P][1]} ${y.data[P][2]}`}else{z=`${y.data[P][0]} ${y.data[P][1]} ${y.data[P][2]} ${y.data[P][3]}`}if(y.data[P[4]]===true)z=`${z.replace(" !important",c)} !important`;if(y.last[P]>s.count){j=$<1?1:$+1;do{if(e.begin[j]===$&&e.types[j]==="value"&&e.token[j-2].indexOf(P)===0){y.last[P]=j;break}j=j+1}while(j<s.count)}e.token[y.last[P]]=z;e.token[y.last[P]-2]=P}if(q>1&&(O===true||M===true)){do{if(y.removes[j][0]!==y.last.margin&&y.removes[j][0]!==y.last.padding&&(O===true&&y.removes[j][1]==="margin"||M===true&&y.removes[j][1]==="padding")){s.splice({data:e,howmany:e.types[y.removes[j][0]+1]==="separator"?4:3,index:y.removes[j][0]-2})}j=j+1}while(j<q-1)}if(O===true)ie("margin");if(M===true)ie("padding");if(H===true){if($<0){s.error="Brace mismatch. There appears to be more closing braces than starting braces."}else{ft($,s.count+1)}}}let Y=s.count;let H=false;do{Y=Y-1;if(e.begin[Y]===$){if(e.types[Y]==="value"&&e.types[Y-2]==="property"){if(e.token[Y-2].indexOf("margin")===0){S("margin")}else if(e.token[Y-2].indexOf("padding")===0){S("padding")}}}else{H=true;Y=e.begin[Y]}}while(Y>$);Q();s.lineOffset=a}function se(){s.lineOffset=1;do{if(n(f[r],10)){s.lineIndex=r;s.lineOffset=s.lineOffset+1;s.lineNumber=s.lineNumber+1}if(de(f[r+1])===false)break;r=r+1}while(r<v)}do{if(de(f[r])){se()}else if(n(f[r],47)&&n(f[r+1],42)){N(false)}else if(n(f[r],47)&&n(f[r+1],47)){N(true)}else if(n(f[r],123)&&n(f[r+1],37)){L("{%","%}")}else if(n(f[r],123)&&n(f[r+1],123)){L("{{","}}")}else if(n(f[r],123)||n(f[r],40)&&n(e.token[s.count],58)&&e.types[s.count-1]==="variable"){o("start");b="start";B=f[r];if(n(f[r],40)){t("map");l.push(0)}else if(e.types[s.count]==="at_rule"||e.types[s.count]==="selector"||e.types[s.count]==="variable"){if(n(e.token[s.count],64)){e.types[s.count]="at_rule";t(e.token[s.count])}else{t(e.token[s.count])}}else if(e.types[s.count]==="colon"){t(e.token[s.count-1])}else{t("block")}h.push(false)}else if(n(f[r],125)||f[r]===")"&&s.stack.token==="map"&&l[l.length-1]===0){if(n(f[r],125)&&n(e.token[s.count-1],123)&&e.types[s.count]==="item"&&e.token[s.count-2]!==void 0&&e.token[s.count-2].charCodeAt(e.token[s.count-2].length-1)===64){e.token[s.count-2]=e.token[s.count-2]+"{"+e.token[s.count]+"}";s.pop(e);s.pop(e);s.stack.pop()}else{if(n(f[r],41))l.pop();o("end");if(n(f[r],125)&&E(e.token[s.count],59)){if(e.types[s.count]==="value"||e.types[s.count]==="function"||e.types[s.count]==="variable"&&(n(e.token[s.count-1],58)||n(e.token[s.count-1],59))){if(i.style.correct===true){B=";"}else{B="x;"}b="separator";t(c)}else if(e.types[s.count]==="comment"){p()}}h.pop();B=f[r];b="end";if(n(f[r],125))ue();if(i.style.sortProperties===true&&n(f[r],125))nt(e);t(c)}}else if(n(f[r],59)||n(f[r],44)){if(e.types[s.count-1]==="selector"||e.types[s.count-1]==="at_rule"||e.types[s.count]!=="function"&&n(e.token[s.count-1],125)){o("start")}else{o("separator")}if(e.types[s.count]!=="separator"&&u(r)===true){B=f[r];b="separator";t(c)}}else if(s.count>-1&&n(f[r],58)&&e.types[s.count]!=="end"){o("colon");B=":";b="colon";t(c)}else{if(s.stack.token==="map"&&n(f[r],40)){l[l.length-1]=l[l.length-1]+1}ee()}r=r+1}while(r<v);if(i.style.sortProperties===true)nt(e);return e}function qt(e){if(e===1)return At();if(e===3)return tn();if(e===2)return en()}function nn(){const{rules:e}=s;let i=s.start;let d=-1;let f=0;let v=0;let l=isNaN(e.indentLevel)?0:e.indentLevel;const h=s.data;const r=s.ender<1||s.ender>h.token.length?h.token.length:s.ender+1;const b={};const B=e.language==="jsx"||e.language==="tsx";const t=new Map;const u=s.start>0?Array(s.start).fill(0,0,s.start):[];const T=ie();const ee=a();const o=[];function p(A,_){return h.types[A]===_}function L(A,_){return h.token[A]===_}function N(A,_){return A>-1&&(h.types[A]||c).indexOf(_)}function ue(A){const _=[];const J=e.preserveLine+1;const G=Math.min(h.lines[i+1]-1,J);let ne=0;if(A<0)A=0;do{_.push(s.crlf);ne=ne+1}while(ne<G);if(A>0){ne=0;do{_.push(ee);ne=ne+1}while(ne<A)}return _.join(c)}function se(){let A=h.token[i].split(s.crlf);const _=h.lines[i+1];if(p(i,"comment")&&(n(h.token[i][1],37)&&e.liquid.preserveComment===false||n(h.token[i][1],37)===false&&e.markup.preserveComment===false)){A=A.map((X=>X.trimStart()))}const J=T[i-1]>-1?p(i,"attribute")?T[i-1]+1:T[i-1]:(()=>{let X=i-1;let oe=X>-1&&N(X,"start")>-1;if(T[i]>-1&&p(i,"attribute"))return T[i]+1;do{X=X-1;if(T[X]>-1){return p(i,"content")&&oe===false?T[X]:T[X]+1}if(N(X,"start")>-1)oe=true}while(X>0);return X===-2?0:1})();let G=0;h.lines[i+1]=0;const ne=A.length-1;do{if(p(i,"comment")){if(G===0&&(n(h.token[i][1],37)&&e.liquid.commentNewline===true||n(h.token[i][1],37)===false&&e.markup.commentNewline===true)){if(e.preserveLine===0){o.push(ue(J))}else{if(o.length>0&&o[o.length-1].lastIndexOf(he)+1<2){o.push(ue(J))}}}if(A[G]!==c){if(G>0&&(n(h.token[i][1],37)&&e.liquid.commentIndent===true||n(h.token[i][1],37)===false&&e.markup.commentIndent===true)){o.push(ee)}if(A[G+1].trimStart()!==c){o.push(A[G],ue(J))}else{o.push(A[G],he)}}else{if(A[G+1].trimStart()===c){o.push(he)}else{o.push(ue(J))}}}else{o.push(A[G]);o.push(ue(J))}G=G+1}while(G<ne);h.lines[i+1]=_;o.push(A[ne]);if(p(i,"comment")&&(p(i+1,"liquid_end")||p(i-1,"liquid_end"))){o.push(ue(T[i]))}else if(T[i]===-10){o.push(re)}else if(T[i]>1){o.push(ue(T[i]))}else{o.push(ue(T[i]))}}function a(){const A=[e.indentChar];const _=e.indentSize-1;let J=0;if(J<_){do{A.push(e.indentChar);J=J+1}while(J<_)}return A.join(c)}function y(){let A=i+1;let _=0;if(p(A,void 0))return A-1;if(p(A,"comment")||i<r-1&&N(A,"attribute")>-1){do{if(p(A,"jsx_attribute_start")){_=A;do{if(p(A,"jsx_attribute_end")&&h.begin[A]===_)break;A=A+1}while(A<r)}else if(p(A,"comment")===false&&N(A,"attribute")<0)return A;A=A+1}while(A<r)}return A}function $(){const A=/(?!=)\/?>$/;const _=h.token[i];const J=A.exec(_);if(J===null)return;let G=i+1;let ne=false;let X=e.markup.selfCloseSpace===true&&J!==null&&J[0]==="/>"?re:c;h.token[i]=_.replace(A,c);do{if(p(G,"jsx_attribute_end")&&h.begin[h.begin[G]]===i){ne=false}else if(h.begin[G]===i){if(p(G,"jsx_attribute_start")){ne=true}else if(N(G,"attribute")<0&&ne===false){break}}else if(ne===false&&(h.begin[G]<i||N(G,"attribute")<0)){break}G=G+1}while(G<r);if(p(G-1,"comment_attribute"))X=ue(T[G-2]-1);h.token[G-1]=`${h.token[G-1]}${X}${J[0]}`;if(p(G,"comment")&&h.lines[i+1]<2){T[i]=-10}}function S(){if(p(i,"end")===false&&E(h.token[i],60)&&t.get(h.begin[i])>=2&&Qe(h.token[i],62)){t.delete(h.begin[i]);const A=ue(T[i-1]-1).replace(/\n+/,he);const _=`${h.token[i].slice(0,-1)}${A}>`;if(p(h.begin[i],"singleton")){if(n(h.token[i][h.token[i].length-2],47)){h.token[i]=`${h.token[i].slice(0,-2)}${A}/>`}else{h.token[i]=_}}else{h.token[i]=_}}}function Q(){const A=h.begin[i];let _=i;do{_=_-1;if(L(_,"</li>")&&L(_-1,"</a>")&&h.begin[h.begin[_]]===A&&h.begin[_-1]===h.begin[_]+1){_=h.begin[_]}else{return}}while(_>A+1);_=i;do{_=_-1;if(p(_+1,"attribute")){u[_]=-10}else if(L(_,"</li>")===false){u[_]=-20}}while(_>A+1)}function Y(){let A=i;let _=false;if(h.lines[i+1]===0&&e.markup.forceIndent===false){do{if(h.lines[A]>0){_=true;break}A=A-1}while(A>d);A=i}else{_=true}if(_===true){if(p(h.begin[A]-1,"liquid")){u[h.begin[A]-1]=l}const J=p(f,"end")||p(f,"liquid_end")?l+1:l;do{u.push(J);A=A-1}while(A>d);if(J===l+1)u[i]=l;if(p(A,"attribute")||p(A,"liquid_attribute")||p(A,"jsx_attribute_start")){u[h.begin[A]]=J}else{u[A]=J}}else{do{u.push(-20);A=A-1}while(A>d);u[A]=-20}d=-1}function H(){let A=l;if(e.markup.forceIndent===true||e.markup.forceAttribute===true){u.push(l);return}if(f<r&&(N(f,"end")>-1||N(f,"start")>-1)&&h.lines[f]>0){u.push(l);A=A+1;if(i>0&&p(i,"singleton")&&N(i-1,"attribute")>-1&&p(h.begin[i-1],"singleton")){if(h.begin[i]<0||p(h.begin[i-1],"singleton")&&h.begin[h.ender[i]-1]!==i){u[i-1]=l}else{u[i-1]=l+1}}}else if(i>0&&p(i,"singleton")&&N(i-1,"attribute")>-1){u[i-1]=l;v=h.token[i].length;u.push(-10)}else if(h.lines[f]===0){u.push(-20)}else if((e.wrap===0||i<r-2&&h.token[i]!==void 0&&h.token[i+1]!==void 0&&h.token[i+2]!==void 0&&h.token[i].length+h.token[i+1].length+h.token[i+2].length+1>e.wrap&&N(i+2,"attribute")>-1||h.token[i]!==void 0&&h.token[i+1]!==void 0&&h.token[i].length+h.token[i+1].length>e.wrap)&&(p(i+1,"singleton")||p(i+1,"liquid"))){u.push(l)}else{v=v+1;u.push(-10)}if(i>0&&N(i-1,"attribute")>-1&&h.lines[i]<1){u[i-1]=-20}if(v>e.wrap){let _=i;let J=Math.max(h.begin[i],0);if(p(i,"content")&&e.markup.preserveText===false){let G=0;const ne=h.token[i].replace(/\s+/g,re).split(re);do{_=_-1;if(u[_]<0){G=G+h.token[_].length;if(u[_]===-10)G=G+1}else{break}}while(_>0);_=0;J=ne.length;do{if(ne[_].length+G>e.wrap){ne[_]=s.crlf+ne[_];G=ne[_].length}else{ne[_]=` ${ne[_]}`;G=G+ne[_].length}_=_+1}while(_<J);if(n(ne[0],32)){h.token[i]=ne.join(c).slice(1)}else{u[i-1]=A;h.token[i]=ne.join(c).replace(s.crlf,c)}if(h.token[i].indexOf(s.crlf)>0){v=h.token[i].length-h.token[i].lastIndexOf(s.crlf)}}else{do{_=_-1;if(u[_]>-1){v=h.token[i].length;if(h.lines[i+1]>0)v=v+1;return}if(N(_,"start")>-1){v=0;return}if(h.lines[_+1]>0&&(p(_,"attribute")===false||p(_,"attribute")&&p(_+1,"attribute"))){if(p(_,"singleton")===false||p(_,"attribute")&&p(_+1,"attribute")){v=h.token[i].length;if(h.lines[i+1]>0)v=v+1;break}}}while(_>J);u[_]=A}}}function j(){const A=i;if(h.types[A-1]==="script_start"&&n(h.token[A-1],123)){u[A-1]=-20}do{if(h.lexer[i+1]==="markup"&&h.begin[i+1]<A&&p(i+1,"start")===false&&p(i+1,"singleton")===false)break;u.push(0);i=i+1}while(i<r);b[A]=i;if(h.types[i+1]==="script_end"&&h.token[i+1]==="}"){u.push(-20)}else{if(h.types[i+1]==="liquid_end"){u.push(l-1)}else{u.push(l-1)}}f=y();if(h.lexer[f]==="markup"&&h.stack[i].indexOf("attribute")<0&&(h.types[f]==="end"||h.types[f]==="liquid_end")){l=l-1}}function z(A){const _=h.token[A].replace(/\s+/g,re).split(re);const J=_.length;let G=1;let ne=_[0].length;do{if(ne+_[G].length>e.wrap){ne=_[G].length;_[G]=s.crlf+_[G]}else{_[G]=` ${_[G]}`;ne=ne+_[G].length}G=G+1}while(G<J);h.token[A]=_.join(c)}function F(){const A=i-1;let _=i;let J=false;let G=false;let ne=N(A+1,"end");let X=h.token[A].length+1;let oe=0;let fe=(()=>{if(N(i,"start")>0){let ge=i;do{if(p(ge,"end")&&h.begin[ge]===i){if(ge<r-1&&N(ge+1,"attribute")>-1){J=true;break}}ge=ge+1}while(ge<r)}else if(i<r-1&&N(i+1,"attribute")>-1){J=true}if(p(f,"end")||p(f,"liquid_end")){return p(A,"singleton")?l+2:l+1}if(p(A,"singleton"))return l+1;return l})();if(J===false&&p(i,"comment_attribute")){u.push(l);u[A]=h.types[A]==="singleton"?l+1:l;return}function ye(){if(e.markup.forceAttribute===false&&h.lines[i]===1){u.push(-10)}else{if(e.markup.forceAttribute===true||e.markup.forceAttribute>=1){if(e.liquid.indentAttributes===true){if(p(i-1,"liquid_attribute_start"))u[i-1]=fe+oe;u.push(fe+oe)}else{u.push(fe)}}else{u.push(-10)}}}if(fe<1)fe=1;ne=0;do{ne=ne+1}while(N(i+ne,"attribute")>-1&&(p(i+ne,"end")===false||p(i+ne,"singleton")===false||p(i+ne,"start")===false||p(i+ne,"comment")===false));do{v=v+h.token[i].length+1;if(h.types[i].indexOf("attribute")>0){if(p(i,"comment_attribute")){u.push(fe)}else if(N(i,"start")>0&&N(i,"liquid")<0){G=true;if(i<r-2&&h.types[i+2].indexOf("attribute")>0){u.push(-20);i=i+1;b[i]=i}else{if(A===i-1&&J===false){if(B){u.push(-20)}else{u.push(fe)}}else{if(B){u.push(-20)}else{u.push(fe+1)}}if(h.lexer[i+1]!=="markup"){i=i+1;j()}}}else if(e.liquid.indentAttributes===true){if(p(i,"liquid_attribute_start")){if(oe>0){u.push(fe+oe)}else{u.push(fe)}oe=oe+1}else if(p(i,"liquid_attribute_else")){u[i-1]=fe+oe-1}else if(p(i,"liquid_attribute_end")){oe=oe-1;u[i-1]=fe+oe}else{ye()}}else if(N(i,"end")>0&&p(i,"liquid_attribute_end")===false){if(u[i-1]!==-20)u[i-1]=u[h.begin[i]]-1;if(h.lexer[i+1]!=="markup"){u.push(-20)}else{u.push(fe)}}else if(N(i,"liquid_attribute")>-1){X=X+h.token[i].length+1;if(e.markup.preserveAttributes===true){u.push(-10)}else if(e.markup.forceAttribute===true||e.markup.forceAttribute>=1||G===true||i<r-1&&N(i+1,"attribute")>-1){ye()}else{u.push(-10)}}else{u.push(fe)}}else if(p(i,"attribute")){X=X+h.token[i].length+1;if(e.markup.preserveAttributes===true){u.push(-10)}else if(e.markup.forceAttribute===true||e.markup.forceAttribute>=1||G===true||i<r-1&&N(i+1,"attribute")>-1){ye()}else{u.push(-10)}}else if(h.begin[i]<A+1){break}if(e.wrap===0){h.token[i]=h.token[i].replace(/ +/g,re).replace(/\n+/g,he)}i=i+1}while(i<r);i=i-1;if(N(i,"liquid")<0&&N(i,"end")>-1&&N(i,"attribute")>0&&p(A,"singleton")===false&&u[i-1]>0&&J===true){u[i-1]=u[i-1]-1}if(u[i]!==-20){if(B===true&&N(A,"start")>-1&&p(i+1,"script_start")){u[i]=fe}else{if(L(i,"/")&&u[i-1]!==10){u[i-1]=-10}else{u[i]=u[A]}}}if(e.markup.forceAttribute===true){v=0;u[A]=fe;if(ne>=2&&e.markup.delimiterForce===true){t.set(A,ne)}}else if(e.markup.forceAttribute>=1){if(ne>=e.markup.forceAttribute){u[A]=fe;let ge=i-1;do{if(p(ge,"liquid")&&u[ge]===-10){u[ge]=fe}else if(p(ge,"attribute")&&u[ge]===-10){u[ge]=fe}ge=ge-1}while(ge>A);if(e.markup.delimiterForce===true&&ne>=2){t.set(A,ne)}}else{u[A]=-10}}else{u[A]=-10}if(e.markup.preserveAttributes===true||L(A,"<%xml%>")||L(A,"<?xml?>")){v=0;return}_=i;if(_>A+1){if(e.markup.selfCloseSpace===false)X=X-1;if(X>e.wrap&&e.wrap>0&&e.markup.forceAttribute===false){if(e.markup.forceLeadAttribute===true){u[A]=fe;_=_-1}v=h.token[i].length;do{if(h.token[_].length>e.wrap&&de(h.token[_]))z(_);if(N(_,"liquid")>-1&&u[_]===-10){u[_]=fe}else if(p(_,"attribute")&&u[_]===-10){u[_]=fe}_=_-1}while(_>A)}}else if(e.wrap>0&&p(i,"attribute")&&h.token[i].length>e.wrap&&de(h.token[i])){z(i)}}function q(A,_){let J=1;let G=c;let ne=c;let X=A;do{ne=_[J].trimStart();JSON.stringify(_[J]);if(J===_.length-1){_[J]=X.slice(1)+ne;break}if(ne.indexOf(re)>-1){G=ne.slice(0,ne.indexOf(re))}else{G=ne.trimEnd()}if(Ce.liquid.tags.has(G)){_[J]=X+ne;X+=We(e.indentSize)}else if(Ce.liquid.else.has(G)){_[J]=X.slice(e.indentSize)+ne}else if(ne.startsWith("end")){X=X.slice(e.indentSize);_[J]=X+ne}else{_[J]=X+ne}J=J+1}while(J<_.length);h.token[i]=_.join(he)}function O(){const A=h.token[i].split(he);const _=n(h.token[i][2],45);let J=0;let G=0;let ne=0;let X=c;let oe=c;let fe=false;if(u.length>=2){if(u[u.length-2]<0){J=u[u.length-1]+1}else{J=u[u.length-2]+1}}else if(u.length===1){J=u[u.length-1]+1}let ye=_?We(J*e.indentSize):We(J*e.indentSize-1);if(je(h.token[i])==="liquid")return q(ye,A);do{if(G===0){X=A[G].trimEnd();if(X.endsWith(",")){oe=","+re;A[G]=X.slice(0,-1)}else if(X.endsWith("|")){oe="|"+re;A[G]=X.slice(0,-1)}else if(/^{[{%]-?$/.test(X)){A[G]=X;G=G+1;do{X=A[G].trim();if(X.length>0)break;A.splice(G,1);if(G>A.length)break}while(G<A.length);const ge=A[A.length-1].trim();if(/^-?[%}]}$/.test(ge)){ne=1;if(_){A[G]=ye+X;A[A.length-1]=ye.slice(2)+ge;ye=ye.slice(2)+We(e.indentSize)}else{A[G]=ye+We(e.indentSize)+X;A[A.length-1]=ye.slice(1)+ge;ye=ye+We(e.indentSize)}}else{A[G]=ye+We(e.indentSize)+X}}else if(X.endsWith(",")===false&&n(A[G+1].trimStart(),44)&&e.liquid.lineBreakSeparator==="after"){A[G]=X+","}G=G+1;continue}X=A[G].trim();if(n(X,44)&&e.liquid.lineBreakSeparator==="after"){if(X.endsWith("%}")){X=re+X.slice(1)}else{X=re+X.slice(1)+","}}if(X.length===0){A.splice(G,1);continue}if(G===A.length-1&&ne===1)break;if(X.endsWith(",")&&e.liquid.lineBreakSeparator==="before"){if(fe&&n(A[G-1].trimStart(),124)){A[G]=ye+re+re+X.slice(0,-1);oe=re+re+","+re}else{if(fe){A[G]=ye+oe+X.slice(0,-1);oe=re+re+","+re;if(A[G+1].trim().startsWith("|"))fe=false}else{A[G]=ye+oe+X.slice(0,-1);oe=","+re}}}else if(X.endsWith("|")){A[G]=ye+oe+X.slice(0,-1);oe=ye+"|"+re}else if(X.endsWith(":")){if(A[G+1].endsWith(","))fe=true;A[G]=ye+oe+X;oe=c}else{if(fe){A[G]=ye+oe+X;oe=c;if(A[G+1].trim().startsWith("|"))fe=false}else{A[G]=ye+oe+X;oe=c}}G=G+1}while(G<A.length);if(e.liquid.normalizeSpacing===true){h.token[i]=A.join(he).replace(/\s*-?[%}]}$/,(ge=>ge.replace(Ft,re)))}else{const ge=We(h.lines[i]-1===-1?e.indentSize:h.lines[i]-1);h.token[i]=A.join(he).replace(/\s*-?[%}]}$/,(C=>C.replace(st,ge)))}}function M(A){return p(A,"liquid")&&h.token[A].indexOf(s.crlf)>0}function ie(){do{if(h.lexer[i]==="markup"){if(p(i,"doctype"))u[i-1]=l;if(N(i,"attribute")>-1){F()}else if(p(i,"comment")){if(d<0)d=i;Y()}else if(p(i,"comment")===false){f=y();if(p(f,"end")||p(f,"liquid_end")){if(l>-1)l=l-1;if(p(f,"liquid_end")&&p(h.begin[f]+1,"liquid_else")){if(l>-1)l=l-1}if(L(i,"</ol>")||L(i,"</ul>")||L(i,"</dl>")){Q()}}if(p(i,"script_end")&&p(f,"end")){if(h.lines[f]<1){u.push(-20)}else if(h.lines[f]>1){u.push(l)}else{u.push(-10)}}else if((e.markup.forceIndent===false||e.markup.forceIndent===true&&p(f,"script_start"))&&(p(i,"content")||p(i,"singleton")||p(i,"liquid"))){v=v+h.token[i].length;if(h.lines[f]>0&&p(f,"script_start")){u.push(-10)}else if(e.wrap>0&&(N(i,"liquid")<0||f<r&&N(i,"liquid")>-1&&N(f,"liquid")<0)){H()}else if(f<r&&(N(f,"end")>-1||N(f,"start")>-1)&&(h.lines[f]>0||N(i,"liquid_")>-1)){u.push(l);if(M(i))O()}else if(h.lines[f]===0){u.push(-20);if(M(i))O()}else if(h.lines[f]===1){u.push(-10)}else{u.push(l);if(M(i))O()}}else if(p(i,"start")||p(i,"liquid_start")){l=l+1;if(B===true&&L(i+1,"{")){if(h.lines[f]===0){u.push(-20)}else if(h.lines[f]>1){u.push(l)}else{u.push(-10)}}else if(p(i,"start")&&p(f,"end")||p(i,"liquid_start")&&p(f,"liquid_end")){u.push(-20)}else if(p(i,"start")&&p(f,"script_start")){u.push(-10)}else if(e.markup.forceIndent===true){u.push(l)}else if(h.lines[f]===0&&(p(f,"content")||p(f,"singleton")||p(i,"start")&&p(f,"liquid"))){u.push(-20)}else{u.push(l)}}else if(e.markup.forceIndent===false&&h.lines[f]===0&&(p(f,"content")||p(f,"singleton"))){u.push(-20)}else if(p(i+2,"script_end")){u.push(-20)}else if(p(i,"liquid_else")){u[i-1]=l-1;if(p(f,"liquid_end")){u[i-1]=l-1}u.push(l)}else if(e.markup.forceIndent===true&&(p(i,"content")&&(p(f,"liquid")||p(f,"content"))||p(i,"liquid")&&(p(f,"content")||p(f,"liquid")))){if(h.lines[f]<1){u.push(-20)}else if(h.lines[f]>1){u.push(l)}else{u.push(-10)}}else if(p(i,"liquid_start_bad")){l=l+1;u.push(l)}else if(p(f,"liquid_end_bad")){l=l-1;u.push(l)}else{if(p(i,"liquid")&&M(i))O();u.push(l)}}if(p(i,"content")===false&&p(i,"singleton")===false&&p(i,"liquid")===false&&p(i,"attribute")===false){v=0}}else{v=0;j()}i=i+1}while(i<r);return u}function P(){i=s.start;let A=e.indentLevel;do{if(h.lexer[i]==="markup"){if((p(i,"start")||p(i,"singleton")||p(i,"xml"))&&N(i,"attribute")<0&&i<r-1&&h.types[i+1]!==void 0&&N(i+1,"attribute")>-1){$()}if(L(i,void 0)===false&&h.token[i].indexOf(s.crlf)>0&&(p(i,"content")&&e.markup.preserveText===false||p(i,"comment")||p(i,"attribute"))){se()}else if(p(i,"comment")&&(n(h.token[i][1],37)&&e.liquid.preserveComment===false&&e.liquid.commentNewline===true||n(h.token[i][1],37)===false&&e.markup.preserveComment===false&&e.markup.commentNewline===true)&&(e.preserveLine===0||o.length>0&&o[o.length-1].lastIndexOf(he)+1<2)){o.push(ue(T[i]),h.token[i],ue(T[i]))}else if(N(i,"_preserve")>-1){o.push(h.token[i])}else if(p(i+1,"ignore")&&p(i+2,"ignore")){o.push(h.token[i],ue(T[i]).replace(rt,c),h.token[i+1],We(h.lines[i+2]-1===0?1:h.lines[i+2]-1,he));i=i+1}else{A=T[i];if(e.markup.delimiterForce===true)S();o.push(h.token[i]);if(T[i]===-10&&i<r-1){o.push(re)}else if(T[i]>-1){if(N(i+1,"_preserve")<0){o.push(ue(T[i]))}}}}else{s.start=i;s.ender=b[i];const _=s.external(A);if(e.language==="jsx"&&(h.types[i-1]==="template_string_end"||h.types[i-1]==="jsx_attribute_start"||h.types[i-1]==="script_start")){o.push(_)}else{o.push(_);if(e.markup.forceIndent||T[s.iterator]>-1&&i in b&&b[i]>i){i=s.iterator;o.push(ue(T[i]))}}if(i!==s.iterator)i=s.iterator}i=i+1}while(i<r);s.iterator=r-1;if(o[0]===s.crlf||n(o[0],32))o[0]=c;return e.endNewline===true?o.join(c).replace(/\s*$/,s.crlf):o.join(c).replace(/\s+$/,c)}return P()}function rn(){const{data:e,rules:i}=s;const d=s.language==="json"?i.json:i.script;const l={};const h="script";const r=s.ender<1||s.ender>e.token.length?e.token.length:s.ender+1;const b=(()=>{let t=s.start;let u=i.indentLevel;let T=false;let ee=false;let o=c;let p=c;let L=e.types[0];let N=e.token[0];const ue=[-1];const se=[];const a=s.start>0?Array(s.start).fill(0,0,s.start):[];const y=[];const $=[[]];const S=[];const Q=[];const Y=[];const H=[false];const j=[];const z=[];function F(){q(false,false);const C=d.commentIndent===true?u:0;if(T===false&&/\/\u002a\s*global\s/.test(e.token[t])){const W=e.token[t].replace(/\/\u002a\s*global\s+/,c).replace(/\s*\u002a\/$/,c).split(",");let k=W.length;do{k=k-1;W[k]=W[k].replace(/\s+/g,c);if(W[k]!==c)s.scopes.push([W[k],-1])}while(k>0)}if(e.types[t-1]==="comment"||e.types[t+1]==="comment"){a[t-1]=C}else if(e.lines[t]<2){let W=t+1;if(e.types[W]==="comment"){do{W=W+1}while(W<r&&e.types[W]==="comment")}if(t<r-1&&e.stack[W]!=="block"&&(n(e.token[W],123)||e.token[W]==="x{")){let k=s.scopes.length;e.begin.splice(t,0,e.begin[W]);e.ender.splice(t,0,e.ender[W]);e.lexer.splice(t,0,e.lexer[W]);e.lines.splice(t,0,e.lines[W]);e.stack.splice(t,0,e.stack[W]);e.token.splice(t,0,e.token[W]);e.types.splice(t,0,e.types[W]);if(k>0){do{k=k-1;if(s.scopes[k][1]===W){s.scopes[k][1]=t}else if(s.scopes[k][1]<t){break}}while(k>0)}W=W+1;e.begin.splice(W,1);e.ender.splice(W,1);e.lexer.splice(W,1);e.lines.splice(W,1);e.stack.splice(W,1);e.token.splice(W,1);e.types.splice(W,1);k=t+1;do{e.begin[k]=t;e.stack[k]=e.stack[W];k=k+1}while(k<W);k=k+1;do{if(e.begin[k]===e.begin[W]){e.begin[k]=t;if(e.types[k]==="end")break}k=k+1}while(k<r-1);e.begin[W]=t;t=t-1}else{a[t-1]=-10;if(e.stack[t]==="paren"||e.stack[t]==="method"){a.push(u+2)}else{a.push(u)}if(d.commentIndent===true&&a[t]>-1&&e.lines[t]<3){e.lines[t]=3}}if(e.types[t+1]!=="comment")T=true;return}else if(n(e.token[t-1],44)){a[t-1]=C}else if(n(N,61)&&e.types[t-1]!=="comment"&&/^\/\*{2}\s*@[A-Za-z_]+/.test(p)===true){a[t-1]=-10}else if(n(N,123)&&e.types[t-1]!=="comment"&&e.lines[0]<2){if(e.stack[t]==="function"){a[t-1]=C}else{a[t-1]=/\n/.test(p)?C:-10}}else{a[t-1]=C}if(e.types[t+1]!=="comment")T=true;if(n(e.token[e.begin[t]],40)){a.push(u+1)}else{a.push(u)}if(a[t]>-1&&e.lines[t]<3){if(e.types[t-1]==="comment"&&p.startsWith("//")){e.lines[t]=2}else{e.lines[t]=3}}if(d.commentNewline===true&&p.startsWith("//")===false&&e.lines[t]>=3){e.lines[t]=2}}function q(C,W){let k=t-1;let V=C===true?0:1;const m=$[$.length-1]===void 0?[]:$[$.length-1];const g=W===false&&e.stack[t]==="array"&&C===true&&E(p,91);if(Q[Q.length-1]===false||e.stack[t]==="array"&&d.arrayFormat==="inline"||e.stack[t]==="object"&&d.objectIndent==="inline"){return}Q[Q.length-1]=false;do{if(e.types[k]==="end"){V=V+1}else if(e.types[k]==="start"){V=V-1}if(e.stack[k]==="global")break;if(V===0){if(e.stack[t]==="class"||e.stack[t]==="map"||g===false&&(C===false&&e.token[k]!=="("&&e.token[k]!=="x("||C===true&&n(e.token[k],44))){if(e.types[k+1]==="liquid_start"){if(e.lines[k]<1){a[k]=-20}else{a[k]=u-1}}else if(m.length>0&&m[m.length-1]>-1){a[k]=u-1}else{a[k]=u}}else if(e.stack[t]==="array"&&e.types[t]==="operator"){if(n(e.token[k],44))a[k]=u;if(k===e.begin[t])break}if(C===false)break}if(V<0){if(e.types[k+1]==="liquid_start"||e.types[k+1]==="template_string_start"){if(e.lines[k]<1){a[k]=-20}else{a[k]=u-1}}else if(m.length>0&&m[m.length-1]>-1){a[k]=u-1}else{a[k]=u}break}k=k-1}while(k>-1)}function O(){const C=$[$.length-1]===void 0?[]:$[$.length-1];const W=()=>{let k=t;let V=false;const m=e.begin[k];do{k=k-1;if(e.lexer[k]==="markup"){V=true;break}if(e.begin[k]!==m)k=e.begin[k]}while(k>m);if(V===true){k=t;do{k=k-1;if(e.begin[k]!==m){k=e.begin[k]}else if(n(e.token[k],44)){a[k]=u+1}}while(k>m);a[m]=u+1;a[t-1]=u}else{a[t-1]=-20}};if(n(p,41)&&n(e.token[t+1],46)&&E(e.token[C[0]],58)&&C[C.length-1]>-1){let k=e.begin[t];let V=false;let m=false;do{k=k-1}while(k>0&&a[k]<-9);V=a[k]===u;k=t+1;do{k=k+1;if(n(e.token[k],123)){m=true;break}if(e.begin[k]===e.begin[t+1]&&(e.types[k]==="separator"||e.types[k]==="end")){break}}while(k<r);if(V===false&&m===true&&$.length>1){$[$.length-2].push(e.begin[t]);u=u+1}}if(L!=="separator")P();if(n(e.token[t+1],58)&&(e.stack[t]==="object"||e.stack[t]==="array")){q(true,false)}if(n(e.token[e.begin[t]-1],44)&&(n(e.token[t+1],125)||n(e.token[t+1],93))&&(e.stack[t]==="object"||e.stack[t]==="array")){q(true,false)}if(e.stack[t]!=="attribute"){if(E(p,41)&&p!=="x)"&&(e.lexer[t-1]!=="markup"||e.lexer[t-1]==="markup"&&e.token[t-2]!=="return")){u=u-1}if(n(p,125)&&e.stack[t]==="switch"&&d.noCaseIndent===false){u=u-1}}if(n(p,125)||p==="x}"){if(e.types[t-1]!=="comment"&&N!=="{"&&N!=="x{"&&L!=="end"&&L!=="string"&&L!=="number"&&L!=="separator"&&N!=="++"&&N!=="--"&&(t<2||e.token[t-2]!==";"||e.token[t-2]!=="x;"||N==="break"||N==="return")){let k=t-1;let V=false;const m=e.begin[t];const g=se.length;do{if(e.begin[k]===m){if(n(e.token[k],61)||n(e.token[k],59)||e.token[k]==="x;"){V=true}if(n(e.token[k],46)&&a[k-1]>-1){Q[Q.length-1]=false;a[m]=u+1;a[t-1]=u;break}if(k>0&&e.token[k]==="return"&&(e.token[k-1]===")"||e.token[k-1]==="x)"||e.token[k-1]==="{"||e.token[k-1]==="x{"||e.token[k-1]==="}"||e.token[k-1]==="x}"||e.token[k-1]===";"||e.token[k-1]==="x;")){u=u-1;a[t-1]=u;break}if(n(e.token[k],58)&&y.length===0||n(e.token[k],44)&&V===false){break}if(k===0||e.token[k-1]==="{"||e.token[k-1]==="x{"||e.token[k]==="for"||e.token[k]==="if"||e.token[k]==="do"||e.token[k]==="function"||e.token[k]==="while"||e.token[k]==="var"||e.token[k]==="let"||e.token[k]==="const"||e.token[k]==="with"){if(se[g-1]===false&&g>1&&(t===r-1||e.token[t+1]!==")"&&e.token[t+1]!=="x)")&&e.stack[t]!=="object"){u=u-1}break}}else{k=e.begin[k]}k=k-1}while(k>m)}ue.pop()}if(d.bracePadding===false&&p!=="}"&&L!=="markup"){a[t-1]=-20}if(d.bracePadding===true&&L!=="start"&&N!==";"&&(a[e.begin[t]]<-9||Q[Q.length-1]===true)){a[e.begin[t]]=-10;a[t-1]=-10;a.push(-20)}else if(e.stack[t]==="attribute"){a[t-1]=-20;a.push(u)}else if(e.stack[t]==="array"&&(C.length>0||S[S.length-1]===true)){M();Q[Q.length-1]=false;a[e.begin[t]]=u+1;a[t-1]=u;a.push(-20)}else if((e.stack[t]==="object"||e.begin[t]===0&&n(p,125))&&C.length>0){M();Q[Q.length-1]=false;a[e.begin[t]]=u+1;a[t-1]=u;a.push(-20)}else if(p===")"||p==="x)"){const k=p===")"&&E(N,40)&&z.length>0?z.pop()+1:0;const V=e.token[e.begin[t]-1]==="if"?(()=>{let m=t;do{m=m-1;if(e.token[m]===")"&&a[m-1]>-1)return k}while(m>e.begin[t]);return k+5})():k;if(k>0&&(i.language!=="jsx"||i.language==="jsx"&&e.token[e.begin[t]-1]!=="render")){const m=i.wrap;const g=e.begin[t];const w=z.length;let x=t-2;if(V>m){a[e.begin[t]]=u+1;a[t-1]=u;do{if(e.begin[x]===g){if(e.token[x]==="&&"||e.token[x]==="||"){a[x]=u+1}else if(a[x]>-1&&e.types[x]!=="comment"&&e.token[x+1]!=="."){a[x]=a[x]+1}}else if(a[x]>-1&&e.token[x+1]!=="."){a[x]=a[x]+1}x=x-1}while(x>g)}else if(w>0){z[w-1]=z[w-1]+k}}else if(p===")"&&t>e.begin[t]+2&&e.lexer[e.begin[t]+1]===h&&e.token[e.begin[t]+1]!=="function"){const m=e.begin[t]<0?0:e.begin[t];const g=i.wrap;const w=C.length;let x=0;let R=0;let xe=0;let Z=0;let pe=0;let ce=false;let te=false;let we=u+1;let qe=false;let D=false;let I=false;if(a[m]<-9){R=m;do{R=R+1}while(R<t&&a[R]<-9);Z=R;do{x=x+e.token[R].length;if(a[R]===-10)x=x+1;if(e.token[R]==="("&&xe>0&&xe<g-1&&Z===t){xe=-1}if(e.token[R]===")"){pe=pe-1}else if(e.token[R]==="("){pe=pe+1}if(R===m&&pe>0)xe=x;R=R-1}while(R>m&&a[R]<-9);if(e.token[R+1]===".")we=a[R]+1;if(x>g-1&&g>0&&E(N,40)&&xe!==-1&&Q[Q.length-2]===false){if(e.token[m-1]==="if"&&se[se.length-1]===true||e.token[m-1]!=="if"){a[m]=we;if(e.token[m-1]==="for"){R=m;do{R=R+1;if(n(e.token[R],59)&&e.begin[R]===m){a[R]=we}}while(R<t)}}}}R=t;x=0;do{R=R-1;if(e.stack[R]==="function"){R=e.begin[R]}else if(e.begin[R]===m){if(e.token[R]==="?"){I=true}else if(n(e.token[R],44)&&ce===false){ce=true;if(x>=g&&g>0)qe=true}else if(e.types[R]==="markup"&&D===false){D=true}if(a[R]>-9&&e.token[R]!==","&&e.types[R]!=="markup"){x=0}else{if(a[R]===-10)x=x+1;x=x+e.token[R].length;if(x>=g&&g>0&&(ce===true||D===true)){qe=true}}}else{if(a[R]>-9){x=0}else{x=x+e.token[R].length;if(x>=g&&g>0&&(ce===true||D===true)){qe=true}}}}while(R>m&&qe===false);if(ce===false&&e.token[e.begin[t]+1].charAt(0)==="`"){a[e.begin[t]]=-20;a[t-1]=-20}else if((ce===true||D===true)&&x>=g&&g>0||a[m]>-9){if(I===true){we=a[m];if(e.token[m-1]==="["){R=t;do{R=R+1;if(e.types[R]==="end"||n(e.token[R],44)||n(e.token[R],59)){break}}while(R<r);if(e.token[R]==="]"){we=we-1;te=true}}}else if(w>0&&C[w-1]>R){we=we-w}Q[Q.length-1]=false;R=t;do{R=R-1;if(e.begin[R]===m){if(e.token[R].indexOf("=")>-1&&e.types[R]==="operator"&&e.token[R].indexOf("!")<0&&e.token[R].indexOf("==")<0&&e.token[R]!=="<="&&e.token[R].indexOf(">")<0){x=R;do{x=x-1;if(e.begin[x]===m&&(e.token[x]===";"||e.token[x]===","||x===m)){break}}while(x>m)}else if(n(e.token[R],44)){a[R]=we}else if(a[R]>-9&&te===false&&(e.token[m-1]!=="for"||e.token[R+1]==="?"||e.token[R+1]===":")&&(e.token[e.begin[t]]!=="("||e.token[R]!=="+")){a[R]=a[R]+1}}else if(a[R]>-9&&te===false){a[R]=a[R]+1}}while(R>m);a[m]=we;a[t-1]=we-1}else{a[t-1]=-20}if(e.token[e.begin[t]-1]==="+"&&a[e.begin[t]]>-9){a[e.begin[t]-1]=-10}}else if(i.language==="jsx"){W()}else{a[t-1]=-20}a.push(-20)}else if(Q[Q.length-1]===true){if(p==="]"&&e.begin[t]-1>0&&e.token[e.begin[e.begin[t]-1]]==="["){Q[Q.length-2]=false}if(e.begin[t]<a.length)a[e.begin[t]]=-20;if(i.language==="jsx"){W()}else if(p==="]"&&a[e.begin[t]]>-1){a[t-1]=a[e.begin[t]]-1}else{a[t-1]=-20}a.push(-20)}else if(e.types[t-1]==="comment"&&e.token[t-1].substring(0,2)==="//"){if(e.token[t-2]==="x}")a[t-3]=u+1;a[t-1]=u;a.push(-20)}else if(e.types[t-1]!=="comment"&&(n(N,123)&&n(p,125)||n(N,91)&&p==="]")){a[t-1]=-20;a.push(-20)}else if(p==="]"){if(se[se.length-1]===true&&Q[Q.length-1]===false&&d.arrayFormat!=="inline"||n(N,93)&&a[t-2]===u+1){a[t-1]=u;a[e.begin[t]]=u+1}else if(a[t-1]===-10){a[t-1]=-20}if(e.token[e.begin[t]+1]==="function"){a[t-1]=u}else if(se[se.length-1]===false){if(n(N,125)||N==="x}")a[t-1]=u;let k=t-1;let V=1;do{if(e.token[k]==="]")V=V+1;if(e.token[k]==="["){V=V-1;if(V===0){if(k>0&&(e.token[k+1]==="{"||e.token[k+1]==="x{"||e.token[k+1]==="[")){a[k]=u+1;break}if(e.token[k+1]!=="["||ee===false){a[k]=-20;break}break}}if(V===1&&e.token[k]==="+"&&a[k]>1){a[k]=a[k]-1}k=k-1}while(k>-1)}else if(i.language==="jsx"){W()}if(d.arrayFormat==="inline"){let k=t;const V=e.begin[t];do{k=k-1;if(e.types[k]==="end")break}while(k>V);if(k>V){a[e.begin[t]]=u+1;a[t-1]=u}else{a[e.begin[t]]=-20;a[t-1]=-20}}else if(a[e.begin[t]]>-1){a[t-1]=a[e.begin[t]]-1}a.push(-20)}else if(n(p,125)||p==="x}"||se[se.length-1]===true){if(n(p,125)&&N==="x}"&&e.token[t+1]==="else"){a[t-2]=u+2;a.push(-20)}else{a.push(u)}a[t-1]=u}else{a.push(-20)}if(e.types[t-1]==="comment")a[t-1]=u;M();ee=se[se.length-1];se.pop();$.pop();S.pop();Y.pop();j.pop();Q.pop();H.pop()}function M(){let C=0;const W=$[$.length-1];if(W===void 0)return;C=W.length-1;if(C<1&&W[C]<0&&(n(p,59)||p==="x;"||p===")"||p==="x)"||n(p,125)||p==="x}")){W.pop();return}if(C<0||W[C]<0)return;if(p===":"){if(e.token[W[C]]!=="?"){do{W.pop();C=C-1;u=u-1}while(C>-1&&W[C]>-1&&e.token[W[C]]!=="?")}W[C]=t;a[t-1]=u}else{do{W.pop();C=C-1;u=u-1}while(C>-1&&W[C]>-1)}if((e.stack[t]==="array"||p===",")&&W.length<1)W.push(-1)}function ie(){const C=t;do{if(e.lexer[t+1]===h&&e.begin[t+1]<C)break;if(e.token[C-1]==="return"&&e.types[t]==="end"&&e.begin[t]===C)break;a.push(0);t=t+1}while(t<r);l[C]=t;a.push(u-1)}function P(){let C=t-1;const W=e.begin[t];if(u<1)return;do{if(W!==e.begin[C]){C=e.begin[C]}else{if(e.types[C]==="separator"||e.types[C]==="operator"){if(e.token[C]==="."&&a[C-1]>0){if(e.token[W-1]==="if"){u=u-2}else{u=u-1}}break}}C=C-1}while(C>0&&C>W)}function A(){if(e.token[t+1]!==","&&p.indexOf("/>")!==p.length-2||e.token[t+1]===","&&e.token[e.begin[t]-3]!=="React"){q(false,false)}if(N==="return"||N==="?"||N===":"){a[t-1]=-10;a.push(-20)}else if(L==="start"||e.token[t-2]==="return"&&e.stack[t-1]==="method"){a.push(u)}else{a.push(-20)}}function _(){const C=$[$.length-1]===void 0?[]:$[$.length-1];function W(){const k=e.token[t+1];let V=0;let m=0;let g=t;let w=p==="+"?u+2:u;let x=0;if(i.wrap<1){a.push(-10);return}do{g=g-1;if(n(e.token[e.begin[t]],40)){if(g===e.begin[t]){x=V}if(n(e.token[g],44)&&e.begin[g]===e.begin[t]&&se[se.length-1]===true){break}}if(V>i.wrap-1)break;if(a[g]>-9)break;if(e.types[g]==="operator"&&e.token[g]!=="="&&e.token[g]!=="+"&&e.begin[g]===e.begin[t]){break}V=V+e.token[g].length;if(g===e.begin[t]&&e.token[g]==="["&&V<i.wrap-1){break}if(e.token[g]==="."&&a[g]>-9)break;if(a[g]===-10)V=V+1}while(g>0);if(x>0)x=x+k.length;V=V+k.length;m=g;if(V>i.wrap-1&&a[g]<-9){do{m=m-1}while(m>0&&a[m]<-9)}if(e.token[m+1]==="."&&e.begin[t]<=e.begin[m]){w=w+1}else if(e.types[m]==="operator"){w=a[m]}m=k.length;if(V+m<i.wrap){a.push(-10);return}if(n(e.token[e.begin[t]],40)&&(e.token[C[0]]===":"||e.token[C[0]]==="?")){w=u+3}else if(e.stack[t]==="method"){a[e.begin[t]]=u;if(se[se.length-1]===true){w=u+3}else{w=u+1}}else if(e.stack[t]==="object"||e.stack[t]==="array"){q(true,false)}if(e.token[g]==="var"||e.token[g]==="let"||e.token[g]==="const"){V=V-i.indentSize*i.indentChar.length*2}if(x>0){g=i.wrap-x}else{g=i.wrap-V}if(g>0&&g<5){a.push(w);if(e.token[t].charAt(0)==='"'||e.token[t].charAt(0)==="'"){t=t+1;a.push(-10)}return}if(e.token[e.begin[t]]!=="("||x>i.wrap-1||x===0){if(x>0)V=x;if(V-k.length<i.wrap-1&&(k.charAt(0)==='"'||k.charAt(0)==="'")){t=t+1;V=V+3;if(V-k.length>i.wrap-4){a.push(w);return}a.push(-10);return}a.push(w);return}a.push(-10)}P();if(C.length>0&&C[C.length-1]>-1&&e.stack[t]==="array"){S[S.length-1]=true}if(p!==":"){if(e.token[e.begin[t]]!=="("&&e.token[e.begin[t]]!=="x("&&Q.length>0){q(true,false)}if(p!=="?"&&e.token[C[C.length-1]]==="."){let k=0;let V=t;const m=e.begin[V];do{if(e.begin[V]===m){if(e.token[V+1]==="{"||e.token[V+1]==="["||e.token[V]==="function"){break}if(n(e.token[V],44)||n(e.token[V],59)||e.types[V]==="end"||n(e.token[V],58)){C.pop();u=u-1;break}if(e.token[V]==="?"||n(e.token[V],58)){if(e.token[C[C.length-1]]==="."&&k<2)C[C.length-1]=m+1;break}if(e.token[V]===".")k=k+1}V=V+1}while(V<r)}}if(p==="!"||p==="..."){if(n(N,125)||N==="x}")a[t-1]=u;a.push(-20);return}if(N===";"||N==="x;"){if(e.token[e.begin[t]-1]!=="for")a[t-1]=u;a.push(-20);return}if(p==="*"){if(N==="function"||N==="yield"){a[t-1]=-20}else{a[t-1]=-10}a.push(-10);return}if(p==="?"){if(e.lines[t]===0&&e.types[t-2]==="word"&&e.token[t-2]!=="return"&&e.token[t-2]!=="in"&&e.token[t-2]!=="instanceof"&&e.token[t-2]!=="typeof"&&(L==="reference"||L==="word")){if(e.types[t+1]==="word"||e.types[t+1]==="reference"||(n(e.token[t+1],40)||e.token[t+1]==="x(")&&e.token[t-2]==="new"){a[t-1]=-20;if(e.types[t+1]==="word"||e.types[t+1]==="reference"){a.push(-10);return}a.push(-20);return}}if(e.token[t+1]===":"){a[t-1]=-20;a.push(-20);return}y.push(t);if(d.ternaryLine===true){a[t-1]=-10}else{let k=t-1;do{k=k-1}while(k>-1&&a[k]<-9);C.push(t);u=u+1;if(a[k]===u&&e.token[k+1]!==":"){u=u+1;C.push(t)}a[t-1]=u;if(n(e.token[e.begin[t]],40)&&(C.length<2||C[0]===C[1])){Q[Q.length-1]=false;if(t-2===e.begin[t]){a[e.begin[t]]=u-1}else{a[e.begin[t]]=u}k=t-2;do{if(e.types[k]==="end"&&a[k-1]>-1)break;if(a[k]>-1)a[k]=a[k]+1;k=k-1}while(k>e.begin[t])}}a.push(-10);return}if(p===":"){if(e.stack[t]==="map"||e.types[t+1]==="type"||e.types[t+1]==="type_start"){a[t-1]=-20;a.push(-10);return}if(y.length>0&&e.begin[y[y.length-1]]===e.begin[t]){let k=t;const V=e.begin[t];do{k=k-1;if(e.begin[k]===V){if(n(e.token[k],44)||n(e.token[k],59)){a[t-1]=-20;break}if(e.token[k]==="?"){y.pop();M();if(d.ternaryLine===true)a[t-1]=-10;a.push(-10);return}}else if(e.types[k]==="end"){k=e.begin[k]}}while(k>V)}if(e.token[t-2]==="where"&&e.stack[t-2]===e.stack[t]){a[t-1]=-10;a.push(-10);return}if(L==="reference"&&e.token[e.begin[t]]!=="("&&e.token[e.begin[t]]!=="x("){a[t-1]=-20;a.push(-10);return}if((n(N,41)||N==="x)")&&e.token[e.begin[t-1]-2]==="function"){a[t-1]=-20;a.push(-10);return}if(e.stack[t]==="attribute"){a[t-1]=-20;a.push(-10);return}if(e.token[e.begin[t]]!=="("&&e.token[e.begin[t]]!=="x("&&(L==="reference"||n(N,41)||n(N,93)||N==="?")&&(e.stack[t]==="map"||e.stack[t]==="class"||e.types[t+1]==="reference")&&(y.length===0||y[y.length-1]<e.begin[t])&&("mapclassexpressionmethodglobalparen".indexOf(e.stack[t])>-1||e.types[t-2]==="word"&&e.stack[t]!=="switch")){a[t-1]=-20;a.push(-10);return}if(e.stack[t]==="switch"&&(y.length<1||y[y.length-1]<e.begin[t])){a[t-1]=-20;if(d.caseSpace===true){a.push(-10)}else{a.push(u)}return}if(e.stack[t]==="object"){a[t-1]=-20}else if(y.length>0){a[t-1]=u}else{a[t-1]=-10}a.push(-10);return}if(p==="++"||p==="--"){if(L==="number"||L==="reference"){a[t-1]=-20;a.push(-10)}else if(t<r-1&&(e.types[t+1]==="number"||e.types[t+1]==="reference")){a.push(-20)}else{a.push(-10)}return}if(p==="+"){if(L==="start"){a[t-1]=-20}else{a[t-1]=-10}if(i.wrap<1||e.token[e.begin[t]]==="x("){a.push(-10);return}const k=e.token[t+1];if(k===void 0){a.push(-10);return}if(e.types[t-1]==="operator"||e.types[t-1]==="start"){if(e.types[t+1]==="reference"||k==="("||k==="["){a.push(-20);return}if(Number(k.slice(1,-1))>-1&&(/\d/.test(k.charAt(1))===true||k.charAt(1)==="."||k.charAt(1)==="-"||k.charAt(1)==="+")){a.push(-20);return}}return W()}if(e.types[t-1]!=="comment"){if(n(N,40)){a[t-1]=-20}else if(p==="*"&&e.stack[t]==="object"&&e.types[t+1]==="reference"&&(n(N,123)||n(N,44))){a[t-1]=u}else if(p!=="?"||y.length===0){a[t-1]=-10}}if(p.indexOf("=")>-1&&p!=="=="&&p!=="==="&&p!=="!="&&p!=="!=="&&p!==">="&&p!=="<="&&p!=="=>"&&e.stack[t]!=="method"&&e.stack[t]!=="object"){let k=t+1;let V=0;let m=false;let g=c;if((n(e.token[e.begin[t]],40)||e.token[e.begin[t]]==="x(")&&e.token[t+1]!=="function"){return}do{if(e.types[k]==="start"){if(m===true&&e.token[k]!=="["){if(H[H.length-1]===true){H[H.length-1]=false}break}V=V+1}if(e.types[k]==="end")V=V-1;if(V<0){if(H[H.length-1]===true){H[H.length-1]=false}break}if(V===0){g=e.token[k];if(m===true){if(e.types[k]==="operator"||n(e.token[k],59)||e.token[k]==="x;"||e.token[k]==="?"||e.token[k]==="var"||e.token[k]==="let"||e.token[k]==="const"){if(g!==void 0&&(g==="?"||g.indexOf("=")>-1&&g!=="=="&&g!=="==="&&g!=="!="&&g!=="!=="&&g!==">="&&g!=="<=")){if(H[H.length-1]===false){H[H.length-1]=true}}if((g===";"||g==="x;"||g==="var"||g==="let"||g==="const")&&H[H.length-1]===true){H[H.length-1]=false}break}if(H[H.length-1]===true&&(g==="return"||g==="break"||g==="continue"||g==="throw")){H[H.length-1]=false}}if(g===";"||g==="x;"||g===",")m=true}k=k+1}while(k<r);a.push(-10);return}if(p==="-"&&N==="return"||n(N,61)){a.push(-20);return}if(L==="operator"&&e.types[t+1]==="reference"&&N!=="--"&&N!=="++"&&p!=="&&"&&p!=="||"){a.push(-20);return}return W()}function J(){const C=()=>{let W=e.begin[t];if(W<0){s.scopes.push([e.token[t],-1])}else{if(e.stack[W+1]!=="function"){do{W=e.begin[W]}while(W>-1&&e.stack[W+1]!=="function")}s.scopes.push([e.token[t],W])}};if(e.types[t-1]==="comment"){a[t-1]=u}else if(L==="end"&&N!==")"&&e.token[e.begin[t-1]-1]!==")"){a[t-1]=-10}else if(L!=="separator"&&L!=="start"&&L!=="end"&&L.indexOf("template_string")<0){if(L==="word"||L==="operator"||L==="property"||L==="type"||L==="reference"){a[t-1]=-10}else{a[t-1]=-20}}if(N==="var"&&e.lexer[t-1]===h){C()}else if(N==="function"){s.scopes.push([e.token[t],t])}else if(N==="let"||N==="const"){s.scopes.push([e.token[t],t])}else if(e.stack[t]==="arguments"){s.scopes.push([e.token[t],t])}else if(n(N,44)){let W=t;do{W=W-1}while(W>e.begin[t]&&e.token[W]!=="var"&&e.token[W]!=="let"&&e.token[W]!=="const");if(e.token[W]==="var"){C()}else if(e.token[W]==="let"||e.token[W]==="const"){s.scopes.push([e.token[t],t])}}a.push(-10)}function G(){const C=$[$.length-1]===void 0?[]:$[$.length-1];const W=()=>{if(d.methodChain>0){let k=t;let V=e.begin[t];const m=[t];const g=e.token[V-1]==="if";do{k=k-1;if(e.types[k]==="end")k=e.begin[k];if(e.begin[k]===V){if(e.types[k]==="string"&&e.token[k].indexOf("${")===e.token[k].length-2){break}if(e.token[k]==="."){if(a[k-1]>0){a[t-1]=g===true?u+1:u;return}m.push(k)}else if(e.token[k]===";"||e.token[k]===","||e.types[k]==="operator"||(e.types[k]==="word"||e.types[k]==="reference")&&(e.types[k-1]==="word"||e.types[k-1]==="reference")){break}}}while(k>V);if(m.length<d.methodChain){a[t-1]=-20;return}k=0;V=m.length;do{a[m[k]-1]=g===true?u+1:u;k=k+1}while(k<V);k=m[m.length-1]-1;do{if(a[k]>-1)a[k]=a[k]+1;k=k+1}while(k<t);u=g===true?u+2:u+1}a[t-1]=u};if(p==="::"){a[t-1]=-20;a.push(-20);return}if(p==="."){if(e.token[e.begin[t]]!=="("&&e.token[e.begin[t]]!=="x("&&C.length>0){if(e.stack[t]==="object"||e.stack[t]==="array"){q(true,false)}else{q(false,false)}}if(d.methodChain===0){a[t-1]=-20}else if(d.methodChain<0){if(e.lines[t]>0){W()}else{a[t-1]=-20}}else{W()}a.push(-20);return}if(p===","){P();if(se[se.length-1]===false&&(e.stack[t]==="object"||e.stack[t]==="array"||e.stack[t]==="paren"||e.stack[t]==="expression"||e.stack[t]==="method")){se[se.length-1]=true;if(n(e.token[e.begin[t]],40)){let k=t;do{k=k-1;if(e.begin[k]===e.begin[t]&&e.token[k]==="+"&&a[k]>-9){a[k]=a[k]+2}}while(k>e.begin[t])}}if(e.stack[t]==="array"&&d.arrayFormat==="indent"){a[t-1]=-20;a.push(u);return}if(e.stack[t]==="array"&&d.arrayFormat==="inline"){a[t-1]=-20;a.push(-10);return}if(e.stack[t]==="object"&&d.objectIndent==="indent"){a[t-1]=-20;a.push(u);return}if(e.stack[t]==="object"&&d.objectIndent==="inline"){a[t-1]=-20;a.push(-10);return}if(C.length>0){if(C[C.length-1]>-1)M();a[t-1]=-20;a.push(u);return}if(e.token[t-2]===":"&&e.token[t-4]==="where"){a[t-1]=-20;a.push(-10);return}a[t-1]=-20;if(e.types[t+1]!=="end"){Y[Y.length-1]=Y[Y.length-1]+1}if((n(e.token[e.begin[t]],40)||e.token[e.begin[t]]==="x(")&&i.language!=="jsx"&&e.stack[t]!=="global"&&(e.types[t-1]!=="string"&&e.types[t-1]!=="number"||e.token[t-2]!=="+"||e.types[t-1]==="string"&&e.types[t-1]!=="number"&&n(e.token[t-2],43)&&e.types[t-3]!=="string"&&e.types[t-3]!=="number")){a.push(-10);return}if(L==="reference"&&e.types[t-2]==="word"&&"var-let-const-from".indexOf(e.token[t-2])<0&&(e.types[t-3]==="end"||e.token[t-3]===";")){j[j.length-1]=true;a.push(-10);return}if(j[j.length-1]===true||e.stack[t]==="notation"){a.push(-10);return}if(Y[Y.length-1]>3&&(e.stack[t]==="array"||e.stack[t]==="object")){if(Q[Q.length-1]===true)q(true,true);a[t-1]=-20;if(S[S.length-1]===true){a.push(u);return}const k=e.begin[t];let V=t;do{if(e.types[V]==="end"){V=e.begin[V]}else{if(n(e.token[V],44)&&e.types[V+1]!=="comment"){a[V]=u}}V=V-1}while(V>k);a[k]=u;S[S.length-1]=true;return}if(e.stack[t]==="object"){if(Q[Q.length-1]===true&&e.types[e.begin[t]-1]!=="word"&&e.types[e.begin[t]-1]!=="reference"&&e.token[e.begin[t]-1]!=="("&&e.token[e.begin[t]-1]!=="x("){const k=e.begin[t];let V=t-1;do{if(e.begin[V]===k){if(n(e.token[V],44))break;if(n(e.token[V],58)){q(true,false);break}}V=V-1}while(V>k)}}if(Q[Q.length-1]===false||n(e.token[t-2],43)&&(L==="string"||L==="number")&&a[t-2]>0&&(n(N,34)||n(N,39))){if(e.stack[t]==="method"){if(n(e.token[t-2],43)&&(n(N,34)||n(N,39))&&(e.token[t-3].charAt(0)==='"'||e.token[t-3].charAt(0)==="'")){a.push(u+2);return}if(e.token[t-2]!=="+"){a.push(-10);return}}a.push(u);return}if(Q[Q.length-1]===true&&e.stack[t]!=="object"){a.push(-10);return}if(Y[Y.length-1]<4&&(e.stack[t]==="array"||e.stack[t]==="object")){a.push(-10);return}a.push(u);return}if(n(p,59)||p==="x;"){P();if(e.token[t+1]!==void 0&&e.types[t+1].indexOf("attribute")>0&&e.types[t+1].indexOf("end")>0){a[t-1]=-20;a.push(u-1);return}if(ue[ue.length-1]>-1&&e.stack[ue[ue.length-1]]!=="expression"){let k=t;do{k=k-1;if(n(e.token[k],59))break;if(n(e.token[k],44)){u=u-1;break}if(e.types[k]==="end")k=e.begin[k]}while(k>0&&k>e.begin[t])}ue[ue.length-1]=-1;M();if(e.token[e.begin[t]-1]!=="for")q(false,false);j[j.length-1]=false;a[t-1]=-20;if(e.begin[t]>0&&e.token[e.begin[t]-1]==="for"&&e.stack[t]!=="for"){a.push(-10);return}a.push(u);return}a.push(-20)}function ne(){const C=e.stack[t+1];const W=t===0?e.stack[t]:e.stack[t-1];if(n(N,41)||E(N,93)&&(W==="object"||W==="array")){if(C!=="method"||C==="method"&&E(e.token[t+1],41)&&E(e.token[t+2],41)){if(n(N,41)&&(C!=="function"||n(e.token[e.begin[e.begin[t-1]-1]],40)||e.token[e.begin[e.begin[t-1]-1]]==="x(")){q(false,false)}else if(e.types[t+1]!=="end"&&e.types[t+2]!=="end"){q(true,false)}}}se.push(false);$.push([]);H.push(false);S.push(false);j.push(false);Y.push(0);if(d.neverFlatten===true||C==="attribute"||L==="generic"||d.arrayFormat==="indent"&&C==="array"||C==="class"&&E(N,40)&&N!=="x("||n(p,91)&&e.token[t+1]==="function"){Q.push(false)}else{if(C==="expression"||C==="method"){Q.push(true)}else if((C==="object"||C==="class")&&(n(N,40)||N==="x("||L==="word"||L==="reference")){Q.push(true)}else if(C==="array"||n(p,40)||p==="x("){Q.push(true)}else if(n(p,123)&&C==="object"&&L!=="operator"&&L!=="start"&&L!=="string"&&L!=="number"&&W!=="object"&&W!=="array"&&t>0){Q.push(true)}else{Q.push(false)}}if(E(p,40)&&p!=="x("&&e.stack[t+1]!=="attribute"){u=u+1}if(n(p,123)||p==="x{"){ue.push(-1);if(e.types[t-1]!=="comment"){if(L==="markup"){a[t-1]=u}else if(d.braceAllman===true&&L!=="operator"&&N!=="return"){a[t-1]=u-1}else if(e.stack[t+1]!=="block"&&(C==="function"||n(N,41)||N==="x)"||n(N,44)||n(N,125)||L==="markup")){a[t-1]=-10}else if(n(N,123)||N==="x{"||n(N,91)||n(N,125)||N==="x}"){a[t-1]=u-1}}if(C==="object"){if(d.objectIndent==="indent"){Q[Q.length-1]=false;a.push(u);return}if(d.objectIndent==="inline"){Q[Q.length-1]=true;a.push(-20);return}}if(C==="switch"){if(d.noCaseIndent===true){a.push(u-1);return}u=u+1;a.push(u);return}if(Q[Q.length-1]===true){if(L!=="word"&&L!=="reference"){a.push(-20);return}}a.push(u);return}if(n(p,40)||p==="x("){if(i.wrap>0&&n(p,40)&&e.token[t+1]!==")"){z.push(1)}if(n(N,45)&&(n(e.token[t-2],40)||e.token[t-2]==="x(")){a[t-2]=-20}if(L==="end"&&W!=="if"&&W!=="for"&&W!=="catch"&&W!=="else"&&W!=="do"&&W!=="try"&&W!=="finally"&&W!=="catch"){if(e.types[t-1]==="comment"){a[t-1]=u}else{a[t-1]=-20}}if(N==="async"){a[t-1]=-10}else if(C==="method"||e.token[t-2]==="function"&&L==="reference"){if(N==="import"||N==="in"||d.functionNameSpace===true){a[t-1]=-10}else if(n(N,125)&&e.stack[t-1]==="function"||L==="word"||L==="reference"||L==="property"){a[t-1]=-20}else if(W!=="method"&&C!=="method"){a[t-1]=u}}if(n(N,43)&&(n(e.token[t-2],34)||n(e.token[t-2],39))){a.push(u);return}if(n(N,125)||N==="x}"){a.push(-20);return}if(n(N,45)&&(t<2||E(e.token[t-2],41)&&E(e.token[t-2],93)&&e.token[t-2]!=="x)"&&e.types[t-2]!=="reference"&&e.types[t-2]!=="string"&&e.types[t-2]!=="number")||d.functionSpace===false&&N==="function"){a[t-1]=-20}a.push(-20);return}if(n(p,91)){if(n(N,91))se[se.length-2]=true;if(N==="return"||N==="var"||N==="let"||N==="const"){a[t-1]=-10}else if(e.types[t-1]!=="comment"&&e.stack[t-1]!=="attribute"&&(L==="end"||L==="word"||L==="reference")){a[t-1]=-20}else if(n(N,91)||n(N,123)||N==="x{"){a[t-1]=u-1}if(e.stack[t]==="attribute"){a.push(-20);return}if(d.arrayFormat==="indent"){Q[Q.length-1]=false;a.push(u);return}if(d.arrayFormat==="inline"){Q[Q.length-1]=true;a.push(-20);return}if(C==="method"||Q[Q.length-1]===true){a.push(-20);return}let k=t+1;do{if(n(e.token[k],93)){a.push(-20);return}if(n(e.token[k],44)){a.push(u);return}k=k+1}while(k<r);a.push(-20)}}function X(){if(p.length===1){a.push(-20);if(e.lines[t]===0)a[t-1]=-20}else if(p.indexOf("#!/")===0){a.push(u)}else if(L!=="liquid"&&e.types[t+1]!=="liquid"){a.push(-10)}if((n(N,44)||L==="start")&&(e.stack[t]==="object"||e.stack[t]==="array")&&Q[Q.length-1]===false&&t>0){a[t-1]=u}}function oe(){if(i.language!=="json"&&e.types[t-1]!=="string"){if(o==="liquid_else"){a[t-1]=u-1;a.push(u)}else if(o==="liquid_start"){u=u+1;if(e.lines[t-1]<1)a[t-1]=-20;if(e.lines[t]>0||N.length===1&&L==="string"){a.push(u)}else{a.push(-20)}}else if(o==="liquid_end"){u=u-1;if(L==="liquid_start"||e.lines[t-1]<1){a[t-1]=-20}else{a[t-1]=u}if(e.lines[t]>0){a.push(u)}else{a.push(-20)}}else if(o==="liquid"){if(e.lines[t]>0){a.push(u)}else{a.push(-20)}}}}function fe(){if(o==="template_string_start"){u=u+1;a.push(u)}else if(o==="template_string_else"){P();a[t-1]=u-1;a.push(u)}else{P();u=u-1;a[t-1]=u;a.push(-10)}if(t>2&&(e.types[t-2]==="template_string_else"||e.types[t-2]==="template_string_start")){if(d.bracePadding===true){a[t-2]=-10;a[t-1]=-10}else{a[t-2]=-20;a[t-1]=-20}}}function ye(){if(n(e.token[t-1],44)||n(e.token[t-1],58)&&e.stack[t-1]!=="data_type"){a[t-1]=-10}else{a[t-1]=-20}if(e.types[t]==="type"||e.types[t]==="type_end"){a.push(-10)}if(e.types[t]==="type_start"){a.push(-20)}}function ge(){if((n(N,41)||N==="x)")&&e.stack[t]==="class"&&(e.token[e.begin[t-1]-1]==="static"||e.token[e.begin[t-1]-1]==="final"||e.token[e.begin[t-1]-1]==="void")){a[t-1]=-10;a[e.begin[t-1]-1]=-10}if(n(N,93))a[t-1]=-10;if(p==="else"&&n(N,125)){if(e.token[t-2]==="x}")a[t-3]=a[t-3]-1;if(d.braceAllman===true||d.elseNewline===true){a[t-1]=u}}if(p==="new"&&Ce.js.keywords.has(e.token[t+1]));if(p==="from"&&L==="end"&&t>0&&(e.token[e.begin[t-1]-1]==="import"||n(e.token[e.begin[t-1]-1],44))){a[t-1]=-10}if(p==="function"){if(d.functionSpace===false&&t<r-1&&(n(e.token[t+1],40)||e.token[t+1]==="x(")){a.push(-20);return}a.push(-10);return}if(n(N,45)&&t>1){if(e.types[t-2]==="operator"||n(e.token[t-2],44)){a[t-1]=-20}else if(e.types[t-2]==="start"){a[t-2]=-20;a[t-1]=-20}}else if(p==="while"&&(n(N,125)||N==="x}")){let C=t-1;let W=0;do{if(n(e.token[C],125)||e.token[C]==="x}")W=W+1;if(n(e.token[C],123)||e.token[C]==="x{")W=W-1;if(W===0){if(e.token[C-1]==="do"){a[t-1]=-10;break}a[t-1]=u;break}C=C-1}while(C>-1)}else if(p==="in"||(n(N,125)||N==="x}")&&(p==="catch"||p==="else"&&d.elseNewline===false&&d.braceAllman===false)){a[t-1]=-10}else if(p==="var"||p==="let"||p==="const"){ue[ue.length-1]=t;if(L==="end")a[t-1]=u;if(e.token[e.begin[t]-1]!=="for"){let C=t+1;let W=0;do{if(e.types[C]==="end")W=W-1;if(e.types[C]==="start")W=W+1;if(W<0||W===0&&(n(e.token[C],59)||n(e.token[C],44)))break;C=C+1}while(C<r);if(n(e.token[C],44))u=u+1}a.push(-10);return}if(L!=="word"&&e.stack[t]==="switch"&&(p==="default"||p==="case")){a[t-1]=u-1;a.push(-10);return}if(p==="catch"&&N==="."){a[t-1]=-20;a.push(-20);return}if(p==="catch"||p==="finally"){a[t-1]=-10;a.push(-10);return}if(d.bracePadding===false&&t<r-1&&n(e.token[t+1],125)){a.push(-20);return}if(e.stack[t]==="object"&&(n(N,123)||n(N,44))&&(n(e.token[t+1],40)||e.token[t+1]==="x(")){a.push(-20);return}if(e.types[t-1]==="comment"&&n(e.token[e.begin[t]],40)){a[t-1]=u+1}a.push(-10)}do{if(e.lexer[t]===h){o=e.types[t];p=e.token[t];if(o==="comment"){F()}else if(o==="regex"){a.push(-20)}else if(o==="string"){X()}else if(o.indexOf("template_string")===0){fe()}else if(o==="separator"){G()}else if(o==="start"){ne()}else if(o==="end"){O()}else if(o==="type"||o==="type_start"||o==="type_end"){ye()}else if(o==="operator"){_()}else if(o==="word"){ge()}else if(o==="reference"){J()}else if(o==="markup"){A()}else if(o.indexOf("liquid")===0){oe()}else if(o==="generic"){if(E(N,35)&&N!=="return"&&L!=="operator"&&N!=="public"&&N!=="private"&&N!=="static"&&N!=="final"&&N!=="implements"&&N!=="class"&&N!=="void"){a[t-1]=-20}if(n(e.token[t+1],40)||e.token[t+1]==="x("){a.push(-20)}else{a.push(-10)}}else{a.push(-10)}if(o!=="comment"){L=o;N=p}if(z.length>0&&E(e.token[t],41)){if(e.types[t]==="comment"&&z[z.length-1]>-1){z[z.length-1]=i.wrap+1}else if(a[t]>-1||n(e.token[t],96)&&e.token[t].indexOf(he)>0){z[z.length-1]=-1}else if(z[z.length-1]>-1){z[z.length-1]=z[z.length-1]+e.token[t].length;if(a[t]===-10){z[z.length-1]=z[z.length-1]+1}}}}else{ie()}t=t+1}while(t<r);return a})();const B=(()=>{const t=[];const u=(()=>{const ue=[];const se=i.indentChar;let a=i.indentSize;if(typeof a!=="number"||a<1)return c;do{ue.push(se);a=a-1}while(a>0);return ue.join(c)})();const T=i.preserveLine+1;const ee=["x;","x}","x{","x(","x)"];let o=s.start;let p=i.indentLevel;function L(ue){const se=[];const a=(()=>{if(o===r-1)return 1;if(e.lines[o+1]-1>T)return T;if(e.lines[o+1]>1)return e.lines[o+1]-1;return 1})();let y=0;if(ue<0)ue=0;do{se.push(s.crlf);y=y+1}while(y<a);if(ue>0){y=0;do{se.push(u);y=y+1}while(y<ue)}return se.join(c)}if(d.vertical===true){let ue=function(se){let a=0;let y=0;let $=se-1;let S=0;let Q=0;const Y=e.begin[o];const H=[];do{if((e.begin[$]===Y||n(e.token[$],93)||n(e.token[$],41))&&(n(e.token[$+1],61)||n(e.token[$+1],59)&&e.stack[$]==="object")){S=$;y=0;do{if(e.begin[S]===Y){if(n(e.token[S],58)||n(e.token[S],59)||e.token[S]==="x;"||b[S]>-1&&e.types[S]!=="comment"){if(n(e.token[S+1],46)){y=y+i.indentSize*i.indentChar.length}break}}else if(b[S]>-1){break}if(e.types[S]!=="comment"){if(b[S-1]===-10)y=y+1;y=e.token[S].length+y}S=S-1}while(S>Y);Q=S;if(n(e.token[Q],44)&&n(e.token[$+1],61)){do{if(e.types[Q]==="end")Q=e.begin[Q];if(e.begin[Q]===Y){if(n(e.token[Q],59)||e.token[Q]==="x;")break;if(e.token[Q]==="var"||e.token[Q]==="const"||e.token[Q]==="let"){y=y+i.indentSize*i.indentChar.length;break}}Q=Q-1}while(Q>Y)}if(y>a)a=y;H.push([$,y]);$=S}else if(e.types[$]==="end"){$=e.begin[$]}$=$-1}while($>Y);$=H.length;if($>0){do{$=$-1;S=H[$][1];if(S<a){do{e.token[H[$][0]]=e.token[H[$][0]]+re;S=S+1}while(S<a)}}while($>0)}};o=r;do{o=o-1;if(e.lexer[o]==="script"&&n(e.token[o],125)&&E(e.token[o-1],123)&&b[e.begin[o]]>0){ue(o)}else{o=e.begin[o]}}while(o>0)}o=s.start;do{if(e.lexer[o]===h){if(e.types[o]==="comment"&&d.commentIndent===true){if(/\n/.test(e.token[o])){const ue=e.begin[o]>-1?n(e.token[o][2],42)?We(b[o],u)+i.indentChar:We(b[o],u):i.indentChar;const se=e.token[o].split(/\n/);let a=1;do{se[a]=ue+se[a].trimStart();a=a+1}while(a<se.length);e.token.splice(o,1,se.join(he))}}if(ee.indexOf(e.token[o])<0){if(E(e.token[o],59)||d.noSemicolon===false){t.push(e.token[o])}else if(b[o]<0&&e.types[o+1]!=="comment"){t.push(";")}}if(o<r-1&&e.lexer[o+1]!==h&&e.begin[o]===e.begin[o+1]&&e.types[o+1].indexOf("end")<0&&E(e.token[o],44)){t.push(re)}else if(b[o]>-1){if((b[o]>-1&&n(e.token[o],123)||b[o]>-1&&n(e.token[o+1],125))&&e.lines[o]<3&&d.braceNewline===true){if(e.lines[o+1]<3)t.push(L(0))}if(s.mode===2){if(s.ender!==o){t.push(L(b[o]))}}else if(o!==r-1){t.push(L(b[o]))}p=b[o]}else if(b[o]===-10){t.push(re);if(e.lexer[o+1]!==h)p=p+1}}else{if(l[o]===o){t.push(e.token[o])}else{s.ender=l[o];s.start=o;const ue=s.external(p);t.push(ue);o=s.iterator;if(b[o]===-10){t.push(re)}else if(b[o]>-1){t.push(L(b[o]))}}}o=o+1}while(o<r);s.iterator=r-1;return t.join(c)})();return B}function ln(){const e=[];const{data:i,rules:d,crlf:f}=s;const v=s.ender>0?s.ender+1:i.token.length;const l=d.preserveLine+1;const h=(()=>{let T=0;const ee=[];do{ee.push(d.indentChar);T=T+1}while(T<d.indentSize);return ee.join(c)})();let r=d.indentLevel;let b=s.start;let B=[c,c];function t(T,ee){return i.types[T]===ee}function u(T){const ee=[];const o=(()=>{if(b===v-1)return 1;if(i.lines[b+1]-1>l)return l;if(i.lines[b+1]>1)return i.lines[b+1]-1;return 1})();let p=0;if(T<0)T=0;do{ee.push(f);p=p+1}while(p<o);if(T>0){p=0;do{ee.push(h);p=p+1}while(p<T)}e.push(ee.join(c))}do{if(t(b+1,"end")||t(b+1,"liquid_end")||t(b+1,"liquid_else")){r=r-1}if(t(b,"liquid")&&i.lines[b]>0){e.push(i.token[b]);if(E(i.token[b+1],59)&&Ce.css.units.has(i.token[b+1])===false){u(r)}}else if(t(b-1,"selector")&&t(b,"liquid")&&t(b+1,"selector")){e.push(i.token[b]);if(Qe(i.token[b-1],45)&&(n(i.token[b+1],46)||n(i.token[b+1],35)||n(i.token[b+1],38))){e.push(re)}}else if(t(b,"liquid_else")){e.push(i.token[b]);r=r+1;u(r)}else if(t(b,"start")||t(b,"liquid_start")){r=r+1;e.push(i.token[b]);if(t(b+1,"end")===false&&t(b+1,"liquid_end")===false){u(r)}}else if(n(i.token[b],59)||(t(b,"end")||t(b,"liquid_end")||t(b,"comment"))){e.push(i.token[b]);if(t(b+1,"value")){if(i.lines[b+1]===1){e.push(re)}else if(i.lines[b+1]>1){u(r)}}else if(t(b+1,"separator")===false){if(t(b+1,"comment")===false||t(b+1,"comment")&&i.lines[b+1]>1){u(r)}else{e.push(re)}}else if(t(b,"comment")&&t(b+1,"comment")===false){if(i.lines[b]>1){u(r)}}}else if(n(i.token[b],58)){e.push(i.token[b]);if(t(b+1,"selector")===false&&E(i.token[b+1],44)){e.push(re)}}else if(t(b,"selector")||t(b,"at_rule")){if(d.style.classPadding===true&&t(b-1,"end")&&i.lines[b]<3){u(r)}if(i.token[b].indexOf("and(")>0){i.token[b]=i.token[b].replace(/and\(/,"and (");e.push(i.token[b])}else if(i.token[b].indexOf("when(")>0){B=i.token[b].split("when(");e.push(B[0].replace(/\s+$/,c));u(r+1);e.push(`when (${B[1]}`)}else{e.push(i.token[b])}if(t(b+1,"start")){e.push(re)}}else if(n(i.token[b],44)){if(t(b+1,"value")){u(r);e.push(i.token[b])}else{e.push(i.token[b])}if(t(b+1,"selector")||t(b+1,"property")){u(r)}else{e.push(re)}}else if(i.stack[b]==="map"&&n(i.token[b+1],41)&&b-i.begin[b]>5){e.push(i.token[b]);u(r)}else if(i.token[b]==="x;"){u(r)}else if((t(b,"variable")||t(b,"function"))&&d.style.classPadding===true&&t(b-1,"end")&&i.lines[b]<3){e.push(f);e.push(i.token[b])}else if(E(i.token[b],59)){e.push(i.token[b])}b=b+1}while(b<v);s.iterator=v-1;if(e[0]===s.crlf||n(e[0],32))e[0]=c;return d.endNewline===true?e.join(c).replace(/\s*$/,s.crlf):e.join(c).replace(/\s+$/,c)}function Nt(e){if(e===1)return nn();if(e===3)return ln();if(e===2)return rn()}var Bt=class extends Array{get entry(){return this[this.length-1]}get token(){return this[this.length-1][0]}get index(){return this[this.length-1][1]}update(i,d){const f=this.length-1;if(f>0){if(d===void 0){if(typeof i==="string"){this[f][0]=i}else{this[f][1]=i}}else{this[f][0]=i;this[f][1]=d}return this[f]}else{this.push([i,d]);return this[f+1]}}pop(){const i=this.length-1;const d=this[i];if(i>0)this.splice(i,1);return d}};var Ge=class{constructor(){this.hooks={parse:null,format:null};this.env=typeof process!=="undefined"&&process.versions!=null?"node":"browser";this.start=0;this.ender=0;this.iterator=0;this.scopes=[];this.attributes=new Map;this.regions=new Map;this.pairs=new Map;this.error=c;this.crlf="\n";this.references=[[]];this.count=-1;this.lineColumn=0;this.lineNumber=1;this.lineOffset=0;this.lineIndex=0;this.rules={crlf:false,defaults:"none",language:"auto",endNewline:false,indentChar:" ",indentLevel:0,indentSize:2,preserveLine:2,wrap:0,liquid:{commentNewline:false,commentIndent:true,correct:false,delimiterTrims:"preserve",ignoreTagList:[],indentAttributes:false,lineBreakSeparator:"default",normalizeSpacing:true,preserveComment:false,quoteConvert:"none"},markup:{attributeCasing:"preserve",attributeSort:false,attributeSortList:[],correct:false,commentNewline:false,commentIndent:true,delimiterForce:false,forceAttribute:3,forceLeadAttribute:true,forceIndent:false,ignoreCSS:false,ignoreJS:true,ignoreJSON:false,preserveComment:false,preserveText:false,preserveAttributes:false,selfCloseSpace:true,selfCloseSVG:true,stripAttributeLines:false,quoteConvert:"none"},json:Je({arrayFormat:"default",braceAllman:false,bracePadding:false,objectIndent:"default",objectSort:false},{braceStyle:"none",caseSpace:false,commentIndent:false,commentNewline:false,correct:false,elseNewline:false,endComma:"never",functionNameSpace:false,functionSpace:false,methodChain:4,neverFlatten:false,noCaseIndent:false,noSemicolon:false,preserveComment:false,quoteConvert:"none",styleGuide:"none",ternaryLine:false,variableList:"none",vertical:false},{quoteConvert:"double",endComma:"never",noSemicolon:true,vertical:false}),style:{commentIndent:false,commentNewline:false,correct:false,atRuleSpace:true,classPadding:false,noLeadZero:false,preserveComment:false,sortSelectors:false,sortProperties:false,quoteConvert:"none"},script:{arrayFormat:"default",braceNewline:false,bracePadding:false,braceStyle:"none",braceAllman:false,caseSpace:false,commentIndent:false,commentNewline:false,correct:false,elseNewline:false,endComma:"never",functionNameSpace:false,functionSpace:false,methodChain:4,neverFlatten:false,noCaseIndent:false,noSemicolon:false,objectSort:false,objectIndent:"default",preserveComment:false,quoteConvert:"none",styleGuide:"none",ternaryLine:false,variableList:"none",vertical:false}};this.data={begin:[],ender:[],lexer:[],lines:[],stack:[],token:[],types:[]}}get source(){if(this.mode===2)return Ge.region;return this.env==="node"&&Buffer.isBuffer(Ge.input)?Ge.input.toString():Ge.input}set source(i){Ge.input=this.env==="node"?Buffer.isBuffer(i)?i:Buffer.from(i):i}get current(){return{begin:this.data.begin[this.count],ender:this.data.ender[this.count],lexer:this.data.lexer[this.count],lines:this.data.lines[this.count],stack:this.data.stack[this.count],token:this.data.token[this.count],types:this.data.types[this.count]}}reset(){this.error=c;this.count=-1;this.start=0;this.ender=0;this.mode=1;this.data.begin=[];this.data.ender=[];this.data.lexer=[];this.data.lines=[];this.data.stack=[];this.data.token=[];this.data.types=[];this.references=[[]];this.scopes=[];this.stack=new Bt(["global",-1]);if(this.pairs.size>0)this.pairs.clear();if(this.attributes.size>0)this.attributes.clear();if(this.regions.size>0)this.regions.clear()}get(i){return{begin:this.data.begin[i],ender:this.data.ender[i],lexer:this.data.lexer[i],lines:this.data.lines[i],stack:this.data.stack[i],token:this.data.token[i],types:this.data.types[i]}}document(i,d=3){this.reset();qt(i);if(d===1)return this.data;this.mode=3;return Nt(i)}external(i,d){if(this.mode===1){this.mode=2;const f=tt(i);Ge.region=d;this.language=i;this.lexer=$e(this.language);this.regions.set(this.count+1,{lexer:f,id:this.language});qt(f);this.mode=1;this.lexer=$e(this.rules.language);this.language=this.rules.language}else{if(this.regions.size===0)return this.source;const{id:f,lexer:v}=this.regions.get(this.start);this.mode=2;this.language=f;this.rules.indentLevel=i;const l=Nt(v);this.mode=3;this.rules.indentLevel=0;this.language=this.rules.language;this.lexer=$e(this.language);return l}}final(i){let d=this.count;const f=i.begin[d];if(i.lexer[d]==="style"&&this.rules.style.sortProperties||i.lexer[d]==="script"&&(this.rules.script.objectSort||this.rules.json.objectSort)){return}do{if(i.begin[d]===f||i.begin[i.begin[d]]===f&&i.types[d].indexOf("attribute")>-1&&i.types[d].indexOf("attribute_end")<0){i.ender[d]=this.count}else{d=i.begin[d]}d=d-1}while(d>f);if(d>-1)i.ender[d]=this.count}push(i,d,f=c){i.begin.push(d.begin);i.ender.push(d.ender);i.lexer.push(d.lexer);i.stack.push(d.stack);i.token.push(d.token);i.types.push(d.types);i.lines.push(d.lines);if(i!==this.data)return;this.lineOffset=0;this.count=this.count+1;if(d.lexer!=="style"&&f.replace(/[{}@<>%#]/g,c)===c){f=d.types==="else"?"else":je(d.token)}if(d.types==="start"||d.types.indexOf("_start")>0){this.stack.push([f,this.count])}else if(d.types==="end"||d.types.indexOf("_end")>0){let v=0;const l=this.stack.length;if(l>2&&(i.types[this.stack[l-1][1]]==="else"||i.types[this.stack[l-1][1]].indexOf("_else")>0)&&(i.types[this.stack[l-2][1]]==="start"||i.types[this.stack[l-2][1]].indexOf("_start")>0)&&(i.types[this.stack[l-2][1]+1]==="else"||i.types[this.stack[l-2][1]+1].indexOf("_else")>0)){this.stack.pop();i.begin[this.count]=this.stack.index;i.stack[this.count]=this.stack.token;i.ender[this.count-1]=this.count;v=i.ender[i.begin[this.count]+1]}this.final(i);if(v>0)i.ender[i.begin[this.count]+1]=v;this.stack.pop()}else if(d.types==="else"||d.types.indexOf("_else")>0){if(f===c)f="else";if(this.count>0&&(i.types[this.count-1]==="start"||i.types[this.count-1].indexOf("_start")>0)){this.stack.push([f,this.count])}else{this.final(i);this.stack.update(f===c?"else":f,this.count)}}if(this.hooks.parse!==null){this.hooks.parse[0].call({line:this.lineNumber,stack:this.stack.entry,language:this.language},d,this.count)}}pop(i){if(i===this.data)this.count=this.count-1;return{begin:i.begin.pop(),ender:i.ender.pop(),lexer:i.lexer.pop(),lines:i.lines.pop(),stack:i.stack.pop(),token:i.token.pop(),types:i.types.pop()}}concat(i,d){i.begin=i.begin.concat(d.begin);i.ender=i.ender.concat(d.ender);i.lexer=i.lexer.concat(d.lexer);i.stack=i.stack.concat(d.stack);i.token=i.token.concat(d.token);i.types=i.types.concat(d.types);i.lines=i.lines.concat(d.lines);if(i===this.data)this.count=i.token.length-1}splice(i){const d=this.data.begin[this.count];const f=this.data.token[this.count];if(i.record!==void 0&&i.record.token!==c){i.data.begin.splice(i.index,i.howmany,i.record.begin);i.data.ender.splice(i.index,i.howmany,i.record.ender);i.data.token.splice(i.index,i.howmany,i.record.token);i.data.lexer.splice(i.index,i.howmany,i.record.lexer);i.data.stack.splice(i.index,i.howmany,i.record.stack);i.data.types.splice(i.index,i.howmany,i.record.types);i.data.lines.splice(i.index,i.howmany,i.record.lines);if(i.data===this.data){this.count=this.count-i.howmany+1;if(d!==this.data.begin[this.count]||f!==this.data.token[this.count]){this.lineOffset=0}}}else{i.data.begin.splice(i.index,i.howmany);i.data.ender.splice(i.index,i.howmany);i.data.token.splice(i.index,i.howmany);i.data.lexer.splice(i.index,i.howmany);i.data.stack.splice(i.index,i.howmany);i.data.types.splice(i.index,i.howmany);i.data.lines.splice(i.index,i.howmany);if(i.data===this.data){this.count=this.count-i.howmany;this.lineOffset=0}}}is(i,d){return this.count>0?this.data[i][this.count]===d:false}lines(i,d){this.lineNumber=this.lineNumber+1;this.lineIndex=i;return d+1}spacer(i){this.lineOffset=1;do{if(i.array[i.index]===he){this.lineOffset=this.lineOffset+1;this.lineNumber=this.lineNumber+1}if(de(i.array[i.index+1])===false)break;i.index=i.index+1}while(i.index<i.end);return i.index}};var at=Ge;at.input=c;at.region=c;var s=new at;function on(e){let i=[];let d=0;const f=/(((var)|(let)|(const)|(function)|(import))\s+(\w|\$)+[a-zA-Z0-9]*)/.test(e)&&/@import/.test(e)===false;const v=/((((final)|(public)|(private))\s+static)|(static\s+void))/.test(e);function l(){if(/\n\s*#+\s+/.test(e)||/^#+\s+/.test(e)){return{language:"markdown",lexer:"markup"}}if(/\$[a-zA-Z]/.test(e)||/\{\s*(\w|\.|\$|#)+\s*\{/.test(e)||/^[.#]?[\w][\w-]+\s+\{(?:\s+[a-z][a-z-]+:\s*\S+;)+\s+[&>+]?\s+[.#:]?[\w][\w-]\s+\{/.test(e)&&/:\s*@[a-zA-Z];/.test(e)===false){return{language:"scss",lexer:"style"}}if(/@[a-zA-Z]:/.test(e)||/\.[a-zA-Z]\(\);/.test(e)){return{language:"less",lexer:"style"}}return{language:"css",lexer:"style"}}function h(){let b=1;let B=c;let t=false;let u=false;const T=/((public)|(private))\s+(static\s+)?(((v|V)oid)|(class)|(final))/.test(e);function ee(){if(e.indexOf("(")>-1||e.indexOf("=")>-1||e.indexOf(";")>-1&&e.indexOf("{")>-1){if(v===true||/\w<\w+(,\s+\w+)*>/.test(e)||/(?:var|let|const)\s+\w+\s*:/.test(e)||/=\s*<\w+/.test(e)){return{language:"typescript",lexer:"script"}}return{language:"javascript",lexer:"script"}}return{language:"unknown",lexer:"text"}}function o(){if(/:\s*(?:number|string|boolean|any|unknown)(?:\[\])?/.test(e)||/(?:public|private)\s+/.test(e)||/(?:export|declare)\s+type\s+\w+\s*=/.test(e)||/(?:namespace|interface|enum|implements|declare)\s+\w+/.test(e)||/(?:typeof|keyof|as)\s+\w+/.test(e)||/\w+\s+as\s+\w+/.test(e)||/\[\w+(?:(?::\s*\w+)|(?:\s+in\s+\w+))\]:/.test(e)||/\):\s*\w+(?:\[\])?\s*(?:=>|\{)\s+/.test(e)||/(var|const|let)\s+\w+:\s*(string|number|boolean|string|any)(\[\])?/.test(e)){return{language:"typescript",lexer:"script"}}if(/\s(class|var|const|let)\s+\w/.test(e)===false&&/<[a-zA-Z](?:-[a-zA-Z])?/.test(e)&&/<\/[a-zA-Z-](?:-[a-zA-Z])?/.test(e)&&(/\s?\{%/.test(e)||/{{/.test(e))){return{language:"liquid",lexer:"markup"}}if(/^(\s*[$@])/.test(e)===false&&/([}\]];?\s*)$/.test(e)&&(/^\s*import\s+\*\s+as\s+\w+\s+from\s+['"]/.test(e)||/module\.export\s+=\s+/.test(e)||/export\s+default\s+\{/.test(e)||/[?:]\s*[{[]/.test(e)||/^(?:\s*return;?(?:\s+[{[])?)/.test(e))){return{language:"javascript",lexer:"script"}}if(/{%/.test(e)&&/{{/.test(e)&&/<\w/.test(e)){return{language:"liquid",lexer:"markup"}}if(/{\s*(?:\w|\.|@|#)+\s*\{/.test(e)){return{language:"less",lexer:"style"}}if(/\$(\w|-)/.test(e)){return{language:"scss",lexer:"style"}}if(/[;{:]\s*@\w/.test(e)===true){return{language:"less",lexer:"style"}}return{language:"css",lexer:"style"}}if(b<d){do{if(t===false){if(n(i[b],42)&&n(i[b-1],47)){i[b-1]=c;t=true}else if(u===false&&b<d-6&&i[b].charCodeAt(0)===102&&i[b+1].charCodeAt(0)===105&&i[b+2].charCodeAt(0)===108&&i[b+3].charCodeAt(0)===116&&i[b+4].charCodeAt(0)===101&&i[b+5].charCodeAt(0)===114&&n(i[b+6],58)){u=true}}else if(t===true&&n(i[b],42)&&b!==d-1&&n(i[b+1],47)){t=false;i[b]=c;i[b+1]=c}else if(u===true&&n(i[b],59)){u=false;i[b]=c}if(t===true||u===true)i[b]=c;b=b+1}while(b<d)}B=i.join(c);if(/\s\/\//.test(e)===false&&/\/\/\s/.test(e)===false&&/^(\s*(\{|\[)(?!%))/.test(e)===true&&/((\]|\})\s*)$/.test(e)&&e.indexOf(",")!==-1){return{language:"json",lexer:"script"}}if(/((\}?(\(\))?\)*;?\s*)|([a-z0-9]("|')?\)*);?(\s*\})*)$/i.test(e)===true&&(f===true||T===true||/console\.log\(/.test(e)===true||/export\s+default\s+class\s+/.test(e)===true||/export\s+(const|var|let|class)s+/.test(e)===true||/document\.get/.test(e)===true||/((=|(\$\())\s*function)|(\s*function\s+(\w*\s+)?\()/.test(e)===true||e.indexOf("{")===-1||/^(\s*if\s+\()/.test(e)===true))return ee();if(e.indexOf("{")>-1&&(/^(\s*[\u007b\u0024\u002e#@a-z0-9])/i.test(e)||/^(\s*\/(\*|\/))/.test(e)||/^(\s*\*\s*\{)/.test(e))&&/^(\s*if\s*\()/.test(e)===false&&/=\s*(\{|\[|\()/.test(B)===false&&(/(\+|-|=|\?)=/.test(B)===false||/\/\/\s*=+/.test(B)||/=+('|")?\)/.test(e)&&/;\s*base64/.test(e))&&/function(\s+\w+)*\s*\(/.test(B)===false)return o();return e.indexOf("{%")>-1?{language:"liquid",lexer:"markup"}:{language:"unknown",lexer:"text"}}function r(){function b(){return/{%-?\s*(schema|for|if|unless|render|include)/.test(e)||/{%-?\s*end\w+/.test(e)||/{{-?\s*content_for/.test(e)||/{{-?\s*[a-zA-Z0-9_'".[\]]+\s*-?}}/.test(e)||/{%/.test(e)&&/%}/.test(e)&&/{{/.test(e)&&/}}/.test(e)?{language:"liquid",lexer:"markup"}:{language:"html",lexer:"markup"}}return/^(\s*<!doctype\s+html>)/i.test(e)||/^(\s*<html)/i.test(e)||/<form\s/i.test(e)&&/<label\s/i.test(e)&&/<input\s/i.test(e)||(/<img(\s+\w+=['"]?\S+['"]?)*\s+src\s*=/.test(e)||/<a(\s+\w+=['"]?\S+['"]?)*\s+href\s*=/.test(e))||/<ul\s/i.test(e)&&/<li\s/i.test(e)&&/<\/li>/i.test(e)&&/<\/ul>/i.test(e)||/<head\s*>/.test(e)&&/<\/head>/.test(e)||/^(\s*<!DOCTYPE\s+((html)|(HTML))\s+PUBLIC\s+)/.test(e)&&/XHTML\s+1\.1/.test(e)===false&&/XHTML\s+1\.0\s+(S|s)((trict)|(TRICT))/.test(e)===false?b():/\s?{[{%]-?/.test(e)?{language:"liquid",lexer:"markup"}:{language:"xml",lexer:"markup"}}if(e===null||e.replace(/\s+/g,c)===c){return{language:"unknown",lexer:"text"}}if((/\n\s*#{1,6}\s+/.test(e)||/\n\s*(?:\*|-|(?:\d+\.))\s/.test(e))&&(/\[( |x|X)\]/.test(e)||/\s[*_~]{1,2}\w+[*_~]{1,2}/.test(e)||/\n\s*```[a-zA-Z]*?\s+/.test(e)||/-+\|(-+\|)+/.test(e))){return{language:"markdown",lexer:"text"}}if(/^(\s*<!DOCTYPE\s+html>)/i.test(e))return r();if(/^\s*@(?:charset|import|include|keyframes|media|namespace|page)\b/.test(e))return l();if(v===false&&/=(>|=|-|\+|\*)/.test(e)===false&&/^(?:\s*((if)|(for)|(function))\s*\()/.test(e)===false&&/(?:\s|;|\})((if)|(for)|(function\s*\w*))\s*\(/.test(e)===false&&f===false&&/return\s*\w*\s*(;|\})/.test(e)===false&&(e===void 0||/^(?:\s*#(?!(!\/)))/.test(e)||/\n\s*(\.|@)\w+(\(|(\s*:))/.test(e)&&/>\s*<\w/.test(e)===false||(/^\s*:root\s*\{/.test(e)||/-{2}\w+\s*\{/.test(e)||/^\s*(?:body|button|hr|section|h[1-6]|p|strong|\*)\s+\{\s+/.test(e))))return l();i=e.replace(/\[[a-zA-Z][\w-]*=['"]?[a-zA-Z][\w-]*['"]?\]/g,c).split(c);d=i.length;if(/^(\s*({{|{%|<))/.test(e))return r();if(v===true||/^(?:[\s\w-]*<)/.test(e)===false&&/(?:>[\s\w-]*)$/.test(e)===false)return h();return(/^(?:\s*<\?xml)/.test(e)||/(?:>[\w\s:]*)?<(?:\/|!|#)?[\w\s:\-[]+/.test(e)||/^\s*</.test(e)&&/<\/\w+(\w|\d)+>\s*$/.test(e))&&(/^(?:[\s\w]*<)/.test(e)||/(?:>[\s\w]*)$/.test(e))||/^(?:\s*<s((cript)|(tyle)))/i.test(e)&&/(?:<\/s((cript)|(tyle))>\s*)$/i.test(e)?/^(?:[\s\w]*<)/.test(e)===false||/(?:>[\s\w]*)$/.test(e)===false?h():r():{language:"unknown",lexer:"text"}}var jt=class{constructor(){this.events={format:[],language:[],rules:[],parse:[]}}get data(){return s.data}get grammar(){return Ce.extend}get definitions(){return Ct}get detect(){return on}on(i,d){this.events[i].push(d)}hook(i,d){s.hooks[i]=[d]}format(i,d){s.source=i;if(typeof this.language==="string"&&this.language!==s.language){s.language=this.language;s.lexer=$e(s.language)}else{this.language=d.language;this.lexer=$e(d.language)}if(typeof d==="object")this.rules(d);const f=tt(this.language);const v=kt(this.language,this.lexer);const l=s.document(f);this.stats=v(l.length);if(this.events.format.length>0){for(const h of this.events.format){if(h.bind({parsed:s.data})(i,s.rules)===false){return i}}}if(!this.async){if(s.error.length)throw new Error(s.error);return l}return new Promise(((h,r)=>{var b,B;if((B=(b=s)==null?void 0:b.error)==null?void 0:B.length)return r(s.error);return h(l)}))}parse(i,d){s.source=i;if(typeof d==="object")this.rules(d);this.lexer=$e(s.language);const f=tt(this.language);const v=kt(this.language,this.lexer);const l=s.document(f,1);this.stats=v(s.count);if(this.events.parse.length>0){for(const h of this.events.parse){if(h.bind({parsed:s.data})(i,s.rules)===false){return i}}}if(!this.async){if(s.error.length)throw new Error(s.error);return l}return new Promise(((h,r)=>{if(s.error.length)return r(s.error);return h(l)}))}rules(i){if(typeof i==="undefined")return s.rules;let d;if(this.events.rules.length>0)d=ut({},s.rules);for(const f in i){if(f in s.rules){if(typeof s.rules[f]==="object"){if(s.rules[f]!==i[f]){s.rules[f]=ut(ut({},s.rules[f]),i[f])}}else{if(f==="crlf"){s.rules[f]=i[f];s.crlf=s.rules[f]?_t:he}else if(f==="language"){s.rules[f]=i[f];if(s.language!==s.rules[f]){s.language=i[f];s.lexer=$e(s.language)}}else{s.rules[f]=i[f]}}}if(d){const v={};for(const l in i){if(l!=="liquid"&&l!=="markup"&&l!=="script"&&l!=="style"&&l!=="json"){if(d[l]!==i[l])v[l]={from:d[l],to:i[l]}}else{for(const h in i[l]){if(d[l][h]!==i[l][h]){if(!(l in v))v[l]={};v[l][h]={from:d[l][h],to:i[l][h]}}}}}if(this.events.rules.length>0){for(const l of this.events.rules){l(v,s.rules)}}}}return s.rules}};var Pt=class extends jt{liquid(i,d){return this.format(i,d)}html(i,d){return this.format(i,d)}xml(i,d){return this.format(i,d)}css(i,d){return this.format(i,d)}json(i,d){return this.format(i,d)}};var yn=function(e){const i=new Pt;for(const d of e){xt(i[d],{sync:{value(f,v){i.async=false;i.language=d;i.lexer=$e(d);return i[d](f,v)}}})}xt(i.format,{sync:{value(d,f){i.async=false;return i.format(d,f)}}});return i}(["liquid","html","xml","json","css"]);module.exports=yn;