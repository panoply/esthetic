'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var ot=Object.defineProperty;var at=(l,c)=>{for(var h in c)ot(l,h,{get:c[h],enumerable:true});};var Q=function(){const l=typeof process!=="undefined"&&process.versions!=null?"node":"browser";let c="";return {env:l,mode:"beautify",end:0,iterator:0,start:0,scopes:[],beautify:{},lexers:{},get source(){return l==="node"&&Buffer.isBuffer(c)?c.toString():c},set source(h){c=l==="node"?Buffer.isBuffer(h)?h:Buffer.from(h):h;},data:{begin:[],ender:[],lexer:[],lines:[],stack:[],token:[],types:[]},hooks:{before:[],language:[],rules:[],after:[]},stats:{chars:-1,time:-1,size:"",language:""},options:{lexer:"auto",language:"text",languageName:"Plain Text",mode:"beautify",indentLevel:0,crlf:false,commentIndent:true,endNewline:false,indentChar:" ",indentSize:2,preserveComment:false,preserveLine:2,wrap:0,grammar:{html:{tags:[],voids:[],embedded:{}},liquid:{tags:[],else:[],singletons:[],embedded:{}},script:{keywords:[]},style:{units:[]}},markup:{correct:false,commentNewline:false,attributeCasing:"preserve",attributeValues:"preserve",attributeSort:false,attributeSortList:[],forceAttribute:false,forceLeadAttribute:false,forceIndent:false,preserveText:false,preserveAttributes:false,selfCloseSpace:false,quoteConvert:"none"},style:{correct:false,compressCSS:false,classPadding:false,noLeadZero:false,sortSelectors:false,sortProperties:false,quoteConvert:"none",forceValue:"preserve"},script:{correct:false,braceNewline:false,bracePadding:false,braceStyle:"none",braceAllman:false,commentNewline:false,caseSpace:false,inlineReturn:true,elseNewline:false,endComma:"never",arrayFormat:"default",objectSort:false,objectIndent:"default",functionNameSpace:false,functionSpace:false,styleGuide:"none",ternaryLine:false,methodChain:4,neverFlatten:false,noCaseIndent:false,noSemicolon:false,quoteConvert:"none",variableList:"none",vertical:false},json:{arrayFormat:"default",braceAllman:false,bracePadding:false,objectIndent:"default",objectSort:false}}}}();var Re=Object.assign;var Se=Object.create;var Ne=Object.keys;var Qe=Object.defineProperty;var Ee=Array.isArray;var w="";var pe=" ";var ne="\n";var xe;var oe=new(xe=class{constructor(){this.html={};this.liquid={};this.script={};this.style={};this.script.keywords=new Set(xe.defaults.script.keywords);this.style.units=new Set(xe.defaults.style.units);this.html.tags=new Set(xe.defaults.html.tags);this.html.voids=new Set(xe.defaults.html.voids);this.html.embed={};this.liquid.tags=new Set(xe.defaults.liquid.tags);this.liquid.else=new Set(xe.defaults.liquid.else);this.liquid.singletons=new Set(xe.defaults.liquid.singletons);this.liquid.embed={};this.defaults();}embed(c,h){return h in this[c].embed}defaults(){for(const c in xe.defaults.html.embedded){this.html.embed[c]={};for(const{language:h,attribute:n=null}of xe.defaults.html.embedded[c]){this.html.embed[c].language=h;if(typeof n==="object"){for(const o in n){this.html.embed[c].attribute=o;if(Array.isArray(n[o])){this.html.embed[c].value=t=>new Set(n[o]).has(t);}else {this.html.embed[c].value=t=>new RegExp(n[o]).test(t);}}}else {this.html.embed[c].attribute=null;}}}for(const c in xe.defaults.liquid.embedded){this.liquid.embed[c]={end:h=>new RegExp(`^{%-?\\s*end${c}`).test(h)};for(const{language:h,argument:n}of xe.defaults.liquid.embedded[c]){this.liquid.embed[c].language=h;if(n){if(Array.isArray(n)){this.liquid.embed[c].attribute=o=>new Set(n).has(o);}else {this.liquid.embed[c].attribute=o=>new RegExp(n).test(o);}}else {this.liquid.embed[c].attribute=null;}}}}extend(c){for(const h in c){if(h==="html"){if("tags"in c[h]&&Array.isArray(c[h].tags)){for(const n of c[h].tags){if(!this.html.tags.has(n))this.html.tags.add(n);}}if("voids"in c[h]&&Array.isArray(c[h].voids)){for(const n of c[h].voids){if(!this.html.voids.has(n))this.html.voids.add(n);}}if("embedded"in c[h]);}if(h==="liquid"){if("tags"in c[h]&&Array.isArray(c[h].tags)){for(const n of c[h].tags){if(!this.liquid.tags.has(n))this.liquid.tags.add(n);}}if("else"in c[h]&&Array.isArray(c[h].else)){for(const n of c[h].else){if(!this.liquid.else.has(n))this.liquid.else.add(n);}}if("singletons"in c[h]&&Array.isArray(c[h].singletons)){for(const n of c[h].singletons){if(!this.liquid.singletons.has(n))this.liquid.singletons.add(n);}}if("embedded"in c[h]&&typeof c[h].embedded==="object"){for(const n in c[h].embedded){if(!(n in this.liquid.embed)){this.liquid.embed[n]={end:o=>new RegExp(`{%-?\\s*end${n}`).test(o)};}for(const{language:o,argument:t}of c[h].embedded[n]){if(this.liquid.embed[n].language!==o){this.liquid.embed[n].language=o;}if(t){if(this.liquid.embed[n].attribute===null){if(Array.isArray(t)){this.liquid.embed[n].attribute=$=>new Set(t).has($);}else {this.liquid.embed[n].attribute=$=>new RegExp(t).test($);}}else {const $=[];for(const I of xe.defaults.liquid.embedded[n]){if(Array.isArray(I.argument)){for(const C of I.argument){if(t!==C)$.push(t);else $.push(C);}this.liquid.embed[n].attribute=C=>new Set($).has(C);}else {if(I.argument!==t){this.liquid.embed[n].attribute=C=>new RegExp(t).test(C);}}}}}}}}}if(h==="style"){if("units"in c[h]&&Array.isArray(c[h].units)){for(const n of c[h].units){if(!this.style.units.has(n))this.style.units.add(n);}}}if(h==="script"){if("keywords"in c[h]&&Array.isArray(c[h].keywords)){for(const n of c[h].keywords){if(!this.script.keywords.has(n))this.script.keywords.add(n);}}}}}},xe.defaults={script:{keywords:["ActiveXObject","ArrayBuffer","AudioContext","Canvas","CustomAnimation","DOMParser","DataView","Date","Error","EvalError","FadeAnimation","FileReader","Flash","Float32Array","Float64Array","FormField","Frame","Generator","HotKey","Image","Iterator","Intl","Int16Array","Int32Array","Int8Array","InternalError","Loader","Map","MenuItem","MoveAnimation","Notification","ParallelArray","Point","Promise","Proxy","RangeError","Rectangle","ReferenceError","Reflect","RegExp","ResizeAnimation","RotateAnimation","Set","SQLite","ScrollBar","Set","Shadow","StopIteration","Symbol","SyntaxError","Text","TextArea","Timer","TypeError","URL","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","URIError","WeakMap","WeakSet","Web","Window","XMLHttpRequest"]},style:{units:["%","cap","ch","cm","deg","dpcm","dpi","dppx","em","ex","fr","grad","Hz","ic","in","kHz","lh","mm","ms","mS","pc","pt","px","Q","rad","rem","rlh","s","turn","vb","vh","vi","vmax","vmin","vw"]},html:{embedded:{script:[{language:"javascript"},{language:"json",attribute:{type:["application/json","application/ld+json"]}},{language:"jsx",attribute:{type:["text/jsx","application/jsx"]}}],style:[{language:"css"}]},voids:["area","base","basefont","br","col","embed","eventsource","frame","hr","image","img","input","isindex","keygen","link","meta","path","param","progress","source","wbr","use"],tags:["body","colgroup","dd","dt","head","html","li","option","p","tbody","td","tfoot","th","thead","tr"]},liquid:{embedded:{schema:[{language:"json"}],style:[{language:"css"}],stylesheet:[{language:"css"},{language:"scss",argument:/\s*['"]scss['"]/}],javascript:[{language:"javascript"}]},tags:["case","capture","comment","embed","filter","for","form","if","macro","paginate","raw","switch","tablerow","unless","verbatim","schema","style","javascript","highlight","stylesheet"],else:["default","else","when","elsif"],singletons:["assign","increment","decrement","render","include"]}},xe);function Ge(l){const c=Se(null);if(l)return Re(c,l);return c}function Oe(l,c=pe){if(l===0)return c;let h=w;let n=1;do{h+=c;}while(n++<l);return h}function d(l,c){if(!l)return false;return l.charCodeAt(0)===c}function G(l,c){return d(l,c)===false}function ae(l){return /\s/.test(l)}function Je(l){const c=1024;const h=1048576;const n=1073741824;if(l<c)return l+" B";else if(l<h)return (l/c).toFixed(1)+" KB";else if(l<n)return (l/h).toFixed(1)+" MB";else return (l/n).toFixed(1)+" GB"}function Ke(l){return `\\${l}`}function De(l){const c=l.indexOf("{");const h=d(l[c+2],45)?l.slice(c+3).trimStart():l.slice(c+2).trimStart();return h.slice(0,h.search(/\s/))}function Ye(l){const c=l.indexOf("{");if(d(l[c+1],37)){let h=d(l[c+2],45)?l.slice(c+3).trimStart():l.slice(c+2).trimStart();h=h.slice(0,h.search(/\s/));if(h.startsWith("end"))return false;return oe.liquid.tags.has(h)}return false}function qe(l){let c=l;if(Array.isArray(l))c=l.join("");const h=c.indexOf("{");if(d(c[h+1],37)){if(d(c[h+2],45))return c.slice(h+3).trimStart().startsWith("end");return c.slice(h+2).trimStart().startsWith("end")}return false}function je(l,c){if(c===1){return d(l[0],123)&&(d(l[1],37)||d(l[1],123))}else if(c===2){return d(l[l.length-1],125)&&(d(l[l.length-2],37)||d(l[l.length-2],125))}else if(c===3){return d(l[0],123)&&(d(l[1],37)||d(l[1],123))&&(d(l[l.length-1],125)&&(d(l[l.length-2],37)||d(l[l.length-2],123)))}else if(c===4){return /{[{%}]/.test(l)}else if(c===5){return /{[{%]/.test(l)&&/[%}]}/.test(l)}}function ze(l){let c=0;const h=l.length;const n=l;const o=()=>{let $=0;const I=n.length;if($<I){do{if(Ee(n[$])===true)n[$]=ze.apply(this,n[$]);$=$+1;}while($<I)}};const t=$=>{let I=c;let C=0;let k=0;let a=0;let e=[];let m=n[c];let F="";const i=typeof m;if(I<h){do{F=typeof n[I];if(n[I]<m||F<i){m=n[I];e=[I];}else if(n[I]===m){e.push(I);}I=I+1;}while(I<h)}k=e.length;I=c;C=k+c;if(I<C){do{n[e[a]]=n[I];n[I]=m;a=a+1;I=I+1;}while(I<C)}c=c+k;if(c<h){t("");}else {if(this.recursive===true)o();l=n;}return $};t("");return l}function He(l){let c=0;const h=l.length;const n=l;const o=()=>{let $=0;const I=n.length;if($<I){do{if(Ee(n[$]))n[$]=He.apply(this,n[$]);$=$+1;}while($<I)}};const t=$=>{let I=c;let C=0;let k=0;let a=0;let e=n[c];let m=[];let F="";const i=typeof e;if(I<h){do{F=typeof n[I];if(n[I]>e||F>i){e=n[I];m=[I];}else if(n[I]===e){m.push(I);}I=I+1;}while(I<h)}k=m.length;I=c;C=k+c;if(I<C){do{n[m[a]]=n[I];n[I]=e;a=a+1;I=I+1;}while(I<C)}c=c+k;if(c<h){t("");}else {if(this.recursive===true)o();l=n;}return $};t("");return l}function Ue(l){let c=l;const h=[l[0]];const n=()=>{let t=0;const $=c.length;if(t<$){do{if(Ee(c[t]))c[t]=Ue.apply(this,c[t]);t=t+1;}while(t<$)}};const o=t=>{let $=0;const I=[];const C=c.length;if($<C){do{if(c[$]!==t)I.push(c[$]);$=$+1;}while($<C)}c=I;if(I.length>0){h.push(I[0]);o(I[0]);}else {if(this.recursive===true)n();l=c;}};o(this.array[0]);return l}var ve=/^[\t\v\f\r \u00a0\u2000-\u200b\u2028-\u2029\u3000]+/;var Ce=/[\t\v\f \u00a0\u2000-\u200b\u2028-\u2029\u3000]+$/;var et=/(\/[*/]|{%-?\s*(?:comment\s*-?%}|#)|#|<!-{2})\s*@prettify\s+/;var tt=/(\/[*/]|{%-?\s*(?:comment\s*-?%}|#)|#|<!-{2})\s*@prettify-ignore\b/;var s=new class jt{constructor(){this.datanames=["begin","ender","lexer","lines","stack","token","types"];this.data={begin:[],ender:[],lexer:[],lines:[],stack:[],token:[],types:[]};this.structure=[["global",-1]];this.references=[[]];this.count=-1;this.lineNumber=1;this.linesSpace=0;this.error=w;}get current(){const{begin:c,ender:h,lexer:n,lines:o,stack:t,token:$,types:I}=this.data;return {begin:c[c.length-1],ender:h[h.length-1],lexer:n[n.length-1],lines:o[o.length-1],stack:t[t.length-1],token:$[c.length-1],types:I[c.length-1]}}init(){this.error=w;this.count=-1;this.linesSpace=0;this.lineNumber=1;this.references=[[]];this.data.begin=[];this.data.ender=[];this.data.lexer=[];this.data.lines=[];this.data.stack=[];this.data.token=[];this.data.types=[];this.structure=[["global",-1]];this.structure.pop=()=>{const c=this.structure.length-1;const h=this.structure[c];if(c>0)this.structure.splice(c,1);return h};return this.data}concat(c,h){for(const n of this.datanames)c[n]=c[n].concat(h[n]);if(c===this.data)this.count=c.token.length-1;}objectSort(c){let h=this.count;let n=this.structure[this.structure.length-1][1];let o=0;let t=0;let $=0;let I=0;let C=true;let k=0;let a=0;let e=0;const m=[];const F=n;const i=Q.options.language==="json";const P=c.lexer[h]==="style"&&this.structure[this.structure.length-1][0]==="global";const S=c.lexer[h]==="style";const p=S===true?[";","separator"]:[",","separator"];const B=this.linesSpace;const U=this.count;const V=P===true?"global":this.structure[this.structure.length-1][0];function f(x,y){let A=x[0];let _=y[0];if(c.types[A]==="comment"){do{A=A+1;}while(A<U&&c.types[A]==="comment");if(c.token[A]===void 0){return 1}}if(c.types[_]==="comment"){do{_=_+1;}while(_<U&&c.types[_]==="comment");if(c.token[_]===void 0)return 1}if(S===true){if(c.token[A].indexOf("@import")===0||c.token[_].indexOf("@import")===0){return A<_?-1:1}if(c.types[A]!==c.types[_]){if(c.types[A]==="function")return 1;if(c.types[A]==="variable")return -1;if(c.types[A]==="selector")return 1;if(c.types[A]==="property"&&c.types[_]!=="variable")return -1;if(c.types[A]==="mixin"&&c.types[_]!=="property"&&c.types[_]!=="variable")return -1}}if(c.token[A].toLowerCase()>c.token[_].toLowerCase())return 1;return -1}const b={begin:[],ender:[],lexer:[],lines:[],stack:[],token:[],types:[]};I=h;do{if(c.begin[h]===n||P===true&&h<I&&c.token[h]==="}"&&c.begin[c.begin[h]]===-1){if(c.types[h].indexOf("template")>-1)return;if(c.token[h]===p[0]||S===true&&c.token[h]==="}"&&c.token[h+1]!==";"){C=true;k=h+1;}else if(S===true&&c.token[h-1]==="}"){C=true;k=h;}if(k===0&&c.types[0]==="comment"){do{k=k+1;}while(c.types[k]==="comment")}else if(c.types[k]==="comment"&&c.lines[k]<2){k=k+1;}if(C===true&&(c.token[h]===p[0]||S===true&&c.token[h-1]==="}")&&k<=I){if(S===true&&"};".indexOf(c.token[I])<0){I=I+1;}else if(S===false&&c.token[I]!==","){I=I+1;}m.push([k,I]);if(S===true&&c.token[k]==="}"){I=k;}else {I=k-1;}}}h=h-1;}while(h>n);if(m.length>0&&m[m.length-1][0]>h+1){o=m[m.length-1][0]-1;if(c.types[o]==="comment"&&c.lines[o]>1){do{o=o-1;}while(o>0&&c.types[o]==="comment");m[m.length-1][0]=o+1;}if(c.types[h+1]==="comment"&&h===-1){do{h=h+1;}while(c.types[h+1]==="comment")}m.push([h+1,o]);}if(m.length>1){if(i===true||S===true||c.token[h-1]==="="||c.token[h-1]===":"||c.token[h-1]==="("||c.token[h-1]==="["||c.token[h-1]===","||c.types[h-1]==="word"||h===0){m.sort(f);e=m.length;C=false;n=0;do{a=m[n][1];if(S===true){$=a;if(c.types[$]==="comment")$=$-1;if(c.token[$]==="}"){a=a+1;p[0]="}";p[1]="end";}else {p[0]=";";p[1]="separator";}}o=m[n][0];if(S===true&&c.types[a-1]!=="end"&&c.types[a]==="comment"&&c.types[a+1]!=="comment"&&n<e-1){a=a+1;}if(o<a){do{if(S===false&&n===e-1&&o===a-2&&c.token[o]===","&&c.lexer[o]==="script"&&c.types[o+1]==="comment"){t=t+1;}else {this.push(b,{begin:c.begin[o],ender:c.ender[o],lexer:c.lexer[o],lines:c.lines[o],stack:c.stack[o],token:c.token[o],types:c.types[o]});t=t+1;}if(c.token[o]===p[0]&&(S===true||c.begin[o]===c.begin[m[n][0]])){C=true;}else if(c.token[o]!==p[0]&&c.types[o]!=="comment"){C=false;}o=o+1;}while(o<a)}if(C===false&&b.token[b.token.length-1]!=="x;"&&(S===true||n<e-1)){o=b.types.length-1;if(b.types[o]==="comment"){do{o=o-1;}while(o>0&&b.types[o]==="comment")}o=o+1;this.splice({data:b,howmany:0,index:o,record:{begin:F,stack:V,ender:this.count,lexer:b.lexer[o-1],lines:0,token:p[0],types:p[1]}});t=t+1;}n=n+1;}while(n<e);this.splice({data:c,howmany:t,index:h+1});this.linesSpace=B;this.concat(c,b);}}}pop(c){const h={begin:c.begin.pop(),ender:c.ender.pop(),lexer:c.lexer.pop(),lines:c.lines.pop(),stack:c.stack.pop(),token:c.token.pop(),types:c.types.pop()};if(c===this.data)this.count=this.count-1;return h}push(c,h,n=w){const o=()=>{let t=this.count;const $=c.begin[t];if(c.lexer[t]==="style"&&Q.options.style.sortProperties===true||c.lexer[t]==="script"&&(Q.options.script.objectSort===true||Q.options.json.objectSort===true)){return}do{if(c.begin[t]===$||c.begin[c.begin[t]]===$&&c.types[t].indexOf("attribute")>-1&&c.types[t].indexOf("attribute_end")<0){c.ender[t]=this.count;}else {t=c.begin[t];}t=t-1;}while(t>$);if(t>-1)c.ender[t]=this.count;};this.datanames.forEach(t=>c[t].push(h[t]));if(c===this.data){this.count=this.count+1;this.linesSpace=0;if(h.lexer!=="style"){if(n.replace(/(\{|\}|@|<|>|%|#|)/g,w)===w){n=h.types==="else"?"else":n=h.token;}}if(h.types==="start"||h.types.indexOf("_start")>0){this.structure.push([n,this.count]);}else if(h.types==="end"||h.types.indexOf("_end")>0){let t=0;if(this.structure.length>2&&(c.types[this.structure[this.structure.length-1][1]]==="else"||c.types[this.structure[this.structure.length-1][1]].indexOf("_else")>0)&&(c.types[this.structure[this.structure.length-2][1]]==="start"||c.types[this.structure[this.structure.length-2][1]].indexOf("_start")>0)&&(c.types[this.structure[this.structure.length-2][1]+1]==="else"||c.types[this.structure[this.structure.length-2][1]+1].indexOf("_else")>0)){this.structure.pop();c.begin[this.count]=this.structure[this.structure.length-1][1];c.stack[this.count]=this.structure[this.structure.length-1][0];c.ender[this.count-1]=this.count;t=c.ender[c.begin[this.count]+1];}o();if(t>0)c.ender[c.begin[this.count]+1]=t;this.structure.pop();}else if(h.types==="else"||h.types.indexOf("_else")>0){if(n===w)n="else";if(this.count>0&&(c.types[this.count-1]==="start"||c.types[this.count-1].indexOf("_start")>0)){this.structure.push([n,this.count]);}else {o();if(n===w){this.structure[this.structure.length-1]=["else",this.count];}else {this.structure[this.structure.length-1]=[n,this.count];}}}}}safeSort(c,h,n){if(Ee(c)===false)return c;if(h==="normal"){return Ue.call({array:c,recursive:n},c)}else if(h==="descend"){return He.call({recursive:n},c)}return ze.call({recursive:n},c)}sortCorrection(c,h){let n=c;let o=-1;const t=this.data;const $=[];const I=this.structure.length<2?[-1]:[this.structure[this.structure.length-2][1]];do{if(n>0&&t.types[n].indexOf("attribute")>-1&&t.types[n].indexOf("end")<0&&t.types[n-1].indexOf("start")<0&&t.types[n-1].indexOf("attribute")<0&&t.lexer[n]==="markup"){I.push(n-1);}if(n>0&&t.types[n-1].indexOf("attribute")>-1&&t.types[n].indexOf("attribute")<0&&t.lexer[I[I.length-1]]==="markup"&&t.types[I[I.length-1]].indexOf("start")<0){I.pop();}if(t.begin[n]!==I[I.length-1]){if(I.length>0){t.begin[n]=I[I.length-1];}else {t.begin[n]=-1;}}if(t.types[n].indexOf("else")>-1){if(I.length>0){I[I.length-1]=n;}else {I.push(n);}}if(t.types[n].indexOf("end")>-1)I.pop();if(t.types[n].indexOf("start")>-1)I.push(n);n=n+1;}while(n<h);n=h;do{n=n-1;if(t.types[n].indexOf("end")>-1){$.push(n);o=o+1;}t.ender[n]=o>-1?$[o]:-1;if(t.types[n].indexOf("start")>-1){$.pop();o=o-1;}}while(n>c)}spacer(c){this.linesSpace=1;do{if(c.array[c.index]===ne){this.linesSpace=this.linesSpace+1;this.lineNumber=this.lineNumber+1;}if(ae(c.array[c.index+1])===false)break;c.index=c.index+1;}while(c.index<c.end);return c.index}splice(c){const h=[this.data.begin[this.count],this.data.token[this.count]];if(c.record!==void 0&&c.record.token!==w){for(const n of this.datanames){c.data[n].splice(c.index,c.howmany,c.record[n]);}if(c.data===this.data){this.count=this.count-c.howmany+1;if(h[0]!==this.data.begin[this.count]||h[1]!==this.data.token[this.count]){this.linesSpace=0;}}return}for(const n of this.datanames){c.data[n].splice(c.index,c.howmany);}if(c.data===this.data){this.count=this.count-c.howmany;this.linesSpace=0;}}wrapCommentBlock(c){const{wrap:h,crlf:n,preserveComment:o}=Q.options;const t=[];const $=[];const I=n===true?"\r\n":ne;const C=/(\/|\\|\||\*|\[|\]|\{|\})/g;const k=/{%-?\s*|\s*-?%}/g;let a=c.start;let e=0;let m=0;let F=0;let i=0;let P=[];let S=w;let p=w;let B=false;let U=false;let V=false;let f=false;let b=w;let x=c.terminator.length-1;let y=c.terminator.charAt(x);let A=0;let _;const N=c.opening.replace(C,Ke);const E=new RegExp(`^(${N}\\s*@prettify-ignore-start)`);const j=new RegExp(`(${N}\\s*)`);const ee=d(c.opening[0],123)&&d(c.opening[1],37);if(ee){_=new RegExp(`\\s*${c.terminator.replace(k,Z=>{if(Z.charCodeAt(0)===123)return "{%-?\\s*";return "\\s*-?%}"})}$`);}const z=()=>{if(/^\s+$/.test(P[e+1])||P[e+1]===w){do{e=e+1;}while(e<i&&(/^\s+$/.test(P[e+1])||P[e+1]===w))}if(e<i-1)$.push(w);};do{t.push(c.chars[a]);if(c.chars[a]===ne)this.lineNumber=this.lineNumber+1;if(c.chars[a]===y&&c.chars.slice(a-x,a+1).join(w)===c.terminator)break;a=a+1;}while(a<c.end);b=t.join(w);if(E.test(b)===true){let Z=ne;a=a+1;do{t.push(c.chars[a]);if(t.slice(t.length-20).join(w)==="@prettify-ignore-end"){if(ee){const te=c.chars.indexOf("{",a);if(d(c.chars[te+1],37)){const T=c.chars.slice(te,c.chars.indexOf("}",te+1)+1).join(w);if(_.test(T))c.terminator=T;}}a=a+1;break}a=a+1;}while(a<c.end);e=a;x=c.opening.length-1;y=c.opening.charAt(x);do{if(c.opening==="/*"&&c.chars[e-1]==="/"&&(c.chars[e]==="*"||c.chars[e]==="/"))break;if(c.opening!=="/*"&&c.chars[e]===y&&c.chars.slice(e-x,e+1).join(w)===c.opening)break;e=e-1;}while(e>c.start);if(c.opening==="/*"&&c.chars[e]==="*"){Z="*/";}else if(c.opening!=="/*"){Z=c.terminator;}x=Z.length-1;y=Z.charAt(x);if(Z!==ne||c.chars[a]!==ne){do{t.push(c.chars[a]);if(Z===ne&&c.chars[a+1]===ne)break;if(c.chars[a]===y&&c.chars.slice(a-x,a+1).join(w)===Z)break;a=a+1;}while(a<c.end)}if(c.chars[a]===ne)a=a-1;b=t.join(w).replace(Ce,w);return [b,a]}if(o===true||h<1||a===c.end||b.length<=h&&b.indexOf(ne)<0||c.opening==="/*"&&b.indexOf(ne)>0&&b.replace(ne,w).indexOf(ne)>0&&/\n(?!(\s*\*))/.test(b)===false){return [b,a]}e=c.start;if(e>0&&c.chars[e-1]!==ne&&ae(c.chars[e-1])){do{e=e-1;}while(e>0&&c.chars[e-1]!==ne&&ae(c.chars[e-1]))}S=c.chars.slice(e,c.start).join(w);const X=new RegExp(ne+S,"g");P=b.replace(/\r\n/g,ne).replace(X,ne).split(ne);i=P.length;P[0]=P[0].replace(j,w);P[i-1]=P[i-1].replace(_,w);if(i<2)P=P[0].split(pe);if(P[0]===w){P[0]=c.opening;}else {P.splice(0,0,c.opening);}i=P.length;e=0;do{p=e<i-1?P[e+1].replace(ve,w):w;if(/^\s+$/.test(P[e])===true||P[e]===w){z();}else if(P[e].slice(0,4)==="    "){$.push(P[e]);}else if(P[e].replace(ve,w).length>h&&P[e].replace(ve,w).indexOf(pe)>h){P[e]=P[e].replace(ve,w);m=P[e].indexOf(pe);$.push(P[e].slice(0,m));P[e]=P[e].slice(m+1);e=e-1;}else {P[e]=c.opening==="/*"&&P[e].indexOf("/*")!==0?`   ${P[e].replace(ve,w).replace(Ce,w).replace(/\s+/g,pe)}`:`${P[e].replace(ve,w).replace(Ce,w).replace(/\s+/g,pe)}`;A=e<1?h-(c.opening.length+1):h;m=P[e].length;F=P[e].replace(ve,w).indexOf(pe);if(m>A&&F>0&&F<A){m=A;do{m=m-1;if(ae(P[e].charAt(m))&&m<=h)break}while(m>0);if(P[e].slice(0,4)!=="    "&&/^\s*(\*|-)\s/.test(P[e])===true&&/^\s*(\*|-)\s/.test(P[e+1])===false){P.splice(e+1,0,"* ");}if(P[e].slice(0,4)!=="    "&&/^\s*\d+\.\s/.test(P[e])===true&&/^\s*\d+\.\s/.test(P[e+1])===false){P.splice(e+1,0,"1. ");}if(m<4){$.push(P[e]);f=true;}else if(e===i-1){$.push(P[e].slice(0,m));P[e]=P[e].slice(m+1);f=true;e=e-1;}else if(/^\s+$/.test(P[e+1])===true||P[e+1]===w){$.push(P[e].slice(0,m));P[e]=P[e].slice(m+1);B=true;e=e-1;}else if(P[e+1].slice(0,4)!=="    "&&/^\s*(\*|-)\s/.test(P[e+1])){$.push(P[e].slice(0,m));P[e]=P[e].slice(m+1);U=true;e=e-1;}else if(P[e+1].slice(0,4)!=="    "&&/^\s*\d+\.\s/.test(P[e+1])){$.push(P[e].slice(0,m));P[e]=P[e].slice(m+1);V=true;e=e-1;}else if(P[e+1].slice(0,4)==="    "){$.push(P[e].slice(0,m));P[e]=P[e].slice(m+1);f=true;e=e-1;}else if(m+p.length>h&&p.indexOf(pe)<0){$.push(P[e].slice(0,m));P[e]=P[e].slice(m+1);f=true;e=e-1;}else if(P[e].replace(ve,w).indexOf(pe)<h){P[e+1]=P[e].length>h?P[e].slice(m+1)+I+P[e+1]:`${P[e].slice(m+1)} ${P[e+1]}`;}if(B===false&&U===false&&V===false&&f===false){P[e]=P[e].slice(0,m);}}else if(P[e+1]!==void 0&&(P[e].length+p.indexOf(pe)>h&&p.indexOf(pe)>0||P[e].length+p.length>h&&p.indexOf(pe)<0)){$.push(P[e]);e=e+1;}else if(P[e+1]!==void 0&&/^\s+$/.test(P[e+1])===false&&P[e+1]!==w&&P[e+1].slice(0,4)!=="    "&&/^\s*(\*|-|(\d+\.))\s/.test(P[e+1])===false){P[e+1]=`${P[e]} ${P[e+1]}`;B=true;}if(f===false&&U===false&&V===false){if(B===true){B=false;}else if(/^\s*(\*|-|(\d+\.))\s*$/.test(P[e])===false){if(e<i-1&&P[e+1]!==w&&/^\s+$/.test(P[e])===false&&P[e+1].slice(0,4)!=="    "&&/^\s*(\*|-|(\d+\.))\s/.test(P[e+1])===false){P[e]=`${P[e]} ${P[e+1]}`;P.splice(e+1,1);i=i-1;e=e-1;}else {if(c.opening==="/*"&&P[e].indexOf("/*")!==0){$.push(`   ${P[e].replace(ve,w).replace(Ce,w).replace(/\s+/g,pe)}`);}else {$.push(`${P[e].replace(ve,w).replace(Ce,w).replace(/\s+/g,pe)}`);}}}}f=false;U=false;V=false;}e=e+1;}while(e<i);if($.length>0){if($[$.length-1].length>h-(c.terminator.length+1)){$.push(c.terminator);}else {$[$.length-1]=`${$[$.length-1]} ${c.terminator}`;}b=$.join(I);}else {P[P.length-1]=P[P.length-1]+c.terminator;b=P.join(I);}return [b,a]}wrapCommentLine(c){let h=c.start;let n=0;let o=w;let t=[];const{wrap:$,preserveComment:I}=Q.options;function C(){let a=w;do{n=n+1;if(d(c.chars[n+1],10))return}while(n<c.end&&ae(c.chars[n])===true);if(c.chars[n]+c.chars[n+1]==="//"){t=[];do{t.push(c.chars[n]);n=n+1;}while(n<c.end&&c.chars[n]!==ne);a=t.join(w);if(/^\/\/ (\*|-|(\d+\.))/.test(a)===false&&a.slice(0,6)!=="//    "&&/^\/\/\s*$/.test(a)===false){o=`${o} ${a.replace(/(^\/\/\s*)/,w).replace(Ce,w)}`;h=n-1;C();}}}const k=()=>{const a=[];const e={ender:-1,types:"comment",lexer:c.lexer,lines:this.linesSpace};if(this.count>-1){e.begin=this.structure[this.structure.length-1][1];e.stack=this.structure[this.structure.length-1][0];e.token=this.data.token[this.count];}else {e.begin=-1;e.stack="global";e.token=w;}let m=0;let F=0;o=o.replace(/\s+/g,pe).replace(Ce,w);F=o.length;if($>F)return;do{m=$;if(o.charAt(m)!==pe){do{m=m-1;}while(m>0&&o.charAt(m)!==pe);if(m<3){m=$;do{m=m+1;}while(m<F-1&&o.charAt(m)!==pe)}}a.push(o.slice(0,m));o=`// ${o.slice(m).replace(ve,w)}`;F=o.length;}while($<F);m=0;F=a.length;do{e.token=a[m];this.push(this.data,e,w);e.lines=2;this.linesSpace=2;m=m+1;}while(m<F)};do{t.push(c.chars[h]);h=h+1;}while(h<c.end&&c.chars[h]!==ne);if(h===c.end){c.chars.push(ne);}else {h=h-1;}o=t.join(w).replace(Ce,w);if(/^(\/\/\s*@prettify-ignore-start\b)/.test(o)===true){let a=ne;h=h+1;do{t.push(c.chars[h]);h=h+1;}while(h<c.end&&(c.chars[h-1]!=="d"||c.chars[h-1]==="d"&&t.slice(t.length-20).join(w)!=="@prettify-ignore-end"));n=h;do{}while(n>c.start&&c.chars[n-1]==="/"&&(c.chars[n]==="*"||c.chars[n]==="/"));if(c.chars[n]==="*")a="*/";if(a!==ne||c.chars[h]!==ne){do{t.push(c.chars[h]);if(a===ne&&c.chars[h+1]===ne)break;h=h+1;}while(h<c.end&&(a===ne||a==="*/"&&(c.chars[h-1]!=="*"||c.chars[h]!=="/")))}if(c.chars[h]===ne)h=h-1;o=t.join(w).replace(Ce,w);return [o,h]}if(o==="//"||o.slice(0,6)==="//    "||I===true){return [o,h]}o=o.replace(/(\/\/\s*)/,"// ");if($<1||h===c.end-1&&this.data.begin[this.count]<1)return [o,h];n=h+1;C();k();return [o,h]}};Q.lexers.style=function l(c){const{options:h}=Q;const n=h.style;const{data:o}=s;const t=c.split(w);const $=c.length;const I=[];const C=[];let k=0;let a=w;let e=w;function m(f){const b=Se(null);b.begin=s.structure[s.structure.length-1][1];b.ender=-1;b.lexer="style";b.lines=s.linesSpace;b.stack=s.structure[s.structure.length-1][0];b.token=e;b.types=a;s.push(o,b,f);}function F(f){const b=f;do{f=f-1;}while(t[f]==="\\"&&f>0);return (b-f)%2===1}function i(f){const b=f.replace(/\s*!important/," !important").split(w);const x=/-?transition$/.test(o.token[s.count-2]);const y=[];const A=/(\s|\(|,)-?0+\.?\d+([a-z]|\)|,|\s)/g;const _=/(\s|\(|,)-?\.?\d+([a-z]|\)|,|\s)/g;let N=0;let E=0;let j=w;let ee=b.length;let z=[];const X=q=>{return q};const Z=q=>{q=q.replace(/\s*/g,w);return /\/\d/.test(q)&&f.indexOf("url(")===0?q:` ${q.charAt(0)} ${q.charAt(1)}`};const te=q=>{if(n.noLeadZero===true){return q.replace(/^-?\D0+(\.|\d)/,H=>H.replace(/0+/,w))}else if(/0*\./.test(q)){return q.replace(/0*\./,"0.")}else if(/0+/.test(/\d+/.exec(q)[0])){return /^\D*0+\D*$/.test(q)?q.replace(/0+/,"0"):q.replace(/\d+/.exec(q)[0],/\d+/.exec(q)[0].replace(/^0+/,w))}return q};const T=q=>q.replace(",",", ");const se=q=>`${q} `;const me=()=>{const q=N-1;let H=q;if(q<1)return true;do{H=H-1;}while(H>0&&b[H]==="\\");return (q-H)%2===1};if(N<ee){do{z.push(b[N]);if(b[N-1]!=="\\"||me()===false){if(j===w){if(d(b[N],34)){j='"';E=E+1;}else if(d(b[N],39)){j="'";E=E+1;}else if(d(b[N],40)){j=")";E=E+1;}else if(d(b[N],91)){j="]";E=E+1;}}else if(d(b[N],40)&&d(j,41)||d(b[N],91)&&d(j,93)){E=E+1;}else if(b[N]===j){E=E-1;if(E===0)j=w;}}if(j===w&&b[N]===" "){z.pop();y.push(X(z.join(w)));z=[];}N=N+1;}while(N<ee)}y.push(X(z.join(w)));ee=y.length;N=0;if(N<ee){do{if(n.noLeadZero===true&&/^-?0+\.\d+[a-z]/.test(y[N])===true){y[N]=y[N].replace(/0+\./,".");}else if(n.noLeadZero===false&&/^-?\.\d+[a-z]/.test(y[N])){y[N]=y[N].replace(".","0.");}else if(A.test(y[N])||_.test(y[N])){y[N]=y[N].replace(A,te).replace(_,te);}else if(/^(0+([a-z]{2,3}|%))$/.test(y[N])&&x===false){y[N]="0";}else if(/^(0+)/.test(y[N])){y[N]=y[N].replace(/0+/,"0");if(/\d/.test(y[N].charAt(1)))y[N]=y[N].substr(1);}else if(/^url\((?!('|"))/.test(y[N])&&y[N].charCodeAt(y[N].length-1)===41){j=y[N].charAt(y[N].indexOf("url(")+4);if(j!=="@"&&G(j,40)&&G(j,60)){if(n.quoteConvert==="double"){y[N]=y[N].replace(/url\(/,'url("').replace(/\)$/,'")');}else {y[N]=y[N].replace(/url\(/,"url('").replace(/\)$/,"')");}}}if(/^(\+|-)?\d+(\.\d+)?(e-?\d+)?\D+$/.test(y[N])){if(!oe.style.units.has(y[N].replace(/(\+|-)?\d+(\.\d+)?(e-?\d+)?/,w))){y[N]=y[N].replace(/(\+|-)?\d+(\.\d+)?(e-?\d+)?/,se);}}if(/^\w+\(/.test(y[N])&&y[N].charAt(y[N].length-1)===")"&&(y[N].indexOf("url(")!==0||y[N].indexOf("url(")===0&&y[N].indexOf(" ")>0)){y[N]=y[N].replace(/,\S/g,T);}N=N+1;}while(N<ee)}j=y.join(" ");return j.charAt(0)+j.slice(1).replace(/\s*(\/|\+|\*)\s*(\d|\$)/,Z)}function P(){const f=[];const b=[];const x=n.quoteConvert;let y=k;let A=0;let _=w;let N=null;const E=()=>{b.push(t[y]);if(ae(t[y+1])){do{y=y+1;}while(y<$&&ae(t[y+1]))}};if(y<$){do{if(d(t[y],34)||d(t[y],39)){if(N===null)N=false;if(f[f.length-1]===t[y]&&(t[y-1]!=="\\"||F(y-1)===false)){f.pop();if(x==="double"){t[y]='"';}else if(x==="single"){t[y]="'";}}else if(G(f[f.length-1],34)&&G(f[f.length-1],39)&&(t[y-1]!=="\\"||F(y-1)===false)){f.push(t[y]);if(x==="double"){t[y]='"';}else if(x==="single"){t[y]="'";}}else if(t[y-1]==="\\"&&x!=="none"){if(F(y-1)===true){if(x==="double"&&d(t[y],39)){b.pop();}else if(x==="single"&&d(t[y],34)){b.pop();}}}else if(x==="double"&&d(t[y],34)){t[y]='\\"';}else if(x==="single"&&d(t[y],39)){t[y]="\\'";}b.push(t[y]);}else if(t[y-1]!=="\\"||F(y-1)===false){if(d(t[y],40)){if(N===null)N=true;f.push(")");E();}else if(d(t[y],91)){N=false;f.push("]");E();}else if((d(t[y],35)||d(t[y],64))&&d(t[y+1],123)){N=false;b.push(t[y]);y=y+1;f.push("}");E();}else if(t[y]===f[f.length-1]){b.push(t[y]);f.pop();}else {b.push(t[y]);}}else {b.push(t[y]);}if(s.structure[s.structure.length-1][0]==="map"&&f.length===0&&(d(t[y+1],44)||d(t[y+1],41))){if(d(t[y+1],41)&&d(o.token[s.count],40)){s.pop(o);s.structure.pop();b.splice(0,0,"(");}else {break}}if(d(t[y+1],58)){A=y;if(ae(t[A]))do{A=A-1;}while(ae(t[A]));_=t.slice(A-6,A+1).join(w);if(_.indexOf("filter")===_.length-6||_.indexOf("progid")===_.length-6){_="filter";}}if(f.length===0){if(d(t[y+1],59)&&F(y+1)===true||d(t[y+1],58)&&G(t[y],58)&&G(t[y+2],58)&&_!=="filter"&&_!=="progid"||(d(t[y+1],125)||d(t[y+1],123))||d(t[y+1],47)&&(d(t[y+2],42)||d(t[y+2],47))){A=b.length-1;if(ae(b[A])){do{A=A-1;y=y-1;b.pop();}while(ae(b[A]))}break}if(d(t[y+1],44))break}y=y+1;}while(y<$)}k=y;if(s.structure[s.structure.length-1][0]==="map"&&d(b[0],40)){I[I.length-1]=I[I.length-1]-1;}e=b.join(w).replace(/\s+/g," ").replace(/^\s/,w).replace(/\s$/,w);if(N===true){e=e.replace(/\s+\(/g,"(").replace(/\s+\)/g,")").replace(/,\(/g,", (");}if(s.count>-1&&o.token[s.count].indexOf("extend(")===0){a="pseudo";}else if(N===true&&/\d/.test(e.charAt(0))===false&&/^rgba?\(/.test(e)===false&&e.indexOf("url(")!==0&&(e.indexOf(" ")<0||e.indexOf(" ")>e.indexOf("("))&&e.charAt(e.length-1)===")"){if(d(o.token[s.count],58)){a="value";}else {e=e.replace(/,\u0020?/g,", ");a="function";}e=i(e);}else if(s.count>-1&&`"'`.indexOf(o.token[s.count].charAt(0))>-1&&o.types[s.count]==="variable"){a="item";}else if(d(b[0],64)||b[0]==="$"){if(o.types[s.count]==="colon"&&h.language==="css"&&(o.types[s.count-1]==="property"||o.types[s.count-1]==="variable")){a="value";}else if(s.count>-1){a="item";_=o.token[s.count];y=_.indexOf("(");if(d(_[_.length-1],41)&&y>0){_=_.slice(y+1,_.length-1);o.token[s.count]=o.token[s.count].slice(0,y+1)+i(_)+")";}}e=i(e);}else {a="item";}m(w);}function S(f){let b=s.count;let x=0;let y=w;const A=[];const _=()=>{if(s.count<0)return;if(b>0&&(o.types[b]==="comment"||o.types[b]==="ignore")){do{b=b-1;A.push(o.token[b]);}while(b>0&&o.lexer[b]==="style"&&(o.types[b]==="comment"||o.types[b]==="ignore"))}x=b-1;if(x>0&&(o.types[x]==="comment"||o.types[x]==="ignore")){do{x=x-1;}while(x>0&&o.lexer[b]==="style"&&(o.types[x]==="comment"||o.types[x]==="ignore"))}if(x<0)x=0;if(b<0)b=0;y=o.token[b].charAt(0);};function N(E){let j=E;const ee=o.begin[j];o.token[E]=o.token[E].replace(/\s*&/," &").replace(/(\s*>\s*)/g," > ").replace(/(\s*\+\s*)/g," + ").replace(/:\s+/g,": ").replace(/^(\s+)/,w).replace(/(\s+)$/,w).replace(/\s+::\s+/,"::");if(d(o.token[j-1],44)||d(o.token[j-1],58)||o.types[j-1]==="comment"||o.types[j-1]==="pseudo"){if(o.types[j-1]==="pseudo"){o.token[j-1]=`${o.token[j-1]}${o.token[j]}`;o.types[j-1]="selector";s.splice({data:o,howmany:1,index:j});}else {do{j=j-1;if(o.begin[j]===ee){if(d(o.token[j],59)||o.types[j].indexOf("template")>-1)break;if(G(o.token[j],44)&&o.types[j]!=="comment"){o.types[j]="selector";}if(d(o.token[j],58)){if(G(o.token[j-1],58)&&o.stack[b]==="global"&&(o.types[j-1]==="comment"||o.types[j-1]==="ignore"||o.types[j-1].indexOf("template")>-1)){o.token[j]=`${o.token[j]}${o.token[j+1]}`;s.pop(o);}else if(s.count===1){o.token[j]=`${o.token[j]}${o.token[j+1]}`;s.pop(o);}else if(o.types[j]==="selector"&&o.types[j+1]==="item"){o.token[j]=`${o.token[j]}${o.token[j+1]}`;s.pop(o);}else {o.token[j]=`${o.token[j-1]}:${o.token[j+1]}`;o.lines[j]=o.lines[j-1];s.splice({data:o,howmany:2,index:j});}}}else {break}}while(j>0)}}j=s.count;if(n.sortSelectors===true&&d(o.token[j-1],44)){const z=[o.token[j]];do{j=j-1;if(o.types[j]==="comment"||o.types[j]==="ignore"){do{j=j-1;}while(j>0&&(o.types[j]==="comment"||o.types[j]==="ignore"))}if(d(o.token[j],44))j=j-1;z.push(o.token[j]);}while(j>0&&(d(o.token[j-1],44)||o.types[j-1]==="selector"||o.types[j-1]==="comment"||o.types[j-1]==="ignore"));z.sort();j=s.count;o.token[j]=z.pop();do{j=j-1;if(o.types[j]==="comment"||o.types[j]==="ignore"){do{j=j-1;}while(j>0&&(o.types[j]==="comment"||o.types[j]==="ignore"))}if(d(o.token[j],44))j=j-1;o.token[j]=z.pop();}while(j>0&&(d(o.token[j-1],44)||o.token[j-1]==="selector"||o.types[j-1]==="comment"||o.types[j-1]==="ignore"))}b=s.count;_();}_();if(f==="start"&&(o.types[b]==="value"||o.types[b]==="variable")){o.types[b]="item";}if(o.lexer[s.count-1]!=="style"||x<0){if(f==="colon"){if(y==="$"||d(y,64)){o.types[b]="variable";}else {if(o.stack[b]!=="global"&&(o.types[b]!=="comment"||o.types[b]!=="ignore")){o.types[b]="property";}}}else if(o.lexer[b]==="style"){o.types[b]="selector";N(b);}}else if(f==="start"&&o.types[b]==="function"&&o.lexer[b]==="style"){o.types[b]="selector";N(b);}else if(o.types[b]==="item"&&o.lexer[b]==="style"){if(f==="start"){N(b);o.types[b]="selector";if(d(o.token[b],58))o.types[x]="selector";if(o.token[b].indexOf("=\u201C")>0){s.error=`Invalid Quote (\u201C, \\201c) used on line number ${s.lineNumber}`;}else if(o.token[b].indexOf("=\u201D")>0){s.error=`Invalid Quote (\u201D, \\201d) used on line number ${s.lineNumber}`;}}else if(f==="end"){if(y==="$"||d(y,64)){o.types[b]="variable";}else {o.types[b]="value";}o.token[b]=i(o.token[b]);}else if(f==="separator"){if(o.types[x]==="colon"||d(o.token[x],44)||d(o.token[x],123)){if(G(t[k],59)&&(o.types[x]==="selector"||d(o.token[x],123))){o.types[b]="selector";N(b);}else if(o.token[b].charAt(0)==="$"||d(o.token[b],64)){o.types[b]="variable";}else {o.types[b]="value";}o.token[b]=i(o.token[b]);if(o.token[b].charAt(0)==="\u201C"){s.error=`Invalid Quote (\u201C, \\201c) used on line number ${s.lineNumber}`;}else if(o.token[b].charAt(0)==="\u201D"){s.error=`Invalid (\u201D, \\201d) used on line number ${s.lineNumber}`;}}else {if(y==="$"||d(y,64)){o.types[b]="variable";}else if(o.types[x]==="value"||o.types[x]==="variable"){o.token[x]=o.token[x]+o.token[b];s.pop(o);}else {o.types[b]="value";}}}else if(f==="colon"){if(y==="$"||d(y,64)){o.types[b]="variable";}else {o.types[b]="property";}}else if(d(o.token[x],64)&&(o.types[x-2]!=="variable"&&o.types[x-2]!=="property"||o.types[x-1]==="separator")){o.types[x]="variable";a="variable";o.token[x]=i(o.token[x]);}}}function p(){let f=s.count;do{f=f-1;}while(f>0&&o.types[f]==="comment");if(o.token[f]===";")return;s.splice({data:o,howmany:0,index:f+1,record:{begin:s.structure[s.structure.length-1][1],ender:-1,lexer:"style",lines:s.linesSpace,stack:s.structure[s.structure.length-1][0],token:";",types:"separator"}});}function B(f,b){const x=[];let y=w;let A=w;let _=0;let N=f.length;const E=j=>{const ee=o.types[s.count-1];if(a==="item"){if(ee==="colon"){o.types[s.count]="value";}else {S(ee);}}a=j;if(a.indexOf("start")>-1||a.indexOf("else")>-1){m(e);}else {m(w);}};C[C.length-1]=true;if(k<$){do{x.push(t[k]);if(y===w){if(t[k]==='"'){y='"';}else if(t[k]==="'"){y="'";}else if(t[k]==="/"){if(t[k+1]==="/"){y="/";}else if(t[k+1]==="*"){y="*";}}else if(t[k+1]===b.charAt(0)){do{_=_+1;k=k+1;x.push(t[k]);}while(k<$&&_<b.length&&t[k+1]===b.charAt(_));if(_===b.length){y=x.join(w);if(ae(y.charAt(N))){do{N=N+1;}while(ae(y.charAt(N)))}_=N;do{_=_+1;}while(_<b.length&&!ae(y.charAt(_)));if(_===y.length)_=_-b.length;if(f==="{%"){if(y.indexOf("{%-")===0){y=y.replace(/^({%-\s*)/,"{%- ").replace(/(\s*-%})$/," -%}").replace(/(\s*%})$/," %}");A=y.slice(4);}else {y=y.replace(/^({%\s*)/,"{% ").replace(/(\s*%})$/," %}").replace(/(\s*-%})$/," -%}");A=y.slice(3);}}if(f==="{{"){y=y.replace(/^({{\s*)/,"{{ ").replace(/^({{-\s*)/,"{{- ").replace(/(\s*-}})$/," -}}").replace(/(\s*}})$/," }}");}if(a==="item"&&o.types[s.count-1]==="colon"&&(o.types[s.count-2]==="property"||o.types[s.count-2]==="variable")){a="value";o.types[s.count]="value";if(Number.isNaN(Number(o.token[s.count]))===true&&o.token[s.count].charAt(o.token[s.count].length-1)!==")"){o.token[s.count]=o.token[s.count]+y;}else {o.token[s.count]=o.token[s.count]+" "+y;}return}e=y;if(f==="{%"){const j=["autoescape","block","capture","case","comment","embed","filter","for","form","if","macro","paginate","raw","sandbox","spaceless","tablerow","unless","verbatim"];let ee=j.length-1;A=A.slice(0,A.indexOf(" "));if(A.indexOf("(")>0){A=A.slice(0,A.indexOf("("));}if(A==="else"||A==="elseif"||A==="when"||A==="elsif"){E("template_else");return}ee=j.length-1;if(ee>-1){do{if(A===j[ee]){E("template_start");return}if(A==="end"+j[ee]){E("template_end");return}ee=ee-1;}while(ee>-1)}}else if(f==="{{"){let j=y.slice(2);const ee=j.length;let z=0;do{z=z+1;}while(z<ee&&ae(j.charAt(z))===false&&j.charCodeAt(N)!==40);j=j.slice(0,z);if(j.charAt(j.length-2)==="}"){j=j.slice(0,j.length-2);}if(j==="end"){E("template_end");return}if(j==="block"||j==="define"||j==="form"||j==="if"||j==="range"||j==="with"){E("template_start");return}}E("template");return}_=0;}}else if(y===t[k]){if(d(y,34)||d(y,39)){y=w;}else if(d(y,47)&&(t[k]==="\r"||d(t[k],10))){y=w;}else if(d(y,42)&&d(t[k+1],47)){y=w;}}k=k+1;}while(k<$)}}function U(f){let b;if(f){b=s.wrapCommentLine({chars:t,end:$,lexer:"style",opening:"//",start:k,terminator:"\n"});e=b[0];a=/^(\/\/\s*@prettify-ignore-start)/.test(e)?"ignore":"comment";}else {b=s.wrapCommentBlock({chars:t,end:$,lexer:"style",opening:"/*",start:k,terminator:"*/"});e=b[0];a=/^(\/\*\s*@prettify-ignore-start)/.test(e)?"ignore":"comment";}m(w);k=b[1];}function V(){const f=s.linesSpace;const b=Se(null);b.data=Se(null);b.data.margin=[w,w,w,w,false];b.data.padding=[w,w,w,w,false];b.last=Se(null);b.last.margin=0;b.last.padding=0;b.removes=[];const x=s.structure[s.structure.length-1][1];function y(E){if(o.token[_-2]===E){const j=o.token[_].replace(/\s*!important\s*/g,w).split(" ");const ee=j.length;if(o.token[_].indexOf("!important")>-1)b.data[E[4]]=true;if(ee>3){if(b.data[E][0]===w)b.data[E][0]=j[0];if(b.data[E][1]===w)b.data[E][1]=j[1];if(b.data[E][2]===w)b.data[E][2]=j[2];if(b.data[E][3]===w)b.data[E][3]=j[3];}else if(ee>2){if(b.data[E][0]===w)b.data[E][0]=j[0];if(b.data[E][1]===w)b.data[E][1]=j[1];if(b.data[E][2]===w)b.data[E][2]=j[2];if(b.data[E][3]===w)b.data[E][3]=j[1];}else if(ee>1){if(b.data[E][0]===w)b.data[E][0]=j[0];if(b.data[E][1]===w)b.data[E][1]=j[1];if(b.data[E][2]===w)b.data[E][2]=j[0];if(b.data[E][3]===w)b.data[E][3]=j[1];}else {if(b.data[E][0]===w)b.data[E][0]=j[0];if(b.data[E][1]===w)b.data[E][1]=j[0];if(b.data[E][2]===w)b.data[E][2]=j[0];if(b.data[E][3]===w)b.data[E][3]=j[0];}}else if(o.token[_-2]===`${E}-bottom`){if(b.data[E][2]===w)b.data[E][2]=o.token[_];}else if(o.token[_-2]===`${E}-left`){if(b.data[E][3]===w)b.data[E][3]=o.token[_];}else if(o.token[_-2]===`${E}-right`){if(b.data[E][1]===w)b.data[E][1]=o.token[_];}else if(o.token[_-2]===`${E}-top`){if(b.data[E][0]===w)b.data[E][0]=o.token[_];}else {return}b.removes.push([_,E]);b.last[E]=_;}function A(){let E=0;let j=w;const ee=/^(0+([a-z]+|%))/;const z=b.removes.length;const X=b.data.margin[0]!==w&&b.data.margin[1]!==w&&b.data.margin[2]!==w&&b.data.margin[3]!==w;const Z=b.data.padding[0]!==w&&b.data.padding[1]!==w&&b.data.padding[2]!==w&&b.data.padding[3]!==w;function te(T){if(ee.test(b.data[T][0])===true)b.data[T][0]="0";if(ee.test(b.data[T][1])===true)b.data[T][1]="0";if(ee.test(b.data[T][2])===true)b.data[T][2]="0";if(ee.test(b.data[T][3])===true)b.data[T][3]="0";if(b.data[T][0]===b.data[T][1]&&b.data[T][0]===b.data[T][2]&&b.data[T][0]===b.data[T][3]){j=b.data[T][0];}else if(b.data[T][0]===b.data[T][2]&&b.data[T][1]===b.data[T][3]&&b.data[T][0]!==b.data[T][1]){j=`${b.data[T][0]} ${b.data[T][1]}`;}else if(b.data[T][1]===b.data[T][3]&&b.data[T][0]!==b.data[T][2]){j=`${b.data[T][0]} ${b.data[T][1]} ${b.data[T][2]}`;}else {j=`${b.data[T][0]} ${b.data[T][1]} ${b.data[T][2]} ${b.data[T][3]}`;}if(b.data[T[4]]===true)j=`${j.replace(" !important",w)} !important`;if(b.last[T]>s.count){E=x<1?1:x+1;do{if(o.begin[E]===x&&o.types[E]==="value"&&o.token[E-2].indexOf(T)===0){b.last[T]=E;break}E=E+1;}while(E<s.count)}o.token[b.last[T]]=j;o.token[b.last[T]-2]=T;}if(z>1&&(X===true||Z===true)){do{if(b.removes[E][0]!==b.last.margin&&b.removes[E][0]!==b.last.padding&&(X===true&&b.removes[E][1]==="margin"||Z===true&&b.removes[E][1]==="padding")){s.splice({data:o,howmany:o.types[b.removes[E][0]+1]==="separator"?4:3,index:b.removes[E][0]-2});}E=E+1;}while(E<z-1)}if(X===true)te("margin");if(Z===true)te("padding");if(N===true){if(x<0){s.error="Brace mismatch. There appears to be more closing braces than starting braces.";}else {s.sortCorrection(x,s.count+1);}}}let _=s.count;let N=false;do{_=_-1;if(o.begin[_]===x){if(o.types[_]==="value"&&o.types[_-2]==="property"){if(o.token[_-2].indexOf("margin")===0){y("margin");}else if(o.token[_-2].indexOf("padding")===0){y("padding");}}}else {N=true;_=o.begin[_];}}while(_>x);A();s.linesSpace=f;}do{if(ae(t[k])){k=s.spacer({array:t,end:$,index:k});}else if(d(t[k],47)&&d(t[k+1],42)){U(false);}else if(d(t[k],47)&&d(t[k+1],47)){U(true);}else if(d(t[k],123)&&d(t[k+1],37)){B("{%","%}");}else if(d(t[k],123)&&d(t[k+1],123)){B("{{","}}");}else if(d(t[k],123)||d(t[k],40)&&d(o.token[s.count],58)&&o.types[s.count-1]==="variable"){S("start");a="start";e=t[k];if(d(t[k],40)){m("map");I.push(0);}else if(o.types[s.count]==="selector"||o.types[s.count]==="variable"){m(o.token[s.count]);}else if(o.types[s.count]==="colon"){m(o.token[s.count-1]);}else {m("block");}C.push(false);}else if(d(t[k],125)||t[k]===")"&&s.structure[s.structure.length-1][0]==="map"&&I[I.length-1]===0){if(d(t[k],125)&&d(o.token[s.count-1],123)&&o.types[s.count]==="item"&&o.token[s.count-2]!==void 0&&o.token[s.count-2].charAt(o.token[s.count-2].length-1)==="@"){o.token[s.count-2]=o.token[s.count-2]+"{"+o.token[s.count]+"}";s.pop(o);s.pop(o);s.structure.pop();}else {if(d(t[k],41))I.pop();S("end");if(d(t[k],125)&&G(o.token[s.count],59)){if(o.types[s.count]==="value"||o.types[s.count]==="function"||o.types[s.count]==="variable"&&(d(o.token[s.count-1],58)||d(o.token[s.count-1],59))){if(n.correct===true){e=";";}else {e="x;";}a="separator";m(w);}else if(o.types[s.count]==="comment"){p();}}C.pop();e=t[k];a="end";if(d(t[k],125))V();if(n.sortProperties===true&&d(t[k],125))s.objectSort(o);m(w);}}else if(d(t[k],59)||d(t[k],44)){if(o.types[s.count-1]==="selector"||o.types[s.count]!=="function"&&d(o.token[s.count-1],125)){S("start");}else {S("separator");}if(o.types[s.count]!=="separator"&&F(k)===true){e=t[k];a="separator";m(w);}}else if(d(t[k],58)&&o.types[s.count]!=="end"){if(d(t[k+1],58)){k=k+1;S("pseudo");e="::";a="pseudo";m(w);}else {S("colon");e=":";a="colon";m(w);}}else {if(s.structure[s.structure.length-1][0]==="map"&&d(t[k],40)){I[I.length-1]=I[I.length-1]+1;}P();}k=k+1;}while(k<$);if(n.sortProperties===true)s.objectSort(o);return o};Q.lexers.script=function l(c){const{options:h}=Q;if(h.language==="json")h.script.quoteConvert="double";let n=0;let o="";let t="";let $=[];let I=0;let C=-1;let k=-1;let a=[];let e;let m;let F;const{data:i}=s;const{references:P}=s;const S=c.length;const p=c.split("");const B=[];const U=[];const V=[];const f=[0,""];const b=[false];const x=["autoescape","block","capture","case","comment","embed","filter","for","form","if","macro","paginate","raw","sandbox","spaceless","tablerow","unless","verbatim"];const y=Se(null);y.count=[];y.index=[];y.len=-1;y.word=[];function A(u){let r=0;const g=T(1,false);const v=s.structure.length===0?"":s.structure[s.structure.length-1][0];const L=Se(null);L.begin=i.begin[s.count];L.ender=i.begin[s.count];L.lexer=i.lexer[s.count];L.lines=i.lines[s.count];L.stack=i.stack[s.count];L.token=i.token[s.count];L.types=i.types[s.count];if(/^(\/(\/|\*)\s*@prettify-ignore-start)/.test(o))return;if(t==="start"||t==="type_start")return;if(h.language==="json")return;if(d(L.token,59)||d(L.token,44)||L.stack==="class"||L.stack==="map"||L.stack==="attribute"||i.types[L.begin-1]==="generic"||g==="{"||v==="initializer"){return}if(d(L.token,125)&&i.stack[L.begin-1]==="global"&&i.types[L.begin-1]!=="operator"&&L.stack===i.stack[s.count-1]){return}if(L.stack==="array"&&L.token!=="]")return;if(i.token[i.begin[s.count]]==="{"&&L.stack==="data_type")return;if(L.types!==void 0&&L.types.indexOf("template")>-1&&L.types.indexOf("template_string")<0){return}if(d(g,59)&&u===false)return;if(i.lexer[s.count-1]!=="script"&&(n<S&&S===Q.source.length-1||S<Q.source.length-1)){return}if(d(L.token,125)&&(L.stack==="function"||L.stack==="if"||L.stack==="else"||L.stack==="for"||L.stack==="do"||L.stack==="while"||L.stack==="switch"||L.stack==="class"||L.stack==="try"||L.stack==="catch"||L.stack==="finally"||L.stack==="block")){if(L.stack==="function"&&(i.stack[L.begin-1]==="data_type"||i.types[L.begin-1]==="type")){r=L.begin;do{r=r-1;}while(r>0&&i.token[r]!==")"&&i.stack[r]!=="arguments");r=i.begin[r];}else {r=i.begin[L.begin-1];}if(d(i.token[r],40)){r=r-1;if(i.token[r-1]==="function")r=r-1;if(i.stack[r-1]==="object"||i.stack[r-1]==="switch")return;if(i.token[r-1]!=="="&&i.token[r-1]!=="return"&&i.token[r-1]!==":"){return}}else {return}}if(L.types==="comment"||v==="method"||v==="paren"||v==="expression"||v==="array"||v==="object"||v==="switch"&&L.stack!=="method"&&i.token[i.begin[s.count]]==="("&&i.token[i.begin[s.count]-1]!=="return"&&i.types[i.begin[s.count]-1]!=="operator"){return}if(i.stack[s.count]==="expression"&&(i.token[i.begin[s.count]-1]!=="while"||i.token[i.begin[s.count]-1]==="while"&&i.stack[i.begin[s.count]-2]!=="do")){return}if(g!==""&&"=<>+*?|^:&%~,.()]".indexOf(g)>-1&&u===false)return;if(L.types==="comment"){r=s.count;do{r=r-1;}while(r>0&&i.types[r]==="comment");if(r<1)return;L.token=i.token[r];L.types=i.types[r];L.stack=i.stack[r];}if(L.token===void 0||L.types==="start"||L.types==="separator"||L.types==="operator"&&L.token!=="++"&&L.token!=="--"||L.token==="x}"||L.token==="var"||L.token==="let"||L.token==="const"||L.token==="else"||L.token.indexOf("#!/")===0||L.token==="instanceof"){return}if(L.stack==="method"&&(i.token[L.begin-1]==="function"||i.token[L.begin-2]==="function")){return}if(h.script.variableList==="list")y.index[y.len]=s.count;o=h.script.correct===true?";":"x;";t="separator";r=s.linesSpace;s.linesSpace=0;H("");s.linesSpace=r;j();}function _(){let u=s.count;do{u=u-1;}while(u>-1&&i.token[u]==="x}");if(i.stack[u]==="else")return H("");u=u+1;s.splice({data:i,howmany:0,index:u,record:{begin:i.begin[u],ender:-1,lexer:"script",lines:s.linesSpace,stack:i.stack[u],token:o,types:t}});H("");}function N(){let u=s.count;if(i.types[u]==="comment"){do{u=u-1;}while(u>0&&i.types[u]==="comment")}if(i.token[u]==="from")u=u-2;if(i.token[u]==="x;"){s.splice({data:i,howmany:1,index:u});}}function E(){A(false);if(C>-1)R();F=s.wrapCommentBlock({chars:p,end:S,lexer:"script",opening:"/*",start:n,terminator:"*/"});n=F[1];if(i.token[s.count]==="var"||i.token[s.count]==="let"||i.token[s.count]==="const"){e=s.pop(i);H("");s.push(i,e,"");if(i.lines[s.count-2]===0)i.lines[s.count-2]=i.lines[s.count];i.lines[s.count]=0;}else if(F[0]!==""){o=F[0];t=/^\/\*\s*@ignore\s*\bstart\b/.test(o)?"ignore":"comment";if(o.indexOf("# sourceMappingURL=")===2){f[0]=s.count+1;f[1]=o;}s.push(i,{begin:s.structure[s.structure.length-1][1],ender:-1,lexer:"script",lines:s.linesSpace,stack:s.structure[s.structure.length-1][0],token:o,types:t},"");}if(/\/\*\s*global\s+/.test(i.token[s.count])===true&&i.types.indexOf("word")<0){P[0]=i.token[s.count].replace(/\/\*\s*global\s+/,"").replace("*/","").replace(/,\s+/g,",").split(",");}}function j(){let u="";const r=T(5,false);const g=s.count;const v=s.linesSpace;if(h.language==="json"||U.length<1||U[U.length-1].charAt(0)!=="x"||/^x?(;|\}|\))$/.test(o)===false){return}if(i.stack[s.count]==="do"&&r==="while"&&i.token[s.count]==="}"){return}if(o===";"&&i.token[g-1]==="x{"){u=i.token[i.begin[g-2]-1];if(i.token[g-2]==="do"||i.token[g-2]===")"&&"ifforwhilecatch".indexOf(u)>-1){e=s.pop(i);o=h.script.correct===true?"}":"x}";t="end";m=s.structure[s.structure.length-1];H("");U.pop();s.linesSpace=v;return}e=s.pop(i);o=h.script.correct===true?"}":"x}";t="end";m=s.structure[s.structure.length-1];H("");U.pop();o=";";t="end";s.push(i,e,"");s.linesSpace=v;return}o=h.script.correct===true?"}":"x}";t="end";if(i.token[s.count]==="x}")return;if(i.stack[s.count]==="if"&&(i.token[s.count]===";"||i.token[s.count]==="x;")&&r==="else"){m=s.structure[s.structure.length-1];H("");U.pop();s.linesSpace=v;return}do{m=s.structure[s.structure.length-1];H("");U.pop();if(i.stack[s.count]==="do")break}while(U[U.length-1]==="x{");s.linesSpace=v;}function ee(){let u=s.count;if(i.stack[u]==="object"&&h.script.objectSort===true){o=",";t="separator";N();H("");}else {do{u=u-1;}while(u>0&&i.types[u-1]==="comment");s.splice({data:i,howmany:0,index:u,record:{begin:i.begin[u],ender:-1,lexer:"script",lines:s.linesSpace,stack:i.stack[u],token:",",types:"separator"}});H("");}}function z(u){let r=false;let g=false;const v=T(1,false);const L=i.token[s.count]==="("?s.count:i.begin[s.count];function M(){let O=0;const W=i.token[L-1]==="Array";const re=W===true?"[":"{";const D=W===true?"]":"}";const Y=W===true?"array":"object";if(W===true&&i.types[s.count]==="number"){O=Number(i.token[s.count]);e=s.pop(i);}e=s.pop(i);e=s.pop(i);e=s.pop(i);s.structure.pop();o=re;t="start";H(Y);if(O>0){o=",";t="separator";do{H("");O=O-1;}while(O>0)}o=D;t="end";H("");}if(C>-1)R();if(V.length>0){if(V[V.length-1]===0){V.pop();}else {V[V.length-1]=V[V.length-1]-1;}}if(d(u,41)||u==="x)"||d(u,93)){if(h.script.correct===true)q();N();}if(d(u,41)||u==="x)")A(false);if(y.len>-1){if(d(u,125)&&(h.script.variableList==="list"&&y.count[y.len]===0||i.token[s.count]==="x;"&&h.script.variableList==="each")){Be();}y.count[y.len]=y.count[y.len]-1;if(y.count[y.len]<0)Be();}if(d(o,44)&&i.stack[s.count]!=="initializer"&&(d(u,93)&&d(i.token[s.count-1],91)||d(u,125))){e=s.pop(i);}if(d(u,41)||u==="x)"){o=u;if(B.length>0){$=B[B.length-1];if($.length>1&&G(v,123)&&($[0]==="if"||$[0]==="for"||$[0]==="with"||$[0]==="while"&&i.stack[$[1]-2]!==void 0&&i.stack[$[1]-2]!=="do")){r=true;}}}else if(d(u,93)){o="]";}else if(d(u,125)){if(G(o,44)&&h.script.correct===true)q();if(s.structure.length>0&&s.structure[s.structure.length-1][0]!=="object")A(true);if((h.script.objectSort===true||h.language==="json"&&h.json.objectSort===true)&&s.structure[s.structure.length-1][0]==="object"){s.objectSort(i);}if(t==="comment"){o=i.token[s.count];t=i.types[s.count];}o="}";}if(s.structure[s.structure.length-1][0]==="data_type"){t="type_end";}else {t="end";}B.pop();m=s.structure[s.structure.length-1];if(d(u,41)&&h.script.correct===true&&L-s.count<2&&(d(i.token[s.count],40)||i.types[s.count]==="number")&&(i.token[L-1]==="Array"||i.token[L-1]==="Object")&&i.token[L-2]==="new"){M();g=true;}if(U[U.length-1]==="x{"&&d(u,125)){j();U.pop();if(i.stack[s.count]!=="try"){if(G(v,58)&&G(v,59)&&i.token[i.begin[n]-1]!=="?")j();}o="}";}else {U.pop();}if(h.script.endComma!==void 0&&h.script.endComma!=="none"&&s.structure[s.structure.length-1][0]==="array"||s.structure[s.structure.length-1][0]==="object"||s.structure[s.structure.length-1][0]==="data_type"){if(h.script.endComma==="always"&&i.token[s.count]!==","){const O=s.structure[s.structure.length-1][1];let W=s.count;do{if(i.begin[W]===O){if(d(i.token[W],44))break}else {W=i.begin[W];}W=W-1;}while(W>O);if(W>O){const re=t;const D=o;o=",";t="separator";H("");o=D;t=re;}}else if(h.script.endComma==="never"&&d(i.token[s.count],44)){s.pop(i);}}if(g===false){H("");if(o==="}"&&i.stack[s.count]!=="object"&&i.stack[s.count]!=="class"&&i.stack[s.count]!=="data_type"){P.pop();j();}}if(r===true){o=h.script.correct===true?"{":"x{";t="start";H($[0]);U.push("x{");$[1]=s.count;}b.pop();if(s.structure[s.structure.length-1][0]!=="data_type")b[b.length-1]=false;}function X(u,r,g){let v=0;let L=false;let M=false;let O=[u];let W;const re=r.split(w);const D=re.length;const Y=n;const ie=n+u.length;const le=h.script.quoteConvert===void 0?"none":h.script.quoteConvert;function J(){let ce=0;O=[];t=g;v=n;if(g==="string"&&/\s/.test(p[v+1])===true){ce=1;do{v=v+1;if(p[v]==="\n")ce=ce+1;}while(v<S&&/\s/.test(p[v+1])===true);s.linesSpace=ce;}}function K(){let ce=w;function ye(ue){if(h.language!=="javascript"&&h.language!=="typescript"&&h.language!=="jsx"&&h.language!=="tsx"){const ke=he=>he.replace(/\s*$/," ");const fe=he=>he.replace(/^\s*/," ");if(/\{(#|\/|(%>)|(%\]))/.test(ue)||/\}%(>|\])/.test(ue))return ue;ue=ue.replace(/\{((\{+)|%-?)\s*/g,ke);ue=ue.replace(/\s*((\}\}+)|(-?%\}))/g,fe);return ue}return ue}if(d(u,34)&&le==="single"){O[0]="'";O[O.length-1]="'";}else if(d(u,39)&&le==="double"){O[0]='"';O[O.length-1]='"';}else if(L===true){ce=O[O.length-1];O.pop();O.pop();O.push(ce);}n=v;if(r==="\n"){n=n-1;O.pop();}o=O.join(w);if(d(u,34)||d(u,39)||u==="{{"||u==="{%"){o=ye(o);}if(u==="{%"||u==="{{"){W=_e(o);t=W[0];H(W[1]);return}if(g==="string"){t="string";if(h.language==="json"){o=o.replace(/\u0000/g,"\\u0000").replace(/\u0001/g,"\\u0001").replace(/\u0002/g,"\\u0002").replace(/\u0003/g,"\\u0003").replace(/\u0004/g,"\\u0004").replace(/\u0005/g,"\\u0005").replace(/\u0006/g,"\\u0006").replace(/\u0007/g,"\\u0007").replace(/\u0008/g,"\\u0008").replace(/\u0009/g,"\\u0009").replace(/\u000a/g,"\\u000a").replace(/\u000b/g,"\\u000b").replace(/\u000c/g,"\\u000c").replace(/\u000d/g,"\\u000d").replace(/\u000e/g,"\\u000e").replace(/\u000f/g,"\\u000f").replace(/\u0010/g,"\\u0010").replace(/\u0011/g,"\\u0011").replace(/\u0012/g,"\\u0012").replace(/\u0013/g,"\\u0013").replace(/\u0014/g,"\\u0014").replace(/\u0015/g,"\\u0015").replace(/\u0016/g,"\\u0016").replace(/\u0017/g,"\\u0017").replace(/\u0018/g,"\\u0018").replace(/\u0019/g,"\\u0019").replace(/\u001a/g,"\\u001a").replace(/\u001b/g,"\\u001b").replace(/\u001c/g,"\\u001c").replace(/\u001d/g,"\\u001d").replace(/\u001e/g,"\\u001e").replace(/\u001f/g,"\\u001f");}else if(u.indexOf("#!")===0){o=o.slice(0,o.length-1);s.linesSpace=2;}else if(s.structure[s.structure.length-1][0]!=="object"||s.structure[s.structure.length-1][0]==="object"&&T(1,false)!==":"&&G(i.token[s.count],44)&&G(i.token[s.count],123)){if(o.length>h.wrap&&h.wrap>0||h.wrap!==0&&i.token[s.count]==="+"&&(i.token[s.count-1].charAt(0)==='"'||i.token[s.count-1].charAt(0)==="'")){let ue=o;let ke="";let fe=le==="double"?'"':le==="single"?"'":ue.charAt(0);const he=h.wrap;const Pe=/u[0-9a-fA-F]{4}/;const We=/x[0-9a-fA-F]{2}/;ue=ue.slice(1,ue.length-1);if(i.token[s.count]==="+"&&(i.token[s.count-1].charAt(0)==='"'||i.token[s.count-1].charAt(0)==="'")){s.pop(i);fe=i.token[s.count].charAt(0);ue=i.token[s.count].slice(1,i.token[s.count].length-1)+ue;s.pop(i);}if(ue.length>he&&he>0){do{ke=ue.slice(0,he);if(ke.charAt(he-5)==="\\"&&Pe.test(ue.slice(he-4,he+1))){ke=ke.slice(0,he-5);}else if(ke.charAt(he-4)==="\\"&&Pe.test(ue.slice(he-3,he+2))){ke=ke.slice(0,he-4);}else if(ke.charAt(he-3)==="\\"&&(Pe.test(ue.slice(he-2,he+3))||We.test(ue.slice(he-2,he+1)))){ke=ke.slice(0,he-3);}else if(ke.charAt(he-2)==="\\"&&(Pe.test(ue.slice(he-1,he+4))||We.test(ue.slice(he-1,he+2)))){ke=ke.slice(0,he-2);}else if(ke.charAt(he-1)==="\\"){ke=ke.slice(0,he-1);}ke=fe+ke+fe;ue=ue.slice(ke.length-2);o=ke;t="string";H(w);s.linesSpace=0;o="+";t="operator";H(w);}while(ue.length>he)}if(ue===w){o=fe+fe;}else {o=fe+ue+fe;}t="string";}}}else if(/\{\s*\?>$/.test(o)){t="template_start";}else {t=g;}if(o.length>0)H(w);}if(C>-1)R();if(p[n-1]==="\\"&&we(n-1)===true&&(p[n]==='"'||p[n]==="'")){s.pop(i);if(i.token[0]==="{"){if(p[n]==='"'){u='"';r='\\"';O=['"'];}else {u="'";r="\\'";O=["'"];}L=true;}else {if(p[n]==='"'){O=['\\"'];K();return}O=["\\'"];K();return}}v=ie;if(v<S){do{if(G(i.token[0],123)&&G(i.token[0],91)&&le!=="none"&&(d(p[v],34)||d(p[v],39))){if(p[v-1]==="\\"){if(we(v-1)===true){if(le==="double"&&p[v]==="'"){O.pop();}else if(le==="single"&&p[v]==='"'){O.pop();}}}else if(le==="double"&&p[v]==='"'&&p[n]==="'"){p[v]='\\"';}else if(le==="single"&&p[v]==="'"&&p[n]==='"'){p[v]="\\'";}O.push(p[v]);}else if(v>Y){M=true;if(d(p[v],123)&&d(p[v+1],37)&&p[v+2]!==u){K();X("{%","%}","template");J();}else if(d(p[v],123)&&d(p[v+1],123)&&p[v+2]!==u){K();X("{{","}}","template");J();}else {M=false;O.push(p[v]);}}else {O.push(p[v]);}if((d(u,34)||d(u,39))&&(M===true||v>Y)&&h.language!=="json"&&h.language!=="javascript"&&p[v-1]!=="\\"&&G(p[v],34)&&G(p[v],39)&&(d(p[v],10)||v===S-1===true)){s.error="Unterminated string in script on line number "+s.lineNumber;break}if(p[v]===re[D-1]&&(p[v-1]!=="\\"||we(v-1)===false)){if(D===1)break;if(O[v-ie]===re[0]&&O.slice(v-ie-D+2).join("")===r)break}v=v+1;}while(v<S)}K();}function Z(){A(false);j();if(C>-1)R();F=s.wrapCommentLine({chars:p,end:S,lexer:"script",opening:"//",start:n,terminator:"\n"});n=F[1];if(F[0]!==""){o=F[0];t=/^(\/\/\s*@prettify-ignore-start)/.test(o)?"ignore":"comment";if(o.indexOf("# sourceMappingURL=")===2){f[0]=s.count+1;f[1]=o;}s.push(i,{begin:s.structure[s.structure.length-1][1],ender:-1,lexer:"script",lines:s.linesSpace,stack:s.structure[s.structure.length-1][0],token:o,types:t},"");}}function te(){let u=0;let r=false;let g=false;let v=0;let L=0;let M=0;let O="";let W="";let re="";const D=[];const Y=b[b.length-1];const ie="0123456789=<>+-*?|^:&.,;%(){}[]~";function le(){if(o==="(")s.structure[s.structure.length-1]=["paren",s.count];Q.lexers.markup(D.join(""));}if(C>-1)R();W=s.count>0?i.token[s.count-1]:"";re=s.count>0?i.types[s.count-1]:"";O=T(1,false);if(h.language!=="jsx"&&h.language!=="tsx"&&/\d/.test(O)===false&&(o==="function"||W==="=>"||W==="void"||W==="."||i.stack[s.count]==="arguments"||t==="type"&&W==="type"||t==="reference"&&(re==="operator"||W==="function"||W==="class"||W==="new")||t==="type"&&re==="operator"||o==="return"||t==="operator")){const J=[];let K=0;let ce=0;u=n;do{J.push(p[u]);if(p[u]==="<"){K=K+1;}else if(p[u]===">"){K=K-1;if(K<1)break}u=u+1;}while(u<S);ce=n;n=u;O=T(1,false);if(p[u]===">"&&(Y===true||W==="=>"||W==="."||re!=="operator"||re==="operator"&&(O==="("||O==="="))){t="generic";o=J.join("").replace(/^<\s+/,"<").replace(/\s+>$/,">").replace(/,\s*/g,", ");H("");return}n=ce;}u=s.count;if(i.types[u]==="comment"){do{u=u-1;}while(u>0&&i.types[u]==="comment")}if(Y===false&&T(1,false)!==">"&&(p[n]!=="<"&&ie.indexOf(p[n+1])>-1||i.token[u]==="++"||i.token[u]==="--"||/\s/.test(p[n+1])===true||/\d/.test(p[n+1])===true&&(t==="operator"||t==="string"||t==="number"||t==="reference"||t==="word"&&o!=="return"))){t="operator";o=me();return H("")}if(h.language!=="typescript"&&(i.token[u]==="return"||i.types[u]==="operator"||i.types[u]==="start"||i.types[u]==="separator"||i.types[u]==="jsx_attribute_start"||i.token[u]==="}"&&s.structure[s.structure.length-1][0]==="global")){t="markup";h.language="jsx";do{D.push(p[n]);if(p[n]==="{"){L=L+1;r=true;}else if(p[n]==="}"){L=L-1;if(L===0)r=false;}else if(p[n]==="<"&&r===false){if(p[n+1]==="<"){do{D.push(p[n]);n=n+1;}while(n<S&&p[n+1]==="<")}v=v+1;if(T(1,false)==="/")g=true;}else if(p[n]===">"&&r===false){if(p[n+1]===">"){do{D.push(p[n]);n=n+1;}while(p[n+1]===">")}v=v-1;if(g===true){M=M-1;}else if(p[n-1]!=="/"){M=M+1;}if(v===0&&L===0&&M<1){O=T(2,false);if(O.charAt(0)!=="<")return le();if(O.charAt(0)==="<"&&ie.indexOf(O.charAt(1))<0&&/\s/.test(O.charAt(1))===false){u=n+1;do{u=u+1;if(p[u]===">"||/\s/.test(p[u-1])&&ie.indexOf(p[u])<0)break;if(ie.indexOf(p[u])>-1)return le()}while(u<S)}else {return le()}}g=false;}n=n+1;}while(n<S);return le()}t="operator";o=me();H("");}function T(u,r){let g=r===true?n:n+1;let v="";if(typeof u!=="number"||u<1)u=1;if(p[n]==="/"){if(p[n+1]==="/"){v="\n";}else if(p[n+1]==="*"){v="/";}}if(g<S){do{if(/\s/.test(p[g])===false){if(p[g]==="/"){if(v===""){if(p[g+1]==="/"){v="\n";}else if(p[g+1]==="*"){v="/";}}else if(v==="/"&&p[g-1]==="*"){v="";}}if(v===""&&p[g-1]+p[g]!=="*/")return p.slice(g,g+u).join("")}else if(v==="\n"&&p[g]==="\n"){v="";}g=g+1;}while(g<S)}return ""}function se(){const u=S;const r=[p[n]];let g=0;let v=/zz/;let L=r[0]===".";if(n<S-2&&p[n]==="0"){if(p[n+1]==="x"){v=/[0-9a-fA-F]/;}else if(p[n+1]==="o"){v=/[0-9]/;}else if(p[n+1]==="b"){v=/0|1/;}if(v.test(p[n+2])===true){r.push(p[n+1]);g=n+1;do{g=g+1;r.push(p[g]);}while(v.test(p[g+1])===true);n=g;return r.join("")}}g=n+1;if(g<u){do{if(/[0-9]/.test(p[g])||p[g]==="."&&L===false){r.push(p[g]);if(p[g]===".")L=true;}else {break}g=g+1;}while(g<u)}if(g<u-1&&(/\d/.test(p[g-1])===true||/\d/.test(p[g-2])===true&&(p[g-1]==="-"||p[g-1]==="+"))&&(p[g]==="e"||p[g]==="E")){r.push(p[g]);if(p[g+1]==="-"||p[g+1]==="+"){r.push(p[g+1]);g=g+1;}L=false;g=g+1;if(g<u){do{if(/[0-9]/.test(p[g])||p[g]==="."&&L===false){r.push(p[g]);if(p[g]===".")L=true;}else {break}g=g+1;}while(g<u)}}n=g-1;return r.join("")}function me(){let u=0;let r=0;let g=S;let v="";const L=["=","<",">","+","*","?","|","^",":","&","%","~"];const M=L.length;if(C>-1)R();if(p[n]==="/"&&(s.count>-1&&(t!=="word"&&t!=="reference"||o==="typeof"||o==="return"||o==="else")&&t!=="number"&&t!=="string"&&t!=="end")){if(o==="return"||o==="typeof"||o==="else"||t!=="word"){o=be();t="regex";}else {o="/";t="operator";}H("");return "regex"}if(p[n]==="?"&&("+-*/.?".indexOf(p[n+1])>-1||p[n+1]===":"&&L.join("").indexOf(p[n+2])<0)){if(p[n+1]==="."&&/\d/.test(p[n+2])===false){v="?.";}else if(p[n+1]==="?"){v="??";}if(v==="")return "?"}if(p[n]===":"&&"+-*/".indexOf(p[n+1])>-1)return ":";if(n<S-1){if(p[n]!=="<"&&p[n+1]==="<")return p[n];if(p[n]==="!"&&p[n+1]==="/")return "!";if(p[n]==="-"){b[b.length-1]=false;if(p[n+1]==="-"){v="--";}else if(p[n+1]==="="){v="-=";}else if(p[n+1]===">"){v="->";}if(v==="")return "-"}if(p[n]==="+"){b[b.length-1]=false;if(p[n+1]==="+"){v="++";}else if(p[n+1]==="="){v="+=";}if(v==="")return "+"}if(p[n]==="="&&p[n+1]!=="="&&p[n+1]!=="!"&&p[n+1]!==">"){b[b.length-1]=false;return "="}}if(p[n]===":"){if(h.language==="typescript"){if(i.stack[s.count]==="arguments"){if(i.token[s.count]==="?"){s.pop(i);v="?:";n=n-1;}b[b.length-1]=true;}else if(o===")"&&(i.token[i.begin[s.count]-1]==="function"||i.token[i.begin[s.count]-2]==="function")){b[b.length-1]=true;}else if(t==="reference"){u=s.count;let O=false;do{if(i.begin[u]===i.begin[s.count]){if(u<s.count&&i.token[u]===":"&&i.types[u+1]!=="type")O=true;if(i.token[u]==="?"&&O===false)break;if(i.token[u]===";"||i.token[u]==="x;")break;if(i.token[u]==="var"||i.token[u]==="let"||i.token[u]==="const"||i.types[u]==="type"){b[b.length-1]=true;break}}else {if(i.types[u]==="type_end"){b[b.length-1]=true;break}u=i.begin[u];}u=u-1;}while(u>i.begin[s.count])}}else if(i.token[s.count-1]==="["&&(i.types[s.count]==="word"||i.types[s.count]==="reference")){s.structure[s.structure.length-1][0]="attribute";i.stack[s.count]="attribute";}}if(v===""){if(p[n+1]==="+"&&p[n+2]==="+"||p[n+1]==="-"&&p[n+2]==="-"){v=p[n];}else {const O=[p[n]];u=n+1;if(u<g){do{if(p[u]==="+"&&p[u+1]==="+"||p[u]==="-"&&p[u+1]==="-")break;r=0;if(r<M){do{if(p[u]===L[r]){O.push(L[r]);break}r=r+1;}while(r<M)}if(r===M)break;u=u+1;}while(u<g)}v=O.join("");}}n=n+(v.length-1);if(v==="=>"&&o===")"){u=s.count;g=i.begin[u];do{if(i.begin[u]===g)i.stack[u]="method";u=u-1;}while(u>g-1)}return v}function q(){let u=true;let r="+";let g="";let v="";let L="";let M=0;let O=0;let W=0;let re="";const D=[];function Y(){W=i.begin[W]-1;if(i.types[W]==="end"){Y();}else if(i.token[W-1]==="."){ie();}}function ie(){W=W-2;if(i.types[W]==="end"){Y();}else if(i.token[W-1]==="."){ie();}}function le(){let K=0;const ce=D.length;if(K<ce){do{s.push(i,D[K],"");K=K+1;}while(K<ce)}}function J(K){const ce=Se(null);ce.begin=i.begin[K];ce.ender=i.ender[K];ce.lexer=i.lexer[K];ce.lines=i.lines[K];ce.stack=i.stack[K];ce.token=i.token[K];ce.types=i.types[K];return ce}g=i.token[s.count];v=i.token[s.count-1];L=i.token[s.count-2];if(g!=="++"&&g!=="--"&&v!=="++"&&v!=="--"){W=s.count;if(i.types[W]==="end"){Y();}else if(i.token[W-1]==="."){ie();}}if(i.token[W-1]==="++"||i.token[W-1]==="--"){if("startendoperator".indexOf(i.types[W-2])>-1)return;M=W;if(M<s.count+1){do{D.push(J(M));M=M+1;}while(M<s.count+1);s.splice({data:i,howmany:s.count-W,index:W});}}else {if(h.script.correct===false||g!=="++"&&g!=="--"&&v!=="++"&&v!=="--"){return}re=T(1,false);if((g==="++"||g==="--")&&(p[n]===";"||re===";"||p[n]==="}"||re==="}"||p[n]===")"||re===")")){r=i.stack[s.count];if(r==="array"||r==="method"||r==="object"||r==="paren"||r==="notation"||i.token[i.begin[s.count]-1]==="while"&&r!=="while"){return}M=s.count;do{M=M-1;if(i.token[M]==="return")return;if(i.types[M]==="end"){do{M=i.begin[M]-1;}while(i.types[M]==="end"&&M>0)}}while(M>0&&(i.token[M]==="."||i.types[M]==="word"||i.types[M]==="reference"||i.types[M]==="end"));if(i.token[M]===","&&p[n]!==";"&&re!==";"&&p[n]!=="}"&&re!=="}"&&p[n]!==")"&&re!==")"){return}if(i.types[M]==="operator"){if(i.stack[M]==="switch"&&i.token[M]===":"){do{M=M-1;if(i.types[M]==="start"){O=O-1;if(O<0)break}else if(i.types[M]==="end"){O=O+1;}if(i.token[M]==="?"&&O===0)return}while(M>0)}else {return}}u=false;r=g==="--"?"-":"+";}else if(L==="["||L===";"||L==="x;"||L==="}"||L==="{"||L==="("||L===")"||L===","||L==="return"){if(g==="++"||g==="--"){if(L==="["||L==="("||L===","||L==="return")return;if(g==="--")r="-";u=false;}else if(v==="--"||g==="--"){r="-";}}else {return}if(u===false)e=s.pop(i);W=s.count;if(i.types[W]==="end"){Y();}else if(i.token[W-1]==="."){ie();}M=W;if(M<s.count+1){do{D.push(J(M));M=M+1;}while(M<s.count+1)}}if(u===true){s.splice({data:i,howmany:1,index:W-1});o="=";t="operator";H("");le();o=r;t="operator";H("");o="1";t="number";H("");}else {o="=";t="operator";H("");le();o=r;t="operator";H("");o="1";t="number";H("");}o=i.token[s.count];t=i.types[s.count];if(re==="}"&&p[n]!==";")A(false);}function H(u){const r=Se(null);r.begin=s.structure[s.structure.length-1][1];r.ender=-1;r.lexer="script";r.lines=s.linesSpace;r.stack=s.structure[s.structure.length-1][0];r.token=o;r.types=t;s.push(i,r,u);}function be(){let u=n+1;let r=0;let g=0;let v="";let L=false;const M=S;const O=["/"];if(u<M){do{O.push(p[u]);if(p[u-1]!=="\\"||p[u-2]==="\\"){if(p[u]==="["){L=true;}if(p[u]==="]"){L=false;}}if(p[u]==="/"&&L===false){if(p[u-1]==="\\"){g=0;r=u-1;if(r>0){do{if(p[r]==="\\"){g=g+1;}else {break}r=r-1;}while(r>0)}if(g%2===0){break}}else {break}}u=u+1;}while(u<M)}if(p[u+1]==="g"||p[u+1]==="i"||p[u+1]==="m"||p[u+1]==="y"||p[u+1]==="u"){O.push(p[u+1]);if(p[u+2]!==p[u+1]&&(p[u+2]==="g"||p[u+2]==="i"||p[u+2]==="m"||p[u+2]==="y"||p[u+2]==="u")){O.push(p[u+2]);if(p[u+3]!==p[u+1]&&p[u+3]!==p[u+2]&&(p[u+3]==="g"||p[u+3]==="i"||p[u+3]==="m"||p[u+3]==="y"||p[u+3]==="u")){O.push(p[u+3]);if(p[u+4]!==p[u+1]&&p[u+4]!==p[u+2]&&p[u+4]!==p[u+3]&&(p[u+4]==="g"||p[u+4]==="i"||p[u+4]==="m"||p[u+4]==="y"||p[u+4]==="u")){O.push(p[u+4]);if(p[u+5]!==p[u+1]&&p[u+5]!==p[u+2]&&p[u+5]!==p[u+3]&&p[u+5]!==p[u+4]&&(p[u+5]==="g"||p[u+5]==="i"||p[u+5]==="m"||p[u+5]==="y"||p[u+5]==="u")){O.push(p[u+4]);n=u+5;}else {n=u+4;}}else {n=u+3;}}else {n=u+2;}}else {n=u+1;}}else {n=u;}v=O.join("");return v}function we(u){const r=u;do{u=u-1;}while(p[u]==="\\"&&u>0);return (r-u)%2===1}function de(u){let r=s.count;let g="";let v="";let L="";let M=false;U.push(u);if(u==="{"&&(i.types[s.count]==="type"||i.types[s.count]==="type_end"||i.types[s.count]==="generic")){let O=0;if(i.types[s.count]==="type_end")r=i.begin[s.count];O=r;do{r=r-1;if(i.begin[r]!==O&&i.begin[r]!==-1)break;if(i.token[r]===":")break}while(r>i.begin[r]);if(i.token[r]===":"&&i.stack[r-1]==="arguments"){b.push(false);M=true;}else {b.push(b[b.length-1]);}r=s.count;}else if(u==="["&&i.types[s.count]==="type_end"){b.push(true);}else {b.push(b[b.length-1]);}if(C>-1){R();r=s.count;}if(y.len>-1)y.count[y.len]=y.count[y.len]+1;if(i.token[r-1]==="function"){B.push(["function",r+1]);}else {B.push([o,r+1]);}o=u;if(b[b.length-1]===true){t="type_start";}else {t="start";}if(u==="("||u==="x("){N();}else if(u==="{"){if(k>-1){if(i.begin[k-1]===i.begin[i.begin[r]-1]||i.token[i.begin[r]]==="x("){k=-1;if(h.script.correct===true){z(")");}else {z("x)");}N();o="{";t="start";}}else if(o===")"){N();}if(t==="comment"&&i.token[r-1]===")"){o=i.token[r];i.token[r]="{";t=i.types[r];i.types[r]="start";}}g=(()=>{let O=s.count;if(i.types[O]==="comment"){do{O=O-1;}while(O>0&&i.types[O]==="comment")}return i.token[O]})();v=i.stack[r]===void 0?"":(()=>{let O=s.count;if(i.types[O]==="comment"){do{O=O-1;}while(O>0&&i.types[O]==="comment")}return i.token[i.begin[O]-1]})();if(d(o,123)&&(i.types[r]==="word"||i.token[r]==="]")){let O=r;if(i.token[O]==="]"){do{O=i.begin[O]-1;}while(i.token[O]==="]")}do{if(i.types[O]==="start"||i.types[O]==="end"||i.types[O]==="operator")break;O=O-1;}while(O>0);if(i.token[O]===":"&&i.stack[O-1]==="arguments"){L="function";P.push(a);a=[];}}if(t==="type_start"){L="data_type";}else if(L===""&&(d(o,123)||o==="x{")){if(g==="else"||g==="do"||g==="try"||g==="finally"||g==="switch"){L=g;}else if(V[V.length-1]===0&&g!=="return"){V.pop();L="class";}else if(i.token[r-1]==="class"){L="class";}else if(i.token[r]==="]"&&i.token[r-1]==="["){L="array";}else if((i.types[r]==="word"||i.types[r]==="reference")&&(i.types[r-1]==="word"||i.types[r-1]==="reference"||i.token[r-1]==="?"&&(i.types[r-2]==="word"||i.types[r-2]==="reference"))&&i.token[r]!=="in"&&i.token[r-1]!=="export"&&i.token[r-1]!=="import"){L="map";}else if(i.stack[r]==="method"&&i.types[r]==="end"&&(i.types[i.begin[r]-1]==="word"||i.types[i.begin[r]-1]==="reference")&&i.token[i.begin[r]-2]==="new"){L="initializer";}else if(d(o,123)&&(d(g,41)||g==="x)")&&(i.types[i.begin[r]-1]==="word"||i.types[i.begin[r]-1]==="reference"||i.token[i.begin[r]-1]==="]")){if(v==="if"){L="if";}else if(v==="for"){L="for";}else if(v==="while"){L="while";}else if(v==="class"){L="class";}else if(v==="switch"||i.token[i.begin[r]-1]==="switch"){L="switch";}else if(v==="catch"){L="catch";}else {L="function";}}else if(d(o,123)&&(g===";"||g==="x;")){L="block";}else if(d(o,123)&&i.token[r]===":"&&i.stack[r]==="switch"){L="block";}else if(i.token[r-1]==="import"||i.token[r-2]==="import"||i.token[r-1]==="export"||i.token[r-2]==="export"){L="object";}else if(d(g,41)&&($[0]==="function"||$[0]==="if"||$[0]==="for"||$[0]==="class"||$[0]==="while"||$[0]==="switch"||$[0]==="catch")){L=$[0];}else if(i.stack[r]==="notation"){L="function";}else if((i.types[r]==="number"||i.types[r]==="string"||i.types[r]==="word"||i.types[r]==="reference")&&(i.types[r-1]==="word"||i.types[r-1]==="reference")&&i.token[i.begin[r]-1]!=="for"){L="function";}else if(s.structure.length>0&&i.token[r]!==":"&&s.structure[s.structure.length-1][0]==="object"&&(i.token[i.begin[r]-2]==="{"||i.token[i.begin[r]-2]===",")){L="function";}else if(i.types[$[1]-1]==="markup"&&i.token[$[1]-3]==="function"){L="function";}else if(g==="=>"){L="function";}else if(M===true||i.types[s.count]==="type_end"&&i.stack[i.begin[s.count]-2]==="arguments"){L="function";}else if(d(g,41)&&i.stack[r]==="method"&&(i.types[i.begin[r]-1]==="word"||i.types[i.begin[r]-1]==="property"||i.types[i.begin[r]-1]==="reference")){L="function";}else if(i.types[r]==="word"&&d(o,123)&&i.token[r]!=="return"&&i.token[r]!=="in"&&i.token[r]!=="import"&&i.token[r]!=="const"&&i.token[r]!=="let"&&i.token[r]!==""){L="block";}else if(d(o,123)&&"if|else|for|while|function|class|switch|catch|finally".indexOf(i.stack[r])>-1&&(i.token[r]==="x}"||i.token[r]==="}")){L="block";}else if(i.stack[r]==="arguments"){L="function";}else if(i.types[r]==="generic"){do{r=r-1;if(i.token[r]==="function"||i.stack[r]==="arguments"){L="function";break}if(i.token[r]==="interface"){L="map";break}if(i.token[r]===";"){L="object";break}}while(r>i.begin[s.count])}else {L="object";}if(L!=="object"&&L!=="class"){if(L==="function"){P.push(a);a=[];}else {P.push([]);}}}else if(o==="["){L="array";}else if(o==="("||o==="x("){if(g==="function"||i.token[r-1]==="function"||i.token[r-1]==="function*"||i.token[r-2]==="function"){L="arguments";}else if(i.token[r-1]==="."||i.token[i.begin[r]-2]==="."){L="method";}else if(i.types[r]==="generic"){L="method";}else if(i.token[r]==="}"&&i.stack[r]==="function"){L="method";}else if(g==="if"||g==="for"||g==="class"||g==="while"||g==="catch"||g==="finally"||g==="switch"||g==="with"){L="expression";}else if(i.types[r]==="word"||i.types[r]==="property"||i.types[r]==="reference"){L="method";}else {L="paren";}}H(L);if(V.length>0)V[V.length-1]=V[V.length-1]+1;}function Le(){const u=[p[n]];n=n+1;if(n<S){do{u.push(p[n]);if(p[n]==="`"&&(p[n-1]!=="\\"||we(n-1)===false))break;if(p[n-1]==="$"&&p[n]==="{"&&(p[n-2]!=="\\"||we(n-2)===false))break;n=n+1;}while(n<S)}return u.join("")}function _e(u){let r=2;let g=0;let v="";const L=u.slice(0,2);const M=u.length;if(u.charAt(2)==="-")r=r+1;if(/\s/.test(u.charAt(r))===true){do{r=r+1;}while(/\s/.test(u.charAt(r))===true&&r<M)}g=r;do{g=g+1;}while(/\s/.test(u.charAt(g))===false&&u.charAt(g)!=="("&&g<M);if(g===M)g=u.length-2;v=u.slice(r,g);if(v==="else"||L==="{%"&&(v==="elseif"||v==="when"||v==="elif"||v==="elsif")){return ["template_else",`template_${v}`]}if(L==="{{"){if(v==="end")return ["template_end",""];if(v==="block"&&/\{%\s*\w/.test(c)===false||v==="define"||v==="form"||v==="if"||v==="unless"||v==="range"||v==="with"){return ["template_start",`template_${v}`]}return ["template",""]}g=x.length-1;if(g>-1){do{if(v===x[g]&&(v!=="block"||/\{%\s*\w/.test(c)===false)){return ["template_start",`template_${v}`]}if(v==="end"+x[g]){return ["template_end",""]}g=g-1;}while(g>-1)}return ["template",""]}function Be(){y.count.pop();y.index.pop();y.word.pop();y.len=y.len-1;}function R(){let u=C;let r=1;let g="";let v="";let L=o;let M=t;const O=[];function W(){U.push("x{");s.splice({data:i,howmany:1,index:s.count-3});}function re(D,Y,ie){const le=i.begin[D];let J=0;do{if(i.token[D]===Y&&i.types[D]==="word"){if(ie===true){i.types[D]="reference";}else if(i.begin[D]>le&&i.token[i.begin[D]]==="{"&&i.stack[D]!=="object"&&i.stack[D]!=="class"&&i.stack[D]!=="data_type"){if(i.stack[D]==="function"){i.types[D]="reference";}else {J=i.begin[D];do{if(i.stack[J]==="function"){i.types[D]="reference";break}J=i.begin[J];}while(J>le)}}}D=D-1;}while(D>le)}do{O.push(p[u]);if(p[u]==="\\"){s.error=`Illegal escape in JavaScript on line number ${s.lineNumber}`;}u=u+1;}while(u<n);if(o.charAt(0)==="\u201C"){s.error=`Quote looking character (\u201C, \\u201c) used instead of actual quotes on line number ${s.lineNumber}`;}else if(o.charAt(0)==="\u201D"){s.error=`Quote looking character (\u201D, \\u201d) used instead of actual quotes on line number ${s.lineNumber}`;}g=O.join("");C=-1;if(s.count>0&&g==="function"&&i.token[s.count]==="("&&(i.token[s.count-1]==="{"||i.token[s.count-1]==="x{")){i.types[s.count]="start";}if(s.count>1&&g==="function"&&o==="("&&(i.token[s.count-1]==="}"||i.token[s.count-1]==="x}")){if(i.token[s.count-1]==="}"){u=s.count-2;if(u>-1){do{if(i.types[u]==="end"){r=r+1;}else if(i.types[u]==="start"||i.types[u]==="end"){r=r-1;}if(r===0)break;u=u-1;}while(u>-1)}if(i.token[u]==="{"&&i.token[u-1]===")"){r=1;u=u-2;if(u>-1){do{if(i.types[u]==="end"){r=r+1;}else if(i.types[u]==="start"||i.types[u]==="end"){r=r-1;}if(r===0)break;u=u-1;}while(u>-1)}if(i.token[u-1]!=="function"&&i.token[u-2]!=="function"){i.types[s.count]="start";}}}else {i.types[s.count]="start";}}if(h.script.correct===true&&(g==="Object"||g==="Array")&&p[n+1]==="("&&p[n+2]===")"&&i.token[s.count-1]==="="&&i.token[s.count]==="new"){if(g==="Object"){i.token[s.count]="{";o="}";i.stack[s.count]="object";s.structure[s.structure.length-1][0]="object";}else {i.token[s.count]="[";o="]";i.stack[s.count]="array";s.structure[s.structure.length-1][0]="array";}i.types[s.count]="start";t="end";p[n+1]="";p[n+2]="";n=n+2;}else {r=s.count;u=r;if(h.script.variableList!=="none"&&(g==="var"||g==="let"||g==="const")){if(i.types[r]==="comment"){do{r=r-1;}while(r>0&&i.types[r]==="comment")}if(h.script.variableList==="list"&&y.len>-1&&y.index[y.len]===r&&g===y.word[y.len]){o=",";t="separator";i.token[r]=o;i.types[r]=t;y.count[y.len]=0;y.index[y.len]=r;y.word[y.len]=g;return}y.len=y.len+1;y.count.push(0);y.index.push(r);y.word.push(g);r=u;}else if(y.len>-1&&g!==y.word[y.len]&&s.count===y.index[y.len]&&i.token[y.index[y.len]]===";"&&o!==y.word[y.len]&&h.script.variableList==="list"){Be();}if(g==="from"&&i.token[s.count]==="x;"&&i.token[s.count-1]==="}"){N();}if(g==="while"&&i.token[s.count]==="x;"&&i.token[s.count-1]==="}"){let D=0;let Y=s.count-2;if(Y>-1){do{if(i.types[Y]==="end"){D=D+1;}else if(i.types[Y]==="start"){D=D-1;}if(D<0){if(i.token[Y]==="{"&&i.token[Y-1]==="do")N();return}Y=Y-1;}while(Y>-1)}}if(M==="comment"){let D=s.count;do{D=D-1;}while(D>0&&i.types[D]==="comment");M=i.types[D];L=i.token[D];}v=T(2,false);if(g==="void"){if(L===":"&&i.stack[s.count-1]==="arguments"){t="type";}else {t="word";}}else if((s.structure[s.structure.length-1][0]==="object"||s.structure[s.structure.length-1][0]==="class"||s.structure[s.structure.length-1][0]==="data_type")&&(i.token[s.count]==="{"||i.token[i.begin[s.count]]==="{"&&i.token[s.count]===","||i.types[s.count]==="template_end"&&(i.token[i.begin[s.count]-1]==="{"||i.token[i.begin[s.count]-1]===","))){if(g==="return"||g==="break"){t="word";}else {t="property";}}else if(b[b.length-1]===true||(h.language==="typescript"||h.language==="flow")&&L==="type"){t="type";}else if(P.length>0&&(L==="function"||L==="class"||L==="const"||L==="let"||L==="var"||L==="new"||L==="void")){t="reference";P[P.length-1].push(g);if(h.language==="javascript"||h.language==="jsx"||h.language==="typescript"||h.language==="tsx"){if(L==="var"||L==="function"&&i.types[s.count-1]!=="operator"&&i.types[s.count-1]!=="start"&&i.types[s.count-1]!=="end"){re(s.count,g,true);}else {re(s.count,g,false);}}else {re(s.count,g,false);}}else if(s.structure[s.structure.length-1][0]==="arguments"&&t!=="operator"){t="reference";a.push(g);}else if(L===","&&i.stack[s.count]!=="method"&&(i.stack[s.count]!=="expression"||i.token[i.begin[s.count]-1]==="for")){let D=s.count;const Y=s.structure[s.structure.length-1][1];do{if(i.begin[D]===Y){if(i.token[D]===";")break;if(i.token[D]==="var"||i.token[D]==="let"||i.token[D]==="const"||i.token[D]==="type"){break}}else if(i.types[D]==="end"){D=i.begin[D];}D=D-1;}while(D>Y);if(P.length>0&&i.token[D]==="var"){t="reference";P[P.length-1].push(g);if(h.language==="javascript"||h.language==="jsx"||h.language==="typescript"||h.language==="tsx"){re(D,g,true);}else {re(D,g,false);}}else if(P.length>0&&(i.token[D]==="let"||i.token[D]==="const"||i.token[D]==="type"&&(h.language==="typescript"||h.language==="tsx"))){t="reference";P[P.length-1].push(g);re(D,g,false);}else {t="word";}}else if(s.structure[s.structure.length-1][0]!=="object"||s.structure[s.structure.length-1][0]==="object"&&o!==","&&o!=="{"){let D=P.length;let Y=0;if(D>0){do{D=D-1;Y=P[D].length;if(Y>0){do{Y=Y-1;if(g===P[D][Y])break}while(Y>0);if(g===P[D][Y])break}}while(D>0);if(P[D][Y]===g&&L!=="."){t="reference";}else {t="word";}}else {t="word";}}else {t="word";}o=g;if(g==="from"&&i.token[s.count]==="}")N();}H("");if(g==="class")V.push(0);if(g==="do"){v=T(1,true);if(v!=="{"){o=h.script.correct===true?"{":"x{";t="start";U.push("x{");H("do");}}if(g==="else"){v=T(2,true);let D=s.count-1;if(i.types[D]==="comment"){do{D=D-1;}while(D>0&&i.types[D]==="comment")}if(i.token[D]==="x}"){if(i.token[s.count]==="else"){if(i.stack[s.count-1]!=="if"&&i.types[s.count-1]!=="comment"&&i.stack[s.count-1]!=="else"){U.pop();s.splice({data:i,howmany:0,index:s.count-1,record:{begin:i.begin[i.begin[i.begin[s.count-1]-1]-1],ender:-1,lexer:"script",lines:0,stack:"if",token:h.script.correct===true?"}":"x}",types:"end"}});if(s.structure.length>1){s.structure.splice(s.structure.length-2,1);s.structure[s.structure.length-1][1]=s.count;}}else if(i.token[s.count-2]==="x}"&&m[0]!=="if"&&i.stack[s.count]==="else"){W();}else if(i.token[s.count-2]==="}"&&i.stack[s.count-2]==="if"&&m[0]==="if"&&i.token[m[1]-1]!=="if"&&i.token[i.begin[s.count-1]]==="x{"){W();}}else if(i.token[s.count]==="x}"&&i.stack[s.count]==="if"){W();}}if(v!=="if"&&v.charAt(0)!=="{"){o=h.script.correct===true?"{":"x{";t="start";U.push("x{");H("else");}}if((g==="for"||g==="if"||g==="switch"||g==="catch")&&i.token[s.count-1]!=="."){v=T(1,true);if(v!=="("){k=s.count;if(h.script.correct===true){de("(");}else {de("x(");}}}}do{if(/\s/.test(p[n])){if(C>-1)R();n=s.spacer({array:p,end:S,index:n});if(s.linesSpace>1&&o!==";"&&I<s.count&&p[n+1]!=="}"){A(false);I=s.count;}}else if(p[n]==="{"&&p[n+1]==="%"){X("{%","%}","template");}else if(p[n]==="{"&&p[n+1]==="{"){X("{{","}}","template");}else if(p[n]==="<"&&p[n+1]==="!"&&p[n+2]==="-"&&p[n+3]==="-"){X("<!--","-->","comment");}else if(p[n]==="<"){te();}else if(p[n]==="/"&&(n===S-1||p[n+1]==="*")){E();}else if((s.count<0||i.lines[s.count]>0)&&p[n]==="#"&&p[n+1]==="!"&&(p[n+2]==="/"||p[n+2]==="[")){X("#!"+p[n+2],"\n","string");}else if(p[n]==="/"&&(n===S-1||p[n+1]==="/")){Z();}else if(d(p[n],96)||d(p[n],125)&&s.structure[s.structure.length-1][0]==="template_string"){if(C>-1)R();o=Le();if(d(o,125)&&o.slice(o.length-2)==="${"){t="template_string_else";H("template_string");}else if(o.slice(o.length-2)==="${"){t="template_string_start";H("template_string");}else if(d(o[0],125)){t="template_string_end";H("");}else {t="string";H("");}}else if(p[n]==='"'||p[n]==="'"){X(p[n],p[n],"string");}else if(p[n]==="-"&&(n<S-1&&p[n+1]!=="="&&p[n+1]!=="-")&&(t==="number"||t==="word"||t==="reference")&&o!=="return"&&(o===")"||o==="]"||t==="word"||t==="reference"||t==="number")){if(C>-1)R();o="-";t="operator";H("");}else if(C===-1&&(p[n]!=="0"||p[n]==="0"&&p[n+1]!=="b")&&(/\d/.test(p[n])||n!==S-2&&p[n]==="-"&&p[n+1]==="."&&/\d/.test(p[n+2])||n!==S-1&&(p[n]==="-"||p[n]===".")&&/\d/.test(p[n+1]))){if(C>-1)R();if(t==="end"&&p[n]==="-"){o="-";t="operator";}else {o=se();t="number";}H("");}else if(p[n]===":"&&p[n+1]===":"){if(C>-1)R();if(h.script.correct===true)q();N();n=n+1;o="::";t="separator";H("");}else if(p[n]===","){if(C>-1)R();if(h.script.correct===true)q();if(b[b.length-1]===true&&i.stack[s.count].indexOf("type")<0){b[b.length-1]=false;}if(t==="comment"){ee();}else if(y.len>-1&&y.count[y.len]===0&&h.script.variableList==="each"){N();o=";";t="separator";H("");o=y.word[y.len];t="word";H("");y.index[y.len]=s.count;}else {o=",";t="separator";N();H("");}}else if(p[n]==="."){if(C>-1)R();b[b.length-1]=false;if(p[n+1]==="."&&p[n+2]==="."){o="...";t="operator";n=n+2;}else {N();o=".";t="separator";}if(/\s/.test(p[n-1])===true)s.linesSpace=1;H("");}else if(p[n]===";"){if(C>-1)R();if(b[b.length-1]===true&&i.stack[s.count].indexOf("type")<0){b[b.length-1]=false;}if(V[V.length-1]===0)V.pop();if(y.len>-1&&y.count[y.len]===0){if(h.script.variableList==="each"){Be();}else {y.index[y.len]=s.count+1;}}if(h.script.correct===true)q();o=";";t="separator";if(i.token[s.count]==="x}"){_();}else {H("");}j();}else if(p[n]==="("||p[n]==="["||p[n]==="{"){de(p[n]);}else if(p[n]===")"||p[n]==="]"||p[n]==="}"){z(p[n]);}else if(p[n]==="*"&&i.stack[s.count]==="object"&&C<0&&/\s/.test(p[n+1])===false&&p[n+1]!=="="&&/\d/.test(p[n+1])===false){C=n;}else if(p[n]==="="||p[n]==="&"||p[n]==="<"||p[n]===">"||p[n]==="+"||p[n]==="-"||p[n]==="*"||p[n]==="/"||p[n]==="!"||p[n]==="?"||p[n]==="|"||p[n]==="^"||p[n]===":"||p[n]==="%"||p[n]==="~"){o=me();if(o==="regex"){o=i.token[s.count];}else if(o==="*"&&i.token[s.count]==="function"){i.token[s.count]="function*";}else {t="operator";if(o!=="!"&&o!=="++"&&o!=="--")N();H("");}}else if(C<0&&p[n]!==""){C=n;}if(y.len>-1&&s.count===y.index[y.len]+1&&i.token[y.index[y.len]]===";"&&o!==y.word[y.len]&&t!=="comment"&&h.script.variableList==="list"){Be();}n=n+1;}while(n<S);if(C>-1)R();if((i.token[s.count]!=="}"&&i.token[0]==="{"||i.token[0]!=="{")&&(i.token[s.count]!=="]"&&i.token[0]==="["||i.token[0]!=="[")){A(false);}if(f[0]===s.count){o="\n"+f[1];t="string";H("");}if(i.token[s.count]==="x;"&&(i.token[s.count-1]==="}"||i.token[s.count-1]==="]")&&i.begin[s.count-1]===0){s.pop(i);}return i};var Me={markup:"markup",html:"markup",liquid:"markup",xml:"markup",javascript:"script",typescript:"script",jsx:"script",tsx:"script",json:"script",less:"style",scss:"style",sass:"style",css:"style",text:"text"};var nt={html:"HTML",xhtml:"XHTML",liquid:"Liquid",xml:"XML",jsx:"JSX",tsx:"TSX",json:"JSON",yaml:"YAML",css:"CSS",scss:"SCSS",sass:"SASS",less:"LESS",text:"Plain Text",javascript:"JavaScript",typescript:"TypeScript"};function Ze(l){return typeof l!=="string"||l.indexOf("html")>-1||Me[l]===void 0?"markup":Me[l]}function ut(l){if(typeof l!=="string"||nt[l]===void 0)return l.toUpperCase();return nt[l]}function ge(l){const c={};if(l==="unknown"){c.language=l;c.languageName="Unknown";c.lexer="markup";}else if(l==="xhtml"||l==="markup"){c.language="xml";c.languageName="XHTML";c.lexer="markup";}else {c.language=l;c.languageName=ut(l);c.lexer=Ze(l);}if(Q.hooks.language.length>0){for(const h of Q.hooks.language){const n=h(c);if(typeof n==="object")Re(c,n);}}return c}Ie.reference=ge;Ie.listen=function(l){Q.hooks.language.push(l);};function Ie(l){let c=[];let h=0;const n=/(((var)|(let)|(const)|(function)|(import))\s+(\w|\$)+[a-zA-Z0-9]*)/.test(l)&&/@import/.test(l)===false;const o=/((((final)|(public)|(private))\s+static)|(static\s+void))/.test(l);function t(){if(/\n\s*#+\s+/.test(l)||/^#+\s+/.test(l))return ge("markdown");if(/\$[a-zA-Z]/.test(l)||/\{\s*(\w|\.|\$|#)+\s*\{/.test(l)||/^[.#]?[\w][\w-]+\s+\{(?:\s+[a-z][a-z-]+:\s*\S+;)+\s+[&>+]?\s+[.#:]?[\w][\w-]\s+\{/.test(l)&&/:\s*@[a-zA-Z];/.test(l)===false)return ge("scss");if(/@[a-zA-Z]:/.test(l)||/\.[a-zA-Z]\(\);/.test(l))return ge("less");return ge("css")}function $(){let C=1;let k=w;let a=false;let e=false;const m=/((public)|(private))\s+(static\s+)?(((v|V)oid)|(class)|(final))/.test(l);function F(){if(l.indexOf("(")>-1||l.indexOf("=")>-1||l.indexOf(";")>-1&&l.indexOf("{")>-1){if(o===true||/\w<\w+(,\s+\w+)*>/.test(l))return ge("typescript");if(/(?:var|let|const)\s+\w+\s*:/.test(l)||/=\s*<\w+/.test(l))return ge("typescript");return ge("javascript")}return ge("unknown")}function i(){if(/:\s*(?:number|string|boolean|any|unknown)(?:\[\])?/.test(l)||/(?:public|private)\s+/.test(l)||/(?:export|declare)\s+type\s+\w+\s*=/.test(l)||/(?:namespace|interface|enum|implements|declare)\s+\w+/.test(l)||/(?:typeof|keyof|as)\s+\w+/.test(l)||/\w+\s+as\s+\w+/.test(l)||/\[\w+(?:(?::\s*\w+)|(?:\s+in\s+\w+))\]:/.test(l)||/\):\s*\w+(?:\[\])?\s*(?:=>|\{)\s+/.test(l)||/(var|const|let)\s+\w+:\s*(string|number|boolean|string|any)(\[\])?/.test(l))return ge("typescript");if(/\s(class|var|const|let)\s+\w/.test(l)===false&&/<[a-zA-Z](?:-[a-zA-Z])?/.test(l)&&/<\/[a-zA-Z-](?:-[a-zA-Z])?/.test(l)&&(/\s?\{%/.test(l)||/{{/.test(l)))return ge("liquid");if(/^(\s*[$@])/.test(l)===false&&/([}\]];?\s*)$/.test(l)){if(/^\s*import\s+\*\s+as\s+\w+\s+from\s+['"]/.test(l)||/module\.export\s+=\s+/.test(l)||/export\s+default\s+\{/.test(l)||/[?:]\s*[{[]/.test(l)||/^(?:\s*return;?(?:\s+[{[])?)/.test(l)){return ge("javascript")}}if(/{%/.test(l)&&/{{/.test(l)&&/<\w/.test(l))return ge("liquid");if(/{\s*(?:\w|\.|@|#)+\s*\{/.test(l))return ge("less");if(/\$(\w|-)/.test(l))return ge("scss");if(/[;{:]\s*@\w/.test(l)===true)return ge("less");return ge("css")}if(C<h){do{if(a===false){if(d(c[C],42)&&d(c[C-1],47)){c[C-1]=w;a=true;}else if(e===false&&C<h-6&&c[C].charCodeAt(0)===102&&c[C+1].charCodeAt(0)===105&&c[C+2].charCodeAt(0)===108&&c[C+3].charCodeAt(0)===116&&c[C+4].charCodeAt(0)===101&&c[C+5].charCodeAt(0)===114&&d(c[C+6],58)){e=true;}}else if(a===true&&d(c[C],42)&&C!==h-1&&d(c[C+1],47)){a=false;c[C]=w;c[C+1]=w;}else if(e===true&&d(c[C],59)){e=false;c[C]=w;}if(a===true||e===true)c[C]=w;C=C+1;}while(C<h)}k=c.join(w);if(/\s\/\//.test(l)===false&&/\/\/\s/.test(l)===false&&/^(\s*(\{|\[)(?!%))/.test(l)===true&&/((\]|\})\s*)$/.test(l)&&l.indexOf(",")!==-1)return ge("json");if(/((\}?(\(\))?\)*;?\s*)|([a-z0-9]("|')?\)*);?(\s*\})*)$/i.test(l)===true&&(n===true||m===true||/console\.log\(/.test(l)===true||/export\s+default\s+class\s+/.test(l)===true||/export\s+(const|var|let|class)s+/.test(l)===true||/document\.get/.test(l)===true||/((=|(\$\())\s*function)|(\s*function\s+(\w*\s+)?\()/.test(l)===true||l.indexOf("{")===-1||/^(\s*if\s+\()/.test(l)===true))return F();if(l.indexOf("{")>-1&&(/^(\s*[\u007b\u0024\u002e#@a-z0-9])/i.test(l)||/^(\s*\/(\*|\/))/.test(l)||/^(\s*\*\s*\{)/.test(l))&&/^(\s*if\s*\()/.test(l)===false&&/=\s*(\{|\[|\()/.test(k)===false&&(/(\+|-|=|\?)=/.test(k)===false||/\/\/\s*=+/.test(k)||/=+('|")?\)/.test(l)&&/;\s*base64/.test(l))&&/function(\s+\w+)*\s*\(/.test(k)===false)return i();return l.indexOf("{%")>-1?ge("liquid"):ge("unknown")}function I(){function C(){return /{%-?\s*(schema|for|if|unless|render|include)/.test(l)||/{%-?\s*end\w+/.test(l)||/{{-?\s*content_for/.test(l)||/{{-?\s*[a-zA-Z0-9_'".[\]]+\s*-?}}/.test(l)||/{%/.test(l)&&/%}/.test(l)&&/{{/.test(l)&&/}}/.test(l)?ge("liquid"):ge("html")}return /^(\s*<!doctype\s+html>)/i.test(l)||/^(\s*<html)/i.test(l)||/<form\s/i.test(l)&&/<label\s/i.test(l)&&/<input\s/i.test(l)||(/<img(\s+\w+=['"]?\S+['"]?)*\s+src\s*=/.test(l)||/<a(\s+\w+=['"]?\S+['"]?)*\s+href\s*=/.test(l))||/<ul\s/i.test(l)&&/<li\s/i.test(l)&&/<\/li>/i.test(l)&&/<\/ul>/i.test(l)||/<head\s*>/.test(l)&&/<\/head>/.test(l)||/^(\s*<!DOCTYPE\s+((html)|(HTML))\s+PUBLIC\s+)/.test(l)&&/XHTML\s+1\.1/.test(l)===false&&/XHTML\s+1\.0\s+(S|s)((trict)|(TRICT))/.test(l)===false?C():/\s?{[{%]-?/.test(l)?ge("liquid"):ge("xml")}if(l===null||l.replace(/\s+/g,w)===w)return ge("unknown");if((/\n\s*#{1,6}\s+/.test(l)||/\n\s*(?:\*|-|(?:\d+\.))\s/.test(l))&&(/\[( |x|X)\]/.test(l)||/\s[*_~]{1,2}\w+[*_~]{1,2}/.test(l)||/\n\s*```[a-zA-Z]*?\s+/.test(l)||/-+\|(-+\|)+/.test(l)))return ge("markdown");if(/^(\s*<!DOCTYPE\s+html>)/i.test(l))return I();if(/^\s*@(?:charset|import|include|keyframes|media|namespace|page)\b/.test(l))return t();if(o===false&&/=(>|=|-|\+|\*)/.test(l)===false&&/^(?:\s*((if)|(for)|(function))\s*\()/.test(l)===false&&/(?:\s|;|\})((if)|(for)|(function\s*\w*))\s*\(/.test(l)===false&&n===false&&/return\s*\w*\s*(;|\})/.test(l)===false&&(l===void 0||/^(?:\s*#(?!(!\/)))/.test(l)||/\n\s*(\.|@)\w+(\(|(\s*:))/.test(l)&&/>\s*<\w/.test(l)===false||(/^\s*:root\s*\{/.test(l)||/-{2}\w+\s*\{/.test(l)||/^\s*(?:body|button|hr|section|h[1-6]|p|strong|\*)\s+\{\s+/.test(l))))return t();c=l.replace(/\[[a-zA-Z][\w-]*=['"]?[a-zA-Z][\w-]*['"]?\]/g,w).split(w);h=c.length;if(/^(\s*({{|{%|<))/.test(l))return I();if(o===true||/^(?:[\s\w-]*<)/.test(l)===false&&/(?:>[\s\w-]*)$/.test(l)===false)return $();return (/^(?:\s*<\?xml)/.test(l)||/(?:>[\w\s:]*)?<(?:\/|!|#)?[\w\s:\-[]+/.test(l)||/^\s*</.test(l)&&/<\/\w+(\w|\d)+>\s*$/.test(l))&&(/^(?:[\s\w]*<)/.test(l)||/(?:>[\s\w]*)$/.test(l))||/^(?:\s*<s((cript)|(tyle)))/i.test(l)&&/(?:<\/s((cript)|(tyle))>\s*)$/i.test(l)?/^(?:[\s\w]*<)/.test(l)===false||/(?:>[\s\w]*)$/.test(l)===false?$():I():ge("unknown")}Q.lexers.markup=function l(c){const{options:h}=Q;const{data:n}=s;const o=h.language==="jsx"||h.language==="tsx";const t=h.language==="html"||h.language==="liquid";const $=h.markup;const I=$.attributeSortList.length;const C={end:0,index:-1,start:0,line:1};const k=c.split(w);const a=k.length;let e=0;let m=false;let F="javascript";let i=t?h.language:"html";let P=0;function S(b){if(t===true&&o===false){if(/(?:{[=#/]|%[>\]])|\}%[>\]]/.test(b))return b;if($.delimiterSpacing===true){b=b.replace(/{[{%]-?\s*/g,x=>x.replace(/\s*$/," "));b=b.replace(/\s*-?[%}]}/g,x=>x.replace(/^\s*/," "));}return b}return b}function p(b,x,y){if(b===n){if(x.types.indexOf("end")>-1){C.end=C.end+1;}else if(x.types.indexOf("start")>-1){C.start=C.start+1;}}C.index=s.count;C.line=s.lineNumber;s.push(b,x,y);}function B(b){let x=0;let y=w;const A=/^(?:<|{%-?|{{-?)=?\s*/;if(typeof b!=="string")return w;x=b.replace(A,"%").replace(/\s+/," ").indexOf(" ");y=b.replace(A," ");y=x<0?y.slice(1,b.length-1):y.slice(1,x);if(i==="html")y=y.toLowerCase();y=y.replace(/-?[%}]}$/,w);if(y.indexOf("(")>0)y=y.slice(0,y.indexOf("("));if(y==="?xml?")return "xml";return y}function U(b,x){const y=B(b);const A=Ge({begin:s.structure[s.structure.length-1][1],ender:-1,lexer:"markup",lines:n.lines[s.count]>0?1:0,stack:s.structure[s.structure.length-1][0],token:`</${s.structure[s.structure.length-1][0]}>`,types:"end"});p(n,A,w);if(oe.html.tags.has(s.structure[s.structure.length-1][0])&&(x===true&&s.structure.length>1||x===false&&`/${s.structure[s.structure.length-1][0]}`!==y)){do{A.begin=s.structure[s.structure.length-1][1];A.stack=s.structure[s.structure.length-1][0];A.token=`</${s.structure[s.structure.length-1][0]}>`;p(n,A,w);}while(oe.html.tags.has(s.structure[s.structure.length-1][0])&&(x===true&&s.structure.length>1||x===false&&`/${s.structure[s.structure.length-1][0]}`!==y))}}function V(b){const x={begin:s.structure[s.structure.length-1][1],ender:-1,lexer:"markup",lines:s.linesSpace,stack:s.structure[s.structure.length-1][0],token:w,types:w};let y=0;let A=w;let _=w;let N=w;let E=w;let j=w;let ee=false;let z=false;let X=false;let Z=false;let te=false;let T=false;let se=false;let q=[];let H=[w,0];function be(R){const u=R.indexOf("=");if(u>0&&(u<R.indexOf('"')&&R.indexOf('"')>0||u<R.indexOf("'")&&R.indexOf("'")>0)){return [R.slice(0,u),R.slice(u+1)]}return [R,w]}function de(){const R=s.count;const u=E.replace(/(\/)$/,w);const r=$.quoteConvert;let g=0;let v=0;let L=0;let O=w;let W=w;let re=[];let D=q.length;function Y(){let ie=je(x.token,5);if(X===true||r==="none"||x.types.indexOf("attribute")<0||ie===false&&r==="single"&&x.token.indexOf('"')<0||ie===false&&r==="double"&&x.token.indexOf("'")<0){p(n,x,w);}else {let le=0;let J=false;const K=x.token.split(w);const ce=x.token.indexOf("=");const ye=K.length-1;if(G(K[ce+1],34)&&G(K[K.length-1],34)&&r==="single"&&ie===false){p(n,x,w);}else if(G(K[ce+1],39)&&G(K[K.length-1],39)&&r==="double"&&ie===false){p(n,x,w);}else {le=ce+2;if(r==="double"){if(x.token.slice(ce+2,ye).indexOf('"')>-1)J=true;K[ce+1]='"';K[K.length-1]='"';}else if(r==="single"){if(x.token.slice(ce+2,ye).indexOf("'")>-1)J=true;K[ce+1]="'";K[K.length-1]="'";}if(J===true||ie===true){ie=false;do{if(d(K[le-1],123)&&(d(K[le],37)||d(K[le],123))){ie=true;}else if(d(K[le],125)&&(d(K[le-1],37)||d(K[le-1],125))){ie=false;}if(ie===true){if(d(K[le],34)&&r==="double"){K[le]="'";}else if(d(K[le],39)&&r==="single"){K[le]='"';}}else {if(d(K[le],39)&&r==="double"){K[le]='"';}else if(d(K[le],34)&&r==="single"){K[le]="'";}}le=le+1;}while(le<ye)}x.token=K.join(w);p(n,x,w);}}}if(q.length<1)return;if(d(q[q.length-1][0],47)){q.pop();A=A.replace(/>$/,"/>");}v=q.length;L=1;if(L<v){do{O=q[L-1][0];if(O.charCodeAt(O.length-1)===61&&q[L][0].indexOf("=")<0){q[L-1][0]=O+q[L][0];q.splice(L,1);v=v-1;L=L-1;}L=L+1;}while(L<v)}if($.attributeSort===true&&o===false&&Z===false&&te===false){if(I>0){const ie=[];L=0;v=0;D=q.length;do{v=0;do{O=q[v][0].split("=")[0];if($.attributeSortList[L]===O){ie.push(q[v]);q.splice(v,1);D=D-1;break}v=v+1;}while(v<D);L=L+1;}while(L<I);q=s.safeSort(q,w,false);q=ie.concat(q);D=q.length;}else {q=s.safeSort(q,w,false);}}x.begin=R;x.stack=u;x.types="attribute";re=[];if(g<D){do{if(q[g]===void 0)break;x.lines=q[g][1];q[g][0]=q[g][0].replace(/\s+$/,w);if(o===true&&/^\/(\/|\*)/.test(q[g][0])){x.types="comment_attribute";x.token=q[g][0];Y();g=g+1;continue}if(d(q[g][0][0],123)&&d(q[g][0][1],37)||d(q[g][0][q[g][0].length-1],125)&&d(q[g][0][q[g][0].length-2],37)){if(qe(q[g][0])){x.token=q[g][0];x.types="template_attribute_end";x.ender=x.begin;}else {const ie=De(q[g][0]);if(oe.liquid.tags.has(ie)){x.types="template_attribute_start";x.begin=s.count;x.token=q[g][0];}else if(oe.liquid.else.has(ie)){x.types="template_attribute_else";x.token=q[g][0];}else {x.types="template_attribute";x.token=q[g][0];}}Y();g=g+1;continue}if(d(q[g][0][0],123)&&d(q[g][0][1],123)||d(q[g][0][q[g][0].length-1],125)&&d(q[g][0][q[g][0].length-2],125)){if(qe(q[g][0])){x.token=q[g][0];x.types="template_attribute_end";x.ender=x.begin;}else {const ie=De(q[g][0]);if(oe.liquid.tags.has(ie)){x.types="template_attribute_start";x.begin=s.count;x.token=q[g][0];}else if(oe.liquid.else.has(ie)){x.types="template_attribute_else";x.token=q[g][0];}else {x.types="template_attribute";x.token=q[g][0];}}Y();g=g+1;continue}v=q[g][0].indexOf("=");L=q[g][0].indexOf('"');q[g][0].indexOf("'");if(v<0){x.types="attribute";if(d(q[g][0],35)||d(q[g][0],91)||d(q[g][0],123)||d(q[g][0],40)||o===true){x.token=q[g][0];}else {if($.attributeCasing==="preserve"){x.token=q[g][0];}else {x.token=q[g][0].toLowerCase();}}Y();}else {O=q[g][0].slice(0,v);W=q[g][0].slice(v+1);if($.correct&&(G(W[0],60)||G(W[0],123)||G(W[0],61)||G(W[0],34)||G(W[0],39))){W='"'+W+'"';}if(o===true&&/^\s*{/.test(W)){x.token=O+"={";x.types="jsx_attribute_start";p(n,x,"jsx_attribute");Q.lexers.script(W.slice(1,W.length-1));x.begin=s.count;if(/\s\}$/.test(W)){W=W.slice(0,W.length-1);W=/\s+$/.exec(W)[0];x.lines=W.indexOf("\n")<0?1:W.split("\n").length;}else {x.lines=0;}x.begin=s.structure[s.structure.length-1][1];x.stack=s.structure[s.structure.length-1][0];x.token="}";x.types="jsx_attribute_end";Y();x.types="attribute";x.begin=R;x.stack=u;}else {if(qe(O)||(G(W,39)||G(W,34))&&qe(W)){x.token=q[g][0];x.types="template_attribute_end";x.ender=x.begin;}else if(je(O,5)&&(G(W,39)||G(W,34))&&je(O,5)){const ie=De(q[g][0]);if(oe.liquid.tags.has(ie)){x.types="template_attribute_start";x.begin=s.count;x.token=q[g][0];}else if(oe.liquid.else.has(ie)){x.types="template_attribute_else";x.token=q[g][0];}else {x.types="template_attribute";x.token=q[g][0];}}else {x.types="attribute";if(d(q[g][0],35)||d(q[g][0],91)||d(q[g][0],123)||d(q[g][0],40)||o===true){x.token=q[g][0];}else {x.token=q[g][0];}}Y();}}g=g+1;}while(g<D)}if(re.length>0){x.token=re.join(" ");Y();}}m=false;if(b==="---"){j="---";N="comment";}else if(d(k[e],60)){if(d(k[e+1],47)){b=">";N="end";}else if(d(k[e+1],33)){if((k[e+2].charCodeAt(0)===100||k[e+2].charCodeAt(0)===68)&&(k[e+3].charCodeAt(0)===111||k[e+3].charCodeAt(0)===79)&&(k[e+4].charCodeAt(0)===99||k[e+4].charCodeAt(0)===67)&&(k[e+5].charCodeAt(0)===116||k[e+5].charCodeAt(0)===84)&&(k[e+6].charCodeAt(0)===121||k[e+6].charCodeAt(0)===89)&&(k[e+7].charCodeAt(0)===112||k[e+7].charCodeAt(0)===80)&&(k[e+8].charCodeAt(0)===101||k[e+8].charCodeAt(0)===69)){b=">";N="doctype";T=true;}else if(d(k[e+2],45)&&d(k[e+3],45)){b="-->";N="comment";j="<!--";}else if(d(k[e+2],91)&&k[e+3].charCodeAt(0)===67&&k[e+4].charCodeAt(0)===68&&k[e+5].charCodeAt(0)===65&&k[e+6].charCodeAt(0)===84&&k[e+7].charCodeAt(0)===65&&d(k[e+8],91)){b="]]>";N="cdata";T=true;}}else if(k[e+1]==="?"){b="?>";if(k[e+2].charCodeAt(0)===120&&k[e+3].charCodeAt(0)===109&&k[e+4].charCodeAt(0)===109){N="xml";se=true;}else {T=true;N="template";}}else if(d(k[e+1],37)){T=true;}else if((k[e+1].charCodeAt(0)===112||k[e+1].charCodeAt(0)===80)&&(k[e+2].charCodeAt(0)===114||k[e+2].charCodeAt(0)===82)&&(k[e+3].charCodeAt(0)===101||k[e+3].charCodeAt(0)===69)&&(d(k[e+4],62)||ae(k[e+4]))){b="</pre>";N="ignore";T=true;}else {se=true;b=">";}}else if(d(k[e],123)){if(o){m=true;z=true;x.token="{";x.types="script_start";s.structure.push(["script",s.count]);p(n,x,w);return}if(d(k[e+1],123)){T=true;b="}}";N="template";}else if(d(k[e+1],37)){T=true;b="%}";N="template";const R=k.indexOf("}",e+2);if(k[R-1].charCodeAt(0)===37){let u=k.slice(e+2,R-1).join(w);if(u.charCodeAt(0)===45){j="{%-";u=u.slice(1).trimStart();}else {j="{%";u=u.trimStart();}if(u.charCodeAt(u.length-1)===45){b="-%}";u=u.slice(0,u.length-1).trimEnd();}else {b="%}";u=u.trimEnd();}if(u==="comment"){const r=c.indexOf("{%",R);let g=r;if(k[r+1].charCodeAt(0)===45)g=r+1;g=c.indexOf("endcomment",g);if(g>0){g=k.indexOf("}",g);if(g>0&&k[g-1].charCodeAt(0)===37){N="comment";j=k.slice(e,R+1).join(w);b=k.slice(r,g+1).join(w);}}}}else {T=true;b="%}";N="template";}}else {T=true;b=k[e+1]+"}";N="template";}}if($.preserveAttributes===true)T=true;if(z)return;_=b.charAt(b.length-1);if(N==="comment"&&(d(k[e],60)||d(k[e],123)&&d(k[e+1],37))){H=s.wrapCommentBlock({chars:k,end:a,lexer:"markup",opening:j,start:e,terminator:b});A=H[0];e=H[1];if(A.replace(j,w).trimStart().startsWith("@prettify-ignore-start")){x.token=A;x.types="ignore";p(n,x,w);return}}else if(e<a){let K=function(){if(D===false&&d(k[e-1],123)&&(d(k[e],123)||d(k[e],37))){return true}else if(D===true&&d(k[e],125)&&(d(k[e-1],125)||d(k[e-1],37))){return false}return D},ce=function(){let ue=e;do{ue=ue-1;}while(k[ue]==="\\");ue=e-ue;return ue%2===1},ye=function(ue){let ke;let fe=w;let he=0;let Pe=0;const We="data-prettify-ignore";if(ue===true){fe=J.join(w);ke=be(fe);O=w;if(ke[0]===We)X=true;}else {fe=J.join(w);if(o===false||o&&G(fe[fe.length-1],125)){fe=fe.replace(/\s+/g," ");}ke=be(fe);if(ke[0]===We)X=true;if(o&&d(J[0],123)&&d(J[J.length-1],125))re=0;}if(d(fe[0],123)&&d(fe[1],37))te=true;if(ue===false){if(Ye(fe)){P=P+1;}else if(qe(fe)){P=P-1;}}fe=fe.replace(/^\u0020/,w).replace(/\u0020$/,w);J=fe.replace(/\r\n/g,"\n").split("\n");Pe=J.length;if(he<Pe){do{J[he]=J[he].replace(/(\s+)$/,w);he=he+1;}while(he<Pe)}fe=J.join(h.crlf===true?"\r\n":"\n");fe=S(fe);if(P>=1||je(fe,1)){if(je(fe,5)===false){M=d(k[e+1],10)||d(k[e],10)?2:d(k[e],32)&&G(k[e+1],32)?1:0;}else {M=d(k[e+1],10)?2:G(k[e+1],32)?0:M;}}if(fe==="="){q[q.length-1][0]=`${q[q.length-1][0]}=`;}else if(d(fe[0],61)&&q.length>0&&q[q.length-1][0].indexOf("=")<0){q[q.length-1][0]=q[q.length-1][0]+fe;if(P>=1||je(fe,5))q[q.length-1][1]=M;}else if(G(fe[0],61)&&q.length>0&&q[q.length-1][0].indexOf("=")===q[q.length-1][0].length-1){q[q.length-1][0]=q[q.length-1][0]+fe;}else if(fe!==w&&fe!==" "){q.push([fe,M]);}if(q.length>0){const[Xe]=q[q.length-1];if(Xe.indexOf("=\u201C")>0){s.error=`Invalid quote character (\u201C, &#x201c) used on line number ${s.lineNumber}`;}else if(Xe.indexOf("=\u201D")>0){s.error=`Invalid quote character (\u201D, &#x201d) used on line number ${s.lineNumber}`;}}J=[];M=k[e]==="\n"?2:1;};const R=[];let u=0;let r=0;let g=0;let v=0;let L=0;let M=0;let O=w;let W=w;let re=0;let D=false;let Y=false;let ie=false;let le=false;let J=[];do{if(d(k[e],10)){M=M+1;s.lineNumber=s.lineNumber+1;}if(T===true||(ae(k[e])===false&&G(O,125)||d(O,125))){D=K();R.push(k[e]);if(d(R[0],60)&&d(R[1],62)&&d(b,62)){x.token="<>";x.types="start";p(n,x,"(empty)");return}if(d(R[0],60)&&d(R[1],47)&&d(R[2],62)&&d(b,62)){x.token="</>";x.types="end";p(n,x,w);return}}if(N==="cdata"&&d(k[e],62)&&d(k[e-1],93)&&G(k[e-2],93)){s.error=`CDATA tag (${R.join(w)}) not properly terminated with "]]>"`;break}if(N==="comment"){O=w;if(k[e]===_&&R.length>b.length+1){r=R.length;u=b.length-1;if(u>-1){do{r=r-1;if(R[r]!==b.charAt(u))break;u=u-1;}while(u>-1)}if(u<0)break}}else {if(O===w){if(d(R[0],60)&&d(R[1],33)&&N!=="cdata"){if(N==="doctype"&&d(k[e],62))break;if(d(k[e],91)){if(d(k[e+1],60)){N="start";break}if(ae(k[e+1])){do{e=e+1;if(d(k[e],10))M=M+1;}while(e<a-1&&ae(k[e+1]))}if(d(k[e+1],60)){N="start";break}}}if(o){if(d(k[e],123)){re=re+1;}else if(d(k[e],125)){re=re-1;}}if(d(k[e],60)&&T===false&&R.length>1&&/>{2,3}/.test(b)===false&&se){s.error=`Parse error (line ${s.lineNumber}) on: ${R.join(w)}`;}if(Y===true&&ae(k[e])===false&&k[e]!==_){Y=false;y=0;O=W;R.pop();if(e<a){do{if(d(k[e],10))s.lineNumber=s.lineNumber+1;if($.preserveAttributes===true){R.push(k[e]);}else {J.push(k[e]);}if(G(O,34)||G(O,39)){if(d(k[e-1],123)&&(d(k[e],37)||d(k[e],123))){D=true;}else if((d(k[e-1],125)||d(k[e-1],37))&&d(k[e],125)){D=false;}}if(o===false&&ie===false&&D===true&&$.preserveAttributes===false){const ue=d(J[0],61);do{e=e+1;if(d(k[e],10)){s.lineNumber=s.lineNumber+1;if(ue){D=false;O=w;ye(false);break}}J.push(k[e]);if(ue&&d(k[e+1],62)){D=false;O=w;q[q.length-1][0]+=J.join(w);J=[];break}if(ue===false&&(d(k[e-1],125)||d(k[e-1],37))&&d(k[e],125)){D=false;O=w;ye(false);break}}while(e<a)}if(o===false&&(d(k[e],60)||d(k[e],62))&&(O===w||d(O,62))){if(O===w&&d(k[e],60)){O=">";g=1;}else if(d(O,62)){if(d(k[e],60)){g=g+1;}else if(d(k[e],62)){g=g-1;if(g===0){O=w;y=0;ye(false);break}}}}else if(O===w){if(k[e+1]===_){if(d(J[J.length-1],47)||d(J[J.length-1],63)&&N==="xml"){J.pop();if(T===true)R.pop();e=e-1;}if(J.length>0)ye(false);break}if(o===false&&d(k[e],123)&&d(k[e-1],61)){O="}";}else if(d(k[e],34)||d(k[e],39)){O=k[e];if(ie===false&&D===false)ie=true;if(d(k[e-1],61)&&(d(k[e+1],60)||d(k[e+1],123)&&d(k[e+2],37)||ae(k[e+1])&&G(k[e-1],61))){y=e;}}else if(d(k[e],40)){O=")";L=1;}else if(o){if((d(k[e-1],61)||ae(k[e-1]))&&d(k[e],123)){O="}";v=1;}else if(d(k[e],47)){if(d(k[e+1],42)){O="*/";}else if(k[e+1]==="/"){O="\n";}}}else if(d(R[0],123)&&d(k[e],123)&&(d(k[e+1],123)||d(k[e+1],37))){O=d(k[e+1],123)?"}}":k[e+1]+"}";}if(ae(k[e])&&O===w){if(d(J[J.length-2],61)){u=e+1;if(u<a){do{if(ae(k[u])===false){if(d(k[u],34)||d(k[u],39)){e=u-1;le=true;J.pop();}break}u=u+1;}while(u<a)}}if(le===true){le=false;}else if(re===0||re===1&&d(J[0],123)){J.pop();if(J.length>0)ye(false);Y=true;break}}}else if(d(k[e],40)&&d(O,41)){L=L+1;}else if(d(k[e],41)&&d(O,41)){L=L-1;if(L===0){O=w;if(k[e+1]===b.charAt(0)){ye(false);break}}}else if(o&&(d(O,125)||d(O,10)&&d(k[e],10)||O==="*/"&&d(k[e-1],42)&&d(k[e],47))){if(d(k[e],96)){e=e+1;do{J.push(k[e]);if(d(k[e],96))break;e=e+1;}while(e<k.length)}if(d(O,125)){if(d(k[e],125)&&k[e]!==O){v=v+1;}else if(k[e]===O){v=v-1;if(v===0){re=0;O=w;A=J.join(w);if($.preserveAttributes===false){if(o){if(!/^\s*$/.test(A))q.push([A,M]);}else {A=A.replace(/\s+/g," ");if(A!==" ")q.push([A,M]);}}J=[];M=1;break}}}else {W=w;Z=true;A=J.join(w);if(A!==" ")q.push([A,M]);J=[];M=d(O,10)?2:1;O=w;break}}else if(d(k[e],123)&&d(k[e+1],37)&&d(k[y-1],61)&&(d(O,34)||d(O,39))){O=O+"{%";y=0;}else if(d(k[e-1],37)&&d(k[e],125)&&(O==='"{%'||O==="'{%")){O=O.charAt(0);y=0;}else if(d(k[e],60)&&d(b,62)&&d(k[y-1],61)&&(d(O,34)||d(O,39))){O=O+"<";y=0;}else if(d(k[e],62)&&(O==='"<'||O==="'<")){O=O.charAt(0);y=0;}else if(y===0&&G(O,62)&&(O.length<2||G(O,34)&&G(O,39))){r=0;u=O.length-1;if(u>-1){do{if(k[e-r].charCodeAt(0)!==O.charCodeAt(u))break;r=r+1;u=u-1;}while(u>-1)}if(u<0&&D===false&&ie===true){ie=false;ye(true);if(k[e+1]===_)break}}else if(y>0&&ae(k[e])===false){y=0;}e=e+1;}while(e<a)}}else if(d(b,10)===false&&(d(k[e],34)||d(k[e],39))){O=k[e];}else if(N!=="comment"&&G(b,10)&&d(k[e],60)&&d(k[e+1],33)&&d(k[e+2],45)&&d(k[e+3],45)&&n.types[s.count]!=="conditional"){O="-->";}else if(d(k[e],123)&&G(R[0],123)&&G(b,10)&&(d(k[e+1],123)||d(k[e+1],37))){if(d(k[e+1],123)){O="}}";}else {O=k[e+1]+"}";if(J.length<1&&(q.length<1||ae(k[e-1]))){R.pop();do{if(d(k[e],10))M=M+1;J.push(k[e]);e=e+1;}while(e<a&&k[e-1]+k[e]!==O);J.push("}");q.push([J.join(w),M]);J=[];M=1;O=w;}}if(O===b)O=w;}else if(se&&G(b,10)&&ae(k[e])&&G(k[e-1],60)){Y=true;}else if(se&&o&&d(k[e],47)&&(d(k[e+1],42)||d(k[e+1],47))){Y=true;R[R.length-1]=" ";W=d(k[e+1],42)?"*/":"\n";J.push(k[e]);}else if(D===false&&(k[e]===_||d(b,10)&&d(k[e+1],60))&&(R.length>b.length+1||d(R[0],93))&&(o===false||re===0)){if(d(b,10)){if(ae(R[R.length-1])){do{R.pop();e=e-1;}while(ae(R[R.length-1]))}break}r=R.length;u=b.length-1;if(u>-1){do{r=r-1;if(R[r]!==b.charAt(u))break;u=u-1;}while(u>-1)}if(u<0){if(d(R[r],62)&&d(k[e],62)&&q.length>0){if(q[q.length-1][1]===0&&d(k[e-1],125)&&ae(k[e+1])){q[q.length-1][1]=d(k[e+1],32)?1:2;}}break}}}else if(k[e].charCodeAt(0)===O.charCodeAt(O.length-1)&&(o&&d(b,125)&&(k[e-1]!=="\\"||ce()===false)||(o===false||G(b,125)))){r=0;u=O.length-1;if(u>-1){do{if(k[e-r]!==O.charAt(u))break;r=r+1;u=u-1;}while(u>-1)}if(u<0)O=w;}}e=e+1;}while(e<a);if($.correct===true){if(d(k[e+1],62)&&d(R[0],60)&&G(R[0],60)){do{e=e+1;}while(d(k[e+1],62))}else if(d(R[0],60)&&d(R[1],60)&&G(k[e+1],62)&&G(R[R.length-2],62)){do{R.splice(1,1);}while(d(R[1],60))}}y=0;A=R.join(w);E=B(A);A=S(A);if(E==="xml"){i="xml";}else if(i===w&&E==="html"){i="html";}}x.token=A;x.types=N;E=B(A);if(T===false&&o===false)A=A.replace(/\s+/g," ");if(E==="comment"&&je(A,2)){const R=A.slice(0,A.indexOf("%}")+2);const u=A.slice(A.indexOf("%}")+2,A.lastIndexOf("{%"));const r=A.slice(A.lastIndexOf("{%"));let g=0;let v=0;const L=O=>{g=O===w?0:O.split("\n").length;return w};const M=O=>{v=O===w?0:O.split("\n").length;return w};x.begin=s.structure[s.structure.length-1][1];x.ender=s.count+3;x.stack=s.structure[s.structure.length-1][0];x.types="template_start";x.token=R;p(n,x,"comment");A=u.replace(/^\s*/,L);A=A.replace(/\s*$/,M);x.begin=s.count;x.lines=g;x.stack="comment";x.token=A;x.types="comment";p(n,x,w);x.types="template_end";x.stack="comment";x.lines=v;x.token=r;p(n,x,w);return}x.types=N;ee=(()=>{const R=/(\/>)$/;const u=(g,v)=>{if(!oe.html.tags.has(g))return false;if(g===v)return true;if(g==="dd"&&v==="dt")return true;if(g==="dt"&&v==="dd")return true;if(g==="td"&&v==="th")return true;if(g==="th"&&v==="td")return true;if(g==="colgroup"&&(v==="tbody"||v==="tfoot"||v==="thead"||v==="tr"))return true;if(g==="tbody"&&(v==="colgroup"||v==="tfoot"||v==="thead"))return true;if(g==="tfoot"&&(v==="colgroup"||v==="tbody"||v==="thead"))return true;if(g==="thead"&&(v==="colgroup"||v==="tbody"||v==="tfoot"))return true;if(g==="tr"&&v==="colgroup")return true;return false};const r=g=>{x.lines=n.lines[s.count]>0?1:0;x.token=`</${s.structure[s.structure.length-1][0]}>`;x.types="end";p(n,x,w);if(g>0){do{x.begin=s.structure[s.structure.length-1][1];x.stack=s.structure[s.structure.length-1][0];x.token=`</${s.structure[s.structure.length-1][0]}>`;p(n,x,w);g=g-1;}while(g>0)}x.begin=s.structure[s.structure.length-1][1];x.lines=s.linesSpace;x.stack=s.structure[s.structure.length-1][0];x.token=A;x.types="end";n.lines[s.count-1]=0;};if(N==="end"){const g=n.token[s.count];if(n.types[s.count-1]==="singleton"&&g.charCodeAt(g.length-2)!==47&&`/${B(g)}`===E){n.types[s.count-1]="start";}}if(i==="html"){if(d(A[0],60)&&G(A[1],33)&&G(A[1],63)&&(s.count<0||n.types[s.count].indexOf("template")<0))A=A.toLowerCase();if(oe.html.tags.has(s.structure[s.structure.length-1][0])&&u(E.slice(1),s.structure[s.structure.length-2][0])){r(0);}else if(s.structure.length>3&&oe.html.tags.has(s.structure[s.structure.length-1][0])&&oe.html.tags.has(s.structure[s.structure.length-2][0])&&oe.html.tags.has(s.structure[s.structure.length-3][0])&&u(E,s.structure[s.structure.length-4][0])){r(3);}else if(s.structure.length>2&&oe.html.tags.has(s.structure[s.structure.length-1][0])&&oe.html.tags.has(s.structure[s.structure.length-2][0])&&u(E,s.structure[s.structure.length-3][0])){r(2);}else if(s.structure.length>1&&oe.html.tags.has(s.structure[s.structure.length-1][0])&&u(E,s.structure[s.structure.length-2][0])){r(1);}else if(u(E,s.structure[s.structure.length-1][0])){r(0);}else if(d(E[0],47)&&oe.html.tags.has(s.structure[s.structure.length-1][0])&&s.structure[s.structure.length-1][0]!==E.slice(1)){U(A,false);x.begin=s.structure[s.structure.length-1][1];x.lines=s.linesSpace;x.stack=s.structure[s.structure.length-1][0];x.token=A;x.types="end";n.lines[s.count-1]=0;}if(o===false&&oe.html.voids.has(E)){if($.correct===true&&R.test(A)===false)A=A.slice(0,A.length-1)+" />";return true}}return false})();if(oe.embed("html",E)&&A.slice(A.length-2)!=="/>"||oe.embed("liquid",E)&&A.slice(A.length-2)==="%}"){const R=je(A,3);let u=q.length-1;let r=w;let g=[];if(u>-1){do{g=be(q[u][0]);if(g[0]==="type"){r=g[1];if(r.charCodeAt(0)===34||r.charCodeAt(0)===39){r=r.slice(1,r.length-1);}break}u=u-1;}while(u>-1)}if(R===false&&oe.embed("html",E)){m=true;if(r===w){F=oe.html.embed[E].language;}else if(oe.html.embed[E].value(r)){F=oe.html.embed[E].language;}}else if(R===true&&oe.embed("liquid",E)){m=true;if(r===w){F=oe.liquid.embed[E].language;}else {F=oe.liquid.embed[E].language;}}if(m===true){u=e+1;if(u<a){do{if(ae(k[u])===false){if(d(k[u],60)){if(k.slice(u+1,u+4).join(w)==="!--"){u=u+4;if(u<a){do{if(ae(k[u])===false){m=false;break}if(k[u]==="\n"||k[u]==="\r")break;u=u+1;}while(u<a)}}else {m=false;}}break}u=u+1;}while(u<a)}}}if(se&&X===false&&N!=="xml"){if(ee===true||A.slice(A.length-2)==="/>"){N="singleton";}else {N="start";}x.types=N;}if(se&&T===false&&X&&d(b,62)&&A.slice(A.length-2)!=="/>"){const R=[];const u=[];if(ee===true){N="singleton";}else {q.forEach(r=>u.push(r[0]));T=true;N="ignore";e=e+1;if(e<a){let r=w;let g=0;let v=0;let L=false;do{if(d(k[e],10))s.lineNumber=s.lineNumber+1;R.push(k[e]);if(r===w){if(d(k[e],34)){r='"';}else if(d(k[e],39)){r="'";}else if(G(R[0],123)&&d(k[e],123)&&(d(k[e+1],123)||d(k[e+1],37))){if(d(k[e+1],123)){r="}}";}else {r=k[e+1]+"}";}}else if(d(k[e],60)&&se===true){if(d(k[e+1],47)){L=true;}else {L=false;}}else if(k[e]===_&&G(k[e-1],47)){if(L===true){y=y-1;if(y<0)break}else {y=y+1;}}}else if(d(k[e],r.charCodeAt(r.length-1))){v=0;g=r.length-1;if(g>-1){do{if(G(k[e-v],r.charCodeAt(g)))break;v=v+1;g=g-1;}while(g>-1)}if(g<0)r=w;}e=e+1;}while(e<a)}}A=A+R.join(w);A=A.replace(">",` ${u.join(" ")}>`);x.token=A;x.types="content-ignore";q=[];}if(x.types.indexOf("template")>-1){if(d(A[0],123)&&d(A[1],37)){if((E==="case"||E==="default")&&(s.structure[s.structure.length-1][0]==="switch"||s.structure[s.structure.length-1][0]==="case")){x.types="template_else";}else if(oe.liquid.else.has(E)){x.types="template_else";}else {if(oe.liquid.tags.has(E)){x.types="template_start";}else if(E.charCodeAt(0)===101&&E.charCodeAt(1)===110&&E.charCodeAt(2)===100&&oe.liquid.tags.has(E.slice(3))){x.types="template_end";}else if(E.charCodeAt(0)===101&&E.charCodeAt(1)===110&&E.charCodeAt(2)===100){x.types="template_end";x.stack=E.slice(3);let R=0;do{if(n.types[R]==="template"&&n.stack[R]===x.stack){n.types[R]="template_start";C.start=C.start+1;break}else {R=n.stack.indexOf(x.stack,R+1);}}while(R>-1)}else {x.stack=E;}}}else if(x.types==="template"){if(A.indexOf("else")>2)x.types="template_else";}if(x.types==="template_start"||x.types==="template_else"){if(E===w||d(E,37)){E=E+A.slice(1).replace(E,w).replace(/^\s+/,w);E=E.slice(0,E.indexOf("(")).replace(/\s+/,w);}}if($.quoteConvert==="double"){x.token=x.token.replace(/'/g,'"');}else if($.quoteConvert==="single"){x.token=x.token.replace(/"/g,"'");}}if(N==="cdata"&&(x.stack==="script"||x.stack==="style")){let R=s.count;let u=s.count;const r=x.stack;if(n.types[u]==="attribute"){do{R=R-1;u=u-1;}while(n.types[u]==="attribute"&&u>-1)}x.begin=R;x.token="<![CDATA[";x.types="cdata_start";A=A.replace(/^(\s*<!\[cdata\[)/i,w).replace(/(\]\]>\s*)$/,w);p(n,x,w);s.structure.push(["cdata",s.count]);if(r==="script"){Q.lexers.script(A);}else {Q.lexers.style(A);}x.begin=s.structure[s.structure.length-1][1];x.token="]]>";x.types="cdata_end";p(n,x,w);s.structure.pop();}else {p(n,x,E);}de();if(h.wrap>0&&o===true){let R=0;let u=s.count;let r=0;if(n.types[u].indexOf("attribute")>-1){do{R=R+n.token[u].length+1;u=u-1;}while(n.lexer[u]!=="markup"||n.types[u].indexOf("attribute")>-1);if(n.lines[u]===1)R=R+n.token[u].length+1;}else if(n.lines[u]===1){R=n.token[u].length+1;}r=u-1;if(R>0&&n.types[r]!=="script_end"){if(n.types[r].indexOf("attribute")>-1){do{R=R+n.token[r].length+1;r=r-1;}while(n.lexer[r]!=="markup"||n.types[r].indexOf("attribute")>-1);if(n.lines[r]===1)R=R+n.token[r].length+1;}else if(n.lines[r]===1){R=n.token[r].length+1;}}}s.linesSpace=0;}function f(){const b=[];const x=e;const y=d(n.token[s.count],123)&&o===true;let A=w;let _=s.linesSpace;let N=w;if(m===true){if(y===true){N="script";}else if(s.structure[s.structure.length-1][1]>-1){N=B(n.token[s.structure[s.structure.length-1][1]].toLowerCase());}else if(n.begin[s.count]>1){N=B(n.token[n.begin[s.count]].toLowerCase());}else {N=B(n.token[n.begin[s.count]].toLowerCase());}}const E=n.types[s.count]==="template_start"&&n.token[s.count].indexOf("<!")===0&&n.token[s.count].indexOf("<![")<0&&n.token[s.count].charCodeAt(n.token[s.count].length-1)===91;const j={begin:s.structure[s.structure.length-1][1],ender:-1,lexer:"markup",lines:_,stack:s.structure[s.structure.length-1][0],token:w,types:"content"};function ee(){let z=e-1;let X=0;if(k[e-1]!=="\\")return false;if(z>-1){do{if(k[z]!=="\\")break;X=X+1;z=z-1;}while(z>-1)}return X%2===1}if(e<a){let z=w;let X=w;let Z=w;let te=0;do{if(d(k[e],10))s.lineNumber=s.lineNumber+1;if(m===true){if(X===w){if(d(k[e],47)){if(d(k[e+1],42)){X="*";}else if(d(k[e+1],47)){X="/";}else if(N==="script"&&"([{!=,;.?:&<>".indexOf(k[e-1])>-1){if(o===false||G(k[e-1],60))X="reg";}}else if((d(k[e],34)||d(k[e],39)||d(k[e],96))&&ee()===false){X=k[e];}else if(d(k[e],123)&&y===true){te=te+1;}else if(d(k[e],125)&&y===true){if(te===0){Z=b.join(w).replace(/^\s+/,w).replace(/\s+$/,w);Q.lexers.script(Z);s.structure[s.structure.length-1][1]+=1;if(n.types[s.count]==="end"&&n.lexer[n.begin[s.count]-1]==="script"){j.lexer="script";j.token=$.correct===true?";":"x;";j.types="separator";p(n,j,w);j.lexer="markup";}j.token="}";j.types="script_end";p(n,j,w);s.structure.pop();break}te=te-1;}if(je(n.token[s.count],3)===false){z=k.slice(e,e+10).join(w).toLowerCase();if(N==="script"){z=e===a-9?z.slice(0,z.length-1):z.slice(0,z.length-2);if(z==="<\/script"){Z=b.join(w).replace(/^\s+/,w).replace(/\s+$/,w);e=e-1;if(b.length<1)break;if(/^<!--+/.test(Z)&&/--+>$/.test(Z)){j.token="<!--";j.types="comment";p(n,j,w);Z=Z.replace(/^<!--+/,w).replace(/--+>$/,w);Q.lexers.script(Z);j.token="-->";p(n,j,w);}else {Q.options.language=F;Q.lexers.script(Z);if(F==="json"&&h.json.objectSort===true||F!=="json"&&h.script.objectSort===true)s.sortCorrection(0,s.count+1);Q.options.language="html";}break}}if(N==="style"){if(e===a-8){z=z.slice(0,z.length-1);}else if(e===a-9){z=z.slice(0,z.length-2);}else {z=z.slice(0,z.length-3);}if(z==="</style"){let T=b.join(w).replace(/^\s+/,w).replace(/\s+$/,w);e=e-1;if(b.length<1)break;if(/^<!--+/.test(T)&&/--+>$/.test(T)){j.token="<!--";j.types="comment";p(n,j,w);T=T.replace(/^<!--+/,w).replace(/--+>$/,w);Q.lexers.style(T);j.token="-->";p(n,j,w);}else {Q.options.language=F;Q.lexers.style(T);if(h.style.sortProperties===true)s.sortCorrection(0,s.count+1);Q.options.language="html";}break}}}else {if(oe.embed("liquid",N)){z=k.slice(e).join(w).toLowerCase();if(oe.liquid.embed[N].end(z)){z=z.slice(0,z.indexOf("%}")+2);Z=b.join(w).replace(/^\s+/,w).replace(/\s+$/,w);e=e+z.length-1;if(b.length<1)break;const T=Me[oe.liquid.embed[N].language];if(/^<!--+/.test(Z)&&/--+>$/.test(Z)){j.token="<!--";j.types="comment";p(n,j,w);Z=Z.replace(/^<!--+/,w).replace(/--+>$/,w);Q.lexers[T](Z);j.token="-->";p(n,j,w);}else {Q.options.language=oe.liquid.embed[N].language;Q.lexers[T](Z);if(F==="json"&&h.json.objectSort===true||F==="javascript"&&h.script.objectSort===true||(F==="css"||F==="scss")&&h.style.sortProperties===true)s.sortCorrection(0,s.count+1);Q.options.language="liquid";j.token=z;j.types="template_end";p(n,j,w);}break}}}}else if(X===k[e]&&(d(X,34)||d(X,39)||d(X,96)||d(X,42)&&d(k[e+1],47))&&ee()===false){X=w;}else if(d(X,96)&&k[e]==="$"&&d(k[e+1],123)&&ee()===false){X="}";}else if(d(X,125)&&d(k[e],125)&&ee()===false){X="`";}else if(d(X,47)&&(d(k[e],10)||k[e]==="\r")){X=w;}else if(X==="reg"&&d(k[e],47)&&ee()===false){X=w;}else if(d(X,47)&&d(k[e],60)&&d(k[e-1],45)&&d(k[e-2],45)){z=k.slice(e+1,e+11).join(w).toLowerCase();z=z.slice(0,z.length-2);if(N==="script"&&z==="<\/script")X=w;z=z.slice(0,z.length-1);if(N==="style"&&z==="</style")X=w;}}if(E===true&&d(k[e],93)){e=e-1;_=0;A=b.join(w);A=A.replace(/\s+$/,w);j.token=A;p(n,j,w);break}if(m===false&&b.length>0&&(d(k[e],60)&&G(k[e+1],61)&&!/\s|\d/.test(k[e+1])||d(k[e],91)&&d(k[e+1],37)||d(k[e],123)&&(o===true||d(k[e+1],123)||d(k[e+1],37)))){e=e-1;if(s.structure[s.structure.length-1][0]==="comment"){A=b.join(w);}else {A=b.join(w).replace(/\s+$/,w);}A=S(A);_=0;j.token=A;if(h.wrap>0&&$.preserveText===false){const{wrap:T}=h;const se=w;const me=w;const q=[];let H=T;let be=A.length;const we=()=>{if(A.charCodeAt(H)===32){q.push(A.slice(0,H));A=A.slice(H+1);be=A.length;H=T;return}do{H=H-1;}while(H>0&&A.charCodeAt(H)!==32);if(H>0){q.push(A.slice(0,H));A=A.slice(H+1);be=A.length;H=T;}else {H=T;do{H=H+1;}while(H<be&&A.charCodeAt(H)!==32);q.push(A.slice(0,H));A=A.slice(H+1);be=A.length;H=T;}};if(n.token[n.begin[s.count]]==="<a>"&&n.token[n.begin[n.begin[s.count]]]==="<li>"&&n.lines[n.begin[s.count]]===0&&s.linesSpace===0&&A.length<h.wrap){p(n,j,w);break}if(be<T){p(n,j,w);break}if(s.linesSpace<1){let de=s.count;do{H=H-n.token[de].length;if(n.types[de].indexOf("attribute")>-1)H=H-1;if(n.lines[de]>0&&n.types[de].indexOf("attribute")<0)break;de=de-1;}while(de>0&&H>0);if(H<1)H=A.indexOf(" ");}A=b.join(w);A=A.replace(/^\s+/,w).replace(/\s+$/,w).replace(/\s+/g," ");do{we();}while(H<be);if(A!==w&&G(A,32))q.push(A);A=h.crlf===true?q.join("\r\n"):q.join("\n");A=se+A+me;}_=0;j.token=A;p(n,j,w);break}b.push(k[e]);e=e+1;}while(e<a)}if(e>x&&e<a){if(ae(k[e])){let z=e;s.linesSpace=1;do{if(k[z]==="\n")s.linesSpace=s.linesSpace+1;z=z-1;}while(z>x&&ae(k[z]))}else {s.linesSpace=0;}}else if(e!==x||e===x&&m===false){A=b.join(w).replace(/\s+$/,w);_=0;if(j.token!==A){j.token=A;p(n,j,w);s.linesSpace=0;}}m=false;}if(I>0){do{$.attributeSortList[e]=$.attributeSortList[e].replace(/^\s+/,w).replace(/\s+$/,w);e=e+1;}while(e<I);e=0;}if(h.language==="html"||h.language==="liquid")i="html";do{if(ae(k[e])){if(n.types[s.count]==="template_start"&&s.structure[s.structure.length-1][0]==="comment"){f();}else {e=s.spacer({array:k,end:a,index:e});}}else if(m){f();}else if(d(k[e],60)){V(w);}else if(d(k[e],91)&&d(k[e+1],37)){V("%]");}else if(d(k[e],123)&&(o||d(k[e+1],123)||d(k[e+1],37))){V(w);}else if(d(k[e],45)&&d(k[e+1],45)&&d(k[e+2],45)){V("---");}else {f();}e=e+1;}while(e<a);if(G(n.token[s.count][0],47)&&oe.html.tags.has(s.structure[s.structure.length-1][0]))U(n.token[s.count],true);if(C.end!==C.start&&s.error===w){if(C.end>C.start){const b=C.end-C.start;const x=b===1?w:"s";s.error=["Prettify Error:","",`${b} more end type${x} than start types`].join("\n");}else {const b=C.start-C.end;const x=b===1?w:"s";s.error=["Prettify Error:","",`${b} more start type${x} than end types`].join("\n");}}return n};Q.beautify.markup=l=>{const c={};const h="markup";const{data:n}=s;const o=l.language==="jsx"||l.language==="tsx";const t=l.crlf===true?String.fromCharCode(13,10):String.fromCharCode(10);const $=l.markup;const I=Q.end<1||Q.end>n.token.length?n.token.length:Q.end+1;const C={is:(S,p)=>n.types[S]===p,not:(S,p)=>n.types[S]!==p,idx:(S,p)=>S>-1&&(n.types[S]||w).indexOf(p)};const k={is:(S,p)=>n.token[S]===p,not:(S,p)=>n.token[S]!==p};let a=Q.start;let e=-1;let m=0;let F=0;let i=isNaN(l.indentLevel)?0:Number(l.indentLevel);const P=(()=>{const S=Q.start>0?Array(Q.start).fill(0,0,Q.start):[];function p(){let x=a+1;let y=0;if(C.is(x,void 0))return x-1;if(C.is(x,"comment")||a<I-1&&C.idx(x,"attribute")>-1){do{if(C.is(x,"jsx_attribute_start")){y=x;do{if(C.is(x,"jsx_attribute_end")&&n.begin[x]===y)break;x=x+1;}while(x<I)}else if(C.not(x,"comment")&&C.idx(x,"attribute")<0)return x;x=x+1;}while(x<I)}return x}function B(){const x=n.begin[a];let y=a;do{y=y-1;if(k.is(y,"</li>")&&k.is(y-1,"</a>")&&n.begin[n.begin[y]]===x&&n.begin[y-1]===n.begin[y]+1){y=n.begin[y];}else {return}}while(y>x+1);y=a;do{y=y-1;if(C.is(y+1,"attribute")){S[y]=-10;}else if(k.not(y,"</li>")){S[y]=-20;}}while(y>x+1)}function U(){let x=a;let y=false;if(n.lines[a+1]===0&&$.forceIndent===false){do{if(n.lines[x]>0){y=true;break}x=x-1;}while(x>e);x=a;}else {y=true;}if(y===true){const A=C.is(m,"comment")||C.is(m,"end")||C.is(m,"template_end")?i+1:i;do{S.push(A);x=x-1;}while(x>e);if(A===i+1)S[a]=i;if(C.is(x,"attribute")||C.is(x,"template_attribute")||C.is(x,"jsx_attribute_start")){S[n.begin[x]]=A;}else {S[x]=A;}}else {do{S.push(-20);x=x-1;}while(x>e);S[x]=-20;}e=-1;}function V(){let x=i;if($.forceIndent===true||$.forceAttribute===true){S.push(i);return}if(m<I&&(C.idx(m,"end")>-1||C.idx(m,"start")>-1)&&n.lines[m]>0){S.push(i);x=x+1;if(C.is(a,"singleton")&&a>0&&C.idx(a-1,"attribute")>-1&&C.is(n.begin[a-1],"singleton")){if(n.begin[a]<0||C.is(n.begin[a-1],"singleton")&&n.begin[n.ender[a]-1]!==a){S[a-1]=i;}else {S[a-1]=i+1;}}}else if(a>0&&C.is(a,"singleton")&&C.idx(a-1,"attribute")>-1){S[a-1]=i;F=n.token[a].length;S.push(-10);}else if(n.lines[m]===0){S.push(-20);}else if((l.wrap===0||a<I-2&&n.token[a]!==void 0&&n.token[a+1]!==void 0&&n.token[a+2]!==void 0&&n.token[a].length+n.token[a+1].length+n.token[a+2].length+1>l.wrap&&C.idx(a+2,"attribute")>-1||n.token[a]!==void 0&&n.token[a+1]!==void 0&&n.token[a].length+n.token[a+1].length>l.wrap)&&(C.is(a+1,"singleton")||C.is(a+1,"template"))){S.push(i);}else {F=F+1;S.push(-10);}if(a>0&&C.idx(a-1,"attribute")>-1&&n.lines[a]<1){S[a-1]=-20;}if(F>l.wrap){let y=a;let A=Math.max(n.begin[a],0);if(C.is(a,"content")&&$.preserveText===false){let _=0;const N=n.token[a].replace(/\s+/g,pe).split(pe);do{y=y-1;if(S[y]<0){_=_+n.token[y].length;if(S[y]===-10)_=_+1;}else {break}}while(y>0);y=0;A=N.length;do{if(N[y].length+_>l.wrap){N[y]=t+N[y];_=N[y].length;}else {N[y]=` ${N[y]}`;_=_+N[y].length;}y=y+1;}while(y<A);if(d(N[0],32)){n.token[a]=N.join(w).slice(1);}else {S[a-1]=x;n.token[a]=N.join(w).replace(t,w);}if(n.token[a].indexOf(t)>0){F=n.token[a].length-n.token[a].lastIndexOf(t);}}else {do{y=y-1;if(S[y]>-1){F=n.token[a].length;if(n.lines[a+1]>0)F=F+1;return}if(C.idx(y,"start")>-1){F=0;return}if(n.lines[y+1]>0&&(C.not(y,"attribute")||C.is(y,"attribute")&&C.is(y+1,"attribute"))){if(C.not(y,"singleton")||C.is(y,"attribute")&&C.is(y+1,"attribute")){F=n.token[a].length;if(n.lines[a+1]>0)F=F+1;break}}}while(y>A);S[y]=x;}}}function f(){const x=a;if(n.types[x-1]==="script_start"&&d(n.token[x-1],123)){S[x-1]=-20;}do{if(n.lexer[a+1]===h&&n.begin[a+1]<x&&C.not(a+1,"start")&&C.not(a+1,"singleton"))break;S.push(0);a=a+1;}while(a<I);c[x]=a;if(n.types[a+1]==="script_end"&&n.token[a+1]==="}"){S.push(-20);}else {S.push(i-1);}m=p();if(n.lexer[m]===h&&n.stack[a].indexOf("attribute")<0&&(n.types[m]==="end"||n.types[m]==="template_end")){i=i-1;}}function b(){function x(Z){const te=Z.indexOf("=");if(te>0&&(te<Z.indexOf('"')&&Z.indexOf('"')>0||te<Z.indexOf("'")&&Z.indexOf("'")>0)){return [Z.slice(0,te),Z.slice(te+1)]}return [Z,w]}function y(Z){const te=x(Z);if(te[1]===w||te[0]==="href"||te[0].charCodeAt(0)===111&&te[0].charCodeAt(1)===110){return Z}else if($.attributeValues==="preserve"){return te[0]+"="+te[1]}else if($.attributeValues==="strip"){return `${te[0].trimStart()}=${te[1].replace(/\s+/g,pe).replace(/^["']\s+/,'"')}`}const T=$.attributeValues;const se=[];const me=l.wrap>0?te[1].length>l.wrap:false;let q;let H=false;let be=w;let we=w;let de=0;let Le=0;if(T==="collapse"){q=te[1].replace(/\s+/g,pe);}else if(T==="wrap"){q=te[1].replace(/\s+/g,_e=>/\n/.test(_e)?ne:_e.replace(/\s+/,pe));}do{if(d(q[de],123)&&(d(q[de+1],123)||d(q[de+1],37))){if(T==="collapse"){if(ae(q[de-1])===true&&se[se.length-1]!==ne){se.push(ne);}}if(d(q[de+1],37)){Le=q.indexOf("%}",de+1);be=q.slice(de,Le+2);we=d(be[2],45)?be.slice(3).trimStart():be.slice(2).trimStart();de=Le+2;if(we.startsWith("end")){H=false;if(T==="collapse"&&se[se.length-1]!==ne){se.push(ne);}}else if(oe.liquid.tags.has(we.slice(0,we.search(/\s/)))){H=true;if(T==="collapse"&&se[se.length-1]!==ne){se.push(ne);}}se.push(be);}else {if(H&&T==="collapse"&&se[se.length-1]!==ne){se.push(ne);}Le=q.indexOf("}}",de+1);be=q.slice(de,Le+2);de=Le+2;se.push(be);}if(T==="collapse"){if(ae(q[de])===true&&se[se.length-1]!==ne&&de<q.length-1){se.push(ne);}}}else {if(q[de]===pe){if(T==="collapse"){if(se[se.length-1]!==ne){se.push(ne);}}else if(me&&T==="wrap"){if(H===false){se.push(ne);}}}else {se.push(q[de]);}de=de+1;}}while(de<q.length);return te[0]+"="+se.join(w)}function A(Z){if(C.is(Z,"attribute")||C.idx(Z,"template_attribute")>-1){n.token[Z]=y(n.token[Z]);}else {const te=n.token[Z].replace(/\s+/g,pe).split(pe);const T=te.length;let se=1;let me=te[0].length;do{if(me+te[se].length>l.wrap){me=te[se].length;te[se]=t+te[se];}else {te[se]=` ${te[se]}`;me=me+te[se].length;}se=se+1;}while(se<T);n.token[Z]=te.join(w);}}let _=a;const N=a-1;let E=false;let j=false;let ee=0;let z=n.token[N].length+1;let X=(()=>{if(C.idx(a,"start")>0){let Z=a;do{if(n.types[Z].indexOf("end")>0&&n.begin[Z]===a){if(Z<I-1&&C.idx(Z+1,"attribute")>-1){E=true;break}}Z=Z+1;}while(Z<I)}else if(a<I-1&&C.idx(a+1,"attribute")>-1){E=true;}if(C.is(m,"end")||C.is(m,"template_end")){return i+(C.is(N,"singleton")?2:1)}if(C.is(N,"singleton"))return i+1;return i})();if(E===false&&C.is(a,"comment_attribute")){S.push(i);S[N]=n.types[N]==="singleton"?i+1:i;return}if(X<1)X=1;do{F=F+n.token[a].length+1;if(n.types[a].indexOf("attribute")>0){if(n.types[a]==="template_attribute_start"){if($.preserveAttributes===true){S.push(-10);}else {let Z=1;do{if(n.lines[a]===0){S.push(-20);}else if(n.lines[a]===1){if($.forceAttribute===true){S.push(X);}else {S.push(-10);}}else {S.push(X);}if(Z===0)break;a=a+1;if(C.is(a,"template_attribute_start")){Z=Z+1;}else if(C.is(a,"template_attribute_end")){Z=Z-1;}ee=ee+1;if(n.token[a]!==void 0){F=F+n.token[a].length+1;z=z+n.token[a].length+1;}}while(a<I)}}else if(n.types[a]==="template_attribute"){if($.forceAttribute===true){S.push(X);}else {S.push(-10);}}else if(n.types[a]==="comment_attribute"){S.push(X);}else if(n.types[a].indexOf("start")>0){j=true;if(a<I-2&&n.types[a+2].indexOf("attribute")>0){S.push(-20);a=a+1;c[a]=a;}else {if(N===a-1&&E===false){if(o){S.push(-20);}else {S.push(X);}}else {if(o){S.push(-20);}else {S.push(X+1);}}if(n.lexer[a+1]!==h){a=a+1;f();}}}else if(n.types[a].indexOf("end")>0&&n.types[a].indexOf("template")<0){if(S[a-1]!==-20)S[a-1]=S[n.begin[a]]-1;if(n.lexer[a+1]!==h){S.push(-20);}else {S.push(X);}}else {S.push(X);}}else if(C.is(a,"attribute")){z=z+n.token[a].length+1;if($.preserveAttributes===true){S.push(-10);}else if($.forceAttribute===true||$.forceAttribute>=1||j===true||a<I-1&&(C.idx(a+1,"template_attribute_")>-1&&n.lines[a+1]!==-20||C.idx(a+1,"attribute")>0)){n.token[a]=y(n.token[a]);if($.forceAttribute===false&&n.lines[a]===1){if(C.is(a+1,"template_attribute_start")&&n.lines[a+1]>1){S.push(X);}else {S.push(-10);}}else {if($.forceAttribute===true){S.push(X);}else {S.push(-10);}}}else {S.push(-10);}}else if(n.begin[a]<N+1){break}a=a+1;ee=ee+1;}while(a<I);a=a-1;if(C.idx(a,"template")<0&&C.idx(a,"end")>0&&C.idx(a,"attribute")>0&&C.not(N,"singleton")&&S[a-1]>0&&E===true){S[a-1]=S[a-1]-1;}if(S[a]!==-20){if(o===true&&C.idx(N,"start")>-1&&C.is(a+1,"script_start")){S[a]=X;}else {if(k.is(a,"/")&&S[a-1]!==10){S[a-1]=-10;}else {S[a]=S[N];}}}if($.forceAttribute===true){F=0;S[N]=X;}else if($.forceAttribute>=1){if(ee>=$.forceAttribute){S[N]=X;let Z=a-1;do{if(C.is(Z,"template")&&S[Z]===-10){S[Z]=X;}else if(C.is(Z,"attribute")&&S[Z]===-10){S[Z]=X;}Z=Z-1;}while(Z>N)}else {S[N]=-10;}}else {S[N]=-10;}if($.preserveAttributes===true||k.is(N,"<%xml%>")||k.is(N,"<?xml?>")){F=0;return}_=a;if(_>N+1){if($.selfCloseSpace===false)z=z-1;if(z>l.wrap&&l.wrap>0&&$.forceAttribute===false){if($.forceLeadAttribute===true){S[N]=X;_=_-1;}F=n.token[a].length;do{if(n.token[_].length>l.wrap&&ae(n.token[_]))A(_);if(C.idx(_,"template")>-1&&S[_]===-10){S[_]=X;}else if(C.is(_,"attribute")&&S[_]===-10){S[_]=X;}_=_-1;}while(_>N)}}else if(l.wrap>0&&C.is(a,"attribute")&&n.token[a].length>l.wrap&&ae(n.token[a])){A(a);}}do{if(n.lexer[a]===h){if(n.token[a].toLowerCase().indexOf("<!doctype")===0)S[a-1]=i;if(C.idx(a,"attribute")>-1){b();}else if(C.is(a,"comment")){if(e<0)e=a;if(C.not(a+1,"comment")||a>0&&C.idx(a-1,"end")>-1)U();}else if(C.not(a,"comment")){m=p();if(C.is(m,"end")){i=i-1;if(k.is(a,"</ol>")||k.is(a,"</ul>")||k.is(a,"</dl>"))B();}if(C.is(m,"template_end")){i=i-1;if(C.is(m,"template_end")&&C.is(n.begin[m]+1,"template_else"))i=i-1;}if(C.is(a,"script_end")&&C.is(m,"end")){if(n.lines[m]<1){S.push(-20);}else if(n.lines[m]>1){S.push(i);}else {S.push(-10);}}else if(($.forceIndent===false||$.forceIndent===true&&C.is(m,"script_start"))&&(C.is(a,"content")||C.is(a,"singleton")||C.is(a,"template"))){F=F+n.token[a].length;if(C.is(a,"template")){S.push(i);const x=n.token[a].indexOf(t);if(x>0){const y=[];const A=S[a-1]*l.indentSize+n.token[a].charCodeAt(2)===45?l.indentSize:l.indentSize-1;let _=0;do{y.push(pe);_=_+1;}while(_<A);n.token[a]=n.token[a].trimStart().replace(/\n/g,N=>`${N}${y.join(w)}`);}}else if(n.lines[m]>0&&C.is(m,"script_start")){S.push(-10);}else if(l.wrap>0&&(C.idx(a,"template")<0||m<I&&C.idx(a,"template")>-1&&C.idx(a,"template")<0)){V();}else if(m<I&&(C.idx(m,"end")>-1||C.idx(m,"start")>-1)&&(n.lines[m]>0||C.idx(a,"template_")>-1)){S.push(i);}else if(n.lines[m]===0){S.push(-20);}else {S.push(i);}}else if(C.is(a,"start")||C.is(a,"template_start")){i=i+1;if(C.is(a,"template_start")&&C.is(m,"template_else")){i=i+1;}if(o===true&&k.is(a+1,"{")){if(n.lines[m]===0){S.push(-20);}else if(n.lines[m]>1){S.push(i);}else {S.push(-10);}}else if(C.is(a,"start")&&C.is(m,"end")){S.push(-20);}else if(C.is(a,"start")&&C.is(m,"script_start")){S.push(-10);}else if($.forceIndent===true){S.push(i);}else if(C.is(a,"template_start")&&C.is(m,"template_end")){S.push(-20);}else if(n.lines[m]===0&&(C.is(m,"content")||C.is(m,"singleton")||C.is(a,"start")&&C.is(m,"template"))){S.push(-20);}else {S.push(i);}}else if($.forceIndent===false&&n.lines[m]===0&&(C.is(m,"content")||C.is(m,"singleton"))){S.push(-20);}else if(C.is(a+2,"script_end")){S.push(-20);}else if(C.is(a,"template_else")){if(C.is(m,"template_end")){S[a-1]=i+1;}else {S[a-1]=i-1;}S.push(i);}else {S.push(i);}}if(C.not(a,"content")&&C.not(a,"singleton")&&C.not(a,"template")&&C.not(a,"attribute")){F=0;}}else {F=0;f();}a=a+1;}while(a<I);return S})();return (()=>{const S=[];const p=(()=>{const x=[l.indentChar];const y=l.indentSize-1;let A=0;if(A<y){do{x.push(l.indentChar);A=A+1;}while(A<y)}return x.join(w)})();function B(x){const y=[];const A=l.preserveLine+1;const _=Math.min(n.lines[a+1]-1,A);let N=0;if(x<0)x=0;do{y.push(t);N=N+1;}while(N<_);if(x>0){N=0;do{y.push(p);N=N+1;}while(N<x)}return y.join(w)}function U(){let x=n.token[a].split(t);const y=n.lines[a+1];if(C.is(a,"comment"))x=x.map(E=>E.trimStart());const A=P[a-1]>-1?C.is(a,"attribute")?P[a-1]+1:P[a-1]:(()=>{let E=a-1;let j=E>-1&&C.idx(E,"start")>-1;if(P[a]>-1&&C.is(a,"attribute")){return P[a]+1}do{E=E-1;if(P[E]>-1){return C.is(a,"content")&&j===false?P[E]:P[E]+1}if(C.idx(E,"start")>-1)j=true;}while(E>0);return E===-2?0:1})();let _=0;n.lines[a+1]=0;const N=x.length-1;do{if(C.is(a,"comment")){if(x[_]!==w){if(x[_+1].trimStart()!==w){S.push(x[_],B(A));}else {S.push(x[_],ne);}}else {if(x[_+1].trimStart()===w){S.push(ne);}else {S.push(B(A));}}}else {S.push(x[_]);S.push(B(A));}_=_+1;}while(_<N);n.lines[a+1]=y;S.push(x[N]);if(P[a]===-10){S.push(pe);}else if(P[a]>1){S.push(B(P[a]));}}function V(){const x=/\/?>$/;const y=n.token[a];const A=x.exec(y);if(A===null)return;let _=a+1;let N=false;let E=$.selfCloseSpace===true&&A!==null&&A[0]==="/>"?pe:w;n.token[a]=y.replace(x,w);do{if(C.is(_,"jsx_attribute_end")&&n.begin[n.begin[_]]===a){N=false;}else if(n.begin[_]===a){if(C.is(_,"jsx_attribute_start")){N=true;}else if(C.idx(_,"attribute")<0&&N===false){break}}else if(N===false&&(n.begin[_]<a||C.idx(_,"attribute")<0)){break}_=_+1;}while(_<I);if(C.is(_-1,"comment_attribute"))E=B(P[_-2]-1);n.token[_-1]=`${n.token[_-1]}${E}${A[0]}`;if(C.is(_,"comment")&&n.lines[a+1]<2)P[a]=-10;}a=Q.start;let f=l.indentLevel;let b=w;do{if(n.lexer[a]===h){if((C.is(a,"start")||C.is(a,"singleton")||C.is(a,"xml"))&&C.idx(a,"attribute")<0&&a<I-1&&n.types[a+1]!==void 0&&C.idx(a+1,"attribute")>-1){V();}if(k.not(a,void 0)&&n.token[a].indexOf(t)>0&&(C.is(a,"content")&&$.preserveText===false||C.is(a,"comment")||C.is(a,"attribute"))){U();}else {S.push(n.token[a]);if(P[a]===-10&&a<I-1){S.push(pe);}else if(P[a]>-1){f=P[a];S.push(B(P[a]));}}}else {Q.start=a;Q.end=c[a];l.indentLevel=f;b=Q.beautify[n.lexer[a]](l).replace(Ce,w);S.push(b);if(b.endsWith(ne)){if(f-1>0)S.push(Oe(f-1,p));}else {if($.forceIndent===true||P[Q.iterator]>-1&&c[a]>a){S.push(B(P[Q.iterator]));}}a=Q.iterator;l.indentLevel=0;}a=a+1;}while(a<I);Q.iterator=I-1;if(S[0]===t||d(S[0],32))S[0]=w;return S.join(w)})()};Q.beautify.style=l=>{const c=[];const h=Q.data;const n=l.crlf===true?"\r\n":"\n";const o=Q.end>0?Q.end+1:h.token.length;const t=l.preserveLine+1;const $=Oe(l.indentSize);const I=(()=>{let i=0;const P=[];do{P.push(l.indentChar);i=i+1;}while(i<l.indentSize);return P.join(w)})();let C=l.indentLevel;let k=l.style.forceValue==="wrap"&&l.wrap>0?l.wrap:0;let a=Q.start;let e=[w,w];function m(i){const P=[];const S=(()=>{if(a===o-1)return 1;if(h.lines[a+1]-1>t)return t;if(h.lines[a+1]>1)return h.lines[a+1]-1;return 1})();let p=0;if(i<0)i=0;do{P.push(n);p=p+1;k=C;}while(p<S);if(i>0){p=0;do{P.push(I);p=p+1;}while(p<i)}c.push(P.join(w));}function F(){const i=h.begin[a];const P=h.token[i];const S=h.token[a];const p=[];let B=a;let U=0;let V;let f=0;if(i<0||B<=i)return;do{B=B-1;if(h.begin[B]===i){if(d(h.token[B],58)){V=[B-1,0];do{B=B-1;if((d(h.token[B],59)&&P==="{"||d(h.token[B],44)&&P==="(")&&h.begin[B]===i||h.token[B]===S&&h.begin[h.begin[B]]===i){break}if(h.types[B]!=="comment"&&h.types[B]!=="selector"&&h.token[B]!==P&&h.begin[B]===i){V[1]=h.token[B].length+V[1];}}while(B>i+1);if(V[1]>f)f=V[1];p.push(V);}}else if(h.types[B]==="end"){if(B<h.begin[B])break;B=h.begin[B];}}while(B>i);B=p.length;if(B<2)return;do{B=B-1;if(p[B][1]<f){U=p[B][1];do{h.token[p[B][0]]=h.token[p[B][0]]+" ";U=U+1;}while(U<f)}}while(B>0)}if(l.script.vertical===true&&l.style.compressCSS===false){a=o;do{a=a-1;if(d(h.token[a],125)||d(h.token[a],41))F();}while(a>0);a=Q.start;}do{if(h.types[a]==="property")k=C+h.token[a].length;if(h.types[a+1]==="end"||h.types[a+1]==="template_end"||h.types[a+1]==="template_else"){C=C-1;}if(h.types[a]==="template"&&h.lines[a]===0){c.push(h.token[a]);if(h.types[a+1]==="template"&&h.lines[a+1]>0)m(C);}else if(h.types[a]==="template"&&h.lines[a]>0){if(h.types[a-2]!=="property"&&h.types[a-1]!=="colon"){k=C;c.push(h.token[a]);m(C);}else if(h.types[a-2]==="property"&&h.types[a-1]==="colon"&&h.types[a+1]==="separator"&&d(h.token[a+1],44)){k=k+h.token[a].length;if(k>l.wrap)m(C);c.push(h.token[a]);do{a=a+1;c.push(h.token[a]);if(h.lines[a+1]>0)m(C);}while(h.types[a]!=="separator"&&G(h.token[a],59));if(d(h.token[a],59)&&h.types[a]==="separator"){c.push(h.token[a]);if(h.lines[a+1]>0)m(C);a=a+1;continue}}else {k=k+h.token[a].length;if(k>l.wrap||l.style.forceValue==="collapse"){m(C);if(G(h.token[a][2],45)){c.push($,h.token[a].replace("{{","{{-"));}else {c.push($,h.token[a]);}}else {c.push(h.token[a]);}}}else if(h.types[a]==="template_else"){c.push(h.token[a]);C=C+1;m(C);}else if(h.types[a]==="start"||h.types[a]==="template_start"){C=C+1;c.push(h.token[a]);if(h.types[a+1]!=="end"&&h.types[a+1]!=="template_end"&&(l.style.compressCSS===false||l.style.compressCSS===true&&h.types[a+1]==="selector")){m(C);}}else if(d(h.token[a],59)&&(l.style.compressCSS===false||l.style.compressCSS===true&&h.types[a+1]==="selector")||(h.types[a]==="end"||h.types[a]==="template_end"||h.types[a]==="comment")){c.push(h.token[a]);if(h.types[a+1]==="value"){if(h.lines[a+1]===1){c.push(" ");}else if(h.lines[a+1]>1){m(C);}}else if(h.types[a+1]!=="separator"){if(h.types[a+1]!=="comment"||h.types[a+1]==="comment"&&h.lines[a+1]>1){m(C);}else {c.push(" ");}}}else if(d(h.token[a],58)){c.push(h.token[a]);if(l.style.compressCSS===false)c.push(" ");}else if(h.types[a]==="selector"){if(l.style.classPadding===true&&h.types[a-1]==="end"&&h.lines[a]<3){c.push(n);}if(h.token[a].indexOf("and(")>0){h.token[a]=h.token[a].replace(/and\(/,"and (");c.push(h.token[a]);}else if(h.token[a].indexOf("when(")>0){e=h.token[a].split("when(");c.push(e[0].replace(/\s+$/,w));m(C+1);c.push(`when (${e[1]}`);}else {c.push(h.token[a]);}if(h.types[a+1]==="start"){if(l.script.braceAllman===true){m(C);}else if(l.style.compressCSS===false){c.push(" ");}}}else if(d(h.token[a],44)){c.push(h.token[a]);if(h.types[a+1]==="selector"||h.types[a+1]==="property"){m(C);}else if(l.style.compressCSS===false){c.push(" ");}}else if(h.stack[a]==="map"&&d(h.token[a+1],41)&&a-h.begin[a]>5){c.push(h.token[a]);m(C);}else if(h.token[a]==="x;"){m(C);}else if((h.types[a]==="variable"||h.types[a]==="function")&&l.style.classPadding===true&&h.types[a-1]==="end"&&h.lines[a]<3){c.push(n);c.push(h.token[a]);}else if(G(h.token[a],59)||d(h.token[a],59)&&(l.style.compressCSS===false||l.style.compressCSS===true&&G(h.token[a+1],125))){c.push(h.token[a]);}a=a+1;}while(a<o);Q.iterator=o-1;return c.join(w)};Q.beautify.script=l=>{const c=new Set(["ActiveXObject","ArrayBuffer","AudioContext","Canvas","CustomAnimation","DOMParser","DataView","Date","Error","EvalError","FadeAnimation","FileReader","Flash","Float32Array","Float64Array","FormField","Frame","Generator","HotKey","Image","Iterator","Intl","Int16Array","Int32Array","Int8Array","InternalError","Loader","Map","MenuItem","MoveAnimation","Notification","ParallelArray","Point","Promise","Proxy","RangeError","Rectangle","ReferenceError","Reflect","RegExp","ResizeAnimation","RotateAnimation","Set","SQLite","ScrollBar","Set","Shadow","StopIteration","Symbol","SyntaxError","Text","TextArea","Timer","TypeError","URL","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","URIError","WeakMap","WeakSet","Web","Window","XMLHttpRequest"]);const o=Se(null);const t=Q.data;const $="script";const I=Q.scopes;const C=Q.end<1||Q.end>t.token.length?t.token.length:Q.end+1;const k=(()=>{let e=Q.start;let m=isNaN(l.indentLevel)?0:Number(l.indentLevel);let F=false;let i=false;let P="";let S="";let p=t.types[0];let B=t.token[0];const U=[-1];const V=[];const f=Q.start>0?Array(Q.start).fill(0,0,Q.start):[];const b=[];const x=[[]];const y=[];const A=[];const _=[];const N=[false];const E=[];const j=[];function ee(){z(false,false);const R=l.commentIndent===true?m:0;if(F===false&&/\/\u002a\s*global\s/.test(t.token[e])){const u=t.token[e].replace(/\/\u002a\s*global\s+/,"").replace(/\s*\u002a\/$/,"").split(",");let r=u.length;do{r=r-1;u[r]=u[r].replace(/\s+/g,"");if(u[r]!=="")I.push([u[r],-1]);}while(r>0)}if(t.types[e-1]==="comment"||t.types[e+1]==="comment"){f[e-1]=R;}else if(t.lines[e]<2){let u=e+1;if(t.types[u]==="comment"){do{u=u+1;}while(u<C&&t.types[u]==="comment")}if(e<C-1&&t.stack[u]!=="block"&&(t.token[u]==="{"||t.token[u]==="x{")){let r=I.length;t.begin.splice(e,0,t.begin[u]);t.ender.splice(e,0,t.ender[u]);t.lexer.splice(e,0,t.lexer[u]);t.lines.splice(e,0,t.lines[u]);t.stack.splice(e,0,t.stack[u]);t.token.splice(e,0,t.token[u]);t.types.splice(e,0,t.types[u]);if(r>0){do{r=r-1;if(I[r][1]===u){I[r][1]=e;}else if(I[r][1]<e){break}}while(r>0)}u=u+1;t.begin.splice(u,1);t.ender.splice(u,1);t.lexer.splice(u,1);t.lines.splice(u,1);t.stack.splice(u,1);t.token.splice(u,1);t.types.splice(u,1);r=e+1;do{t.begin[r]=e;t.stack[r]=t.stack[u];r=r+1;}while(r<u);r=r+1;do{if(t.begin[r]===t.begin[u]){t.begin[r]=e;if(t.types[r]==="end"){break}}r=r+1;}while(r<C-1);t.begin[u]=e;e=e-1;}else {f[e-1]=-10;if(t.stack[e]==="paren"||t.stack[e]==="method"){f.push(m+2);}else {f.push(m);}if(l.commentIndent===true&&f[e]>-1&&t.lines[e]<3){t.lines[e]=3;}}if(t.types[e+1]!=="comment")F=true;return}else if(t.token[e-1]===","){f[e-1]=R;}else if(B==="="&&t.types[e-1]!=="comment"&&/^(\/\*\*\s*@[a-z_]+\s)/.test(S)===true){f[e-1]=-10;}else if(B==="{"&&t.types[e-1]!=="comment"&&t.lines[0]<2){if(t.stack[e]==="function"){f[e-1]=R;}else {f[e-1]=/\n/.test(S)?R:-10;}}else {f[e-1]=R;}if(t.types[e+1]!=="comment")F=true;if(t.token[t.begin[e]]==="("){f.push(m+1);}else {f.push(m);}if(f[e]>-1&&t.lines[e]<3){if(t.types[e-1]==="comment"&&S.startsWith("//")){t.lines[e]=2;}else {t.lines[e]=3;}}if(l.script.commentNewline===true&&S.startsWith("//")===false&&t.lines[e]>=3){t.lines[e]=2;}}function z(R,u){let r=e-1;let g=R===true?0:1;const v=x[x.length-1]===void 0?[]:x[x.length-1];const L=u===false&&t.stack[e]==="array"&&R===true&&S!=="[";if(A[A.length-1]===false||t.stack[e]==="array"&&l.script.arrayFormat==="inline"||t.stack[e]==="object"&&l.script.objectIndent==="inline"){return}A[A.length-1]=false;do{if(t.types[r]==="end"){g=g+1;}else if(t.types[r]==="start"){g=g-1;}if(t.stack[r]==="global")break;if(g===0){if(t.stack[e]==="class"||t.stack[e]==="map"||L===false&&(R===false&&t.token[r]!=="("&&t.token[r]!=="x("||R===true&&t.token[r]===",")){if(t.types[r+1]==="template_start"){if(t.lines[r]<1){f[r]=-20;}else {f[r]=m-1;}}else if(v.length>0&&v[v.length-1]>-1){f[r]=m-1;}else {f[r]=m;}}else if(t.stack[e]==="array"&&t.types[e]==="operator"){if(t.token[r]===",")f[r]=m;if(r===t.begin[e])break}if(R===false)break}if(g<0){if(t.types[r+1]==="template_start"||t.types[r+1]==="template_string_start"){if(t.lines[r]<1){f[r]=-20;}else {f[r]=m-1;}}else if(v.length>0&&v[v.length-1]>-1){f[r]=m-1;}else {f[r]=m;}break}r=r-1;}while(r>-1)}function X(){const R=x[x.length-1]===void 0?[]:x[x.length-1];const u=()=>{let r=e;let g=false;const v=t.begin[r];do{r=r-1;if(t.lexer[r]==="markup"){g=true;break}if(t.begin[r]!==v)r=t.begin[r];}while(r>v);if(g===true){r=e;do{r=r-1;if(t.begin[r]!==v){r=t.begin[r];}else if(t.token[r]===","){f[r]=m+1;}}while(r>v);f[v]=m+1;f[e-1]=m;}else {f[e-1]=-20;}};if(S===")"&&t.token[e+1]==="."&&R[R.length-1]>-1&&t.token[R[0]]!==":"){let r=t.begin[e];let g=false;let v=false;do{r=r-1;}while(r>0&&f[r]<-9);g=f[r]===m;r=e+1;do{r=r+1;if(t.token[r]==="{"){v=true;break}if(t.begin[r]===t.begin[e+1]&&(t.types[r]==="separator"||t.types[r]==="end")){break}}while(r<C);if(g===false&&v===true&&x.length>1){x[x.length-2].push(t.begin[e]);m=m+1;}}if(p!=="separator")T();if(t.token[e+1]===","&&(t.stack[e]==="object"||t.stack[e]==="array")){z(true,false);}if(t.token[t.begin[e]-1]===","&&(t.token[e+1]==="}"||t.token[e+1]==="]")&&(t.stack[e]==="object"||t.stack[e]==="array")){z(true,false);}if(t.stack[e]!=="attribute"){if(S!==")"&&S!=="x)"&&(t.lexer[e-1]!=="markup"||t.lexer[e-1]==="markup"&&t.token[e-2]!=="return")){m=m-1;}if(S==="}"&&t.stack[e]==="switch"&&l.script.noCaseIndent===false){m=m-1;}}if(S==="}"||S==="x}"){if(t.types[e-1]!=="comment"&&B!=="{"&&B!=="x{"&&p!=="end"&&p!=="string"&&p!=="number"&&p!=="separator"&&B!=="++"&&B!=="--"&&(e<2||t.token[e-2]!==";"||t.token[e-2]!=="x;"||B==="break"||B==="return")){let r=e-1;let g=false;const v=t.begin[e];const L=V.length;do{if(t.begin[r]===v){if(t.token[r]==="="||t.token[r]===";"||t.token[r]==="x;"){g=true;}if(t.token[r]==="."&&f[r-1]>-1){A[A.length-1]=false;f[v]=m+1;f[e-1]=m;break}if(r>0&&t.token[r]==="return"&&(t.token[r-1]===")"||t.token[r-1]==="x)"||t.token[r-1]==="{"||t.token[r-1]==="x{"||t.token[r-1]==="}"||t.token[r-1]==="x}"||t.token[r-1]===";"||t.token[r-1]==="x;")){m=m-1;f[e-1]=m;break}if(t.token[r]===":"&&b.length===0||t.token[r]===","&&g===false){break}if(r===0||t.token[r-1]==="{"||t.token[r-1]==="x{"||t.token[r]==="for"||t.token[r]==="if"||t.token[r]==="do"||t.token[r]==="function"||t.token[r]==="while"||t.token[r]==="var"||t.token[r]==="let"||t.token[r]==="const"||t.token[r]==="with"){if(V[L-1]===false&&L>1&&(e===C-1||t.token[e+1]!==")"&&t.token[e+1]!=="x)")&&t.stack[e]!=="object"){m=m-1;}break}}else {r=t.begin[r];}r=r-1;}while(r>v)}U.pop();}if(l.script.bracePadding===false&&S!=="}"&&p!=="markup"){f[e-1]=-20;}if(l.script.bracePadding===true&&p!=="start"&&B!==";"&&(f[t.begin[e]]<-9||A[A.length-1]===true)){f[t.begin[e]]=-10;f[e-1]=-10;f.push(-20);}else if(t.stack[e]==="attribute"){f[e-1]=-20;f.push(m);}else if(t.stack[e]==="array"&&(R.length>0||y[y.length-1]===true)){Z();A[A.length-1]=false;f[t.begin[e]]=m+1;f[e-1]=m;f.push(-20);}else if((t.stack[e]==="object"||t.begin[e]===0&&S==="}")&&R.length>0){Z();A[A.length-1]=false;f[t.begin[e]]=m+1;f[e-1]=m;f.push(-20);}else if(S===")"||S==="x)"){const r=S===")"&&B!=="("&&j.length>0?j.pop()+1:0;const g=t.token[t.begin[e]-1]==="if"?(()=>{let v=e;do{v=v-1;if(t.token[v]===")"&&f[v-1]>-1)return r}while(v>t.begin[e]);return r+5})():r;if(r>0&&(l.language!=="jsx"||l.language==="jsx"&&t.token[t.begin[e]-1]!=="render")){const v=l.wrap;const L=t.begin[e];const M=j.length;let O=e-2;if(g>v){f[t.begin[e]]=m+1;f[e-1]=m;do{if(t.begin[O]===L){if(t.token[O]==="&&"||t.token[O]==="||"){f[O]=m+1;}else if(f[O]>-1&&t.types[O]!=="comment"&&t.token[O+1]!=="."){f[O]=f[O]+1;}}else if(f[O]>-1&&t.token[O+1]!=="."){f[O]=f[O]+1;}O=O-1;}while(O>L)}else if(M>0){j[M-1]=j[M-1]+r;}}else if(S===")"&&e>t.begin[e]+2&&t.lexer[t.begin[e]+1]===$&&t.token[t.begin[e]+1]!=="function"){const v=t.begin[e]<0?0:t.begin[e];const L=l.wrap;const M=R.length;let O=0;let W=0;let re=0;let D=0;let Y=0;let ie=false;let le=false;let J=m+1;let K=false;let ce=false;let ye=false;if(f[v]<-9){W=v;do{W=W+1;}while(W<e&&f[W]<-9);D=W;do{O=O+t.token[W].length;if(f[W]===-10)O=O+1;if(t.token[W]==="("&&re>0&&re<L-1&&D===e){re=-1;}if(t.token[W]===")"){Y=Y-1;}else if(t.token[W]==="("){Y=Y+1;}if(W===v&&Y>0)re=O;W=W-1;}while(W>v&&f[W]<-9);if(t.token[W+1]===".")J=f[W]+1;if(O>L-1&&L>0&&B!=="("&&re!==-1&&A[A.length-2]===false){if(t.token[v-1]==="if"&&V[V.length-1]===true||t.token[v-1]!=="if"){f[v]=J;if(t.token[v-1]==="for"){W=v;do{W=W+1;if(t.token[W]===";"&&t.begin[W]===v){f[W]=J;}}while(W<e)}}}}W=e;O=0;do{W=W-1;if(t.stack[W]==="function"){W=t.begin[W];}else if(t.begin[W]===v){if(t.token[W]==="?"){ye=true;}else if(t.token[W]===","&&ie===false){ie=true;if(O>=L&&L>0)K=true;}else if(t.types[W]==="markup"&&ce===false){ce=true;}if(f[W]>-9&&t.token[W]!==","&&t.types[W]!=="markup"){O=0;}else {if(f[W]===-10)O=O+1;O=O+t.token[W].length;if(O>=L&&L>0&&(ie===true||ce===true)){K=true;}}}else {if(f[W]>-9){O=0;}else {O=O+t.token[W].length;if(O>=L&&L>0&&(ie===true||ce===true)){K=true;}}}}while(W>v&&K===false);if(ie===false&&t.token[t.begin[e]+1].charAt(0)==="`"){f[t.begin[e]]=-20;f[e-1]=-20;}else if((ie===true||ce===true)&&O>=L&&L>0||f[v]>-9){if(ye===true){J=f[v];if(t.token[v-1]==="["){W=e;do{W=W+1;if(t.types[W]==="end"||t.token[W]===","||t.token[W]===";"){break}}while(W<C);if(t.token[W]==="]"){J=J-1;le=true;}}}else if(M>0&&R[M-1]>W){J=J-M;}A[A.length-1]=false;W=e;do{W=W-1;if(t.begin[W]===v){if(t.token[W].indexOf("=")>-1&&t.types[W]==="operator"&&t.token[W].indexOf("!")<0&&t.token[W].indexOf("==")<0&&t.token[W]!=="<="&&t.token[W].indexOf(">")<0){O=W;do{O=O-1;if(t.begin[O]===v&&(t.token[O]===";"||t.token[O]===","||O===v)){break}}while(O>v)}else if(t.token[W]===","){f[W]=J;}else if(f[W]>-9&&le===false&&(t.token[v-1]!=="for"||t.token[W+1]==="?"||t.token[W+1]===":")&&(t.token[t.begin[e]]!=="("||t.token[W]!=="+")){f[W]=f[W]+1;}}else if(f[W]>-9&&le===false){f[W]=f[W]+1;}}while(W>v);f[v]=J;f[e-1]=J-1;}else {f[e-1]=-20;}if(t.token[t.begin[e]-1]==="+"&&f[t.begin[e]]>-9){f[t.begin[e]-1]=-10;}}else if(l.language==="jsx"){u();}else {f[e-1]=-20;}f.push(-20);}else if(A[A.length-1]===true){if(S==="]"&&t.begin[e]-1>0&&t.token[t.begin[t.begin[e]-1]]==="["){A[A.length-2]=false;}if(t.begin[e]<f.length)f[t.begin[e]]=-20;if(l.language==="jsx"){u();}else if(S==="]"&&f[t.begin[e]]>-1){f[e-1]=f[t.begin[e]]-1;}else {f[e-1]=-20;}f.push(-20);}else if(t.types[e-1]==="comment"&&t.token[e-1].substring(0,2)==="//"){if(t.token[e-2]==="x}")f[e-3]=m+1;f[e-1]=m;f.push(-20);}else if(t.types[e-1]!=="comment"&&(B==="{"&&S==="}"||B==="["&&S==="]")){f[e-1]=-20;f.push(-20);}else if(S==="]"){if(V[V.length-1]===true&&A[A.length-1]===false&&l.script.arrayFormat!=="inline"||B==="]"&&f[e-2]===m+1){f[e-1]=m;f[t.begin[e]]=m+1;}else if(f[e-1]===-10){f[e-1]=-20;}if(t.token[t.begin[e]+1]==="function"){f[e-1]=m;}else if(V[V.length-1]===false){if(B==="}"||B==="x}")f[e-1]=m;let r=e-1;let g=1;do{if(t.token[r]==="]")g=g+1;if(t.token[r]==="["){g=g-1;if(g===0){if(r>0&&(t.token[r+1]==="{"||t.token[r+1]==="x{"||t.token[r+1]==="[")){f[r]=m+1;break}if(t.token[r+1]!=="["||i===false){f[r]=-20;break}break}}if(g===1&&t.token[r]==="+"&&f[r]>1){f[r]=f[r]-1;}r=r-1;}while(r>-1)}else if(l.language==="jsx"){u();}if(l.script.arrayFormat==="inline"){let r=e;const g=t.begin[e];do{r=r-1;if(t.types[r]==="end")break}while(r>g);if(r>g){f[t.begin[e]]=m+1;f[e-1]=m;}else {f[t.begin[e]]=-20;f[e-1]=-20;}}else if(f[t.begin[e]]>-1){f[e-1]=f[t.begin[e]]-1;}f.push(-20);}else if(S==="}"||S==="x}"||V[V.length-1]===true){if(S==="}"&&B==="x}"&&t.token[e+1]==="else"){f[e-2]=m+2;f.push(-20);}else {f.push(m);}f[e-1]=m;}else {f.push(-20);}if(t.types[e-1]==="comment")f[e-1]=m;if(l.script.inlineReturn&&l.script.correct===false&&S==="x}"&&(t.stack[e]==="if"||t.stack[e]==="else")&&t.token[t.begin[t.begin[e-1]-1]-2]!=="else"){f[e-1]=-20;}Z();i=V[V.length-1];V.pop();x.pop();y.pop();_.pop();E.pop();A.pop();N.pop();}function Z(){let R=0;const u=x[x.length-1];if(u===void 0)return;R=u.length-1;if(R<1&&u[R]<0&&(S===";"||S==="x;"||S===")"||S==="x)"||S==="}"||S==="x}")){u.pop();return}if(R<0||u[R]<0)return;if(S===":"){if(t.token[u[R]]!=="?"){do{u.pop();R=R-1;m=m-1;}while(R>-1&&u[R]>-1&&t.token[u[R]]!=="?")}u[R]=e;f[e-1]=m;}else {do{u.pop();R=R-1;m=m-1;}while(R>-1&&u[R]>-1)}if((t.stack[e]==="array"||S===",")&&u.length<1)u.push(-1);}function te(){const R=e;do{if(t.lexer[e+1]===$&&t.begin[e+1]<R)break;if(t.token[R-1]==="return"&&t.types[e]==="end"&&t.begin[e]===R)break;f.push(0);e=e+1;}while(e<C);o[R]=e;f.push(m-1);}function T(){let R=e-1;const u=t.begin[e];if(m<1)return;do{if(u!==t.begin[R]){R=t.begin[R];}else {if(t.types[R]==="separator"||t.types[R]==="operator"){if(t.token[R]==="."&&f[R-1]>0){if(t.token[u-1]==="if"){m=m-2;}else {m=m-1;}}break}}R=R-1;}while(R>0&&R>u)}function se(){if(t.token[e+1]!==","&&S.indexOf("/>")!==S.length-2||t.token[e+1]===","&&t.token[t.begin[e]-3]!=="React"){z(false,false);}if(B==="return"||B==="?"||B===":"){f[e-1]=-10;f.push(-20);}else if(p==="start"||t.token[e-2]==="return"&&t.stack[e-1]==="method"){f.push(m);}else {f.push(-20);}}function me(){const R=x[x.length-1]===void 0?[]:x[x.length-1];function u(){const r=t.token[e+1];let g=0;let v=0;let L=e;let M=S==="+"?m+2:m;let O=0;if(l.wrap<1){f.push(-10);return}do{L=L-1;if(t.token[t.begin[e]]==="("){if(L===t.begin[e]){O=g;}if(t.token[L]===","&&t.begin[L]===t.begin[e]&&V[V.length-1]===true){break}}if(g>l.wrap-1)break;if(f[L]>-9)break;if(t.types[L]==="operator"&&t.token[L]!=="="&&t.token[L]!=="+"&&t.begin[L]===t.begin[e]){break}g=g+t.token[L].length;if(L===t.begin[e]&&t.token[L]==="["&&g<l.wrap-1){break}if(t.token[L]==="."&&f[L]>-9)break;if(f[L]===-10)g=g+1;}while(L>0);if(O>0)O=O+r.length;g=g+r.length;v=L;if(g>l.wrap-1&&f[L]<-9){do{v=v-1;}while(v>0&&f[v]<-9)}if(t.token[v+1]==="."&&t.begin[e]<=t.begin[v]){M=M+1;}else if(t.types[v]==="operator"){M=f[v];}v=r.length;if(g+v<l.wrap){f.push(-10);return}if(t.token[t.begin[e]]==="("&&(t.token[R[0]]===":"||t.token[R[0]]==="?")){M=m+3;}else if(t.stack[e]==="method"){f[t.begin[e]]=m;if(V[V.length-1]===true){M=m+3;}else {M=m+1;}}else if(t.stack[e]==="object"||t.stack[e]==="array"){z(true,false);}if(t.token[L]==="var"||t.token[L]==="let"||t.token[L]==="const"){g=g-l.indentSize*l.indentChar.length*2;}if(O>0){L=l.wrap-O;}else {L=l.wrap-g;}if(L>0&&L<5){f.push(M);if(t.token[e].charAt(0)==='"'||t.token[e].charAt(0)==="'"){e=e+1;f.push(-10);}return}if(t.token[t.begin[e]]!=="("||O>l.wrap-1||O===0){if(O>0)g=O;if(g-r.length<l.wrap-1&&(r.charAt(0)==='"'||r.charAt(0)==="'")){e=e+1;g=g+3;if(g-r.length>l.wrap-4){f.push(M);return}f.push(-10);return}f.push(M);return}f.push(-10);}T();if(R.length>0&&R[R.length-1]>-1&&t.stack[e]==="array"){y[y.length-1]=true;}if(S!==":"){if(t.token[t.begin[e]]!=="("&&t.token[t.begin[e]]!=="x("&&A.length>0){z(true,false);}if(S!=="?"&&t.token[R[R.length-1]]==="."){let r=0;let g=e;const v=t.begin[g];do{if(t.begin[g]===v){if(t.token[g+1]==="{"||t.token[g+1]==="["||t.token[g]==="function"){break}if(t.token[g]===","||t.token[g]===";"||t.types[g]==="end"||t.token[g]===":"){R.pop();m=m-1;break}if(t.token[g]==="?"||t.token[g]===":"){if(t.token[R[R.length-1]]==="."&&r<2)R[R.length-1]=v+1;break}if(t.token[g]===".")r=r+1;}g=g+1;}while(g<C)}}if(S==="!"||S==="..."){if(B==="}"||B==="x}")f[e-1]=m;f.push(-20);return}if(B===";"||B==="x;"){if(t.token[t.begin[e]-1]!=="for")f[e-1]=m;f.push(-20);return}if(S==="*"){if(B==="function"||B==="yield"){f[e-1]=-20;}else {f[e-1]=-10;}f.push(-10);return}if(S==="?"){if(t.lines[e]===0&&t.types[e-2]==="word"&&t.token[e-2]!=="return"&&t.token[e-2]!=="in"&&t.token[e-2]!=="instanceof"&&t.token[e-2]!=="typeof"&&(p==="reference"||p==="word")){if(t.types[e+1]==="word"||t.types[e+1]==="reference"||(t.token[e+1]==="("||t.token[e+1]==="x(")&&t.token[e-2]==="new"){f[e-1]=-20;if(t.types[e+1]==="word"||t.types[e+1]==="reference"){f.push(-10);return}f.push(-20);return}}if(t.token[e+1]===":"){f[e-1]=-20;f.push(-20);return}b.push(e);if(l.script.ternaryLine===true){f[e-1]=-10;}else {let r=e-1;do{r=r-1;}while(r>-1&&f[r]<-9);R.push(e);m=m+1;if(f[r]===m&&t.token[r+1]!==":"){m=m+1;R.push(e);}f[e-1]=m;if(t.token[t.begin[e]]==="("&&(R.length<2||R[0]===R[1])){A[A.length-1]=false;if(e-2===t.begin[e]){f[t.begin[e]]=m-1;}else {f[t.begin[e]]=m;}r=e-2;do{if(t.types[r]==="end"&&f[r-1]>-1)break;if(f[r]>-1)f[r]=f[r]+1;r=r-1;}while(r>t.begin[e])}}f.push(-10);return}if(S===":"){if(t.stack[e]==="map"||t.types[e+1]==="type"||t.types[e+1]==="type_start"){f[e-1]=-20;f.push(-10);return}if(b.length>0&&t.begin[b[b.length-1]]===t.begin[e]){let r=e;const g=t.begin[e];do{r=r-1;if(t.begin[r]===g){if(t.token[r]===","||t.token[r]===";"){f[e-1]=-20;break}if(t.token[r]==="?"){b.pop();Z();if(l.script.ternaryLine===true)f[e-1]=-10;f.push(-10);return}}else if(t.types[r]==="end"){r=t.begin[r];}}while(r>g)}if(t.token[e-2]==="where"&&t.stack[e-2]===t.stack[e]){f[e-1]=-10;f.push(-10);return}if(p==="reference"&&t.token[t.begin[e]]!=="("&&t.token[t.begin[e]]!=="x("){f[e-1]=-20;f.push(-10);return}if((B===")"||B==="x)")&&t.token[t.begin[e-1]-2]==="function"){f[e-1]=-20;f.push(-10);return}if(t.stack[e]==="attribute"){f[e-1]=-20;f.push(-10);return}if(t.token[t.begin[e]]!=="("&&t.token[t.begin[e]]!=="x("&&(p==="reference"||B===")"||B==="]"||B==="?")&&(t.stack[e]==="map"||t.stack[e]==="class"||t.types[e+1]==="reference")&&(b.length===0||b[b.length-1]<t.begin[e])&&("mapclassexpressionmethodglobalparen".indexOf(t.stack[e])>-1||t.types[e-2]==="word"&&t.stack[e]!=="switch")){f[e-1]=-20;f.push(-10);return}if(t.stack[e]==="switch"&&(b.length<1||b[b.length-1]<t.begin[e])){f[e-1]=-20;if(l.script.caseSpace===true){f.push(-10);}else {f.push(m);}return}if(t.stack[e]==="object"){f[e-1]=-20;}else if(b.length>0){f[e-1]=m;}else {f[e-1]=-10;}f.push(-10);return}if(S==="++"||S==="--"){if(p==="number"||p==="reference"){f[e-1]=-20;f.push(-10);}else if(e<C-1&&(t.types[e+1]==="number"||t.types[e+1]==="reference")){f.push(-20);}else {f.push(-10);}return}if(S==="+"){if(p==="start"){f[e-1]=-20;}else {f[e-1]=-10;}if(l.wrap<1||t.token[t.begin[e]]==="x("){f.push(-10);return}const r=t.token[e+1];if(r===void 0){f.push(-10);return}if(t.types[e-1]==="operator"||t.types[e-1]==="start"){if(t.types[e+1]==="reference"||r==="("||r==="["){f.push(-20);return}if(Number(r.slice(1,-1))>-1&&(/\d/.test(r.charAt(1))===true||r.charAt(1)==="."||r.charAt(1)==="-"||r.charAt(1)==="+")){f.push(-20);return}}return u()}if(t.types[e-1]!=="comment"){if(B==="("){f[e-1]=-20;}else if(S==="*"&&t.stack[e]==="object"&&t.types[e+1]==="reference"&&(B==="{"||B===",")){f[e-1]=m;}else if(S!=="?"||b.length===0){f[e-1]=-10;}}if(S.indexOf("=")>-1&&S!=="=="&&S!=="==="&&S!=="!="&&S!=="!=="&&S!==">="&&S!=="<="&&S!=="=>"&&t.stack[e]!=="method"&&t.stack[e]!=="object"){let r=e+1;let g=0;let v=false;let L="";if((t.token[t.begin[e]]==="("||t.token[t.begin[e]]==="x(")&&t.token[e+1]!=="function"){return}do{if(t.types[r]==="start"){if(v===true&&t.token[r]!=="["){if(N[N.length-1]===true){N[N.length-1]=false;}break}g=g+1;}if(t.types[r]==="end")g=g-1;if(g<0){if(N[N.length-1]===true){N[N.length-1]=false;}break}if(g===0){L=t.token[r];if(v===true){if(t.types[r]==="operator"||t.token[r]===";"||t.token[r]==="x;"||t.token[r]==="?"||t.token[r]==="var"||t.token[r]==="let"||t.token[r]==="const"){if(L!==void 0&&(L==="?"||L.indexOf("=")>-1&&L!=="=="&&L!=="==="&&L!=="!="&&L!=="!=="&&L!==">="&&L!=="<=")){if(N[N.length-1]===false){N[N.length-1]=true;}}if((L===";"||L==="x;"||L==="var"||L==="let"||L==="const")&&N[N.length-1]===true){N[N.length-1]=false;}break}if(N[N.length-1]===true&&(L==="return"||L==="break"||L==="continue"||L==="throw")){N[N.length-1]=false;}}if(L===";"||L==="x;"||L===",")v=true;}r=r+1;}while(r<C);f.push(-10);return}if(S==="-"&&B==="return"||B==="="){f.push(-20);return}if(p==="operator"&&t.types[e+1]==="reference"&&B!=="--"&&B!=="++"&&S!=="&&"&&S!=="||"){f.push(-20);return}return u()}function q(){const R=()=>{let u=t.begin[e];if(u<0){I.push([t.token[e],-1]);}else {if(t.stack[u+1]!=="function"){do{u=t.begin[u];}while(u>-1&&t.stack[u+1]!=="function")}I.push([t.token[e],u]);}};if(t.types[e-1]==="comment"){f[e-1]=m;}else if(p==="end"&&B!==")"&&t.token[t.begin[e-1]-1]!==")"){f[e-1]=-10;}else if(p!=="separator"&&p!=="start"&&p!=="end"&&p.indexOf("template_string")<0){if(p==="word"||p==="operator"||p==="property"||p==="type"||p==="reference"){f[e-1]=-10;}else {f[e-1]=-20;}}if(B==="var"&&t.lexer[e-1]===$){R();}else if(B==="function"){I.push([t.token[e],e]);}else if(B==="let"||B==="const"){I.push([t.token[e],e]);}else if(t.stack[e]==="arguments"){I.push([t.token[e],e]);}else if(B===","){let u=e;do{u=u-1;}while(u>t.begin[e]&&t.token[u]!=="var"&&t.token[u]!=="let"&&t.token[u]!=="const");if(t.token[u]==="var"){R();}else if(t.token[u]==="let"||t.token[u]==="const"){I.push([t.token[e],e]);}}f.push(-10);}function H(){const R=x[x.length-1]===void 0?[]:x[x.length-1];const u=()=>{if(l.script.methodChain>0){let r=e;let g=t.begin[e];const v=[e];const L=t.token[g-1]==="if";do{r=r-1;if(t.types[r]==="end")r=t.begin[r];if(t.begin[r]===g){if(t.types[r]==="string"&&t.token[r].indexOf("${")===t.token[r].length-2){break}if(t.token[r]==="."){if(f[r-1]>0){f[e-1]=L===true?m+1:m;return}v.push(r);}else if(t.token[r]===";"||t.token[r]===","||t.types[r]==="operator"||(t.types[r]==="word"||t.types[r]==="reference")&&(t.types[r-1]==="word"||t.types[r-1]==="reference")){break}}}while(r>g);if(v.length<l.script.methodChain){f[e-1]=-20;return}r=0;g=v.length;do{f[v[r]-1]=L===true?m+1:m;r=r+1;}while(r<g);r=v[v.length-1]-1;do{if(f[r]>-1)f[r]=f[r]+1;r=r+1;}while(r<e);m=L===true?m+2:m+1;}f[e-1]=m;};if(S==="::"){f[e-1]=-20;f.push(-20);return}if(S==="."){if(t.token[t.begin[e]]!=="("&&t.token[t.begin[e]]!=="x("&&R.length>0){if(t.stack[e]==="object"||t.stack[e]==="array"){z(true,false);}else {z(false,false);}}if(l.script.methodChain===0){f[e-1]=-20;}else if(l.script.methodChain<0){if(t.lines[e]>0){u();}else {f[e-1]=-20;}}else {u();}f.push(-20);return}if(S===","){T();if(V[V.length-1]===false&&(t.stack[e]==="object"||t.stack[e]==="array"||t.stack[e]==="paren"||t.stack[e]==="expression"||t.stack[e]==="method")){V[V.length-1]=true;if(t.token[t.begin[e]]==="("){let r=e;do{r=r-1;if(t.begin[r]===t.begin[e]&&t.token[r]==="+"&&f[r]>-9){f[r]=f[r]+2;}}while(r>t.begin[e])}}if(t.stack[e]==="array"&&l.script.arrayFormat==="indent"){f[e-1]=-20;f.push(m);return}if(t.stack[e]==="array"&&l.script.arrayFormat==="inline"){f[e-1]=-20;f.push(-10);return}if(t.stack[e]==="object"&&l.script.objectIndent==="indent"){f[e-1]=-20;f.push(m);return}if(t.stack[e]==="object"&&l.script.objectIndent==="inline"){f[e-1]=-20;f.push(-10);return}if(R.length>0){if(R[R.length-1]>-1)Z();f[e-1]=-20;f.push(m);return}if(t.token[e-2]===":"&&t.token[e-4]==="where"){f[e-1]=-20;f.push(-10);return}f[e-1]=-20;if(t.types[e+1]!=="end"){_[_.length-1]=_[_.length-1]+1;}if((t.token[t.begin[e]]==="("||t.token[t.begin[e]]==="x(")&&l.language!=="jsx"&&t.stack[e]!=="global"&&(t.types[e-1]!=="string"&&t.types[e-1]!=="number"||t.token[e-2]!=="+"||t.types[e-1]==="string"&&t.types[e-1]!=="number"&&t.token[e-2]==="+"&&t.types[e-3]!=="string"&&t.types[e-3]!=="number")){f.push(-10);return}if(p==="reference"&&t.types[e-2]==="word"&&"var-let-const-from".indexOf(t.token[e-2])<0&&(t.types[e-3]==="end"||t.token[e-3]===";")){E[E.length-1]=true;f.push(-10);return}if(E[E.length-1]===true||t.stack[e]==="notation"){f.push(-10);return}if(_[_.length-1]>3&&(t.stack[e]==="array"||t.stack[e]==="object")){if(A[A.length-1]===true)z(true,true);f[e-1]=-20;if(y[y.length-1]===true){f.push(m);return}const r=t.begin[e];let g=e;do{if(t.types[g]==="end"){g=t.begin[g];}else {if(t.token[g]===","&&t.types[g+1]!=="comment"){f[g]=m;}}g=g-1;}while(g>r);f[r]=m;y[y.length-1]=true;return}if(t.stack[e]==="object"){if(A[A.length-1]===true&&t.types[t.begin[e]-1]!=="word"&&t.types[t.begin[e]-1]!=="reference"&&t.token[t.begin[e]-1]!=="("&&t.token[t.begin[e]-1]!=="x("){const r=t.begin[e];let g=e-1;do{if(t.begin[g]===r){if(t.token[g]===",")break;if(t.token[g]===":"){z(true,false);break}}g=g-1;}while(g>r)}}if(A[A.length-1]===false||t.token[e-2]==="+"&&(p==="string"||p==="number")&&f[e-2]>0&&(B.charAt(0)==='"'||B.charAt(0)==="'")){if(t.stack[e]==="method"){if(t.token[e-2]==="+"&&(B.charAt(0)==='"'||B.charAt(0)==="'")&&(t.token[e-3].charAt(0)==='"'||t.token[e-3].charAt(0)==="'")){f.push(m+2);return}if(t.token[e-2]!=="+"){f.push(-10);return}}f.push(m);return}if(A[A.length-1]===true&&t.stack[e]!=="object"){f.push(-10);return}if(_[_.length-1]<4&&(t.stack[e]==="array"||t.stack[e]==="object")){f.push(-10);return}f.push(m);return}if(S===";"||S==="x;"){T();if(t.token[e+1]!==void 0&&t.types[e+1].indexOf("attribute")>0&&t.types[e+1].indexOf("end")>0){f[e-1]=-20;f.push(m-1);return}if(U[U.length-1]>-1&&t.stack[U[U.length-1]]!=="expression"){let r=e;do{r=r-1;if(t.token[r]===";")break;if(t.token[r]===","){m=m-1;break}if(t.types[r]==="end")r=t.begin[r];}while(r>0&&r>t.begin[e])}U[U.length-1]=-1;Z();if(t.token[t.begin[e]-1]!=="for")z(false,false);E[E.length-1]=false;f[e-1]=-20;if(t.begin[e]>0&&t.token[t.begin[e]-1]==="for"&&t.stack[e]!=="for"){f.push(-10);return}f.push(m);return}f.push(-20);}function be(){const R=t.stack[e+1];const u=e===0?t.stack[e]:t.stack[e-1];if(B===")"||(u==="object"||u==="array")&&B!=="]"){if(R!=="method"||R==="method"&&t.token[e+1]!==")"&&t.token[e+2]!==")"){if(B===")"&&(R!=="function"||t.token[t.begin[t.begin[e-1]-1]]==="("||t.token[t.begin[t.begin[e-1]-1]]==="x(")){z(false,false);}else if(t.types[e+1]!=="end"&&t.types[e+2]!=="end"){z(true,false);}}}V.push(false);x.push([]);N.push(false);y.push(false);E.push(false);_.push(0);if(l.script.neverFlatten===true||R==="array"&&l.script.arrayFormat==="indent"||R==="attribute"||p==="generic"||R==="class"&&B!=="("&&B!=="x("||S==="["&&t.token[e+1]==="function"){A.push(false);}else {if(R==="expression"||R==="method"){A.push(true);}else if((R==="object"||R==="class")&&(B==="("||B==="x("||p==="word"||p==="reference")){A.push(true);}else if(R==="array"||S==="("||S==="x("){A.push(true);}else if(S==="{"&&R==="object"&&p!=="operator"&&p!=="start"&&p!=="string"&&p!=="number"&&u!=="object"&&u!=="array"&&e>0){A.push(true);}else {A.push(false);}}if(S!=="("&&S!=="x("&&t.stack[e+1]!=="attribute"){m=m+1;}if(S==="{"||S==="x{"){U.push(-1);if(t.types[e-1]!=="comment"){if(p==="markup"){f[e-1]=m;}else if(l.script.braceAllman===true&&p!=="operator"&&B!=="return"){f[e-1]=m-1;}else if(t.stack[e+1]!=="block"&&(R==="function"||B===")"||B==="x)"||B===","||B==="}"||p==="markup")){f[e-1]=-10;}else if(B==="{"||B==="x{"||B==="["||B==="}"||B==="x}"){f[e-1]=m-1;}}if(R==="object"){if(l.script.objectIndent==="indent"){A[A.length-1]=false;f.push(m);return}if(l.script.objectIndent==="inline"){A[A.length-1]=true;f.push(-20);return}}if(R==="switch"){if(l.script.noCaseIndent===true){f.push(m-1);return}m=m+1;f.push(m);return}if(A[A.length-1]===true){if(p!=="word"&&p!=="reference"){f.push(-20);return}}f.push(m);return}if(S==="("||S==="x("){if(l.wrap>0&&S==="("&&t.token[e+1]!==")"){j.push(1);}if(B==="-"&&(t.token[e-2]==="("||t.token[e-2]==="x(")){f[e-2]=-20;}if(p==="end"&&u!=="if"&&u!=="for"&&u!=="catch"&&u!=="else"&&u!=="do"&&u!=="try"&&u!=="finally"&&u!=="catch"){if(t.types[e-1]==="comment"){f[e-1]=m;}else {f[e-1]=-20;}}if(B==="async"){f[e-1]=-10;}else if(R==="method"||t.token[e-2]==="function"&&p==="reference"){if(B==="import"||B==="in"||l.script.functionNameSpace===true){f[e-1]=-10;}else if(B==="}"&&t.stack[e-1]==="function"||p==="word"||p==="reference"||p==="property"){f[e-1]=-20;}else if(u!=="method"&&R!=="method"){f[e-1]=m;}}if(B==="+"&&(t.token[e-2].charAt(0)==='"'||t.token[e-2].charAt(0)==="'")){f.push(m);return}if(B==="}"||B==="x}"){f.push(-20);return}if(B==="-"&&(e<2||t.token[e-2]!==")"&&t.token[e-2]!=="x)"&&t.token[e-2]!=="]"&&t.types[e-2]!=="reference"&&t.types[e-2]!=="string"&&t.types[e-2]!=="number")||l.script.functionSpace===false&&B==="function"){f[e-1]=-20;}f.push(-20);return}if(S==="["){if(B==="[")V[V.length-2]=true;if(B==="return"||B==="var"||B==="let"||B==="const"){f[e-1]=-10;}else if(t.types[e-1]!=="comment"&&t.stack[e-1]!=="attribute"&&(p==="end"||p==="word"||p==="reference")){f[e-1]=-20;}else if(B==="["||B==="{"||B==="x{"){f[e-1]=m-1;}if(t.stack[e]==="attribute"){f.push(-20);return}if(l.script.arrayFormat==="indent"){A[A.length-1]=false;f.push(m);return}if(l.script.arrayFormat==="inline"){A[A.length-1]=true;f.push(-20);return}if(R==="method"||A[A.length-1]===true){f.push(-20);return}let r=e+1;do{if(t.token[r]==="]"){f.push(-20);return}if(t.token[r]===","){f.push(m);return}r=r+1;}while(r<C);f.push(-20);}}function we(){if(S.length===1){f.push(-20);if(t.lines[e]===0)f[e-1]=-20;}else if(S.indexOf("#!/")===0){f.push(m);}else {f.push(-10);}if((B===","||p==="start")&&(t.stack[e]==="object"||t.stack[e]==="array")&&A[A.length-1]===false&&e>0){f[e-1]=m;}}function de(){if(P==="template_else"){f[e-1]=m-1;f.push(m);}else if(P==="template_start"){m=m+1;if(t.lines[e-1]<1)f[e-1]=-20;if(t.lines[e]>0||B.length===1&&p==="string"){f.push(m);}else {f.push(-20);}}else if(P==="template_end"){m=m-1;if(p==="template_start"||t.lines[e-1]<1){f[e-1]=-20;}else {f[e-1]=m;}if(t.lines[e]>0){f.push(m);}else {f.push(-20);}}else if(P==="template"){if(t.lines[e]>0){f.push(m);}else {f.push(-20);}}}function Le(){if(P==="template_string_start"){m=m+1;f.push(m);}else if(P==="template_string_else"){T();f[e-1]=m-1;f.push(m);}else {T();m=m-1;f[e-1]=m;f.push(-10);}if(e>2&&(t.types[e-2]==="template_string_else"||t.types[e-2]==="template_string_start")){if(l.script.bracePadding===true){f[e-2]=-10;f[e-1]=-10;}else {f[e-2]=-20;f[e-1]=-20;}}}function _e(){if(t.token[e-1]===","||t.token[e-1]===":"&&t.stack[e-1]!=="data_type"){f[e-1]=-10;}else {f[e-1]=-20;}if(t.types[e]==="type"||t.types[e]==="type_end"){f.push(-10);}if(t.types[e]==="type_start"){f.push(-20);}}function Be(){if((B===")"||B==="x)")&&t.stack[e]==="class"&&(t.token[t.begin[e-1]-1]==="static"||t.token[t.begin[e-1]-1]==="final"||t.token[t.begin[e-1]-1]==="void")){f[e-1]=-10;f[t.begin[e-1]-1]=-10;}if(B==="]")f[e-1]=-10;if(S==="else"&&B==="}"){if(t.token[e-2]==="x}")f[e-3]=f[e-3]-1;if(l.script.braceAllman===true||l.script.elseNewline===true){f[e-1]=m;}}if(S==="new"&&c.has(t.token[e+1]));if(S==="from"&&p==="end"&&e>0&&(t.token[t.begin[e-1]-1]==="import"||t.token[t.begin[e-1]-1]===",")){f[e-1]=-10;}if(S==="function"){if(l.script.functionSpace===false&&e<C-1&&(t.token[e+1]==="("||t.token[e+1]==="x(")){f.push(-20);return}f.push(-10);return}if(B==="-"&&e>1){if(t.types[e-2]==="operator"||t.token[e-2]===","){f[e-1]=-20;}else if(t.types[e-2]==="start"){f[e-2]=-20;f[e-1]=-20;}}else if(S==="while"&&(B==="}"||B==="x}")){let R=e-1;let u=0;do{if(t.token[R]==="}"||t.token[R]==="x}")u=u+1;if(t.token[R]==="{"||t.token[R]==="x{")u=u-1;if(u===0){if(t.token[R-1]==="do"){f[e-1]=-10;break}f[e-1]=m;break}R=R-1;}while(R>-1)}else if(S==="in"||(S==="else"&&l.script.elseNewline===false&&l.script.braceAllman===false||S==="catch")&&(B==="}"||B==="x}")){f[e-1]=-10;}else if(S==="var"||S==="let"||S==="const"){U[U.length-1]=e;if(p==="end")f[e-1]=m;if(t.token[t.begin[e]-1]!=="for"){let R=e+1;let u=0;do{if(t.types[R]==="end")u=u-1;if(t.types[R]==="start")u=u+1;if(u<0||u===0&&(t.token[R]===";"||t.token[R]===",")){break}R=R+1;}while(R<C);if(t.token[R]===",")m=m+1;}f.push(-10);return}if((S==="default"||S==="case")&&p!=="word"&&t.stack[e]==="switch"){f[e-1]=m-1;f.push(-10);return}if(S==="catch"&&B==="."){f[e-1]=-20;f.push(-20);return}if(S==="catch"||S==="finally"){f[e-1]=-10;f.push(-10);return}if(l.script.bracePadding===false&&e<C-1&&t.token[e+1].charAt(0)==="}"){f.push(-20);return}if(t.stack[e]==="object"&&(B==="{"||B===",")&&(t.token[e+1]==="("||t.token[e+1]==="x(")){f.push(-20);return}if(t.types[e-1]==="comment"&&t.token[t.begin[e]]==="("){f[e-1]=m+1;}if(l.script.inlineReturn){if(t.stack[e]==="if"&&S==="return"&&(B==="x{"||B==="{")){const R=t.begin.lastIndexOf(t.begin[e-1],e-3);if(t.token[R-2]==="else"){if(B==="x{")t.token[e-1]="{";if(t.token[t.ender[e]]==="x}")t.token[t.ender[e]]="}";t.lines[t.ender[e]]=t.lines[t.ender[e]]-1;}else {if(t.token[t.ender[e-1]+2]!=="if"&&t.token[t.ender[e-1]+1]!=="else"){f[e-1]=-20;if(B==="{")t.token[e-1]="x{";if(t.token[t.ender[e]]==="}")t.token[t.ender[e]]="x}";}else if(t.token[t.ender[e-1]+2]!=="if"&&t.token[t.ender[e-1]+1]!=="x{"){f[e-1]=-20;t.lines[t.ender[e-1]+2]=t.lines[t.ender[e-1]+2]-1;if(t.token[e-1]==="{")t.token[e-1]="x{";if(t.token[t.ender[e]]==="}")t.token[t.ender[e]]="x}";if(t.token[t.ender[e-1]+2]==="{")t.token[t.ender[e-1]+2]="x{";}}}if((B==="x}"||B==="}")&&(t.stack[e-1]==="if"&&S==="else"&&(t.token[e+1]==="{"||t.token[e+1]==="x{")&&t.token[e+2]==="return")){if(t.token[e-2]==="x;")t.token[e-2]=";";}if(B==="x{"&&S==="return"&&t.stack[e]==="else"){f[e-1]=-20;if(t.token[t.ender[e-1]-1]==="x;")t.token[t.ender[e-1]-1]=";";t.lines[t.ender[e-1]]=t.lines[t.ender[e-1]]-1;t.lines[t.ender[e]+1]=t.lines[t.ender[e]+1]-1;}if(B==="x}"&&S==="else"&&t.token[e+1]==="x{"&&t.token[e+2]==="return"&&t.token[t.ender[e]-1]==="}"){t.token[t.ender[e]-1]="x}";}}f.push(-10);}do{if(t.lexer[e]===$){P=t.types[e];S=t.token[e];if(P==="comment"){ee();}else if(P==="regex"){f.push(-20);}else if(P==="string"){we();}else if(P.indexOf("template_string")===0){Le();}else if(P==="separator"){H();}else if(P==="start"){be();}else if(P==="end"){X();}else if(P==="type"||P==="type_start"||P==="type_end"){_e();}else if(P==="operator"){me();}else if(P==="word"){Be();}else if(P==="reference"){q();}else if(P==="markup"){se();}else if(P.indexOf("template")===0){de();}else if(P==="generic"){if(B!=="return"&&B.charAt(0)!=="#"&&p!=="operator"&&B!=="public"&&B!=="private"&&B!=="static"&&B!=="final"&&B!=="implements"&&B!=="class"&&B!=="void"){f[e-1]=-20;}if(t.token[e+1]==="("||t.token[e+1]==="x("){f.push(-20);}else {f.push(-10);}}else {f.push(-10);}if(P!=="comment"){p=P;B=S;}if(j.length>0&&t.token[e]!==")"){if(t.types[e]==="comment"&&j[j.length-1]>-1){j[j.length-1]=l.wrap+1;}else if(f[e]>-1||t.token[e].charAt(0)==="`"&&t.token[e].indexOf(ne)>0){j[j.length-1]=-1;}else if(j[j.length-1]>-1){j[j.length-1]=j[j.length-1]+t.token[e].length;if(f[e]===-10)j[j.length-1]=j[j.length-1]+1;}}}else {te();}e=e+1;}while(e<C);return f})();const a=(()=>{const e=[];const m=(()=>{const f=[];const b=l.indentChar;let x=l.indentSize;if(typeof x!=="number"||x<1)return "";do{f.push(b);x=x-1;}while(x>0);return f.join("")})();const F=l.crlf===true?"\r\n":ne;const i=l.preserveLine+1;const P=["x;","x}","x{","x(","x)"];let S=Q.start;let p="";let B=l.indentLevel;function U(f){const b=[];const x=(()=>{if(S===C-1)return 1;if(t.lines[S+1]-1>i)return i;if(t.lines[S+1]>1)return t.lines[S+1]-1;return 1})();let y=0;if(f<0)f=0;do{b.push(F);y=y+1;}while(y<x);if(f>0){y=0;do{b.push(m);y=y+1;}while(y<f)}return b.join("")}if(l.script.vertical===true){let f=function(b){let x=0;let y=0;let A=b-1;let _=0;let N=0;const E=t.begin[S];const j=[];do{if((t.begin[A]===E||t.token[A]==="]"||t.token[A]===")")&&(t.token[A+1]===":"&&t.stack[A]==="object"||t.token[A+1]==="=")){_=A;y=0;do{if(t.begin[_]===E){if(t.token[_]===","||t.token[_]===";"||t.token[_]==="x;"||k[_]>-1&&t.types[_]!=="comment"){if(t.token[_+1]==="."){y=y+l.indentSize*l.indentChar.length;}break}}else if(k[_]>-1){break}if(t.types[_]!=="comment"){if(k[_-1]===-10)y=y+1;y=t.token[_].length+y;}_=_-1;}while(_>E);N=_;if(t.token[N]===","&&t.token[A+1]==="="){do{if(t.types[N]==="end")N=t.begin[N];if(t.begin[N]===E){if(t.token[N]===";"||t.token[N]==="x;")break;if(t.token[N]==="var"||t.token[N]==="const"||t.token[N]==="let"){y=y+l.indentSize*l.indentChar.length;break}}N=N-1;}while(N>E)}if(y>x)x=y;j.push([A,y]);A=_;}else if(t.types[A]==="end"){A=t.begin[A];}A=A-1;}while(A>E);A=j.length;if(A>0){do{A=A-1;_=j[A][1];if(_<x){do{t.token[j[A][0]]=t.token[j[A][0]]+pe;_=_+1;}while(_<x)}}while(A>0)}};S=C;do{S=S-1;if(t.lexer[S]==="script"){if(t.token[S]==="}"&&t.token[S-1]!=="{"&&k[t.begin[S]]>0){f(S);}}else {S=t.begin[S];}}while(S>0)}S=Q.start;do{if(t.lexer[S]===$||Q.beautify[t.lexer[S]]===void 0){if(t.types[S]==="comment"&&l.commentIndent===true){if(/\n/.test(t.token[S])){const f=t.begin[S]>-1?t.token[S].charAt(2)==="*"?Oe(k[S],m)+l.indentChar:Oe(k[S],m):l.indentChar;const b=t.token[S].split(/\n/);let x=1;do{b[x]=f+b[x].trimStart();x=x+1;}while(x<b.length);t.token.splice(S,1,b.join(ne));}}if(P.indexOf(t.token[S])<0){if(t.token[S]!==";"||l.script.noSemicolon===false){e.push(t.token[S]);}else if(k[S]<0&&t.types[S+1]!=="comment"){e.push(";");}}if(S<C-1&&t.lexer[S+1]!==$&&t.begin[S]===t.begin[S+1]&&t.types[S+1].indexOf("end")<0&&t.token[S]!==","){e.push(pe);}else if(k[S]>-1){if((k[S]>-1&&t.token[S]==="{"||k[S]>-1&&t.token[S+1]==="}")&&t.lines[S]<3&&l.script.braceNewline===true){if(t.lines[S+1]<3)e.push(U(0));}e.push(U(k[S]));B=k[S];}else if(k[S]===-10){e.push(pe);if(t.lexer[S+1]!==$)B=B+1;}}else {if(o[S]===S){e.push(t.token[S]);}else {Q.end=o[S];Q.start=S;l.indentLevel=B;p=Q.beautify[t.lexer[S]](l).replace(Ce,w);e.push(p);S=Q.iterator;if(k[S]===-10){e.push(pe);}else if(k[S]>-1){e.push(U(k[S]));}l.indentLevel=0;}}S=S+1;}while(S<C);Q.iterator=C-1;return e.join(w)})();return a};var Ae={language:{description:"The language name",lexer:"all",type:"select",default:"auto",values:[{rule:"auto",description:"Prettify will automatically detect the language"},{rule:"text",description:"Plain Text"},{rule:"html",description:"HTML"},{rule:"liquid",description:"HTML + Liquid"},{rule:"javascript",description:"JavaScript"},{rule:"jsx",description:"JSX"},{rule:"typescript",description:"TypeScript"},{rule:"tsx",description:"TSX"},{rule:"json",description:"JSON"},{rule:"css",description:"CSS"},{rule:"scss",description:"SCSS"},{rule:"less",description:"LESS"},{rule:"xml",description:"XML"}]},wrap:{default:0,description:"Character width limit before applying word wrap. A 0 value disables this option. A negative value concatenates script strings.",lexer:"all",type:"number"},indentSize:{default:2,description:'The number of "indentChar" values to comprise a single indentation.',lexer:"all",type:"number"},indentChar:{default:" ",description:"The string characters to comprise a single indentation. Any string combination is accepted.",lexer:"all",type:"string"},crlf:{default:false,description:"If line termination should be Windows (CRLF) format. Unix (LF) format is the default.",lexer:"all",type:"boolean"},endNewline:{default:false,description:"Insert an empty line at the end of output.",lexer:"all",type:"boolean"},preserveLine:{default:2,description:"The maximum number of consecutive empty lines to retain.",lexer:"all",type:"number"},preserveComment:{default:false,description:"Prevent comment reformatting due to option wrap.",lexer:"all",type:"boolean"},commentNewline:{default:false,description:"If a blank new line should be forced above comments.",lexer:"all",type:"boolean"},commentIndent:{default:false,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",lexer:"all",type:"boolean"},correct:{default:false,description:"Automatically correct some sloppiness in code.",lexer:"all",type:"boolean"},quoteConvert:{lexer:"all",description:"If the quotes should be converted to single quotes or double quotes.",type:"select",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}]},attributeSort:{default:false,description:"Alphanumerically sort markup attributes. Attribute sorting is ignored on tags that contain attributes template attributes.",lexer:"markup",type:"boolean"},attributeSortList:{default:[],description:"A comma separated list of attribute names. Attributes will be sorted according to this list and then alphanumerically. This option requires 'attributeSort' have a value of true.",lexer:"markup",type:"array"},attributeCasing:{default:"preserve",description:"Controls the casing of attribute values and keys.",type:"select",lexer:"markup",values:[{rule:"preserve",description:"All tag attribute keys/values are preserved and left intact."},{rule:"lowercase",description:"All tag attribute keys/values are converted to lowercase"},{rule:"lowercase-name",description:"Only attribute keys are converted to lowercase"},{rule:"lowercase-value",description:"Only attribute values are converted to lowercase"}]},attributeValues:{default:false,description:"Controls how attribute values should be formatter",type:"select",lexer:"markup",values:[{rule:"preserve",description:"Preserves attribute values, leaving them intact."},{rule:"collapse",description:"Collapsed all space separated attributes values onto newlines"},{rule:"wrap",description:"Collapase attribute values when then exceed wrap limit"},{rule:"strip",description:"Strips newlines and extraneous whitespaces from attribute values"}]},delimiterSpacing:{default:true,description:"Whether or not delimiter characters should apply a single space at the start and end point",lexer:"markup",type:"boolean"},forceAttribute:{default:false,description:"If all markup attributes should be indented each onto their own line. This option accepts either a boolean or number value, depending on your preferences you can either force attributes based a count limit, disable forcing or always enable enforcing.",lexer:"markup",type:["number","boolean"],multi:{number:{default:1,description:"Optionally define an attribute force threshold. When the number of attributes exceeds this limit then they will be forced, otherwise they will be left intact."},boolean:{default:false,description:"Whether or not to enforce the rule. A value of true will always force attributes, whereas a value of false will never force attributes."}}},forceLeadAttribute:{default:false,description:"Forces leading attribute onto a newline when using wrap based indentation.",lexer:"markup",type:"boolean"},forceIndent:{default:false,description:"Will force indentation upon all content and tags without regard for the creation of new text nodes.",lexer:"markup",type:"boolean"},preserveAttributes:{default:false,description:"If markup tags should have their insides preserved. This option is only available to markup and does not support child tokens that require a different lexer.",lexer:"markup",type:"boolean"},preserveText:{default:false,description:"If text in the provided markup code should be preserved exactly as provided. This option eliminates beautification and wrapping of text content.",lexer:"markup",type:"boolean"},selfCloseSpace:{default:false,description:'Markup self-closing tags end will end with " />" instead of "/>".',lexer:"markup",type:"boolean"},classPadding:{description:"Inserts new line characters between every CSS code block.",default:false,type:"boolean",lexer:"style"},sortSelectors:{default:false,type:"boolean",description:"If comma separated CSS selectors should present on a single line of code.",lexer:"style"},sortProperties:{lexer:"style",description:"This option will alphabetically sort CSS properties contained within classes.",default:false,type:"boolean"},noLeadZero:{lexer:"style",description:"This will eliminate leading zeros from numbers expressed within values.",default:false,type:"boolean"},compressCSS:{lexer:"style",description:"If CSS should be beautified in a style where the properties and values are minifed for faster reading of selectors.",default:false,type:"boolean"},forceValue:{lexer:"style",description:"If CSS selector property values should be indented onto newlines",default:"preserve",type:"select",values:[{rule:"preserve",description:"Preserves property values, output does not augment provided structures"},{rule:"collapse",description:"Collapsed all selector property values onto newlines"},{rule:"wrap",description:"Collapase only selector property values which exceed wrap limit"}]},braceAllman:{lexer:"script",default:false,description:'Determines if opening curly braces will exist on the same line as their condition or be forced onto a new line, otherwise known as "Allman Style" indentation.',type:"boolean"},bracePadding:{default:false,description:"This will create a newline before and after objects values",type:"boolean",lexer:"script"},braceNewline:{default:false,description:"If true an empty line will be inserted after opening curly braces and before closing curly braces.",type:"boolean",lexer:"script"},braceStyle:{default:"none",description:"Emulates JSBeautify's brace_style option using existing Prettify options",type:"select",lexer:"script",values:[{rule:"none",description:"Ignores this option"},{rule:"collapse",description:"Sets formatObject to indent and neverflatten to true."},{rule:"collapse-preserve-inline",description:"Sets formatObject to inline and bracePadding to true"},{rule:"expand",description:"Sets objectIndent to indent and braceNewline + neverflatten to true."}]},arrayFormat:{lexer:"script",description:"Determines if all array indexes should be indented, never indented, or left to the default",type:"select",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},objectSort:{default:false,description:"This option will alphabetically sort object properties in JSON objects",type:"boolean",lexer:"script"},objectIndent:{description:"This option will alphabetically sort object properties in JSON objects",type:"select",lexer:"script",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},functionSpace:{lexer:"script",default:true,type:"boolean",description:"Inserts a space following the function keyword for anonymous functions."},functionNameSpace:{lexer:"script",default:true,type:"boolean",description:"If a space should follow a JavaScript function name."},methodChain:{lexer:"script",default:-1,description:"When to break consecutively chained methods and properties onto separate lines. A negative value disables this option. A value of 0 ensures method chainsare never broken.",type:"number"},caseSpace:{default:false,type:"boolean",description:"If the colon separating a case's expression (of a switch/case block) from its statement should be followed by a space instead of indentation thereby keeping the case on a single line of code.",lexer:"script"},inlineReturn:{lexer:"script",default:true,type:"boolean",description:"Inlines return statements contained within `if` and `else` conditions. This rules also augments code and will reason about your structure to output the best and most readable results."},elseNewline:{lexer:"script",default:false,type:"boolean",description:'If keyword "else" is forced onto a new line.'},ternaryLine:{lexer:"script",description:"If ternary operators in JavaScript `?` and `:` should remain on the same line.",type:"boolean",default:false},neverFlatten:{lexer:"script",default:true,description:"If destructured lists in script should never be flattend.",type:"boolean"},variableList:{lexer:"script",description:"If consecutive JavaScript variables should be merged into a comma separated list or if variables in a list should be separated. each \u2014 Ensure each reference is a single declaration statement.",type:"select",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"each",description:"Ensure each reference is a single declaration statement"},{rule:"list",description:"Ensure consecutive declarations are a comma separated list"}]},vertical:{lexer:"script",description:"If lists of assignments and properties should be vertically aligned",type:"boolean",default:false},noCaseIndent:{lexer:"script",description:"If the colon separating a case's expression (of a switch/case block) from its statement should be followed by a space instead of indentation, thereby keeping the case on a single line of code.",default:false,type:"boolean"},noSemicolon:{lexer:"script",description:"Removes semicolons that would be inserted by ASI. This option is in conflict with option `attemptCorrection` and takes precedence over conflicting features. Use of this option is a possible security/stability risk.",default:false,type:"boolean"},endComma:{description:"If there should be a trailing comma in arrays and objects.",type:"select",lexer:"script",default:"none",values:[{rule:"none",description:"Ignore this option"},{rule:"always",description:"Always ensure there is a tailing comma"},{rule:"never",description:"Remove trailing commas"}]}};var lt={};at(lt,{format:()=>Fe,language:()=>Ie,options:()=>Te,parse:()=>rt});function st(l){const c=l.source.search(et);const h=l.source.search(tt);const n=Ne(Ae);const o=n.length;let t=0;if(h>-1&&l.source.slice(0,h).trimStart()===w)return false;if(c>-1&&(c===0||`"':`.indexOf(l.source.charAt(c-1))<0)){let b=function(){if(a.charAt(m-1)!=="\\")return false;let x=m;do{x=x-1;}while(x>0&&a.charAt(x)==="\\");return (m-x)%2===0};const C=[];const k=c;const a=l.source;const e=a.length;let m=k;let F=0;let i=w;let P=w;let S=w;let p=w;let B=[];let U=[];let V;let f;if(a.charAt(m)==="<"){f="<!--";}else if(a.charAt(m+1)==="/"){f="//";}else if(a.charAt(m+1)==="%"){V=a.indexOf("}",m+1);if(a[V-1].charCodeAt(0)===37)f=a.slice(m,V+1);}else {f="/*";}do{if(a.slice(m-9,m)==="@prettify")break;m=m+1;}while(m<e);do{if(b()===false){if(i===w){if(a.charAt(m)==='"'||a.charAt(m)==="'"||a.charAt(m)==="`"){i=a.charAt(m);if(C.length>0&&C[C.length-1].charAt(C[C.length-1].length-1)===":")F=m;}else if(/\s/.test(a.charAt(m))===false&&F===0){F=m;}else if(a.charAt(m)===","||/\s/.test(a.charAt(m))===true&&F>0){P=a.slice(F,m);if(C.length>0){if(C.length>0&&P===":"&&C[C.length-1].indexOf(":")<0){C[C.length-1]=C[C.length-1]+P;F=m;}else if(C.length>0&&C[C.length-1].charAt(C[C.length-1].length-1)===":"){C[C.length-1]=C[C.length-1]+P;F=0;}else {C.push(P);F=0;}}else {C.push(P);F=0;}}if(f==="<!--"&&a.slice(m-2,m+1)==="-->")break;if(f==="//"&&a.charAt(m)==="\n")break;if(f==="/*"&&a.slice(m-1,m+1)==="*/")break;if(f.charCodeAt(1)===37&&a.slice(m-1,m+1)==="%"&&a.indexOf("endcomment",a.indexOf("{%",V))>0)break}else if(a.charAt(m)===i&&i!=="${"){i=w;}else if(i==="`"&&a.slice(m,m+2)==="${"){i="${";}else if(i==="${"&&a.charAt(m)==="}"){i="`";}}m=m+1;}while(m<e);if(F>0){i=a.slice(F,m+1);if(f==="<!--")i=i.replace(/\s*-+>$/,w);else if(f==="//")i=i.replace(/\s+$/,w);else i=i.replace(/\s*\u002a\/$/,w);C.push(i);}m=C.length;if(m>0){do{m=m-1;if(C[m].indexOf(":")>0){U=[C[m].slice(0,C[m].indexOf(":")),C[m].slice(C[m].indexOf(":")+1)];}else if(Ae[C[m]]!==void 0&&Ae[C[m]].type==="boolean"){l.options[C[m]]=true;}if(U.length===2&&Ae[U[0]]!==void 0){if(U[1].charAt(U[1].length-1)===U[1].charAt(0)&&(U[1].charAt(0)==='"'||U[1].charAt(0)==="'"||U[1].charAt(0)==="`")){U[1]=U[1].slice(1,U[1].length-1);}if(Ae[U[0]].type==="number"&&isNaN(Number(U[1]))===false){l.options[U[0]]=Number(U[1]);}else if(Ae[U[0]].type==="boolean"){l.options[U[0]]=U[1]==="true";}else {if(Ae[U[0]].values!==void 0){B=Ne(Ae[U[0]].values);F=B.length;do{F=F-1;if(B[F]===U[1]){l.options[U[0]]=U[1];break}}while(F>0)}else {if(U[0]==="language"){S=U[1];}else if(U[0]==="lexer"){p=U[1];}l.options[U[0]]=U[1];}}}}while(m>0);if(p===w&&S!==w)p=Ze(S);}}if(l.options.lexer==="script"){if(l.options.script.styleGuide!==void 0){switch(l.options.script.styleGuide){case"airbnb":l.options.wrap=80;l.options.indentChar=" ";l.options.indentSize=2;l.options.preserveLine=1;l.options.script.correct=true;l.options.script.quoteConvert="single";l.options.script.variableList="each";l.options.script.endComma="always";l.options.script.bracePadding=true;break;case"crockford":l.options.indentChar=" ";l.options.indentSize=4;l.options.script.correct=true;l.options.script.bracePadding=false;l.options.script.elseNewline=false;l.options.script.endComma="never";l.options.script.noCaseIndent=true;l.options.script.functionSpace=true;l.options.script.variableList="each";l.options.script.vertical=false;break;case"google":l.options.wrap=-1;l.options.indentChar=" ";l.options.indentSize=4;l.options.preserveLine=1;l.options.script.correct=true;l.options.script.quoteConvert="single";l.options.script.vertical=false;break;case"jquery":l.options.wrap=80;l.options.indentChar="	";l.options.indentSize=1;l.options.script.correct=true;l.options.script.bracePadding=true;l.options.script.quoteConvert="double";l.options.script.variableList="each";break;case"jslint":l.options.indentChar=" ";l.options.indentSize=4;l.options.script.correct=true;l.options.script.bracePadding=false;l.options.script.elseNewline=false;l.options.script.endComma="never";l.options.script.noCaseIndent=true;l.options.script.functionSpace=true;l.options.script.variableList="each";l.options.script.vertical=false;break;case"standard":l.options.wrap=0;l.options.indentChar=" ";l.options.indentSize=2;l.options.endNewline=false;l.options.preserveLine=1;l.options.script.correct=true;l.options.script.noSemicolon=true;l.options.script.endComma="never";l.options.script.braceNewline=false;l.options.script.bracePadding=false;l.options.script.braceAllman=false;l.options.script.quoteConvert="single";l.options.script.functionSpace=true;l.options.script.ternaryLine=false;l.options.script.variableList="each";l.options.script.vertical=false;break;case"yandex":l.options.script.correct=true;l.options.script.bracePadding=false;l.options.script.quoteConvert="single";l.options.script.variableList="each";l.options.script.vertical=false;break}}if(l.options.script.braceStyle!==void 0){switch(l.options.script.braceStyle){case"collapse":l.options.script.braceNewline=false;l.options.script.bracePadding=false;l.options.script.braceAllman=false;l.options.script.objectIndent="indent";l.options.script.neverFlatten=true;break;case"collapse-preserve-inline":l.options.script.braceNewline=false;l.options.script.bracePadding=true;l.options.script.braceAllman=false;l.options.script.objectIndent="indent";l.options.script.neverFlatten=false;break;case"expand":l.options.script.braceNewline=false;l.options.script.bracePadding=false;l.options.script.braceAllman=true;l.options.script.objectIndent="indent";l.options.script.neverFlatten=true;break}}if(l.options.language==="json")l.options.wrap=0;}do{if(l.options[Ne[t]]!==void 0){Ae[Ne[t]].lexer.length;}t=t+1;}while(t<o)}function ft(l){const{source:c,options:h}=l;const{lexer:n,language:o}=h;if(typeof l.lexers[n]==="function"){l.lexers[n](`${c} `);}else {s.error=`Specified lexer, ${n}, is not a function.`;}let t=0;let $=0;const I=Ne(s.data);const C=I.length;do{$=t+1;do{if(s.data[I[t]].length!==s.data[I[$]].length){s.error=`"${I[t]}" array is of different length than "${I[$]}"`;break}$=$+1;}while($<C);t=t+1;}while(t<C-1);if(s.data.begin.length>0){if(n==="script"&&(o==="json"&&h.json.objectSort===true||h.language!=="json"&&h.script.objectSort===true)){s.sortCorrection(0,s.count+1);}else if(n==="style"&&h.style.sortProperties){s.sortCorrection(0,s.count+1);}}return s.data}function it(l){const c=Date.now();const h={language:l,chars:-1};return n=>{h.chars=n;h.size=Je(n);h.time=(Date.now()-c).toFixed(1);return h}}function pt(l){const{languageName:c}=ge(l.options.language);const h=l.options.crlf===true?"\r\n":"\n";const n=l.source.match(/\n/g);const o=it(c);let t=w;if(n===null){if(l.options.endNewline)t=h;l.stats=o(t.length);}else {t=n[0].length>l.options.preserveLine?Oe(l.options.preserveLine,h):Oe(n[0].length,h);if(l.options.endNewline)t+=h;l.stats=o(t.length);}return t}function Ve(l){l.data=s.init();if(!/\S/.test(l.source))return pt(l);if(l.options.language==="text"){l.options.language="text";l.options.languageName="Plain Text";l.options.lexer="markup";}else if(l.options.language==="auto"||l.options.language===void 0){const{lexer:t,language:$,languageName:I}=Ie(l.source);if($==="unknown"){console.warn("Prettify: unknown and/or unsupport language");console.info("Prettify: define a support language (fallback is HTML)");}l.options.lexer=t;l.options.language=$;l.options.languageName=I;}else {const{lexer:t,language:$,languageName:I}=ge(l.options.language);if($==="unknown"){console.warn(`Prettify: unsupport ${l.options.language}`);console.info("Prettify: language is not supported (fallback is HTML)");}l.options.lexer=t;l.options.language=$;l.options.languageName=I;}const c=it(l.options.languageName);const h=l.mode;const n=l.options.crlf===true?"\r\n":"\n";let o=l.source;if(st(l)===false){l.stats=c(o.length);return o}l.data=ft(l);if(h==="parse"){l.stats=c(o.length);return s.data}o=l.beautify[l.options.lexer](l.options);o=l.options.endNewline===true?o.replace(/\s*$/,n):o.replace(/\s+$/,w);l.stats=c(o.length);l.end=0;l.start=0;return o}Fe.before=l=>Q.hooks.before.push(l);Fe.after=l=>Q.hooks.after.push(l);Te.listen=l=>Q.hooks.rules.push(l);Qe(Fe,"stats",{get(){return Q.stats}});Qe(rt,"stats",{get(){return Q.stats}});Qe(Te,"rules",{get(){return Q.options}});function Fe(l,c){Q.source=l;if(typeof c==="object")Q.options=Te(c);if(Q.hooks.before.length>0){for(const n of Q.hooks.before){if(n(Q.options,l)===false)return l}}const h=Ve(Q);if(Q.hooks.after.length>0){for(const n of Q.hooks.after){if(n.call(s.data,h,Q.options)===false)return l}}return new Promise((n,o)=>{if(s.error.length)return o(s.error);return n(h)})}function Te(l){for(const c of Ne(l)){if(c in Ae&&Ae[c].lexer==="auto"){Q.options[c]=l[c];}else if(c==="markup"){Re(Q.options.markup,l.markup);}else if(c==="script"){Re(Q.options.script,l.script);}else if(c==="style"){Re(Q.options.style,l.style);}else if(c==="json"){Re(Q.options.json,l.json);}else if(c==="grammar"){oe.extend(l.grammar);}else if(c in Q.options){Q.options[c]=l[c];}}if(Q.hooks.rules.length>0){for(const c of Q.hooks.rules)c(Q.options);}return Q.options}function rt(l,c){Q.source=l;Q.mode="parse";if(typeof c==="object")Q.options=Te(c);const h=Ve(Q);return new Promise((n,o)=>{if(s.error.length)return o(s.error);return n(h)})}

exports["default"] = lt;
exports.definitions = Ae;
