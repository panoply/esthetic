var lt=Object.defineProperty;var ot=(c,u)=>{for(var f in u)lt(c,f,{get:u[f],enumerable:true});};var je=Object.assign;var se=Object.create;var ve=Object.keys;var Qe=Object.defineProperty;var Le=Array.isArray;var xe={language:{description:"The language name",lexer:"all",type:"select",default:"auto",values:[{rule:"auto",description:"Prettify will automatically detect the language"},{rule:"text",description:"Plain Text"},{rule:"html",description:"HTML"},{rule:"liquid",description:"HTML + Liquid"},{rule:"javascript",description:"JavaScript"},{rule:"jsx",description:"JSX"},{rule:"typescript",description:"TypeScript"},{rule:"tsx",description:"TSX"},{rule:"json",description:"JSON"},{rule:"css",description:"CSS"},{rule:"scss",description:"SCSS"},{rule:"less",description:"LESS"},{rule:"xml",description:"XML"}]},wrap:{default:0,description:"Character width limit before applying word wrap. A 0 value disables this option. A negative value concatenates script strings.",lexer:"all",type:"number"},indentSize:{default:2,description:'The number of "indentChar" values to comprise a single indentation.',lexer:"all",type:"number"},indentChar:{default:" ",description:"The string characters to comprise a single indentation. Any string combination is accepted.",lexer:"all",type:"string"},crlf:{default:false,description:"If line termination should be Windows (CRLF) format. Unix (LF) format is the default.",lexer:"all",type:"boolean"},endNewline:{default:false,description:"Insert an empty line at the end of output.",lexer:"all",type:"boolean"},preserveLine:{default:2,description:"The maximum number of consecutive empty lines to retain.",lexer:"all",type:"number"},preserveComment:{default:false,description:"Prevent comment reformatting due to option wrap.",lexer:"all",type:"boolean"},commentNewline:{default:false,description:"If a blank new line should be forced above comments.",lexer:"all",type:"boolean"},commentIndent:{default:false,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",lexer:"all",type:"boolean"},quoteConvert:{lexer:"all",description:"If the quotes of markup attributes should be converted to single quotes or double quotes.",type:"select",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}]},correct:{default:false,description:"Automatically correct some sloppiness in code.",lexer:"all",type:"boolean"},attributeSort:{default:false,description:"Alphanumerically sort markup attributes. Attribute sorting is ignored on tags that contain attributes template attributes.",lexer:"markup",type:"boolean"},attributeSortList:{default:[],description:"A comma separated list of attribute names. Attributes will be sorted according to this list and then alphanumerically. This option requires 'attributeSort' have a value of true.",lexer:"markup",type:"array"},attributeChain:{default:"inline",description:"Controls how Liquid tags contained within HTML attributed should be formatted.",type:"select",lexer:"markup",values:[{rule:"inline",description:"Liquid tag block contents are chained together"},{rule:"collapse",description:"Liquid tag block contents are split onto newlines"},{rule:"preserve",description:"Liquid tag block contents are preserved"}]},attributeValues:{default:false,description:"Controls how attribute values should be formatter",type:"select",lexer:"markup",values:[{rule:"preserve",description:"Preserves attribute values, leaving them intact."},{rule:"collapse",description:"Collapsed all space separated attributes values onto newlines"},{rule:"wrap",description:"Collapases attribute values when then exceed wrap limit"},{rule:"strip",description:"Strips newlines and extraneous whitespaces from attribute values"}]},delimiterSpacing:{default:true,description:"Whether or not delimiter characters should apply a single space at the start and end point",lexer:"markup",type:"boolean"},forceAttribute:{default:false,description:"If all markup attributes should be indented each onto their own line.",lexer:"markup",type:"boolean"},forceLeadingAttribute:{default:false,description:"Forces leading attribute onto a newline when using wrap based indentation",lexer:"markup",type:"boolean"},forceIndent:{default:false,description:"Will force indentation upon all content and tags without regard for the creation of new text nodes.",lexer:"markup",type:"boolean"},preserveAttributes:{default:false,description:"If markup tags should have their insides preserved. This option is only available to markup and does not support child tokens that require a different lexer.",lexer:"markup",type:"boolean"},preserveText:{default:false,description:"If text in the provided markup code should be preserved exactly as provided. This option eliminates beautification and wrapping of text content.",lexer:"markup",type:"boolean"},selfCloseSpace:{default:false,description:'Markup self-closing tags end will end with " />" instead of "/>".',lexer:"markup",type:"boolean"},classPadding:{description:"Inserts new line characters between every CSS code block.",default:false,type:"boolean",lexer:"style"},sortSelectors:{default:false,type:"boolean",description:"If comma separated CSS selectors should present on a single line of code.",lexer:"style"},sortProperties:{lexer:"style",description:"This option will alphabetically sort CSS properties contained within classes.",default:false,type:"boolean"},noLeadZero:{lexer:"style",description:"This will eliminate leading zeros from numbers expressed within values.",default:false,type:"boolean"},compressCSS:{lexer:"style",description:"If CSS should be beautified in a style where the properties and values are minifed for faster reading of selectors.",default:false,type:"boolean"},braceAllman:{lexer:"script",default:false,description:'Determines if opening curly braces will exist on the same line as their condition or be forced onto a new line, otherwise known as "Allman Style" indentation.',type:"boolean"},bracePadding:{default:false,description:"This will create a newline before and after objects values",type:"boolean",lexer:"script"},braceNewline:{default:false,description:"If true an empty line will be inserted after opening curly braces and before closing curly braces.",type:"boolean",lexer:"script"},braceStyle:{default:"none",description:"Emulates JSBeautify's brace_style option using existing Prettify options",type:"select",lexer:"script",values:[{rule:"none",description:"Ignores this option"},{rule:"collapse",description:"Sets formatObject to indent and neverflatten to true."},{rule:"collapse-preserve-inline",description:"Sets formatObject to inline and bracePadding to true"},{rule:"expand",description:"Sets objectIndent to indent and braceNewline + neverflatten to true."}]},arrayFormat:{lexer:"script",description:"Determines if all array indexes should be indented, never indented, or left to the default",type:"select",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},objectSort:{default:false,description:"This option will alphabetically sort object properties in JSON objects",type:"boolean",lexer:"script"},objectIndent:{description:"This option will alphabetically sort object properties in JSON objects",type:"select",lexer:"script",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},functionSpace:{lexer:"script",default:true,type:"boolean",description:"Inserts a space following the function keyword for anonymous functions."},functionNameSpace:{lexer:"script",default:true,type:"boolean",description:"If a space should follow a JavaScript function name."},methodChain:{lexer:"script",default:-1,description:"When to break consecutively chained methods and properties onto separate lines. A negative value disables this option. A value of 0 ensures method chainsare never broken.",type:"number"},caseSpace:{default:false,type:"boolean",description:"If the colon separating a case's expression (of a switch/case block) from its statement should be followed by a space instead of indentation thereby keeping the case on a single line of code.",lexer:"script"},inlineReturn:{lexer:"script",default:true,type:"boolean",description:"Inlines return statements contained within `if` and `else` conditions. This rules also augments code and will reason about your structure to output the best and most readable results."},elseNewline:{lexer:"script",default:false,type:"boolean",description:'If keyword "else" is forced onto a new line.'},ternaryLine:{lexer:"script",description:"If ternary operators in JavaScript `?` and `:` should remain on the same line.",type:"boolean",default:false},neverFlatten:{lexer:"script",default:true,description:"If destructured lists in script should never be flattend.",type:"boolean"},variableList:{lexer:"script",description:"If consecutive JavaScript variables should be merged into a comma separated list or if variables in a list should be separated. each \u2014 Ensure each reference is a single declaration statement.",type:"select",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"each",description:"Ensure each reference is a single declaration statement"},{rule:"list",description:"Ensure consecutive declarations are a comma separated list"}]},vertical:{lexer:"script",description:"If lists of assignments and properties should be vertically aligned",type:"boolean",default:false},noSemicolon:{lexer:"script",description:"Removes semicolons that would be inserted by ASI. This option is in conflict with option `attemptCorrection` and takes precedence over conflicting features. Use of this option is a possible security/stability risk.",default:false,type:"boolean"},endComma:{description:"If there should be a trailing comma in arrays and objects.",type:"select",lexer:"script",default:"none",values:[{rule:"none",description:"Ignore this option"},{rule:"always",description:"Always ensure there is a tailing comma"},{rule:"never",description:"Remove trailing commas"}]}};var de=function(){const c=se(null);c.html=se(null);c.script=se(null);c.liquid=se(null);c.html.tags=new Set(["body","colgroup","dd","dt","head","html","li","option","p","tbody","td","tfoot","th","thead","tr"]);c.html.voids=new Set(["area","base","basefont","br","col","embed","eventsource","frame","hr","image","img","input","isindex","keygen","link","meta","path","param","progress","source","wbr","use"]);c.liquid.tags=new Set(["case","capture","comment","embed","filter","for","form","if","macro","paginate","raw","switch","tablerow","unless","verbatim","schema","style","javascript","highlight","stylesheet"]);c.liquid.else=new Set(["case","default","else","when","elsif"]);c.liquid.singletons=new Set(["assign","increment","decrement","render","include"]);c.script.keywords=new Set(["ActiveXObject","ArrayBuffer","AudioContext","Canvas","CustomAnimation","DOMParser","DataView","Date","Error","EvalError","FadeAnimation","FileReader","Flash","Float32Array","Float64Array","FormField","Frame","Generator","HotKey","Image","Iterator","Intl","Int16Array","Int32Array","Int8Array","InternalError","Loader","Map","MenuItem","MoveAnimation","Notification","ParallelArray","Point","Promise","Proxy","RangeError","Rectangle","ReferenceError","Reflect","RegExp","ResizeAnimation","RotateAnimation","Set","SQLite","ScrollBar","Set","Shadow","StopIteration","Symbol","SyntaxError","Text","TextArea","Timer","TypeError","URL","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","URIError","WeakMap","WeakSet","Web","Window","XMLHttpRequest"]);return c}();var z=function(){const c=se(null);c.parsed=se(null);c.options=se(null);c.beautify=se(null);c.lexers=se(null);c.stats=se(null);c.hooks=se(null);let u="";Qe(c,"source",{get(){return c.env==="node"&&Buffer.isBuffer(u)?u.toString():u},set(f){u=c.env==="node"?Buffer.isBuffer(f)?f:Buffer.from(f):f;}});c.mode="beautify";c.end=0;c.iterator=0;c.start=0;c.scopes=[];c.env=typeof process!=="undefined"&&process.versions!=null&&process.versions.node!=null?"node":"browser";c.parsed.begin=[];c.parsed.ender=[];c.parsed.lexer=[];c.parsed.lines=[];c.parsed.stack=[];c.parsed.token=[];c.parsed.types=[];c.stats.chars=-1;c.stats.time=-1;c.stats.size="";c.stats.language="";c.hooks.before=[];c.hooks.language=[];c.hooks.rules=[];c.hooks.after=[];c.options.mode="beautify";c.options.tagMerge=false;c.options.tagSort=false;c.options.indentLevel=0;c.options.grammar=se(null);c.options.grammar.html=se(null);c.options.grammar.liquid=se(null);c.options.lexer="auto";c.options.language="text";c.options.languageName="Plain Text";c.options.crlf=false;c.options.commentIndent=true;c.options.endNewline=false;c.options.indentChar=" ";c.options.indentSize=2;c.options.preserveComment=false;c.options.preserveLine=2;c.options.wrap=0;c.options.markup=se(null);c.options.markup.correct=false;c.options.markup.commentNewline=false;c.options.markup.attributeChain="inline";c.options.markup.attributeValues="preserve";c.options.markup.attributeSort=false;c.options.markup.attributeSortList=[];c.options.markup.forceAttribute=false;c.options.markup.forceLeadingAttribute=false;c.options.markup.preserveText=false;c.options.markup.preserveAttributes=false;c.options.markup.selfCloseSpace=false;c.options.markup.forceIndent=false;c.options.markup.quoteConvert="none";c.options.style=se(null);c.options.style.correct=false;c.options.style.compressCSS=false;c.options.style.classPadding=false;c.options.style.noLeadZero=false;c.options.style.sortSelectors=false;c.options.style.sortProperties=false;c.options.style.quoteConvert="none";c.options.script=se(null);c.options.script.correct=false;c.options.script.braceNewline=false;c.options.script.bracePadding=false;c.options.script.braceStyle="none";c.options.script.braceAllman=false;c.options.script.commentNewline=false;c.options.script.caseSpace=false;c.options.script.inlineReturn=true;c.options.script.elseNewline=false;c.options.script.endComma="never";c.options.script.arrayFormat="default";c.options.script.objectSort=false;c.options.script.objectIndent="default";c.options.script.functionNameSpace=false;c.options.script.functionSpace=false;c.options.script.styleGuide="none";c.options.script.ternaryLine=false;c.options.script.methodChain=4;c.options.script.neverFlatten=false;c.options.script.noCaseIndent=false;c.options.script.noSemicolon=false;c.options.script.quoteConvert="none";c.options.script.variableList="none";c.options.script.vertical=false;c.options.json=se(null);c.options.json.arrayFormat="default";c.options.json.braceAllman=false;c.options.json.bracePadding=false;c.options.json.objectIndent="default";c.options.json.objectSort=false;return c}();function Ee(c,u=" "){if(c===0)return u;let f="";let s=1;do{f+=u;}while(s++<c);return f}function N(c,u){if(!c)return false;return c.charCodeAt(0)===u}function he(c,u){return N(c,u)===false}function me(c){return /\s/.test(c)}function $e(c){const u=1024;const f=1048576;const s=1073741824;if(c<u)return c+" B";else if(c<f)return (c/u).toFixed(1)+" KB";else if(c<s)return (c/f).toFixed(1)+" MB";else return (c/s).toFixed(1)+" GB"}function Ie(c){let u=0;const f=c.length;const s=c;const y=()=>{let a=0;const d=s.length;if(a<d){do{if(Le(s[a])===true)s[a]=Ie.apply(this,s[a]);a=a+1;}while(a<d)}};const e=a=>{let d=u;let t=0;let H=0;let $=0;let n=[];let x=s[u];let F="";const i=typeof x;if(d<f){do{F=typeof s[d];if(s[d]<x||F<i){x=s[d];n=[d];}else if(s[d]===x){n.push(d);}d=d+1;}while(d<f)}H=n.length;d=u;t=H+u;if(d<t){do{s[n[$]]=s[d];s[d]=x;$=$+1;d=d+1;}while(d<t)}u=u+H;if(u<f){e("");}else {if(this.recursive===true)y();c=s;}return a};e("");return c}function Be(c){let u=0;const f=c.length;const s=c;const y=()=>{let a=0;const d=s.length;if(a<d){do{if(Le(s[a]))s[a]=Be.apply(this,s[a]);a=a+1;}while(a<d)}};const e=a=>{let d=u;let t=0;let H=0;let $=0;let n=s[u];let x=[];let F="";const i=typeof n;if(d<f){do{F=typeof s[d];if(s[d]>n||F>i){n=s[d];x=[d];}else if(s[d]===n){x.push(d);}d=d+1;}while(d<f)}H=x.length;d=u;t=H+u;if(d<t){do{s[x[$]]=s[d];s[d]=n;$=$+1;d=d+1;}while(d<t)}u=u+H;if(u<f){e("");}else {if(this.recursive===true)y();c=s;}return a};e("");return c}function ze(c){let u=c;const f=[c[0]];const s=()=>{let e=0;const a=u.length;if(e<a){do{if(Le(u[e]))u[e]=ze.apply(this,u[e]);e=e+1;}while(e<a)}};const y=e=>{let a=0;const d=[];const t=u.length;if(a<t){do{if(u[a]!==e)d.push(u[a]);a=a+1;}while(a<t)}u=d;if(d.length>0){f.push(d[0]);y(d[0]);}else {if(this.recursive===true)s();c=u;}};y(this.array[0]);return c}var r=new class $t{constructor(){this.data=se(null);this.references=[[]];this.structure=[["global",-1]];this.datanames=["begin","ender","lexer","lines","stack","token","types"];this.count=-1;this.lineNumber=1;this.linesSpace=0;this.error="";this.data.begin=[];this.data.ender=[];this.data.lexer=[];this.data.lines=[];this.data.stack=[];this.data.token=[];this.data.types=[];}get current(){const{begin:u,ender:f,lexer:s,lines:y,stack:e,token:a,types:d}=this.data;return {begin:u[u.length-1],ender:f[f.length-1],lexer:s[s.length-1],lines:y[y.length-1],stack:e[e.length-1],token:a[u.length-1],types:d[u.length-1]}}concat(u,f){for(const s of this.datanames)u[s]=u[s].concat(f[s]);if(u===this.data)this.count=u.token.length-1;}objectSort(u){let f=this.count;let s=this.structure[this.structure.length-1][1];let y=0;let e=0;let a=0;let d=0;let t=true;let H=0;let $=0;let n=0;const x=[];const F=s;const i=u.lexer[f]==="style"&&this.structure[this.structure.length-1][0]==="global";const T=u.lexer[f]==="style";const S=T===true?[";","separator"]:[",","separator"];const g=this.linesSpace;const L=this.count;const U=i===true?"global":this.structure[this.structure.length-1][0];function G(k,b){let h=k[0];let A=b[0];if(u.types[h]==="comment"){do{h=h+1;}while(h<L&&u.types[h]==="comment");if(u.token[h]===void 0){return 1}}if(u.types[A]==="comment"){do{A=A+1;}while(A<L&&u.types[A]==="comment");if(u.token[A]===void 0)return 1}if(T===true){if(u.token[h].indexOf("@import")===0||u.token[A].indexOf("@import")===0){return h<A?-1:1}if(u.types[h]!==u.types[A]){if(u.types[h]==="function")return 1;if(u.types[h]==="variable")return -1;if(u.types[h]==="selector")return 1;if(u.types[h]==="property"&&u.types[A]!=="variable")return -1;if(u.types[h]==="mixin"&&u.types[A]!=="property"&&u.types[A]!=="variable")return -1}}if(u.token[h].toLowerCase()>u.token[A].toLowerCase())return 1;return -1}const l=se(null);l.begin=[];l.ender=[];l.lexer=[];l.lines=[];l.stack=[];l.token=[];l.types=[];d=f;do{if(u.begin[f]===s||i===true&&f<d&&u.token[f]==="}"&&u.begin[u.begin[f]]===-1){if(u.types[f].indexOf("template")>-1)return;if(u.token[f]===S[0]||T===true&&u.token[f]==="}"&&u.token[f+1]!==";"){t=true;H=f+1;}else if(T===true&&u.token[f-1]==="}"){t=true;H=f;}if(H===0&&u.types[0]==="comment"){do{H=H+1;}while(u.types[H]==="comment")}else if(u.types[H]==="comment"&&u.lines[H]<2){H=H+1;}if(t===true&&(u.token[f]===S[0]||T===true&&u.token[f-1]==="}")&&H<=d){if(T===true&&"};".indexOf(u.token[d])<0){d=d+1;}else if(T===false&&u.token[d]!==","){d=d+1;}x.push([H,d]);if(T===true&&u.token[H]==="}"){d=H;}else {d=H-1;}}}f=f-1;}while(f>s);if(x.length>0&&x[x.length-1][0]>f+1){y=x[x.length-1][0]-1;if(u.types[y]==="comment"&&u.lines[y]>1){do{y=y-1;}while(y>0&&u.types[y]==="comment");x[x.length-1][0]=y+1;}if(u.types[f+1]==="comment"&&f===-1){do{f=f+1;}while(u.types[f+1]==="comment")}x.push([f+1,y]);}if(x.length>1){if(T===true||u.token[f-1]==="="||u.token[f-1]===":"||u.token[f-1]==="("||u.token[f-1]==="["||u.token[f-1]===","||u.types[f-1]==="word"||f===0){x.sort(G);n=x.length;t=false;s=0;do{$=x[s][1];if(T===true){a=$;if(u.types[a]==="comment")a=a-1;if(u.token[a]==="}"){$=$+1;S[0]="}";S[1]="end";}else {S[0]=";";S[1]="separator";}}y=x[s][0];if(T===true&&u.types[$-1]!=="end"&&u.types[$]==="comment"&&u.types[$+1]!=="comment"&&s<n-1){$=$+1;}if(y<$){do{if(T===false&&s===n-1&&y===$-2&&u.token[y]===","&&u.lexer[y]==="script"&&u.types[y+1]==="comment"){e=e+1;}else {const k=se(null);k.begin=u.begin[y];k.ender=u.ender[y];k.lexer=u.lexer[y];k.lines=u.lines[y];k.stack=u.stack[y];k.token=u.token[y];k.types=u.types[y];this.push(l,k,"");e=e+1;}if(u.token[y]===S[0]&&(T===true||u.begin[y]===u.begin[x[s][0]])){t=true;}else if(u.token[y]!==S[0]&&u.types[y]!=="comment"){t=false;}y=y+1;}while(y<$)}if(t===false&&l.token[l.token.length-1]!=="x;"&&(T===true||s<n-1)){y=l.types.length-1;if(l.types[y]==="comment"){do{y=y-1;}while(y>0&&l.types[y]==="comment")}y=y+1;this.splice({data:l,howmany:0,index:y,record:{begin:F,ender:this.count,lexer:l.lexer[y-1],lines:0,stack:U,token:S[0],types:S[1]}});e=e+1;}s=s+1;}while(s<n);this.splice({data:u,howmany:e,index:f+1});this.linesSpace=g;this.concat(u,l);}}}pop(u){const f=se(null);f.begin=u.begin.pop();f.ender=u.ender.pop();f.lexer=u.lexer.pop();f.lines=u.lines.pop();f.stack=u.stack.pop();f.token=u.token.pop();f.types=u.types.pop();if(u===this.data)this.count=this.count-1;return f}push(u,f,s){const y=()=>{let e=this.count;const a=u.begin[e];if((u.lexer[e]==="script"||u.lexer[e]==="style")&&z.options[u.lexer[e]].objectSort===true){return}do{if(u.begin[e]===a||u.begin[u.begin[e]]===a&&u.types[e].indexOf("attribute")>-1&&u.types[e].indexOf("attribute_end")<0){u.ender[e]=this.count;}else {e=u.begin[e];}e=e-1;}while(e>a);if(e>-1)u.ender[e]=this.count;};this.datanames.forEach(e=>u[e].push(f[e]));if(u===this.data){this.count=this.count+1;this.linesSpace=0;if(f.lexer!=="style"){if(s.replace(/(\{|\}|@|<|>|%|#|)/g,"")===""){s=f.types==="else"?"else":s=f.token;}}if(f.types==="start"||f.types.indexOf("_start")>0){this.structure.push([s,this.count]);}else if(f.types==="end"||f.types.indexOf("_end")>0){let e=0;if(this.structure.length>2&&(u.types[this.structure[this.structure.length-1][1]]==="else"||u.types[this.structure[this.structure.length-1][1]].indexOf("_else")>0)&&(u.types[this.structure[this.structure.length-2][1]]==="start"||u.types[this.structure[this.structure.length-2][1]].indexOf("_start")>0)&&(u.types[this.structure[this.structure.length-2][1]+1]==="else"||u.types[this.structure[this.structure.length-2][1]+1].indexOf("_else")>0)){this.structure.pop();u.begin[this.count]=this.structure[this.structure.length-1][1];u.stack[this.count]=this.structure[this.structure.length-1][0];u.ender[this.count-1]=this.count;e=u.ender[u.begin[this.count]+1];}y();if(e>0)u.ender[u.begin[this.count]+1]=e;this.structure.pop();}else if(f.types==="else"||f.types.indexOf("_else")>0){if(s==="")s="else";if(this.count>0&&(u.types[this.count-1]==="start"||u.types[this.count-1].indexOf("_start")>0)){this.structure.push([s,this.count]);}else {y();if(s===""){this.structure[this.structure.length-1]=["else",this.count];}else {this.structure[this.structure.length-1]=[s,this.count];}}}}}safeSort(u,f,s){if(Le(u)===false)return u;if(f==="normal"){return ze.apply({array:u,recursive:s},u)}else if(f==="descend"){return Be.apply({recursive:s},u)}return Ie.apply({recursive:s},u)}sortCorrection(u,f){let s=u;let y=-1;const e=this.data;const a=[];const d=this.structure.length<2?[-1]:[this.structure[this.structure.length-2][1]];do{if(s>0&&e.types[s].indexOf("attribute")>-1&&e.types[s].indexOf("end")<0&&e.types[s-1].indexOf("start")<0&&e.types[s-1].indexOf("attribute")<0&&e.lexer[s]==="markup"){d.push(s-1);}if(s>0&&e.types[s-1].indexOf("attribute")>-1&&e.types[s].indexOf("attribute")<0&&e.lexer[d[d.length-1]]==="markup"&&e.types[d[d.length-1]].indexOf("start")<0){d.pop();}if(e.begin[s]!==d[d.length-1]){if(d.length>0){e.begin[s]=d[d.length-1];}else {e.begin[s]=-1;}}if(e.types[s].indexOf("else")>-1){if(d.length>0){d[d.length-1]=s;}else {d.push(s);}}if(e.types[s].indexOf("end")>-1)d.pop();if(e.types[s].indexOf("start")>-1)d.push(s);s=s+1;}while(s<f);s=f;do{s=s-1;if(e.types[s].indexOf("end")>-1){a.push(s);y=y+1;}e.ender[s]=y>-1?a[y]:-1;if(e.types[s].indexOf("start")>-1){a.pop();y=y-1;}}while(s>u)}spacer(u){this.linesSpace=1;do{if(u.array[u.index]==="\n"){this.linesSpace=this.linesSpace+1;this.lineNumber=this.lineNumber+1;}if(/\s/.test(u.array[u.index+1])===false)break;u.index=u.index+1;}while(u.index<u.end);return u.index}splice(u){const f=[this.data.begin[this.count],this.data.token[this.count]];if(u.record!==void 0&&u.record.token!==""){for(const s of this.datanames){u.data[s].splice(u.index,u.howmany,u.record[s]);}if(u.data===this.data){this.count=this.count-u.howmany+1;if(f[0]!==this.data.begin[this.count]||f[1]!==this.data.token[this.count]){this.linesSpace=0;}}return}for(const s of this.datanames){u.data[s].splice(u.index,u.howmany);}if(u.data===this.data){this.count=this.count-u.howmany;this.linesSpace=0;}}wrapCommentBlock(u){let f=u.start;let s=0;let y=0;let e=0;let a=0;let d=[];let t="";let H="";let $=false;let n=false;let x=false;let F=false;let i="";let T=u.terminator.length-1;let S=u.terminator.charAt(T);let g=0;const{wrap:L,crlf:U,preserveComment:G}=z.options;const l=[];const k=[];const b=U===true?"\r\n":"\n";const h=K=>`\\${K}`;const A=/(\/|\\|\||\*|\[|\]|\{|\})/g;const j=/{%-?\s*|\s*-?%}/g;const M=new RegExp(`\\s*${u.terminator.replace(j,K=>{if(K.charCodeAt(0)===123)return "{%-?\\s*";return "\\s*-?%}"})}$`);const V=u.opening.replace(A,h);const C=new RegExp(`^(${V}\\s*@prettify-ignore-start)`);const _=new RegExp(`(${V}\\s*)`);const X=N(u.opening[0],123)&&N(u.opening[1],37);function te(){if(/^\s+$/.test(d[s+1])||d[s+1]===""){do{s=s+1;}while(s<a&&(/^\s+$/.test(d[s+1])||d[s+1]===""))}if(s<a-1)k.push("");}do{l.push(u.chars[f]);if(u.chars[f]==="\n")this.lineNumber=this.lineNumber+1;if(u.chars[f]===S&&u.chars.slice(f-T,f+1).join("")===u.terminator)break;f=f+1;}while(f<u.end);i=l.join("");if(C.test(i)===true){let K="\n";f=f+1;do{l.push(u.chars[f]);if(l.slice(l.length-20).join("")==="@prettify-ignore-end"){if(X){const W=u.chars.indexOf("{",f);if(N(u.chars[W+1],37)){const I=u.chars.slice(W,u.chars.indexOf("}",W+1)+1).join("");if(M.test(I))u.terminator=I;}}f=f+1;break}f=f+1;}while(f<u.end);s=f;T=u.opening.length-1;S=u.opening.charAt(T);do{if(u.opening==="/*"&&u.chars[s-1]==="/"&&(u.chars[s]==="*"||u.chars[s]==="/"))break;if(u.opening!=="/*"&&u.chars[s]===S&&u.chars.slice(s-T,s+1).join("")===u.opening)break;s=s-1;}while(s>u.start);if(u.opening==="/*"&&u.chars[s]==="*"){K="*/";}else if(u.opening!=="/*"){K=u.terminator;}T=K.length-1;S=K.charAt(T);if(K!=="\n"||u.chars[f]!=="\n"){do{l.push(u.chars[f]);if(K==="\n"&&u.chars[f+1]==="\n")break;if(u.chars[f]===S&&u.chars.slice(f-T,f+1).join("")===K)break;f=f+1;}while(f<u.end)}if(u.chars[f]==="\n")f=f-1;i=l.join("").replace(/\s+$/,"");return [i,f]}if(G===true||L<1||f===u.end||i.length<=L&&i.indexOf("\n")<0||u.opening==="/*"&&i.indexOf("\n")>0&&i.replace("\n","").indexOf("\n")>0&&/\n(?!(\s*\*))/.test(i)===false){return [i,f]}s=u.start;if(s>0&&u.chars[s-1]!=="\n"&&/\s/.test(u.chars[s-1])){do{s=s-1;}while(s>0&&u.chars[s-1]!=="\n"&&/\s/.test(u.chars[s-1]))}t=u.chars.slice(s,u.start).join("");const Q=new RegExp("\n"+t,"g");d=i.replace(/\r\n/g,"\n").replace(Q,"\n").split("\n");a=d.length;d[0]=d[0].replace(_,"");d[a-1]=d[a-1].replace(M,"");if(a<2)d=d[0].split(" ");if(d[0]===""){d[0]=u.opening;}else {d.splice(0,0,u.opening);}a=d.length;s=0;do{H=s<a-1?d[s+1].replace(/^\s+/,""):"";if(/^\s+$/.test(d[s])===true||d[s]===""){te();}else if(d[s].slice(0,4)==="    "){k.push(d[s]);}else if(d[s].replace(/^\s+/,"").length>L&&d[s].replace(/^\s+/,"").indexOf(" ")>L){d[s]=d[s].replace(/^\s+/,"");y=d[s].indexOf(" ");k.push(d[s].slice(0,y));d[s]=d[s].slice(y+1);s=s-1;}else {d[s]=u.opening==="/*"&&d[s].indexOf("/*")!==0?`   ${d[s].replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}`:`${d[s].replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}`;g=s<1?L-(u.opening.length+1):L;y=d[s].length;e=d[s].replace(/^\s+/,"").indexOf(" ");if(y>g&&e>0&&e<g){y=g;do{y=y-1;if(/\s/.test(d[s].charAt(y))&&y<=L)break}while(y>0);if(d[s].slice(0,4)!=="    "&&/^\s*(\*|-)\s/.test(d[s])===true&&/^\s*(\*|-)\s/.test(d[s+1])===false){d.splice(s+1,0,"* ");}if(d[s].slice(0,4)!=="    "&&/^\s*\d+\.\s/.test(d[s])===true&&/^\s*\d+\.\s/.test(d[s+1])===false){d.splice(s+1,0,"1. ");}if(y<4){k.push(d[s]);F=true;}else if(s===a-1){k.push(d[s].slice(0,y));d[s]=d[s].slice(y+1);F=true;s=s-1;}else if(/^\s+$/.test(d[s+1])===true||d[s+1]===""){k.push(d[s].slice(0,y));d[s]=d[s].slice(y+1);$=true;s=s-1;}else if(d[s+1].slice(0,4)!=="    "&&/^\s*(\*|-)\s/.test(d[s+1])){k.push(d[s].slice(0,y));d[s]=d[s].slice(y+1);n=true;s=s-1;}else if(d[s+1].slice(0,4)!=="    "&&/^\s*\d+\.\s/.test(d[s+1])){k.push(d[s].slice(0,y));d[s]=d[s].slice(y+1);x=true;s=s-1;}else if(d[s+1].slice(0,4)==="    "){k.push(d[s].slice(0,y));d[s]=d[s].slice(y+1);F=true;s=s-1;}else if(y+H.length>L&&H.indexOf(" ")<0){k.push(d[s].slice(0,y));d[s]=d[s].slice(y+1);F=true;s=s-1;}else if(d[s].replace(/^\s+/,"").indexOf(" ")<L){d[s+1]=d[s].length>L?d[s].slice(y+1)+b+d[s+1]:`${d[s].slice(y+1)} ${d[s+1]}`;}if($===false&&n===false&&x===false&&F===false){d[s]=d[s].slice(0,y);}}else if(d[s+1]!==void 0&&(d[s].length+H.indexOf(" ")>L&&H.indexOf(" ")>0||d[s].length+H.length>L&&H.indexOf(" ")<0)){k.push(d[s]);s=s+1;}else if(d[s+1]!==void 0&&/^\s+$/.test(d[s+1])===false&&d[s+1]!==""&&d[s+1].slice(0,4)!=="    "&&/^\s*(\*|-|(\d+\.))\s/.test(d[s+1])===false){d[s+1]=`${d[s]} ${d[s+1]}`;$=true;}if(F===false&&n===false&&x===false){if($===true){$=false;}else if(/^\s*(\*|-|(\d+\.))\s*$/.test(d[s])===false){if(s<a-1&&d[s+1]!==""&&/^\s+$/.test(d[s])===false&&d[s+1].slice(0,4)!=="    "&&/^\s*(\*|-|(\d+\.))\s/.test(d[s+1])===false){d[s]=`${d[s]} ${d[s+1]}`;d.splice(s+1,1);a=a-1;s=s-1;}else {if(u.opening==="/*"&&d[s].indexOf("/*")!==0){k.push(`   ${d[s].replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}`);}else {k.push(`${d[s].replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}`);}}}}F=false;n=false;x=false;}s=s+1;}while(s<a);if(k.length>0){if(k[k.length-1].length>L-(u.terminator.length+1)){k.push(u.terminator);}else {k[k.length-1]=`${k[k.length-1]} ${u.terminator}`;}i=k.join(b);}else {d[d.length-1]=d[d.length-1]+u.terminator;i=d.join(b);}return [i,f]}wrapCommentLine(u){let f=u.start;let s=0;let y="";let e=[];const{wrap:a,preserveComment:d}=z.options;function t(){let $="";do{s=s+1;if(u.chars[s+1]==="\n")return}while(s<u.end&&/\s/.test(u.chars[s])===true);if(u.chars[s]+u.chars[s+1]==="//"){e=[];do{e.push(u.chars[s]);s=s+1;}while(s<u.end&&u.chars[s]!=="\n");$=e.join("");if(/^\/\/ (\*|-|(\d+\.))/.test($)===false&&$.slice(0,6)!=="//    "&&/^\/\/\s*$/.test($)===false){y=`${y} ${$.replace(/(^\/\/\s*)/,"").replace(/\s+$/,"")}`;f=s-1;t();}}}const H=()=>{const $=[];const n=se(null);n.ender=-1;n.types="comment";n.lexer=u.lexer;n.lines=this.linesSpace;if(this.count>-1){n.begin=this.structure[this.structure.length-1][1];n.stack=this.structure[this.structure.length-1][0];n.token=this.data.token[this.count];}else {n.begin=-1;n.stack="global";n.token="";}let x=0;let F=0;y=y.replace(/\s+/g," ").replace(/\s+$/,"");F=y.length;if(a>F)return;do{x=a;if(y.charAt(x)!==" "){do{x=x-1;}while(x>0&&y.charAt(x)!==" ");if(x<3){x=a;do{x=x+1;}while(x<F-1&&y.charAt(x)!==" ")}}$.push(y.slice(0,x));y=`// ${y.slice(x).replace(/^\s+/,"")}`;F=y.length;}while(a<F);x=0;F=$.length;do{n.token=$[x];this.push(this.data,n,"");n.lines=2;this.linesSpace=2;x=x+1;}while(x<F)};do{e.push(u.chars[f]);f=f+1;}while(f<u.end&&u.chars[f]!=="\n");if(f===u.end){u.chars.push("\n");}else {f=f-1;}y=e.join("").replace(/\s+$/,"");if(/^(\/\/\s*@prettify-ignore-start\b)/.test(y)===true){let $="\n";f=f+1;do{e.push(u.chars[f]);f=f+1;}while(f<u.end&&(u.chars[f-1]!=="d"||u.chars[f-1]==="d"&&e.slice(e.length-20).join("")!=="@prettify-ignore-end"));s=f;do{}while(s>u.start&&u.chars[s-1]==="/"&&(u.chars[s]==="*"||u.chars[s]==="/"));if(u.chars[s]==="*")$="*/";if($!=="\n"||u.chars[f]!=="\n"){do{e.push(u.chars[f]);if($==="\n"&&u.chars[f+1]==="\n")break;f=f+1;}while(f<u.end&&($==="\n"||$==="*/"&&(u.chars[f-1]!=="*"||u.chars[f]!=="/")))}if(u.chars[f]==="\n")f=f-1;y=e.join("").replace(/\s+$/,"");return [y,f]}if(y==="//"||y.slice(0,6)==="//    "||d===true){return [y,f]}y=y.replace(/(\/\/\s*)/,"// ");if(a<1||f===u.end-1&&this.data.begin[this.count]<1)return [y,f];s=f+1;t();H();return [y,f]}};z.lexers.style=function c(u){const{options:f}=z;let s=0;let y="";let e="";const a=r.data;const d=u.split("");const t=u.length;const H=[];const $=[];function n(G){const l=se(null);l.begin=r.structure[r.structure.length-1][1];l.ender=-1;l.lexer="style";l.lines=r.linesSpace;l.stack=r.structure[r.structure.length-1][0];l.token=e;l.types=y;r.push(a,l,G);}const x=function G(l){const k=l;do{l=l-1;}while(d[l]==="\\"&&l>0);if((k-l)%2===1){return true}return false};function F(G){const l=G.replace(/\s*!important/," !important").split("");const k=[];const b=/-?transition$/.test(a.token[r.count-2]);const h=function le(ne){return ne};const A=function le(ne){ne=ne.replace(/\s*/g,"");if(/\/\d/.test(ne)===true&&G.indexOf("url(")===0)return ne;return ` ${ne.charAt(0)} ${ne.charAt(1)}`};const j=function le(ne){if(f.style.noLeadZero===true){const ke=function we(_e){return _e.replace(/0+/,"")};return ne.replace(/^-?\D0+(\.|\d)/,ke)}if(/0*\./.test(ne)===true)return ne.replace(/0*\./,"0.");if(/0+/.test(/\d+/.exec(ne)[0])===true){if(/^\D*0+\D*$/.test(ne)===true)return ne.replace(/0+/,"0");return ne.replace(/\d+/.exec(ne)[0],/\d+/.exec(ne)[0].replace(/^0+/,""))}return ne};const M=function le(ne){return ne.replace(",",", ")};const V=function le(ne){return `${ne} `};const C=function le(){const ne=W-1;let ke=ne;if(ne<1){return true}do{ke=ke-1;}while(ke>0&&l[ke]==="\\");if((ne-ke)%2===1){return true}return false};const _=/^-?0+\.\d+[a-z]/;const X=/^-?\.\d+[a-z]/;const te=/(\s|\(|,)-?0+\.?\d+([a-z]|\)|,|\s)/g;const Q=/(\s|\(|,)-?\.?\d+([a-z]|\)|,|\s)/g;const K="%|cap|ch|cm|deg|dpcm|dpi|dppx|em|ex|fr|grad|Hz|ic|in|kHz|lh|mm|ms|mS|pc|pt|px|Q|rad|rem|rlh|s|turn|vb|vh|vi|vmax|vmin|vw";let W=0;let I=0;let Z="";let ge=l.length;let R=[];if(W<ge){do{R.push(l[W]);if(l[W-1]!=="\\"||C()===false){if(Z===""){if(l[W]==='"'){Z='"';I=I+1;}else if(l[W]==="'"){Z="'";I=I+1;}else if(l[W]==="("){Z=")";I=I+1;}else if(l[W]==="["){Z="]";I=I+1;}}else if(l[W]==="("&&Z===")"||l[W]==="["&&Z==="]"){I=I+1;}else if(l[W]===Z){I=I-1;if(I===0){Z="";}}}if(Z===""&&l[W]===" "){R.pop();k.push(h(R.join("")));R=[];}W=W+1;}while(W<ge)}k.push(h(R.join("")));ge=k.length;W=0;if(W<ge){do{if(f.style.noLeadZero===true&&_.test(k[W])===true){k[W]=k[W].replace(/0+\./,".");}else if((f.style.noLeadZero===false||f.style.noLeadZero===void 0)&&X.test(k[W])===true){k[W]=k[W].replace(".","0.");}else if(te.test(k[W])===true||Q.test(k[W])===true){k[W]=k[W].replace(te,j).replace(Q,j);}else if(/^(0+([a-z]{2,3}|%))$/.test(k[W])===true&&b===false){k[W]="0";}else if(/^(0+)/.test(k[W])===true){k[W]=k[W].replace(/0+/,"0");if(/\d/.test(k[W].charAt(1))===true){k[W]=k[W].substr(1);}}else if(/^url\((?!('|"))/.test(k[W])===true&&k[W].charAt(k[W].length-1)===")"){Z=k[W].charAt(k[W].indexOf("url(")+4);if(Z!=="@"&&Z!=="{"&&Z!=="<"){if(f.style.quoteConvert==="double"){k[W]=k[W].replace(/url\(/,'url("').replace(/\)$/,'")');}else {k[W]=k[W].replace(/url\(/,"url('").replace(/\)$/,"')");}}}if(/^(\+|-)?\d+(\.\d+)?(e-?\d+)?\D+$/.test(k[W])===true){if(K.indexOf(k[W].replace(/(\+|-)?\d+(\.\d+)?(e-?\d+)?/,""))<0){k[W]=k[W].replace(/(\+|-)?\d+(\.\d+)?(e-?\d+)?/,V);}}if(/^\w+\(/.test(k[W])===true&&k[W].charAt(k[W].length-1)===")"&&(k[W].indexOf("url(")!==0||k[W].indexOf("url(")===0&&k[W].indexOf(" ")>0)){k[W]=k[W].replace(/,\S/g,M);}W=W+1;}while(W<ge)}Z=k.join(" ");return Z.charAt(0)+Z.slice(1).replace(/\s*(\/|\+|\*)\s*(\d|\$)/,A)}const i=function G(){let l=s;let k=0;const b=[];let h="";let A=null;const j=[];const M=f.style.quoteConvert===void 0?"none":f.style.quoteConvert;const V=function C(){b.push(d[l]);if(/\s/.test(d[l+1])===true){do{l=l+1;}while(l<t&&/\s/.test(d[l+1])===true)}};if(l<t){do{if(d[l]==='"'||d[l]==="'"){if(A===null){A=false;}if(j[j.length-1]===d[l]&&(d[l-1]!=="\\"||x(l-1)===false)){j.pop();if(M==="double"){d[l]='"';}else if(M==="single"){d[l]="'";}}else if(j[j.length-1]!=='"'&&j[j.length-1]!=="'"&&(d[l-1]!=="\\"||x(l-1)===false)){j.push(d[l]);if(M==="double"){d[l]='"';}else if(M==="single"){d[l]="'";}}else if(d[l-1]==="\\"&&M!=="none"){if(x(l-1)===true){if(M==="double"&&d[l]==="'"){b.pop();}else if(M==="single"&&d[l]==='"'){b.pop();}}}else if(M==="double"&&d[l]==='"'){d[l]='\\"';}else if(M==="single"&&d[l]==="'"){d[l]="\\'";}b.push(d[l]);}else if(d[l-1]!=="\\"||x(l-1)===false){if(d[l]==="("){if(A===null){A=true;}j.push(")");V();}else if(d[l]==="["){A=false;j.push("]");V();}else if((d[l]==="#"||d[l]==="@")&&d[l+1]==="{"){A=false;b.push(d[l]);l=l+1;j.push("}");V();}else if(d[l]===j[j.length-1]){b.push(d[l]);j.pop();}else {b.push(d[l]);}}else {b.push(d[l]);}if(r.structure[r.structure.length-1][0]==="map"&&j.length===0&&(d[l+1]===","||d[l+1]===")")){if(d[l+1]===")"&&a.token[r.count]==="("){r.pop(a);r.structure.pop();b.splice(0,0,"(");}else {break}}if(d[l+1]===":"){k=l;if(/\s/.test(d[k])===true){do{k=k-1;}while(/\s/.test(d[k])===true)}h=d.slice(k-6,k+1).join("");if(h.indexOf("filter")===h.length-6||h.indexOf("progid")===h.length-6){h="filter";}}if(j.length===0){if(d[l+1]===";"&&x(l+1)===true||d[l+1]===":"&&d[l]!==":"&&d[l+2]!==":"&&h!=="filter"&&h!=="progid"||d[l+1]==="}"||d[l+1]==="{"||d[l+1]==="/"&&(d[l+2]==="*"||d[l+2]==="/")){k=b.length-1;if(/\s/.test(b[k])===true){do{k=k-1;l=l-1;b.pop();}while(/\s/.test(b[k])===true)}break}if(d[l+1]===","){break}}l=l+1;}while(l<t)}s=l;if(r.structure[r.structure.length-1][0]==="map"&&b[0]==="("){H[H.length-1]=H[H.length-1]-1;}e=b.join("").replace(/\s+/g," ").replace(/^\s/,"").replace(/\s$/,"");if(A===true){e=e.replace(/\s+\(/g,"(").replace(/\s+\)/g,")").replace(/,\(/g,", (");}if(r.count>-1&&a.token[r.count].indexOf("extend(")===0){y="pseudo";}else if(A===true&&/\d/.test(e.charAt(0))===false&&/^rgba?\(/.test(e)===false&&e.indexOf("url(")!==0&&(e.indexOf(" ")<0||e.indexOf(" ")>e.indexOf("("))&&e.charAt(e.length-1)===")"){if(a.token[r.count]===":"){y="value";}else {e=e.replace(/,\u0020?/g,", ");y="function";}e=F(e);}else if(r.count>-1&&`"'`.indexOf(a.token[r.count].charAt(0))>-1&&a.types[r.count]==="variable"){y="item";}else if(b[0]==="@"||b[0]==="$"){if(a.types[r.count]==="colon"&&f.language==="css"&&(a.types[r.count-1]==="property"||a.types[r.count-1]==="variable")){y="value";}else if(r.count>-1){y="item";h=a.token[r.count];l=h.indexOf("(");if(h.charAt(h.length-1)===")"&&l>0){h=h.slice(l+1,h.length-1);a.token[r.count]=a.token[r.count].slice(0,l+1)+F(h)+")";}}e=F(e);}else {y="item";}n("");};const T=function G(l){let k=r.count;let b=0;let h="";const A=[];const j=function V(){if(a.types[k]==="comment"||a.types[k]==="ignore"){do{k=k-1;A.push(a.token[k]);}while(k>0&&a.lexer[k]==="style"&&(a.types[k]==="comment"||a.types[k]==="ignore"))}b=k-1;if(a.types[b]==="comment"||a.types[b]==="ignore"){do{b=b-1;}while(b>0&&a.lexer[k]==="style"&&(a.types[b]==="comment"||a.types[b]==="ignore"))}h=a.token[k].charAt(0);};const M=function V(C){let _=C;const X=a.begin[_];a.token[C]=a.token[C].replace(/\s*&/," &").replace(/(\s*>\s*)/g," > ").replace(/:\s+/g,": ").replace(/^(\s+)/,"").replace(/(\s+)$/,"").replace(/\s+::\s+/,"::");if(a.token[_-1]===","||a.token[_-1]===":"||a.types[_-1]==="comment"){do{_=_-1;if(a.begin[_]===X){if(a.token[_]===";"){break}if(a.token[_]!==","&&a.types[_]!=="comment"){a.types[_]="selector";}if(a.token[_]===":"){a.token[_-1]=`${a.token[_-1]}:${a.token[_+1]}`;r.splice({data:a,howmany:2,index:_});}}else {break}}while(_>0)}_=r.count;if(f.style.sortSelectors===true&&a.token[_-1]===","){const te=[a.token[_]];do{_=_-1;if(a.types[_]==="comment"||a.types[_]==="ignore"){do{_=_-1;}while(_>0&&(a.types[_]==="comment"||a.types[_]==="ignore"))}if(a.token[_]===","){_=_-1;}te.push(a.token[_]);}while(_>0&&(a.token[_-1]===","||a.types[_-1]==="selector"||a.types[_-1]==="comment"||a.types[_-1]==="ignore"));te.sort();_=r.count;a.token[_]=te.pop();do{_=_-1;if(a.types[_]==="comment"||a.types[_]==="ignore"){do{_=_-1;}while(_>0&&(a.types[_]==="comment"||a.types[_]==="ignore"))}if(a.token[_]===","){_=_-1;}a.token[_]=te.pop();}while(_>0&&(a.token[_-1]===","||a.token[_-1]==="selector"||a.types[_-1]==="comment"||a.types[_-1]==="ignore"))}k=r.count;j();};j();if(l==="start"&&(a.types[k]==="value"||a.types[k]==="variable")){a.types[k]="item";}if(a.lexer[r.count-1]!=="style"||b<0){if(l==="colon"){if(h==="$"||h==="@"){a.types[k]="variable";}else {a.types[k]="property";}}else if(a.lexer[k]==="style"){a.types[k]="selector";M(k);}}else if(l==="start"&&a.types[k]==="function"&&a.lexer[k]==="style"){a.types[k]="selector";M(k);}else if(a.types[k]==="item"&&a.lexer[k]==="style"){if(l==="start"){M(k);a.types[k]="selector";if(a.token[k]===":"){a.types[b]="selector";}if(a.token[k].indexOf("=\u201C")>0){r.error=`Quote looking character (\u201C, \\201c) used instead of actual quotes on line number ${r.lineNumber}`;}else if(a.token[k].indexOf("=\u201D")>0){r.error=`Quote looking character (\u201D, \\201d) used instead of actual quotes on line number ${r.lineNumber}`;}}else if(l==="end"){if(h==="$"||h==="@"){a.types[k]="variable";}else {a.types[k]="value";}a.token[k]=F(a.token[k]);}else if(l==="separator"){if(a.types[b]==="colon"||a.token[b]===","||a.token[b]==="{"){if(d[s]!==";"&&(a.types[b]==="selector"||a.token[b]==="{")){a.types[k]="selector";M(k);}else if(a.token[k].charAt(0)==="$"||a.token[k].charAt(0)==="@"){a.types[k]="variable";}else {a.types[k]="value";}a.token[k]=F(a.token[k]);if(a.token[k].charAt(0)==="\u201C"){r.error=`Quote looking character (\u201C, \\201c) used instead of actual quotes on line number ${r.lineNumber}`;}else if(a.token[k].charAt(0)==="\u201D"){r.error=`Quote looking character (\u201D, \\201d) used instead of actual quotes on line number ${r.lineNumber}`;}}else {if(h==="$"||h==="@"){a.types[k]="variable";}else if(a.types[b]==="value"||a.types[b]==="variable"){a.token[b]=a.token[b]+a.token[k];r.pop(a);}else {a.types[k]="value";}}}else if(l==="colon"){if(h==="$"||h==="@"){a.types[k]="variable";}else {a.types[k]="property";}}else if(a.token[b].charAt(0)==="@"&&(a.types[b-2]!=="variable"&&a.types[b-2]!=="property"||a.types[b-1]==="separator")){a.types[b]="variable";y="variable";a.token[b]=F(a.token[b]);}}};const S=function G(){let l=r.count;do{l=l-1;}while(l>0&&a.types[l]==="comment");if(a.token[l]===";"){return}r.splice({data:a,howmany:0,index:l+1,record:{begin:r.structure[r.structure.length-1][1],ender:-1,lexer:"style",lines:r.linesSpace,stack:r.structure[r.structure.length-1][0],token:";",types:"separator"}});};const g=function G(l,k){let b="";let h="";let A=l.length;let j=0;const M=[];const V=function C(_){const X=a.types[r.count-1];if(y==="item"){if(X==="colon"){a.types[r.count]="value";}else {T(X);}}y=_;if(y.indexOf("start")>-1||y.indexOf("else")>-1){n(e);}else {n("");}};$[$.length-1]=true;if(s<t){do{M.push(d[s]);if(b===""){if(d[s]==='"'){b='"';}else if(d[s]==="'"){b="'";}else if(d[s]==="/"){if(d[s+1]==="/"){b="/";}else if(d[s+1]==="*"){b="*";}}else if(d[s+1]===k.charAt(0)){do{j=j+1;s=s+1;M.push(d[s]);}while(s<t&&j<k.length&&d[s+1]===k.charAt(j));if(j===k.length){b=M.join("");if(/\s/.test(b.charAt(A))===true){do{A=A+1;}while(/\s/.test(b.charAt(A))===true)}j=A;do{j=j+1;}while(j<k.length&&/\s/.test(b.charAt(j))===false);if(j===b.length){j=j-k.length;}if(l==="{%"){if(b.indexOf("{%-")===0){b=b.replace(/^(\{%-\s*)/,"{%- ").replace(/(\s*-%\})$/," -%}").replace(/(\s*%\})$/," %}");h=b.slice(4);}else {b=b.replace(/^(\{%\s*)/,"{% ").replace(/(\s*%\})$/," %}").replace(/(\s*-%\})$/," -%}");h=b.slice(3);}}if(l==="{{"){b=b.replace(/^(\{\{\s*)/,"{{ ").replace(/^(\{\{-\s*)/,"{{- ").replace(/(\s*-\}\})$/," -}}").replace(/(\s*\}\})$/," }}");}if(y==="item"&&a.types[r.count-1]==="colon"&&(a.types[r.count-2]==="property"||a.types[r.count-2]==="variable")){y="value";a.types[r.count]="value";if(Number.isNaN(Number(a.token[r.count]))===true&&a.token[r.count].charAt(a.token[r.count].length-1)!==")"){a.token[r.count]=a.token[r.count]+b;}else {a.token[r.count]=a.token[r.count]+" "+b;}return}e=b;if(l==="{%"){const C=["autoescape","block","capture","case","comment","embed","filter","for","form","if","macro","paginate","raw","sandbox","spaceless","tablerow","unless","verbatim"];let _=C.length-1;h=h.slice(0,h.indexOf(" "));if(h.indexOf("(")>0){h=h.slice(0,h.indexOf("("));}if(h==="else"||h==="elseif"||h==="when"||h==="elsif"){V("template_else");return}_=C.length-1;if(_>-1){do{if(h===C[_]){V("template_start");return}if(h==="end"+C[_]){V("template_end");return}_=_-1;}while(_>-1)}}else if(l==="{{"){let C=b.slice(2);const _=C.length;let X=0;do{X=X+1;}while(X<_&&/\s/.test(C.charAt(X))===false&&C.charAt(A)!=="(");C=C.slice(0,X);if(C.charAt(C.length-2)==="}"){C=C.slice(0,C.length-2);}if(C==="end"){V("template_end");return}if(C==="block"||C==="define"||C==="form"||C==="if"||C==="range"||C==="with"){V("template_start");return}}V("template");return}j=0;}}else if(b===d[s]){if(b==='"'||b==="'"){b="";}else if(b==="/"&&(d[s]==="\r"||d[s]==="\n")){b="";}else if(b==="*"&&d[s+1]==="/"){b="";}}s=s+1;}while(s<t)}};const L=function G(l){const k=l===true?r.wrapCommentLine({chars:d,end:t,lexer:"style",opening:"//",start:s,terminator:"\n"}):r.wrapCommentBlock({chars:d,end:t,lexer:"style",opening:"/*",start:s,terminator:"*/"});e=k[0];y=/^(\/\*\s*parse-ignore-start)/.test(e)===true?"ignore":"comment";n("");s=k[1];};const U=function G(){const l=r.linesSpace;const k={data:{margin:["","","","",false],padding:["","","","",false]},last:{margin:0,padding:0},removes:[]};const b=r.structure[r.structure.length-1][1];const h=function V(C){if(a.token[j-2]===C){const _=a.token[j].replace(/\s*!important\s*/g,"").split(" ");const X=_.length;if(a.token[j].indexOf("!important")>-1){k.data[C[4]]=true;}if(X>3){if(k.data[C][0]===""){k.data[C][0]=_[0];}if(k.data[C][1]===""){k.data[C][1]=_[1];}if(k.data[C][2]===""){k.data[C][2]=_[2];}if(k.data[C][3]===""){k.data[C][3]=_[3];}}else if(X>2){if(k.data[C][0]===""){k.data[C][0]=_[0];}if(k.data[C][1]===""){k.data[C][1]=_[1];}if(k.data[C][2]===""){k.data[C][2]=_[2];}if(k.data[C][3]===""){k.data[C][3]=_[1];}}else if(X>1){if(k.data[C][0]===""){k.data[C][0]=_[0];}if(k.data[C][1]===""){k.data[C][1]=_[1];}if(k.data[C][2]===""){k.data[C][2]=_[0];}if(k.data[C][3]===""){k.data[C][3]=_[1];}}else {if(k.data[C][0]===""){k.data[C][0]=_[0];}if(k.data[C][1]===""){k.data[C][1]=_[0];}if(k.data[C][2]===""){k.data[C][2]=_[0];}if(k.data[C][3]===""){k.data[C][3]=_[0];}}}else if(a.token[j-2]===`${C}-bottom`){if(k.data[C][2]==="")k.data[C][2]=a.token[j];}else if(a.token[j-2]===`${C}-left`){if(k.data[C][3]==="")k.data[C][3]=a.token[j];}else if(a.token[j-2]===`${C}-right`){if(k.data[C][1]==="")k.data[C][1]=a.token[j];}else if(a.token[j-2]===`${C}-top`){if(k.data[C][0]==="")k.data[C][0]=a.token[j];}else {return}k.removes.push([j,C]);k.last[C]=j;};const A=function V(){let C=0;let _="";const X=/^(0+([a-z]+|%))/;const te=k.removes.length;const Q=k.data.margin[0]!==""&&k.data.margin[1]!==""&&k.data.margin[2]!==""&&k.data.margin[3]!=="";const K=k.data.padding[0]!==""&&k.data.padding[1]!==""&&k.data.padding[2]!==""&&k.data.padding[3]!=="";const W=function I(Z){if(X.test(k.data[Z][0])===true)k.data[Z][0]="0";if(X.test(k.data[Z][1])===true)k.data[Z][1]="0";if(X.test(k.data[Z][2])===true)k.data[Z][2]="0";if(X.test(k.data[Z][3])===true)k.data[Z][3]="0";if(k.data[Z][0]===k.data[Z][1]&&k.data[Z][0]===k.data[Z][2]&&k.data[Z][0]===k.data[Z][3]){_=k.data[Z][0];}else if(k.data[Z][0]===k.data[Z][2]&&k.data[Z][1]===k.data[Z][3]&&k.data[Z][0]!==k.data[Z][1]){_=`${k.data[Z][0]} ${k.data[Z][1]}`;}else if(k.data[Z][1]===k.data[Z][3]&&k.data[Z][0]!==k.data[Z][2]){_=`${k.data[Z][0]} ${k.data[Z][1]} ${k.data[Z][2]}`;}else {_=`${k.data[Z][0]} ${k.data[Z][1]} ${k.data[Z][2]} ${k.data[Z][3]}`;}if(k.data[Z[4]]===true)_=`${_.replace(" !important","")} !important`;if(k.last[Z]>r.count){C=b<1?1:b+1;do{if(a.begin[C]===b&&a.types[C]==="value"&&a.token[C-2].indexOf(Z)===0){k.last[Z]=C;break}C=C+1;}while(C<r.count)}a.token[k.last[Z]]=_;a.token[k.last[Z]-2]=Z;};if(te>1&&(Q===true||K===true)){do{if(k.removes[C][0]!==k.last.margin&&k.removes[C][0]!==k.last.padding&&(Q===true&&k.removes[C][1]==="margin"||K===true&&k.removes[C][1]==="padding")){r.splice({data:a,howmany:a.types[k.removes[C][0]+1]==="separator"?4:3,index:k.removes[C][0]-2});}C=C+1;}while(C<te-1)}if(Q===true)W("margin");if(K===true)W("padding");if(M===true){if(b<0){r.error="Brace mismatch. There appears to be more closing braces than starting braces.";}else {r.sortCorrection(b,r.count+1);}}};let j=r.count;let M=false;do{j=j-1;if(a.begin[j]===b){if(a.types[j]==="value"&&a.types[j-2]==="property"){if(a.token[j-2].indexOf("margin")===0){h("margin");}else if(a.token[j-2].indexOf("padding")===0){h("padding");}}}else {M=true;j=a.begin[j];}}while(j>b);A();r.linesSpace=l;};do{if(/\s/.test(d[s])===true){s=r.spacer({array:d,end:t,index:s});}else if(d[s]==="/"&&d[s+1]==="*"){L(false);}else if(d[s]==="/"&&d[s+1]==="/"){L(true);}else if(d[s]==="{"&&d[s+1]==="%"){g("{%","%}");}else if(d[s]==="{"&&d[s+1]==="{"){g("{{","}}");}else if(d[s]==="{"||d[s]==="("&&a.token[r.count]===":"&&a.types[r.count-1]==="variable"){T("start");y="start";e=d[s];if(d[s]==="("){n("map");H.push(0);}else if(a.types[r.count]==="selector"||a.types[r.count]==="variable"){n(a.token[r.count]);}else if(a.types[r.count]==="colon"){n(a.token[r.count-1]);}else {n("block");}$.push(false);}else if(d[s]==="}"||d[s]===")"&&r.structure[r.structure.length-1][0]==="map"&&H[H.length-1]===0){if(d[s]==="}"&&a.types[r.count]==="item"&&a.token[r.count-1]==="{"&&a.token[r.count-2]!==void 0&&a.token[r.count-2].charAt(a.token[r.count-2].length-1)==="@"){a.token[r.count-2]=a.token[r.count-2]+"{"+a.token[r.count]+"}";r.pop(a);r.pop(a);r.structure.pop();}else {if(d[s]===")")H.pop();T("end");if(d[s]==="}"&&a.token[r.count]!==";"){if(a.types[r.count]==="value"||a.types[r.count]==="function"||a.types[r.count]==="variable"&&(a.token[r.count-1]===":"||a.token[r.count-1]===";")){if(f.style.correct===true){e=";";}else {e="x;";}y="separator";n("");}else if(a.types[r.count]==="comment"){S();}}y="end";$.pop();e=d[s];y="end";if(d[s]==="}")U();if(f.style.sortProperties===true&&d[s]==="}")r.objectSort(a);n("");}}else if(d[s]===";"||d[s]===","){if(a.types[r.count-1]==="selector"||a.token[r.count-1]==="}"&&a.types[r.count]!=="function"){T("start");}else {T("separator");}if(a.types[r.count]!=="separator"&&x(s)===true){e=d[s];y="separator";n("");}}else if(d[s]===":"&&a.types[r.count]!=="end"){T("colon");e=":";y="colon";n("");}else {if(r.structure[r.structure.length-1][0]==="map"&&d[s]==="("){H[H.length-1]=H[H.length-1]+1;}i();}s=s+1;}while(s<t);if(f.style.sortProperties===true)r.objectSort(a);return a};z.lexers.script=function c(u){const{options:f}=z;if(f.language==="json"){f.script.quoteConvert="double";}let s=0;let y="";let e="";let a=[];let d=0;let t=-1;let H=-1;let $=[];let n;let x;let F;const i=r.data;const T=r.references;const S=u.length;const g=u.split("");const L=[];const U=[];const G=[];const l=[0,""];const k=[false];const b=["autoescape","block","capture","case","comment","embed","filter","for","form","if","macro","paginate","raw","sandbox","spaceless","tablerow","unless","verbatim"];const h=se(null);h.count=[];h.index=[];h.len=-1;h.word=[];function A(m){let o=0;const p=W(1,false);const v=r.structure.length===0?"":r.structure[r.structure.length-1][0];const w=se(null);w.begin=i.begin[r.count];w.ender=i.begin[r.count];w.lexer=i.lexer[r.count];w.lines=i.lines[r.count];w.stack=i.stack[r.count];w.token=i.token[r.count];w.types=i.types[r.count];if(/^(\/(\/|\*)\s*@ignore\s+start)/.test(y))return;if(e==="start"||e==="type_start")return;if(f.language==="json")return;if(w.token===";"||w.token===","||w.stack==="class"||w.stack==="map"||w.stack==="attribute"||i.types[w.begin-1]==="generic"||p==="{"||v==="initializer"){return}if(w.token==="}"&&i.stack[w.begin-1]==="global"&&i.types[w.begin-1]!=="operator"&&w.stack===i.stack[r.count-1]){return}if(w.stack==="array"&&w.token!=="]")return;if(i.token[i.begin[r.count]]==="{"&&w.stack==="data_type")return;if(w.types!==void 0&&w.types.indexOf("template")>-1&&w.types.indexOf("template_string")<0){return}if(p===";"&&m===false)return;if(i.lexer[r.count-1]!=="script"&&(s<S&&S===z.source.length-1||S<z.source.length-1)){return}if(w.token==="}"&&(w.stack==="function"||w.stack==="if"||w.stack==="else"||w.stack==="for"||w.stack==="do"||w.stack==="while"||w.stack==="switch"||w.stack==="class"||w.stack==="try"||w.stack==="catch"||w.stack==="finally"||w.stack==="block")){if(w.stack==="function"&&(i.stack[w.begin-1]==="data_type"||i.types[w.begin-1]==="type")){o=w.begin;do{o=o-1;}while(o>0&&i.token[o]!==")"&&i.stack[o]!=="arguments");o=i.begin[o];}else {o=i.begin[w.begin-1];}if(i.token[o]==="("){o=o-1;if(i.token[o-1]==="function")o=o-1;if(i.stack[o-1]==="object"||i.stack[o-1]==="switch")return;if(i.token[o-1]!=="="&&i.token[o-1]!=="return"&&i.token[o-1]!==":"){return}}else {return}}if(w.types==="comment"||v==="method"||v==="paren"||v==="expression"||v==="array"||v==="object"||v==="switch"&&w.stack!=="method"&&i.token[i.begin[r.count]]==="("&&i.token[i.begin[r.count]-1]!=="return"&&i.types[i.begin[r.count]-1]!=="operator"){return}if(i.stack[r.count]==="expression"&&(i.token[i.begin[r.count]-1]!=="while"||i.token[i.begin[r.count]-1]==="while"&&i.stack[i.begin[r.count]-2]!=="do")){return}if(p!==""&&"=<>+*?|^:&%~,.()]".indexOf(p)>-1&&m===false)return;if(w.types==="comment"){o=r.count;do{o=o-1;}while(o>0&&i.types[o]==="comment");if(o<1)return;w.token=i.token[o];w.types=i.types[o];w.stack=i.stack[o];}if(w.token===void 0||w.types==="start"||w.types==="separator"||w.types==="operator"&&w.token!=="++"&&w.token!=="--"||w.token==="x}"||w.token==="var"||w.token==="let"||w.token==="const"||w.token==="else"||w.token.indexOf("#!/")===0||w.token==="instanceof"){return}if(w.stack==="method"&&(i.token[w.begin-1]==="function"||i.token[w.begin-2]==="function")){return}if(f.script.variableList==="list")h.index[h.len]=r.count;y=f.script.correct===true?";":"x;";e="separator";o=r.linesSpace;r.linesSpace=0;R("");r.linesSpace=o;C();}function j(){let m=r.count;do{m=m-1;}while(m>-1&&i.token[m]==="x}");if(i.stack[m]==="else")return R("");m=m+1;r.splice({data:i,howmany:0,index:m,record:{begin:i.begin[m],ender:-1,lexer:"script",lines:r.linesSpace,stack:i.stack[m],token:y,types:e}});R("");}function M(){let m=r.count;if(i.types[m]==="comment"){do{m=m-1;}while(m>0&&i.types[m]==="comment")}if(i.token[m]==="from")m=m-2;if(i.token[m]==="x;"){r.splice({data:i,howmany:1,index:m});}}function V(){A(false);if(t>-1)E();F=r.wrapCommentBlock({chars:g,end:S,lexer:"script",opening:"/*",start:s,terminator:"*/"});s=F[1];if(i.token[r.count]==="var"||i.token[r.count]==="let"||i.token[r.count]==="const"){n=r.pop(i);R("");r.push(i,n,"");if(i.lines[r.count-2]===0)i.lines[r.count-2]=i.lines[r.count];i.lines[r.count]=0;}else if(F[0]!==""){y=F[0];e=/^\/\*\s*@ignore\s*\bstart\b/.test(y)?"ignore":"comment";if(y.indexOf("# sourceMappingURL=")===2){l[0]=r.count+1;l[1]=y;}r.push(i,{begin:r.structure[r.structure.length-1][1],ender:-1,lexer:"script",lines:r.linesSpace,stack:r.structure[r.structure.length-1][0],token:y,types:e},"");}if(/\/\*\s*global\s+/.test(i.token[r.count])===true&&i.types.indexOf("word")<0){T[0]=i.token[r.count].replace(/\/\*\s*global\s+/,"").replace("*/","").replace(/,\s+/g,",").split(",");}}function C(){let m="";const o=W(5,false);const p=r.count;const v=r.linesSpace;if(f.language==="json"||U.length<1||U[U.length-1].charAt(0)!=="x"||/^x?(;|\}|\))$/.test(y)===false){return}if(i.stack[r.count]==="do"&&o==="while"&&i.token[r.count]==="}"){return}if(y===";"&&i.token[p-1]==="x{"){m=i.token[i.begin[p-2]-1];if(i.token[p-2]==="do"||i.token[p-2]===")"&&"ifforwhilecatch".indexOf(m)>-1){n=r.pop(i);y=f.script.correct===true?"}":"x}";e="end";x=r.structure[r.structure.length-1];R("");U.pop();r.linesSpace=v;return}n=r.pop(i);y=f.script.correct===true?"}":"x}";e="end";x=r.structure[r.structure.length-1];R("");U.pop();y=";";e="end";r.push(i,n,"");r.linesSpace=v;return}y=f.script.correct===true?"}":"x}";e="end";if(i.token[r.count]==="x}")return;if(i.stack[r.count]==="if"&&(i.token[r.count]===";"||i.token[r.count]==="x;")&&o==="else"){x=r.structure[r.structure.length-1];R("");U.pop();r.linesSpace=v;return}do{x=r.structure[r.structure.length-1];R("");U.pop();if(i.stack[r.count]==="do")break}while(U[U.length-1]==="x{");r.linesSpace=v;}function _(){let m=r.count;if(i.stack[m]==="object"&&f.script.objectSort===true){y=",";e="separator";M();R("");}else {do{m=m-1;}while(m>0&&i.types[m-1]==="comment");r.splice({data:i,howmany:0,index:m,record:{begin:i.begin[m],ender:-1,lexer:"script",lines:r.linesSpace,stack:i.stack[m],token:",",types:"separator"}});R("");}}function X(m){let o=false;let p=false;const v=W(1,false);const w=i.token[r.count]==="("?r.count:i.begin[r.count];function q(){let O=0;const P=i.token[w-1]==="Array";const Y=P===true?"[":"{";const B=P===true?"]":"}";const D=P===true?"array":"object";if(P===true&&i.types[r.count]==="number"){O=Number(i.token[r.count]);n=r.pop(i);}n=r.pop(i);n=r.pop(i);n=r.pop(i);r.structure.pop();y=Y;e="start";R(D);if(O>0){y=",";e="separator";do{R("");O=O-1;}while(O>0)}y=B;e="end";R("");}if(t>-1)E();if(G.length>0){if(G[G.length-1]===0){G.pop();}else {G[G.length-1]=G[G.length-1]-1;}}if(m===")"||m==="x)"||m==="]"){if(f.script.correct===true)ge();M();}if(m===")"||m==="x)")A(false);if(h.len>-1){if(m==="}"&&(f.script.variableList==="list"&&h.count[h.len]===0||i.token[r.count]==="x;"&&f.script.variableList==="each")){Oe();}h.count[h.len]=h.count[h.len]-1;if(h.count[h.len]<0)Oe();}if(y===","&&i.stack[r.count]!=="initializer"&&(m==="]"&&i.token[r.count-1]==="["||m==="}")){n=r.pop(i);}if(m===")"||m==="x)"){y=m;if(L.length>0){a=L[L.length-1];if(a.length>1&&v!=="{"&&(a[0]==="if"||a[0]==="for"||a[0]==="with"||a[0]==="while"&&i.stack[a[1]-2]!==void 0&&i.stack[a[1]-2]!=="do")){o=true;}}}else if(m==="]"){y="]";}else if(m==="}"){if(y!==","&&f.script.correct===true)ge();if(r.structure.length>0&&r.structure[r.structure.length-1][0]!=="object")A(true);if(f.script.objectSort===true&&r.structure[r.structure.length-1][0]==="object"){r.objectSort(i);}if(e==="comment"){y=i.token[r.count];e=i.types[r.count];}y="}";}if(r.structure[r.structure.length-1][0]==="data_type"){e="type_end";}else {e="end";}L.pop();x=r.structure[r.structure.length-1];if(m===")"&&f.script.correct===true&&w-r.count<2&&(i.token[r.count]==="("||i.types[r.count]==="number")&&(i.token[w-1]==="Array"||i.token[w-1]==="Object")&&i.token[w-2]==="new"){q();p=true;}if(U[U.length-1]==="x{"&&m==="}"){C();U.pop();if(i.stack[r.count]!=="try"){if(v!==":"&&v!==";"&&i.token[i.begin[s]-1]!=="?")C();}y="}";}else {U.pop();}if(f.script.endComma!==void 0&&f.script.endComma!=="none"&&r.structure[r.structure.length-1][0]==="array"||r.structure[r.structure.length-1][0]==="object"||r.structure[r.structure.length-1][0]==="data_type"){if(f.script.endComma==="always"&&i.token[r.count]!==","){const O=r.structure[r.structure.length-1][1];let P=r.count;do{if(i.begin[P]===O){if(i.token[P]===",")break}else {P=i.begin[P];}P=P-1;}while(P>O);if(P>O){const Y=e;const B=y;y=",";e="separator";R("");y=B;e=Y;}}else if(f.script.endComma==="never"&&i.token[r.count]===","){r.pop(i);}}if(p===false){R("");if(y==="}"&&i.stack[r.count]!=="object"&&i.stack[r.count]!=="class"&&i.stack[r.count]!=="data_type"){T.pop();C();}}if(o===true){y=f.script.correct===true?"{":"x{";e="start";R(a[0]);U.push("x{");a[1]=r.count;}k.pop();if(r.structure[r.structure.length-1][0]!=="data_type")k[k.length-1]=false;}function te(m,o,p){let v=0;let w=false;let q=false;let O=[m];let P;const Y=o.split("");const B=Y.length;const D=s;const ae=s+m.length;const re=f.script.quoteConvert===void 0?"none":f.script.quoteConvert;function fe(){let J=0;O=[];e=p;v=s;if(p==="string"&&/\s/.test(g[v+1])===true){J=1;do{v=v+1;if(g[v]==="\n")J=J+1;}while(v<S&&/\s/.test(g[v+1])===true);r.linesSpace=J;}}function ee(){let J="";function pe(ie){if(f.language!=="javascript"&&f.language!=="typescript"&&f.language!=="jsx"&&f.language!=="tsx"){const oe=ce=>ce.replace(/\s*$/," ");const be=ce=>ce.replace(/^\s*/," ");if(/\{(#|\/|(%>)|(%\]))/.test(ie)||/\}%(>|\])/.test(ie))return ie;ie=ie.replace(/\{((\{+)|%-?)\s*/g,oe);ie=ie.replace(/\s*((\}\}+)|(-?%\}))/g,be);return ie}return ie}if(m==='"'&&re==="single"){O[0]="'";O[O.length-1]="'";}else if(m==="'"&&re==="double"){O[0]='"';O[O.length-1]='"';}else if(w===true){J=O[O.length-1];O.pop();O.pop();O.push(J);}s=v;if(o==="\n"){s=s-1;O.pop();}y=O.join("");if(m==='"'||m==="'"||m==="{{"||m==="{%"){y=pe(y);}if(m==="{%"||m==="{{"){P=_e(y);e=P[0];R(P[1]);return}if(p==="string"){e="string";if(f.language==="json"){y=y.replace(/\u0000/g,"\\u0000").replace(/\u0001/g,"\\u0001").replace(/\u0002/g,"\\u0002").replace(/\u0003/g,"\\u0003").replace(/\u0004/g,"\\u0004").replace(/\u0005/g,"\\u0005").replace(/\u0006/g,"\\u0006").replace(/\u0007/g,"\\u0007").replace(/\u0008/g,"\\u0008").replace(/\u0009/g,"\\u0009").replace(/\u000a/g,"\\u000a").replace(/\u000b/g,"\\u000b").replace(/\u000c/g,"\\u000c").replace(/\u000d/g,"\\u000d").replace(/\u000e/g,"\\u000e").replace(/\u000f/g,"\\u000f").replace(/\u0010/g,"\\u0010").replace(/\u0011/g,"\\u0011").replace(/\u0012/g,"\\u0012").replace(/\u0013/g,"\\u0013").replace(/\u0014/g,"\\u0014").replace(/\u0015/g,"\\u0015").replace(/\u0016/g,"\\u0016").replace(/\u0017/g,"\\u0017").replace(/\u0018/g,"\\u0018").replace(/\u0019/g,"\\u0019").replace(/\u001a/g,"\\u001a").replace(/\u001b/g,"\\u001b").replace(/\u001c/g,"\\u001c").replace(/\u001d/g,"\\u001d").replace(/\u001e/g,"\\u001e").replace(/\u001f/g,"\\u001f");}else if(m.indexOf("#!")===0){y=y.slice(0,y.length-1);r.linesSpace=2;}else if(r.structure[r.structure.length-1][0]!=="object"||r.structure[r.structure.length-1][0]==="object"&&W(1,false)!==":"&&i.token[r.count]!==","&&i.token[r.count]!=="{"){if(y.length>f.wrap&&f.wrap>0||f.wrap!==0&&i.token[r.count]==="+"&&(i.token[r.count-1].charAt(0)==='"'||i.token[r.count-1].charAt(0)==="'")){let ie=y;let oe="";let be=re==="double"?'"':re==="single"?"'":ie.charAt(0);const ce=f.wrap;const ue=/u[0-9a-fA-F]{4}/;const Ae=/x[0-9a-fA-F]{2}/;ie=ie.slice(1,ie.length-1);if(i.token[r.count]==="+"&&(i.token[r.count-1].charAt(0)==='"'||i.token[r.count-1].charAt(0)==="'")){r.pop(i);be=i.token[r.count].charAt(0);ie=i.token[r.count].slice(1,i.token[r.count].length-1)+ie;r.pop(i);}if(ie.length>ce&&ce>0){do{oe=ie.slice(0,ce);if(oe.charAt(ce-5)==="\\"&&ue.test(ie.slice(ce-4,ce+1))){oe=oe.slice(0,ce-5);}else if(oe.charAt(ce-4)==="\\"&&ue.test(ie.slice(ce-3,ce+2))){oe=oe.slice(0,ce-4);}else if(oe.charAt(ce-3)==="\\"&&(ue.test(ie.slice(ce-2,ce+3))||Ae.test(ie.slice(ce-2,ce+1)))){oe=oe.slice(0,ce-3);}else if(oe.charAt(ce-2)==="\\"&&(ue.test(ie.slice(ce-1,ce+4))||Ae.test(ie.slice(ce-1,ce+2)))){oe=oe.slice(0,ce-2);}else if(oe.charAt(ce-1)==="\\"){oe=oe.slice(0,ce-1);}oe=be+oe+be;ie=ie.slice(oe.length-2);y=oe;e="string";R("");r.linesSpace=0;y="+";e="operator";R("");}while(ie.length>ce)}if(ie===""){y=be+be;}else {y=be+ie+be;}e="string";}}}else if(/\{\s*\?>$/.test(y)){e="template_start";}else {e=p;}if(y.length>0)R("");}if(t>-1)E();if(g[s-1]==="\\"&&ne(s-1)===true&&(g[s]==='"'||g[s]==="'")){r.pop(i);if(i.token[0]==="{"){if(g[s]==='"'){m='"';o='\\"';O=['"'];}else {m="'";o="\\'";O=["'"];}w=true;}else {if(g[s]==='"'){O=['\\"'];ee();return}O=["\\'"];ee();return}}v=ae;if(v<S){do{if(i.token[0]!=="{"&&i.token[0]!=="["&&re!=="none"&&(g[v]==='"'||g[v]==="'")){if(g[v-1]==="\\"){if(ne(v-1)===true){if(re==="double"&&g[v]==="'"){O.pop();}else if(re==="single"&&g[v]==='"'){O.pop();}}}else if(re==="double"&&g[v]==='"'&&g[s]==="'"){g[v]='\\"';}else if(re==="single"&&g[v]==="'"&&g[s]==='"'){g[v]="\\'";}O.push(g[v]);}else if(v>D){q=true;if(g[v]==="{"&&g[v+1]==="%"&&g[v+2]!==m){ee();te("{%","%}","template");fe();}else if(g[v]==="{"&&g[v+1]==="{"&&g[v+2]!==m){ee();te("{{","}}","template");fe();}else {q=false;O.push(g[v]);}}else {O.push(g[v]);}if((m==='"'||m==="'")&&(q===true||v>D)&&f.language!=="json"&&g[v-1]!=="\\"&&g[v]!=='"'&&g[v]!=="'"&&(g[v]==="\n"||v===S-1)){r.error="Unterminated string in script on line number "+r.lineNumber;break}if(g[v]===Y[B-1]&&(g[v-1]!=="\\"||ne(v-1)===false)){if(B===1)break;if(O[v-ae]===Y[0]&&O.slice(v-ae-B+2).join("")===o)break}v=v+1;}while(v<S)}ee();}function Q(){A(false);C();if(t>-1)E();F=r.wrapCommentLine({chars:g,end:S,lexer:"script",opening:"//",start:s,terminator:"\n"});s=F[1];if(F[0]!==""){y=F[0];e=/^(\/\/\s*@ignore:?\s+\bstart\b)/.test(y)?"ignore":"comment";if(y.indexOf("# sourceMappingURL=")===2){l[0]=r.count+1;l[1]=y;}r.push(i,{begin:r.structure[r.structure.length-1][1],ender:-1,lexer:"script",lines:r.linesSpace,stack:r.structure[r.structure.length-1][0],token:y,types:e},"");}}function K(){let m=0;let o=false;let p=false;let v=0;let w=0;let q=0;let O="";let P="";let Y="";const B=[];const D=k[k.length-1];const ae="0123456789=<>+-*?|^:&.,;%(){}[]~";function re(){if(y==="(")r.structure[r.structure.length-1]=["paren",r.count];z.lexers.markup(B.join(""));}if(t>-1)E();P=r.count>0?i.token[r.count-1]:"";Y=r.count>0?i.types[r.count-1]:"";O=W(1,false);if(f.language!=="jsx"&&f.language!=="tsx"&&/\d/.test(O)===false&&(y==="function"||P==="=>"||P==="void"||P==="."||i.stack[r.count]==="arguments"||e==="type"&&P==="type"||e==="reference"&&(Y==="operator"||P==="function"||P==="class"||P==="new")||e==="type"&&Y==="operator"||y==="return"||e==="operator")){const fe=[];let ee=0;let J=0;m=s;do{fe.push(g[m]);if(g[m]==="<"){ee=ee+1;}else if(g[m]===">"){ee=ee-1;if(ee<1)break}m=m+1;}while(m<S);J=s;s=m;O=W(1,false);if(g[m]===">"&&(D===true||P==="=>"||P==="."||Y!=="operator"||Y==="operator"&&(O==="("||O==="="))){e="generic";y=fe.join("").replace(/^<\s+/,"<").replace(/\s+>$/,">").replace(/,\s*/g,", ");R("");return}s=J;}m=r.count;if(i.types[m]==="comment"){do{m=m-1;}while(m>0&&i.types[m]==="comment")}if(D===false&&W(1,false)!==">"&&(g[s]!=="<"&&ae.indexOf(g[s+1])>-1||i.token[m]==="++"||i.token[m]==="--"||/\s/.test(g[s+1])===true||/\d/.test(g[s+1])===true&&(e==="operator"||e==="string"||e==="number"||e==="reference"||e==="word"&&y!=="return"))){e="operator";y=Z();return R("")}if(f.language!=="typescript"&&(i.token[m]==="return"||i.types[m]==="operator"||i.types[m]==="start"||i.types[m]==="separator"||i.types[m]==="jsx_attribute_start"||i.token[m]==="}"&&r.structure[r.structure.length-1][0]==="global")){e="markup";f.language="jsx";do{B.push(g[s]);if(g[s]==="{"){w=w+1;o=true;}else if(g[s]==="}"){w=w-1;if(w===0)o=false;}else if(g[s]==="<"&&o===false){if(g[s+1]==="<"){do{B.push(g[s]);s=s+1;}while(s<S&&g[s+1]==="<")}v=v+1;if(W(1,false)==="/")p=true;}else if(g[s]===">"&&o===false){if(g[s+1]===">"){do{B.push(g[s]);s=s+1;}while(g[s+1]===">")}v=v-1;if(p===true){q=q-1;}else if(g[s-1]!=="/"){q=q+1;}if(v===0&&w===0&&q<1){O=W(2,false);if(O.charAt(0)!=="<")return re();if(O.charAt(0)==="<"&&ae.indexOf(O.charAt(1))<0&&/\s/.test(O.charAt(1))===false){m=s+1;do{m=m+1;if(g[m]===">"||/\s/.test(g[m-1])&&ae.indexOf(g[m])<0)break;if(ae.indexOf(g[m])>-1)return re()}while(m<S)}else {return re()}}p=false;}s=s+1;}while(s<S);return re()}e="operator";y=Z();R("");}function W(m,o){let p=o===true?s:s+1;let v="";if(typeof m!=="number"||m<1)m=1;if(g[s]==="/"){if(g[s+1]==="/"){v="\n";}else if(g[s+1]==="*"){v="/";}}if(p<S){do{if(/\s/.test(g[p])===false){if(g[p]==="/"){if(v===""){if(g[p+1]==="/"){v="\n";}else if(g[p+1]==="*"){v="/";}}else if(v==="/"&&g[p-1]==="*"){v="";}}if(v===""&&g[p-1]+g[p]!=="*/")return g.slice(p,p+m).join("")}else if(v==="\n"&&g[p]==="\n"){v="";}p=p+1;}while(p<S)}return ""}function I(){const m=S;const o=[g[s]];let p=0;let v=/zz/;let w=o[0]===".";if(s<S-2&&g[s]==="0"){if(g[s+1]==="x"){v=/[0-9a-fA-F]/;}else if(g[s+1]==="o"){v=/[0-9]/;}else if(g[s+1]==="b"){v=/0|1/;}if(v.test(g[s+2])===true){o.push(g[s+1]);p=s+1;do{p=p+1;o.push(g[p]);}while(v.test(g[p+1])===true);s=p;return o.join("")}}p=s+1;if(p<m){do{if(/[0-9]/.test(g[p])||g[p]==="."&&w===false){o.push(g[p]);if(g[p]===".")w=true;}else {break}p=p+1;}while(p<m)}if(p<m-1&&(/\d/.test(g[p-1])===true||/\d/.test(g[p-2])===true&&(g[p-1]==="-"||g[p-1]==="+"))&&(g[p]==="e"||g[p]==="E")){o.push(g[p]);if(g[p+1]==="-"||g[p+1]==="+"){o.push(g[p+1]);p=p+1;}w=false;p=p+1;if(p<m){do{if(/[0-9]/.test(g[p])||g[p]==="."&&w===false){o.push(g[p]);if(g[p]===".")w=true;}else {break}p=p+1;}while(p<m)}}s=p-1;return o.join("")}function Z(){let m=0;let o=0;let p=S;let v="";const w=["=","<",">","+","*","?","|","^",":","&","%","~"];const q=w.length;if(t>-1)E();if(g[s]==="/"&&(r.count>-1&&(e!=="word"&&e!=="reference"||y==="typeof"||y==="return"||y==="else")&&e!=="number"&&e!=="string"&&e!=="end")){if(y==="return"||y==="typeof"||y==="else"||e!=="word"){y=le();e="regex";}else {y="/";e="operator";}R("");return "regex"}if(g[s]==="?"&&("+-*/.?".indexOf(g[s+1])>-1||g[s+1]===":"&&w.join("").indexOf(g[s+2])<0)){if(g[s+1]==="."&&/\d/.test(g[s+2])===false){v="?.";}else if(g[s+1]==="?"){v="??";}if(v==="")return "?"}if(g[s]===":"&&"+-*/".indexOf(g[s+1])>-1)return ":";if(s<S-1){if(g[s]!=="<"&&g[s+1]==="<")return g[s];if(g[s]==="!"&&g[s+1]==="/")return "!";if(g[s]==="-"){k[k.length-1]=false;if(g[s+1]==="-"){v="--";}else if(g[s+1]==="="){v="-=";}else if(g[s+1]===">"){v="->";}if(v==="")return "-"}if(g[s]==="+"){k[k.length-1]=false;if(g[s+1]==="+"){v="++";}else if(g[s+1]==="="){v="+=";}if(v==="")return "+"}if(g[s]==="="&&g[s+1]!=="="&&g[s+1]!=="!"&&g[s+1]!==">"){k[k.length-1]=false;return "="}}if(g[s]===":"){if(f.language==="typescript"){if(i.stack[r.count]==="arguments"){if(i.token[r.count]==="?"){r.pop(i);v="?:";s=s-1;}k[k.length-1]=true;}else if(y===")"&&(i.token[i.begin[r.count]-1]==="function"||i.token[i.begin[r.count]-2]==="function")){k[k.length-1]=true;}else if(e==="reference"){m=r.count;let O=false;do{if(i.begin[m]===i.begin[r.count]){if(m<r.count&&i.token[m]===":"&&i.types[m+1]!=="type")O=true;if(i.token[m]==="?"&&O===false)break;if(i.token[m]===";"||i.token[m]==="x;")break;if(i.token[m]==="var"||i.token[m]==="let"||i.token[m]==="const"||i.types[m]==="type"){k[k.length-1]=true;break}}else {if(i.types[m]==="type_end"){k[k.length-1]=true;break}m=i.begin[m];}m=m-1;}while(m>i.begin[r.count])}}else if(i.token[r.count-1]==="["&&(i.types[r.count]==="word"||i.types[r.count]==="reference")){r.structure[r.structure.length-1][0]="attribute";i.stack[r.count]="attribute";}}if(v===""){if(g[s+1]==="+"&&g[s+2]==="+"||g[s+1]==="-"&&g[s+2]==="-"){v=g[s];}else {const O=[g[s]];m=s+1;if(m<p){do{if(g[m]==="+"&&g[m+1]==="+"||g[m]==="-"&&g[m+1]==="-")break;o=0;if(o<q){do{if(g[m]===w[o]){O.push(w[o]);break}o=o+1;}while(o<q)}if(o===q)break;m=m+1;}while(m<p)}v=O.join("");}}s=s+(v.length-1);if(v==="=>"&&y===")"){m=r.count;p=i.begin[m];do{if(i.begin[m]===p)i.stack[m]="method";m=m-1;}while(m>p-1)}return v}function ge(){let m=true;let o="+";let p="";let v="";let w="";let q=0;let O=0;let P=0;let Y="";const B=[];function D(){P=i.begin[P]-1;if(i.types[P]==="end"){D();}else if(i.token[P-1]==="."){ae();}}function ae(){P=P-2;if(i.types[P]==="end"){D();}else if(i.token[P-1]==="."){ae();}}function re(){let ee=0;const J=B.length;if(ee<J){do{r.push(i,B[ee],"");ee=ee+1;}while(ee<J)}}function fe(ee){const J=se(null);J.begin=i.begin[ee];J.ender=i.ender[ee];J.lexer=i.lexer[ee];J.lines=i.lines[ee];J.stack=i.stack[ee];J.token=i.token[ee];J.types=i.types[ee];return J}p=i.token[r.count];v=i.token[r.count-1];w=i.token[r.count-2];if(p!=="++"&&p!=="--"&&v!=="++"&&v!=="--"){P=r.count;if(i.types[P]==="end"){D();}else if(i.token[P-1]==="."){ae();}}if(i.token[P-1]==="++"||i.token[P-1]==="--"){if("startendoperator".indexOf(i.types[P-2])>-1)return;q=P;if(q<r.count+1){do{B.push(fe(q));q=q+1;}while(q<r.count+1);r.splice({data:i,howmany:r.count-P,index:P});}}else {if(f.script.correct===false||p!=="++"&&p!=="--"&&v!=="++"&&v!=="--"){return}Y=W(1,false);if((p==="++"||p==="--")&&(g[s]===";"||Y===";"||g[s]==="}"||Y==="}"||g[s]===")"||Y===")")){o=i.stack[r.count];if(o==="array"||o==="method"||o==="object"||o==="paren"||o==="notation"||i.token[i.begin[r.count]-1]==="while"&&o!=="while"){return}q=r.count;do{q=q-1;if(i.token[q]==="return")return;if(i.types[q]==="end"){do{q=i.begin[q]-1;}while(i.types[q]==="end"&&q>0)}}while(q>0&&(i.token[q]==="."||i.types[q]==="word"||i.types[q]==="reference"||i.types[q]==="end"));if(i.token[q]===","&&g[s]!==";"&&Y!==";"&&g[s]!=="}"&&Y!=="}"&&g[s]!==")"&&Y!==")"){return}if(i.types[q]==="operator"){if(i.stack[q]==="switch"&&i.token[q]===":"){do{q=q-1;if(i.types[q]==="start"){O=O-1;if(O<0)break}else if(i.types[q]==="end"){O=O+1;}if(i.token[q]==="?"&&O===0)return}while(q>0)}else {return}}m=false;o=p==="--"?"-":"+";}else if(w==="["||w===";"||w==="x;"||w==="}"||w==="{"||w==="("||w===")"||w===","||w==="return"){if(p==="++"||p==="--"){if(w==="["||w==="("||w===","||w==="return")return;if(p==="--")o="-";m=false;}else if(v==="--"||p==="--"){o="-";}}else {return}if(m===false)n=r.pop(i);P=r.count;if(i.types[P]==="end"){D();}else if(i.token[P-1]==="."){ae();}q=P;if(q<r.count+1){do{B.push(fe(q));q=q+1;}while(q<r.count+1)}}if(m===true){r.splice({data:i,howmany:1,index:P-1});y="=";e="operator";R("");re();y=o;e="operator";R("");y="1";e="number";R("");}else {y="=";e="operator";R("");re();y=o;e="operator";R("");y="1";e="number";R("");}y=i.token[r.count];e=i.types[r.count];if(Y==="}"&&g[s]!==";")A(false);}function R(m){const o=se(null);o.begin=r.structure[r.structure.length-1][1];o.ender=-1;o.lexer="script";o.lines=r.linesSpace;o.stack=r.structure[r.structure.length-1][0];o.token=y;o.types=e;r.push(i,o,m);}function le(){let m=s+1;let o=0;let p=0;let v="";let w=false;const q=S;const O=["/"];if(m<q){do{O.push(g[m]);if(g[m-1]!=="\\"||g[m-2]==="\\"){if(g[m]==="["){w=true;}if(g[m]==="]"){w=false;}}if(g[m]==="/"&&w===false){if(g[m-1]==="\\"){p=0;o=m-1;if(o>0){do{if(g[o]==="\\"){p=p+1;}else {break}o=o-1;}while(o>0)}if(p%2===0){break}}else {break}}m=m+1;}while(m<q)}if(g[m+1]==="g"||g[m+1]==="i"||g[m+1]==="m"||g[m+1]==="y"||g[m+1]==="u"){O.push(g[m+1]);if(g[m+2]!==g[m+1]&&(g[m+2]==="g"||g[m+2]==="i"||g[m+2]==="m"||g[m+2]==="y"||g[m+2]==="u")){O.push(g[m+2]);if(g[m+3]!==g[m+1]&&g[m+3]!==g[m+2]&&(g[m+3]==="g"||g[m+3]==="i"||g[m+3]==="m"||g[m+3]==="y"||g[m+3]==="u")){O.push(g[m+3]);if(g[m+4]!==g[m+1]&&g[m+4]!==g[m+2]&&g[m+4]!==g[m+3]&&(g[m+4]==="g"||g[m+4]==="i"||g[m+4]==="m"||g[m+4]==="y"||g[m+4]==="u")){O.push(g[m+4]);if(g[m+5]!==g[m+1]&&g[m+5]!==g[m+2]&&g[m+5]!==g[m+3]&&g[m+5]!==g[m+4]&&(g[m+5]==="g"||g[m+5]==="i"||g[m+5]==="m"||g[m+5]==="y"||g[m+5]==="u")){O.push(g[m+4]);s=m+5;}else {s=m+4;}}else {s=m+3;}}else {s=m+2;}}else {s=m+1;}}else {s=m;}v=O.join("");return v}function ne(m){const o=m;do{m=m-1;}while(g[m]==="\\"&&m>0);return (o-m)%2===1}function ke(m){let o=r.count;let p="";let v="";let w="";let q=false;U.push(m);if(m==="{"&&(i.types[r.count]==="type"||i.types[r.count]==="type_end"||i.types[r.count]==="generic")){let O=0;if(i.types[r.count]==="type_end")o=i.begin[r.count];O=o;do{o=o-1;if(i.begin[o]!==O&&i.begin[o]!==-1)break;if(i.token[o]===":")break}while(o>i.begin[o]);if(i.token[o]===":"&&i.stack[o-1]==="arguments"){k.push(false);q=true;}else {k.push(k[k.length-1]);}o=r.count;}else if(m==="["&&i.types[r.count]==="type_end"){k.push(true);}else {k.push(k[k.length-1]);}if(t>-1){E();o=r.count;}if(h.len>-1)h.count[h.len]=h.count[h.len]+1;if(i.token[o-1]==="function"){L.push(["function",o+1]);}else {L.push([y,o+1]);}y=m;if(k[k.length-1]===true){e="type_start";}else {e="start";}if(m==="("||m==="x("){M();}else if(m==="{"){if(H>-1){if(i.begin[H-1]===i.begin[i.begin[o]-1]||i.token[i.begin[o]]==="x("){H=-1;if(f.script.correct===true){X(")");}else {X("x)");}M();y="{";e="start";}}else if(y===")"){M();}if(e==="comment"&&i.token[o-1]===")"){y=i.token[o];i.token[o]="{";e=i.types[o];i.types[o]="start";}}p=(()=>{let O=r.count;if(i.types[O]==="comment"){do{O=O-1;}while(O>0&&i.types[O]==="comment")}return i.token[O]})();v=i.stack[o]===void 0?"":(()=>{let O=r.count;if(i.types[O]==="comment"){do{O=O-1;}while(O>0&&i.types[O]==="comment")}return i.token[i.begin[O]-1]})();if(y==="{"&&(i.types[o]==="word"||i.token[o]==="]")){let O=o;if(i.token[O]==="]"){do{O=i.begin[O]-1;}while(i.token[O]==="]")}do{if(i.types[O]==="start"||i.types[O]==="end"||i.types[O]==="operator")break;O=O-1;}while(O>0);if(i.token[O]===":"&&i.stack[O-1]==="arguments"){w="function";T.push($);$=[];}}if(e==="type_start"){w="data_type";}else if(w===""&&(y==="{"||y==="x{")){if(p==="else"||p==="do"||p==="try"||p==="finally"||p==="switch"){w=p;}else if(G[G.length-1]===0&&p!=="return"){G.pop();w="class";}else if(i.token[o-1]==="class"){w="class";}else if(i.token[o]==="]"&&i.token[o-1]==="["){w="array";}else if((i.types[o]==="word"||i.types[o]==="reference")&&(i.types[o-1]==="word"||i.types[o-1]==="reference"||i.token[o-1]==="?"&&(i.types[o-2]==="word"||i.types[o-2]==="reference"))&&i.token[o]!=="in"&&i.token[o-1]!=="export"&&i.token[o-1]!=="import"){w="map";}else if(i.stack[o]==="method"&&i.types[o]==="end"&&(i.types[i.begin[o]-1]==="word"||i.types[i.begin[o]-1]==="reference")&&i.token[i.begin[o]-2]==="new"){w="initializer";}else if(y==="{"&&(p===")"||p==="x)")&&(i.types[i.begin[o]-1]==="word"||i.types[i.begin[o]-1]==="reference"||i.token[i.begin[o]-1]==="]")){if(v==="if"){w="if";}else if(v==="for"){w="for";}else if(v==="while"){w="while";}else if(v==="class"){w="class";}else if(v==="switch"||i.token[i.begin[o]-1]==="switch"){w="switch";}else if(v==="catch"){w="catch";}else {w="function";}}else if(y==="{"&&(p===";"||p==="x;")){w="block";}else if(y==="{"&&i.token[o]===":"&&i.stack[o]==="switch"){w="block";}else if(i.token[o-1]==="import"||i.token[o-2]==="import"||i.token[o-1]==="export"||i.token[o-2]==="export"){w="object";}else if(p===")"&&(a[0]==="function"||a[0]==="if"||a[0]==="for"||a[0]==="class"||a[0]==="while"||a[0]==="switch"||a[0]==="catch")){w=a[0];}else if(i.stack[o]==="notation"){w="function";}else if((i.types[o]==="number"||i.types[o]==="string"||i.types[o]==="word"||i.types[o]==="reference")&&(i.types[o-1]==="word"||i.types[o-1]==="reference")&&i.token[i.begin[o]-1]!=="for"){w="function";}else if(r.structure.length>0&&i.token[o]!==":"&&r.structure[r.structure.length-1][0]==="object"&&(i.token[i.begin[o]-2]==="{"||i.token[i.begin[o]-2]===",")){w="function";}else if(i.types[a[1]-1]==="markup"&&i.token[a[1]-3]==="function"){w="function";}else if(p==="=>"){w="function";}else if(q===true||i.types[r.count]==="type_end"&&i.stack[i.begin[r.count]-2]==="arguments"){w="function";}else if(p===")"&&i.stack[o]==="method"&&(i.types[i.begin[o]-1]==="word"||i.types[i.begin[o]-1]==="property"||i.types[i.begin[o]-1]==="reference")){w="function";}else if(i.types[o]==="word"&&y==="{"&&i.token[o]!=="return"&&i.token[o]!=="in"&&i.token[o]!=="import"&&i.token[o]!=="const"&&i.token[o]!=="let"&&i.token[o]!==""){w="block";}else if(y==="{"&&"if|else|for|while|function|class|switch|catch|finally".indexOf(i.stack[o])>-1&&(i.token[o]==="x}"||i.token[o]==="}")){w="block";}else if(i.stack[o]==="arguments"){w="function";}else if(i.types[o]==="generic"){do{o=o-1;if(i.token[o]==="function"||i.stack[o]==="arguments"){w="function";break}if(i.token[o]==="interface"){w="map";break}if(i.token[o]===";"){w="object";break}}while(o>i.begin[r.count])}else {w="object";}if(w!=="object"&&w!=="class"){if(w==="function"){T.push($);$=[];}else {T.push([]);}}}else if(y==="["){w="array";}else if(y==="("||y==="x("){if(p==="function"||i.token[o-1]==="function"||i.token[o-1]==="function*"||i.token[o-2]==="function"){w="arguments";}else if(i.token[o-1]==="."||i.token[i.begin[o]-2]==="."){w="method";}else if(i.types[o]==="generic"){w="method";}else if(i.token[o]==="}"&&i.stack[o]==="function"){w="method";}else if(p==="if"||p==="for"||p==="class"||p==="while"||p==="catch"||p==="finally"||p==="switch"||p==="with"){w="expression";}else if(i.types[o]==="word"||i.types[o]==="property"||i.types[o]==="reference"){w="method";}else {w="paren";}}R(w);if(G.length>0)G[G.length-1]=G[G.length-1]+1;}function we(){const m=[g[s]];s=s+1;if(s<S){do{m.push(g[s]);if(g[s]==="`"&&(g[s-1]!=="\\"||ne(s-1)===false))break;if(g[s-1]==="$"&&g[s]==="{"&&(g[s-2]!=="\\"||ne(s-2)===false))break;s=s+1;}while(s<S)}return m.join("")}function _e(m){let o=2;let p=0;let v="";const w=m.slice(0,2);const q=m.length;if(m.charAt(2)==="-")o=o+1;if(/\s/.test(m.charAt(o))===true){do{o=o+1;}while(/\s/.test(m.charAt(o))===true&&o<q)}p=o;do{p=p+1;}while(/\s/.test(m.charAt(p))===false&&m.charAt(p)!=="("&&p<q);if(p===q)p=m.length-2;v=m.slice(o,p);if(v==="else"||w==="{%"&&(v==="elseif"||v==="when"||v==="elif"||v==="elsif")){return ["template_else",`template_${v}`]}if(w==="{{"){if(v==="end")return ["template_end",""];if(v==="block"&&/\{%\s*\w/.test(u)===false||v==="define"||v==="form"||v==="if"||v==="unless"||v==="range"||v==="with"){return ["template_start",`template_${v}`]}return ["template",""]}p=b.length-1;if(p>-1){do{if(v===b[p]&&(v!=="block"||/\{%\s*\w/.test(u)===false)){return ["template_start",`template_${v}`]}if(v==="end"+b[p]){return ["template_end",""]}p=p-1;}while(p>-1)}return ["template",""]}function Oe(){h.count.pop();h.index.pop();h.word.pop();h.len=h.len-1;}function E(){let m=t;let o=1;let p="";let v="";let w=y;let q=e;const O=[];function P(){U.push("x{");r.splice({data:i,howmany:1,index:r.count-3});}function Y(B,D,ae){const re=i.begin[B];let fe=0;do{if(i.token[B]===D&&i.types[B]==="word"){if(ae===true){i.types[B]="reference";}else if(i.begin[B]>re&&i.token[i.begin[B]]==="{"&&i.stack[B]!=="object"&&i.stack[B]!=="class"&&i.stack[B]!=="data_type"){if(i.stack[B]==="function"){i.types[B]="reference";}else {fe=i.begin[B];do{if(i.stack[fe]==="function"){i.types[B]="reference";break}fe=i.begin[fe];}while(fe>re)}}}B=B-1;}while(B>re)}do{O.push(g[m]);if(g[m]==="\\"){r.error=`Illegal escape in JavaScript on line number ${r.lineNumber}`;}m=m+1;}while(m<s);if(y.charAt(0)==="\u201C"){r.error=`Quote looking character (\u201C, \\u201c) used instead of actual quotes on line number ${r.lineNumber}`;}else if(y.charAt(0)==="\u201D"){r.error=`Quote looking character (\u201D, \\u201d) used instead of actual quotes on line number ${r.lineNumber}`;}p=O.join("");t=-1;if(r.count>0&&p==="function"&&i.token[r.count]==="("&&(i.token[r.count-1]==="{"||i.token[r.count-1]==="x{")){i.types[r.count]="start";}if(r.count>1&&p==="function"&&y==="("&&(i.token[r.count-1]==="}"||i.token[r.count-1]==="x}")){if(i.token[r.count-1]==="}"){m=r.count-2;if(m>-1){do{if(i.types[m]==="end"){o=o+1;}else if(i.types[m]==="start"||i.types[m]==="end"){o=o-1;}if(o===0)break;m=m-1;}while(m>-1)}if(i.token[m]==="{"&&i.token[m-1]===")"){o=1;m=m-2;if(m>-1){do{if(i.types[m]==="end"){o=o+1;}else if(i.types[m]==="start"||i.types[m]==="end"){o=o-1;}if(o===0)break;m=m-1;}while(m>-1)}if(i.token[m-1]!=="function"&&i.token[m-2]!=="function"){i.types[r.count]="start";}}}else {i.types[r.count]="start";}}if(f.script.correct===true&&(p==="Object"||p==="Array")&&g[s+1]==="("&&g[s+2]===")"&&i.token[r.count-1]==="="&&i.token[r.count]==="new"){if(p==="Object"){i.token[r.count]="{";y="}";i.stack[r.count]="object";r.structure[r.structure.length-1][0]="object";}else {i.token[r.count]="[";y="]";i.stack[r.count]="array";r.structure[r.structure.length-1][0]="array";}i.types[r.count]="start";e="end";g[s+1]="";g[s+2]="";s=s+2;}else {o=r.count;m=o;if(f.script.variableList!=="none"&&(p==="var"||p==="let"||p==="const")){if(i.types[o]==="comment"){do{o=o-1;}while(o>0&&i.types[o]==="comment")}if(f.script.variableList==="list"&&h.len>-1&&h.index[h.len]===o&&p===h.word[h.len]){y=",";e="separator";i.token[o]=y;i.types[o]=e;h.count[h.len]=0;h.index[h.len]=o;h.word[h.len]=p;return}h.len=h.len+1;h.count.push(0);h.index.push(o);h.word.push(p);o=m;}else if(h.len>-1&&p!==h.word[h.len]&&r.count===h.index[h.len]&&i.token[h.index[h.len]]===";"&&y!==h.word[h.len]&&f.script.variableList==="list"){Oe();}if(p==="from"&&i.token[r.count]==="x;"&&i.token[r.count-1]==="}"){M();}if(p==="while"&&i.token[r.count]==="x;"&&i.token[r.count-1]==="}"){let B=0;let D=r.count-2;if(D>-1){do{if(i.types[D]==="end"){B=B+1;}else if(i.types[D]==="start"){B=B-1;}if(B<0){if(i.token[D]==="{"&&i.token[D-1]==="do")M();return}D=D-1;}while(D>-1)}}if(q==="comment"){let B=r.count;do{B=B-1;}while(B>0&&i.types[B]==="comment");q=i.types[B];w=i.token[B];}v=W(2,false);if(p==="void"){if(w===":"&&i.stack[r.count-1]==="arguments"){e="type";}else {e="word";}}else if((r.structure[r.structure.length-1][0]==="object"||r.structure[r.structure.length-1][0]==="class"||r.structure[r.structure.length-1][0]==="data_type")&&(i.token[r.count]==="{"||i.token[i.begin[r.count]]==="{"&&i.token[r.count]===","||i.types[r.count]==="template_end"&&(i.token[i.begin[r.count]-1]==="{"||i.token[i.begin[r.count]-1]===","))){if(p==="return"||p==="break"){e="word";}else {e="property";}}else if(k[k.length-1]===true||(f.language==="typescript"||f.language==="flow")&&w==="type"){e="type";}else if(T.length>0&&(w==="function"||w==="class"||w==="const"||w==="let"||w==="var"||w==="new"||w==="void")){e="reference";T[T.length-1].push(p);if(f.language==="javascript"||f.language==="jsx"||f.language==="typescript"||f.language==="tsx"){if(w==="var"||w==="function"&&i.types[r.count-1]!=="operator"&&i.types[r.count-1]!=="start"&&i.types[r.count-1]!=="end"){Y(r.count,p,true);}else {Y(r.count,p,false);}}else {Y(r.count,p,false);}}else if(r.structure[r.structure.length-1][0]==="arguments"&&e!=="operator"){e="reference";$.push(p);}else if(w===","&&i.stack[r.count]!=="method"&&(i.stack[r.count]!=="expression"||i.token[i.begin[r.count]-1]==="for")){let B=r.count;const D=r.structure[r.structure.length-1][1];do{if(i.begin[B]===D){if(i.token[B]===";")break;if(i.token[B]==="var"||i.token[B]==="let"||i.token[B]==="const"||i.token[B]==="type"){break}}else if(i.types[B]==="end"){B=i.begin[B];}B=B-1;}while(B>D);if(T.length>0&&i.token[B]==="var"){e="reference";T[T.length-1].push(p);if(f.language==="javascript"||f.language==="jsx"||f.language==="typescript"||f.language==="tsx"){Y(B,p,true);}else {Y(B,p,false);}}else if(T.length>0&&(i.token[B]==="let"||i.token[B]==="const"||i.token[B]==="type"&&(f.language==="typescript"||f.language==="tsx"))){e="reference";T[T.length-1].push(p);Y(B,p,false);}else {e="word";}}else if(r.structure[r.structure.length-1][0]!=="object"||r.structure[r.structure.length-1][0]==="object"&&y!==","&&y!=="{"){let B=T.length;let D=0;if(B>0){do{B=B-1;D=T[B].length;if(D>0){do{D=D-1;if(p===T[B][D])break}while(D>0);if(p===T[B][D])break}}while(B>0);if(T[B][D]===p&&w!=="."){e="reference";}else {e="word";}}else {e="word";}}else {e="word";}y=p;if(p==="from"&&i.token[r.count]==="}")M();}R("");if(p==="class")G.push(0);if(p==="do"){v=W(1,true);if(v!=="{"){y=f.script.correct===true?"{":"x{";e="start";U.push("x{");R("do");}}if(p==="else"){v=W(2,true);let B=r.count-1;if(i.types[B]==="comment"){do{B=B-1;}while(B>0&&i.types[B]==="comment")}if(i.token[B]==="x}"){if(i.token[r.count]==="else"){if(i.stack[r.count-1]!=="if"&&i.types[r.count-1]!=="comment"&&i.stack[r.count-1]!=="else"){U.pop();r.splice({data:i,howmany:0,index:r.count-1,record:{begin:i.begin[i.begin[i.begin[r.count-1]-1]-1],ender:-1,lexer:"script",lines:0,stack:"if",token:f.script.correct===true?"}":"x}",types:"end"}});if(r.structure.length>1){r.structure.splice(r.structure.length-2,1);r.structure[r.structure.length-1][1]=r.count;}}else if(i.token[r.count-2]==="x}"&&x[0]!=="if"&&i.stack[r.count]==="else"){P();}else if(i.token[r.count-2]==="}"&&i.stack[r.count-2]==="if"&&x[0]==="if"&&i.token[x[1]-1]!=="if"&&i.token[i.begin[r.count-1]]==="x{"){P();}}else if(i.token[r.count]==="x}"&&i.stack[r.count]==="if"){P();}}if(v!=="if"&&v.charAt(0)!=="{"){y=f.script.correct===true?"{":"x{";e="start";U.push("x{");R("else");}}if((p==="for"||p==="if"||p==="switch"||p==="catch")&&i.token[r.count-1]!=="."){v=W(1,true);if(v!=="("){H=r.count;if(f.script.correct===true){ke("(");}else {ke("x(");}}}}do{if(/\s/.test(g[s])){if(t>-1)E();s=r.spacer({array:g,end:S,index:s});if(r.linesSpace>1&&y!==";"&&d<r.count&&g[s+1]!=="}"){A(false);d=r.count;}}else if(g[s]==="{"&&g[s+1]==="%"){te("{%","%}","template");}else if(g[s]==="{"&&g[s+1]==="{"){te("{{","}}","template");}else if(g[s]==="<"&&g[s+1]==="!"&&g[s+2]==="-"&&g[s+3]==="-"){te("<!--","-->","comment");}else if(g[s]==="<"){K();}else if(g[s]==="/"&&(s===S-1||g[s+1]==="*")){V();}else if((r.count<0||i.lines[r.count]>0)&&g[s]==="#"&&g[s+1]==="!"&&(g[s+2]==="/"||g[s+2]==="[")){te("#!"+g[s+2],"\n","string");}else if(g[s]==="/"&&(s===S-1||g[s+1]==="/")){Q();}else if(g[s]==="`"||g[s]==="}"&&r.structure[r.structure.length-1][0]==="template_string"){if(t>-1)E();y=we();if(y.charAt(0)==="}"&&y.slice(y.length-2)==="${"){e="template_string_else";R("template_string");}else if(y.slice(y.length-2)==="${"){e="template_string_start";R("template_string");}else if(y.charAt(0)==="}"){e="template_string_end";R("");}else {e="string";R("");}}else if(g[s]==='"'||g[s]==="'"){te(g[s],g[s],"string");}else if(g[s]==="-"&&(s<S-1&&g[s+1]!=="="&&g[s+1]!=="-")&&(e==="number"||e==="word"||e==="reference")&&y!=="return"&&(y===")"||y==="]"||e==="word"||e==="reference"||e==="number")){if(t>-1)E();y="-";e="operator";R("");}else if(t===-1&&(g[s]!=="0"||g[s]==="0"&&g[s+1]!=="b")&&(/\d/.test(g[s])||s!==S-2&&g[s]==="-"&&g[s+1]==="."&&/\d/.test(g[s+2])||s!==S-1&&(g[s]==="-"||g[s]===".")&&/\d/.test(g[s+1]))){if(t>-1)E();if(e==="end"&&g[s]==="-"){y="-";e="operator";}else {y=I();e="number";}R("");}else if(g[s]===":"&&g[s+1]===":"){if(t>-1)E();if(f.script.correct===true)ge();M();s=s+1;y="::";e="separator";R("");}else if(g[s]===","){if(t>-1)E();if(f.script.correct===true)ge();if(k[k.length-1]===true&&i.stack[r.count].indexOf("type")<0){k[k.length-1]=false;}if(e==="comment"){_();}else if(h.len>-1&&h.count[h.len]===0&&f.script.variableList==="each"){M();y=";";e="separator";R("");y=h.word[h.len];e="word";R("");h.index[h.len]=r.count;}else {y=",";e="separator";M();R("");}}else if(g[s]==="."){if(t>-1)E();k[k.length-1]=false;if(g[s+1]==="."&&g[s+2]==="."){y="...";e="operator";s=s+2;}else {M();y=".";e="separator";}if(/\s/.test(g[s-1])===true)r.linesSpace=1;R("");}else if(g[s]===";"){if(t>-1)E();if(k[k.length-1]===true&&i.stack[r.count].indexOf("type")<0){k[k.length-1]=false;}if(G[G.length-1]===0)G.pop();if(h.len>-1&&h.count[h.len]===0){if(f.script.variableList==="each"){Oe();}else {h.index[h.len]=r.count+1;}}if(f.script.correct===true)ge();y=";";e="separator";if(i.token[r.count]==="x}"){j();}else {R("");}C();}else if(g[s]==="("||g[s]==="["||g[s]==="{"){ke(g[s]);}else if(g[s]===")"||g[s]==="]"||g[s]==="}"){X(g[s]);}else if(g[s]==="*"&&i.stack[r.count]==="object"&&t<0&&/\s/.test(g[s+1])===false&&g[s+1]!=="="&&/\d/.test(g[s+1])===false){t=s;}else if(g[s]==="="||g[s]==="&"||g[s]==="<"||g[s]===">"||g[s]==="+"||g[s]==="-"||g[s]==="*"||g[s]==="/"||g[s]==="!"||g[s]==="?"||g[s]==="|"||g[s]==="^"||g[s]===":"||g[s]==="%"||g[s]==="~"){y=Z();if(y==="regex"){y=i.token[r.count];}else if(y==="*"&&i.token[r.count]==="function"){i.token[r.count]="function*";}else {e="operator";if(y!=="!"&&y!=="++"&&y!=="--")M();R("");}}else if(t<0&&g[s]!==""){t=s;}if(h.len>-1&&r.count===h.index[h.len]+1&&i.token[h.index[h.len]]===";"&&y!==h.word[h.len]&&e!=="comment"&&f.script.variableList==="list"){Oe();}s=s+1;}while(s<S);if(t>-1)E();if((i.token[r.count]!=="}"&&i.token[0]==="{"||i.token[0]!=="{")&&(i.token[r.count]!=="]"&&i.token[0]==="["||i.token[0]!=="[")){A(false);}if(l[0]===r.count){y="\n"+l[1];e="string";R("");}if(i.token[r.count]==="x;"&&(i.token[r.count-1]==="}"||i.token[r.count-1]==="]")&&i.begin[r.count-1]===0){r.pop(i);}return i};z.lexers.markup=function c(u){const{options:f}=z;const{data:s}=r;const y=f.markup.attributeSortList.length;const e=se(null);e.end=0;e.index=-1;e.start=0;const a=u.split("");const d=a.length;let t=0;const H=0;let $=false;let n="html";let x=false;function F(b){const h=b.indexOf("{");const A=N(b[h+2],45)?b.slice(h+3).trimStart():b.slice(h+2).trimStart();return A.slice(0,A.search(/\s/))}function i(b){const h=b.indexOf("{");if(N(b[h+1],37)){let A=N(b[h+2],45)?b.slice(h+3).trimStart():b.slice(h+2).trimStart();A=A.slice(0,A.search(/\s/));if(A.startsWith("end"))return false;return de.liquid.tags.has(A)}return false}function T(b){let h=b;if(Array.isArray(b))h=b.join("");const A=h.indexOf("{");if(N(h[A+1],37)){if(N(h[A+2],45))return h.slice(A+3).trimStart().startsWith("end");return h.slice(A+2).trimStart().startsWith("end")}return false}function S(b,h){if(h===1){return N(b[0],123)&&(N(b[1],37)||N(b[1],123))}else if(h===2){return N(b[b.length-1],125)&&(N(b[b.length-2],37)||N(b[b.length-2],123))}else if(h===3){return N(b[0],123)&&(N(b[1],37)||N(b[1],123))&&(N(b[b.length-1],125)&&(N(b[b.length-2],37)||N(b[b.length-2],123)))}else if(h===4){return /{[{%}]/.test(b)}else if(h===5){return /{[{%]/.test(b)&&/[%}]}/.test(b)}}function g(b){if(f.language!=="xml"&&f.language!=="jsx"){const h=j=>j.replace(/\s*$/," ");const A=j=>j.replace(/^\s*/," ");if(/(?:{[=#/]|%[>\]])|\}%[>\]]/.test(b))return b;b=b.replace(/{[{%]-?\s*/g,h);b=b.replace(/\s*-?[%}]}/g,A);return b}return b}function L(b,h,A){if(b===s){if(h.types.indexOf("end")>-1){e.end=e.end+1;}else if(h.types.indexOf("start")>-1){e.start=e.start+1;}}r.push(b,h,A);}function U(b){let h=0;let A="";const j=/^(?:<|{%-?|{{-?)=?\s*/;if(typeof b!=="string")return "";h=b.replace(j,"%").replace(/\s+/," ").indexOf(" ");A=b.replace(j," ");A=h<0?A.slice(1,b.length-1):A.slice(1,h);if(n==="html")A=A.toLowerCase();A=A.replace(/-?[%}]}$/,"");if(A.indexOf("(")>0)A=A.slice(0,A.indexOf("("));if(A==="?xml?")return "xml";return A}function G(b,h){const A=U(b);const j=se(null);j.begin=r.structure[r.structure.length-1][1];j.ender=-1;j.lexer="markup";j.lines=s.lines[r.count]>0?1:0;j.stack=r.structure[r.structure.length-1][0];j.token=`</${r.structure[r.structure.length-1][0]}>`;j.types="end";L(s,j,"");if(de.html.tags.has(r.structure[r.structure.length-1][0])&&(h===true&&r.structure.length>1||h===false&&`/${r.structure[r.structure.length-1][0]}`!==A)){do{j.begin=r.structure[r.structure.length-1][1];j.stack=r.structure[r.structure.length-1][0];j.token=`</${r.structure[r.structure.length-1][0]}>`;L(s,j,"");}while(de.html.tags.has(r.structure[r.structure.length-1][0])&&(h===true&&r.structure.length>1||h===false&&`/${r.structure[r.structure.length-1][0]}`!==A))}}function l(b){const h=se(null);h.begin=r.structure[r.structure.length-1][1];h.ender=-1;h.lexer="markup";h.lines=r.linesSpace;h.stack=r.structure[r.structure.length-1][0];h.token="";h.types="";let A=0;let j="";let M="";let V="";let C="";let _="";let X=false;let te=false;let Q=false;let K=false;let W=false;let I=false;let Z=false;let R=[];let le=["",0];function ne(o){const p=o.indexOf("=");if(p>0&&(p<o.indexOf('"')&&o.indexOf('"')>0||p<o.indexOf("'")&&o.indexOf("'")>0)){return [o.slice(0,p),o.slice(p+1)]}return [o,""]}function ke(){const o=r.count;const p=C.replace(/(\/)$/,"");const v=f.markup.quoteConvert;let w=0;let q=0;let O=0;let Y="";let B="";let D=[];let ae=R.length;function re(){if(Q===true||v==="none"||h.types!=="attribute"||v==="single"&&h.token.indexOf('"')<0||v==="double"&&h.token.indexOf("'")<0){L(s,h,"");}else {let ee=0;let J=false;const pe=h.token.split("");const ie=h.token.indexOf("=");const oe=pe.length-1;if(he(pe[ie+1],34)&&he(pe[pe.length-1],34)&&v==="single"){L(s,h,"");}else if(he(pe[ie+1],39)&&he(pe[pe.length-1],39)&&v==="double"){L(s,h,"");}else {ee=ie+2;if(v==="double"){if(h.token.slice(ie+2,oe).indexOf('"')>-1)J=true;pe[ie+1]='"';pe[pe.length-1]='"';}else {if(h.token.slice(ie+2,oe).indexOf("'")>-1)J=true;pe[ie+1]="'";pe[pe.length-1]="'";}if(J===true){do{if(pe[ee]==="'"&&v==="single"){pe[ee]='"';}else if(pe[ee]==='"'&&v==="double"){pe[ee]="'";}ee=ee+1;}while(ee<oe)}h.token=pe.join("");L(s,h,"");}}}function fe(ee,J){if(i(J)){const pe=F(J);if(de.liquid.tags.has(pe)){h.types="template_attribute_start";h.stack=pe;r.structure.push([h.stack,r.count]);}h.token=J;re();return}else if(T(J)){h.types="template_attribute_end";h.token=J;r.structure.pop();re();return}else if(S(ee,1)){h.types="template_attribute";}else if(N(ee[0],60)){h.types="template_attribute";}h.token=J;re();h.types="attribute";}if(R.length<1)return;if(R[R.length-1][0]==="/"){R.pop();j=j.replace(/>$/,"/>");}q=R.length;O=1;if(O<q){do{Y=R[O-1][0];if(Y.charAt(Y.length-1)==="="&&R[O][0].indexOf("=")<0){R[O-1][0]=Y+R[O][0];R.splice(O,1);q=q-1;O=O-1;}O=O+1;}while(O<q)}if(f.markup.attributeSort===true&&f.language!=="jsx"&&K===false&&W===false){if(y>0){const ee=[];O=0;q=0;ae=R.length;do{q=0;do{Y=R[q][0].split("=")[0];if(f.markup.attributeSortList[O]===Y){ee.push(R[q]);R.splice(q,1);ae=ae-1;break}q=q+1;}while(q<ae);O=O+1;}while(O<y);R=r.safeSort(R,"",false);R=ee.concat(R);ae=R.length;}else {R=r.safeSort(R,"",false);}}h.begin=o;h.stack=p;h.types="attribute";D=[];if(w<ae){do{if(R[w]===void 0)break;R[w][0]=R[w][0].replace(/\s+$/,"");h.lines=R[w][1];q=R[w][0].indexOf("=");O=R[w][0].indexOf('"');if(S(R[w][0],5)){if(q>R[w][0].indexOf("{")&&q<R[w][0].indexOf("}")){q=-1;}}R[w][0].indexOf("'");if(/^\/(\/|\*)/.test(R[w][0])&&f.language==="jsx"){h.types="comment_attribute";h.token=R[w][0];re();}else if(q<0){if(S(R[w][0],5)){if(N(R[w][0][1],123)){h.types="template_attribute";}else {if(T(R[w][0])){h.types="template_attribute_end";r.structure.pop();}else {const ee=F(R[w][0]);if(de.liquid.tags.has(ee)){h.types="template_attribute_start";h.stack=ee;r.structure.push([h.stack,r.count]);}else if(de.liquid.else.has(ee)){h.types="template_attribute_else";}}}h.token=R[w][0];re();}else {h.types="attribute";h.token="#[{(".indexOf(R[w][0].charAt(0))<0?R[w][0].toLowerCase():h.token=R[w][0];re();}}else {Y=R[w][0].slice(0,q);B=R[w][0].slice(q+1);if(f.markup.correct&&`<{"'=`.indexOf(B[0])<0)B='"'+B+'"';if(f.language==="jsx"&&/^\s*\{/.test(B)){h.token=Y+"={";h.types="jsx_attribute_start";L(s,h,"jsx_attribute");z.lexers.script(B.slice(1,B.length-1));h.begin=r.count;if(/\s\}$/.test(B)){B=B.slice(0,B.length-1);B=/\s+$/.exec(B)[0];if(B.indexOf("\n")<0){h.lines=1;}else {h.lines=B.split("\n").length;}}else {h.lines=0;}h.begin=r.structure[r.structure.length-1][1];h.stack=r.structure[r.structure.length-1][0];h.token="}";h.types="jsx_attribute_end";re();h.types="attribute";h.begin=o;h.stack=p;}else if(S(Y,5)){Y=Y+"="+B;fe(B.replace(/^(["'])/,"").replace(/(["'])$/,""),Y.replace(/(\s+)$/,""));}else {h.types="attribute";h.token="#[{(".indexOf(R[w][0].charAt(0))<0?R[w][0].toLowerCase():h.token=R[w][0];re();}}w=w+1;}while(w<ae)}if(D.length>0){h.token=D.join(" ");re();}}$=false;if(b==="---"){_="---";V="comment";}else if(N(a[t],60)){if(a[t+1]==="/"){b=">";V="end";}else if(a[t+1]==="!"){if((a[t+2]==="d"||a[t+2]==="D")&&(a[t+3]==="o"||a[t+3]==="O")&&(a[t+4]==="c"||a[t+4]==="C")&&(a[t+5]==="t"||a[t+5]==="T")&&(a[t+6]==="y"||a[t+6]==="Y")&&(a[t+7]==="p"||a[t+7]==="P")&&(a[t+8]==="e"||a[t+8]==="E")){b=">";V="doctype";I=true;}else if(a[t+2]==="-"&&a[t+3]==="-"){b="-->";V="comment";_="<!--";}else if(a[t+2]==="["&&a[t+3]==="C"&&a[t+4]==="D"&&a[t+5]==="A"&&a[t+6]==="T"&&a[t+7]==="A"&&a[t+8]==="["){b="]]>";V="cdata";I=true;}}else if(a[t+1]==="?"){b="?>";if(a[t+2]==="x"&&a[t+3]==="m"&&a[t+4]==="l"){V="xml";Z=true;}else {I=true;V="template";}}else if(N(a[t+1],37)){I=true;}else if((a[t+1]==="p"||a[t+1]==="P")&&(a[t+2]==="r"||a[t+2]==="R")&&(a[t+3]==="e"||a[t+3]==="E")&&(a[t+4]===">"||/\s/.test(a[t+4]))){b="</pre>";V="ignore";I=true;}else {Z=true;b=">";}}else if(N(a[t],123)){if(f.language==="jsx"){$=true;te=true;h.token="{";h.types="script_start";r.structure.push(["script",r.count]);L(s,h,"");return}if(N(a[t+1],123)){I=true;b="}}";V="template";}else if(N(a[t+1],37)){I=true;b="%}";V="template";const o=a.indexOf("}",t+2);if(a[o-1].charCodeAt(0)===37){let p=a.slice(t+2,o-1).join("");if(p.charCodeAt(0)===45){_="{%-";p=p.slice(1).trimStart();}else {_="{%";p=p.trimStart();}if(p.charCodeAt(p.length-1)===45){b="-%}";p=p.slice(0,p.length-1).trimEnd();}else {b="%}";p=p.trimEnd();}if(p==="comment"){const v=u.indexOf("{%",o);let w=v;if(a[v+1].charCodeAt(0)===45)w=v+1;w=u.indexOf("endcomment",w);if(w>0){w=a.indexOf("}",w);if(w>0&&a[w-1].charCodeAt(0)===37){V="comment";_=a.slice(t,o+1).join("");b=a.slice(v,w+1).join("");}}}}else {I=true;b="%}";V="template";}}else {I=true;b=a[t+1]+"}";V="template";}}if(f.markup.preserveAttributes===true)I=true;if(te)return;M=b.charAt(b.length-1);if(V==="comment"&&(N(a[t],60)||N(a[t],123)&&N(a[t+1],37))){le=r.wrapCommentBlock({chars:a,end:d,lexer:"markup",opening:_,start:t,terminator:b});j=le[0];t=le[1];if(j.replace(_,"").trimStart().indexOf("@prettify-ignore-start")===0){h.token=j;h.types="ignore";L(s,h,"");return}}else if(t<d){let pe=function(){if(ee===false&&N(a[t-1],123)&&(N(a[t],123)||N(a[t],37))){return true}else if(ee===true&&N(a[t],125)&&(N(a[t-1],125)||N(a[t-1],37))){return false}return ee},ie=function(){let be=t;do{be=be-1;}while(a[be]==="\\");be=t-be;return be%2===1},oe=function(be){let ce;let ue="";let Ae=0;let qe=0;const Fe="data-prettify-ignore";if(be===true){ue=J.join("");ce=ne(ue);D="";if(ce[0]===Fe)Q=true;}else {ue=J.join("");if(f.language!=="jsx"||f.language==="jsx"&&ue.charAt(ue.length-1)!=="}"){ue=ue.replace(/\s+/g," ");}ce=ne(ue);if(ce[0]===Fe)Q=true;if(f.language==="jsx"&&J[0]==="{"&&J[J.length-1]==="}"){q=0;}}if(N(ue[0],123)&&N(ue[1],37))W=true;if(x===false&&i(ue)){x=true;}else if(x===true&&T(ue)){x=false;}ue=ue.replace(/^\u0020/,"").replace(/\u0020$/,"");J=ue.replace(/\r\n/g,"\n").split("\n");qe=J.length;if(Ae<qe){do{J[Ae]=J[Ae].replace(/(\s+)$/,"");Ae=Ae+1;}while(Ae<qe)}ue=J.join(f.crlf===true?"\r\n":"\n");ue=g(ue);if(x===true||N(ue[0],123)&&(N(ue[1],37)||N(ue[1],123)));if(ue==="="){R[R.length-1][0]=`${R[R.length-1][0]}=`;}else if(N(ue[0],61)&&R.length>0&&R[R.length-1][0].indexOf("=")<0){R[R.length-1][0]=R[R.length-1][0]+ue;}else if(he(ue[0],61)&&R.length>0&&R[R.length-1][0].indexOf("=")===R[R.length-1][0].length-1){R[R.length-1][0]=R[R.length-1][0]+ue;}else if(ue!==""&&ue!==" "){R.push([ue,B]);}if(R.length>0){const[We]=R[R.length-1];if(We.indexOf("=\u201C")>0){r.error=`Invalid quote character (\u201C, &#x201c) used on line number ${r.lineNumber}`;}else if(We.indexOf("=\u201D")>0){r.error=`Invalid quote character (\u201D, &#x201d) used on line number ${r.lineNumber}`;}}J=[];B=a[t]==="\n"?2:1;};const o=[];const p=[];let v=0;let q=0;let O=0;let P=0;let Y=0;let B=0;let D="";let ae="";let re=false;let fe=false;let ee=false;let J=[];do{if(N(a[t],10)){B=B+1;r.lineNumber=r.lineNumber+1;}if(I===true||(me(a[t])===false&&he(D,125)||N(D,125))){ee=pe();p.push(a[t]);if(N(p[0],60)&&N(p[1],162)&&N(b,162)){h.token="<>";h.types="start";L(s,h,"(empty)");return}if(N(p[0],60)&&N(p[1],45)&&N(p[2],162)&&N(b,162)){h.token="</>";h.types="end";L(s,h,"");return}}if(V==="cdata"&&N(a[t],162)&&a[t-1]==="]"&&a[t-2]!=="]"){r.error=`CDATA tag (${p.join("")}) not properly terminated with "]]>"`;break}if(V==="comment"){D="";if(a[t]===M&&p.length>b.length+1){P=p.length;O=b.length-1;if(O>-1){do{P=P-1;if(p[P]!==b.charAt(O))break;O=O-1;}while(O>-1)}if(O<0)break}}else {if(D===""){if(N(p[0],60)&&N(p[1],33)&&V!=="cdata"){if(V==="doctype"&&N(a[t],162))break;if(a[t]==="["){if(N(a[t+1],60)){V="start";break}if(me(a[t+1])){do{t=t+1;if(a[t]==="\n"){B=B+1;}}while(t<d-1&&me(a[t+1]))}if(N(a[t+1],60)){V="start";break}}}if(f.language==="jsx"){if(N(a[t],123)){q=q+1;}else if(N(a[t],125)){q=q-1;}}if(N(a[t],60)&&I===false&&p.length>1&&b!==">>"&&b!==">>>"&&Z===true){r.error=`Parse error (line ${r.lineNumber}) on: ${p.join("")}`;}if(re===true&&me(a[t])===false&&a[t]!==M){re=false;D=ae;A=0;p.pop();if(t<d){do{if(N(a[t],10))r.lineNumber=r.lineNumber+1;if(f.markup.preserveAttributes===true){p.push(a[t]);}else {J.push(a[t]);}if(f.language!=="jsx"&&(N(a[t],60)||N(a[t],162))&&(D===""||D===">")){if(D===""&&N(a[t],162)){D=">";}else if(N(D,162)){if(N(a[t],60));else if(a[t]===">");}}else if(D===""){if(a[t+1]===M){if(N(J[J.length-1],45)||N(J[J.length-1],63)&&V==="xml"){J.pop();if(I===true)p.pop();t=t-1;}if(J.length>0)oe(false);break}if(I===false&&/^=?['"]?({[{%]|\/|\^|<)/.test(a[t]+a[t+1]+a[t+2]+a[t+3])){J.pop();if(J.length>0&&he(a[t],61)&&x){oe(false);}D="";do{J.push(a[t]);ee=pe();if(a[t]===o[o.length-1]){o.pop();if(N(a[t],125)&&N(a[t+1],125)){J.push("}");t=t+1;}if(o.length<1){if(x===false&&N(a[t],125)&&he(J[0],123)&&(he(J[1],37)||he(J[1],123))){oe(false);ee=!ee;break}if(x===true&&T(J)){if(me(a[t+1])){oe(false);break}else {t=t+1;break}}oe(false);a[t]=" ";break}}else if((N(a[t],34)||N(a[t],39))&&he(o[o.length-1],34)&&he(o[o.length-1],39)){o.push(a[t]);}else if(he(o[o.length-1],125)&&N(a[t],123)&&(N(a[t+1],123)||N(a[t+1],37))){o.push("}");}else if(ee===false&&N(a[t],60)&&he(o[o.length-1],162)){o.push(">");}t=t+1;}while(t<d)}else if(N(a[t],123)&&N(a[t-1],61)&&f.language!=="jsx"){D="}";}else if(N(a[t],34)||N(a[t],39)){D=a[t];if(N(a[t-1],61)&&(N(a[t+1],60)||N(a[t+1],123)&&N(a[t+2],37)||me(a[t+1])&&he(a[t-1],61))){A=t;}}else if(N(a[t],40)){D=")";Y=1;}else if(f.language==="jsx"){if((N(a[t-1],61)||me(a[t-1]))&&N(a[t],123)){D="}";v=1;}else if(N(a[t],45)){if(a[t+1]==="*"){D="*/";}else if(a[t+1]==="/"){D="\n";}}}else if(N(p[0],123)&&N(a[t],123)&&(N(a[t+1],123)||N(a[t+1],37))){if(N(a[t+1],123)){D="}}";}else {D=a[t+1]+"}";}}if(me(a[t])&&D===""){if(N(J[J.length-2],61)){O=t+1;if(O<d){do{if(me(a[O])===false){if(N(a[O],34)||N(a[O],39)){t=O-1;fe=true;J.pop();}break}O=O+1;}while(O<d)}}if(fe===true){fe=false;}else if(q===0||q===1&&N(J[0],123)){J.pop();oe(false);re=true;break}}}else if(N(a[t],40)&&N(D,41)){Y=Y+1;}else if(N(a[t],41)&&N(D,41)){Y=Y-1;if(Y===0){D="";if(a[t+1]===b.charAt(0)){oe(false);break}}}else if(f.language==="jsx"&&(N(D,125)||N(D,10)&&N(a[t],10)||D==="*/"&&N(a[t-1],42)&&N(a[t],45))){if(N(D,125)){if(N(a[t],125)){v=v+1;}else if(a[t]===D){v=v-1;if(v===0){q=0;D="";j=J.join("");if(f.markup.preserveAttributes===false){if(f.language==="jsx"){if(/^\s*$/.test(j)===false)R.push([j,B]);}else {j=j.replace(/\s+/g," ");if(j!==" ")R.push([j,B]);}}J=[];B=1;break}}}else {ae="";K=true;j=J.join("");if(j!==" ")R.push([j,B]);J=[];B=D==="\n"?2:1;D="";break}}else if(N(a[t],123)&&N(a[t+1],37)&&N(a[A-1],61)&&(N(D,34)||N(D,39))){D=D+"{%";A=0;}else if(N(a[t-1],37)&&N(a[t],125)&&(D==='"{%'||D==="'{%")){D=D.charAt(0);A=0;}else if(N(a[t],60)&&N(b,162)&&N(a[A-1],61)&&(N(D,34)||N(D,39))){D=D+"<";A=0;}else if(N(a[t],162)&&(D==='"<'||D==="'<")){D=D.charAt(0);A=0;}else if(A===0&&he(D,162)&&(D.length<2||he(D[0],34)&&he(D[0],39))){P=0;if(p.length>1){C=p[1]+p[2];C=C.toLowerCase();}O=D.length-1;if(O>-1){do{if(a[t-P].charCodeAt(0)!==D.charCodeAt(O))break;P=P+1;O=O-1;}while(O>-1)}if(O<0){oe(true);if(a[t+1]===M)break}}else if(A>0&&me(a[t])===false){A=0;}t=t+1;}while(t<d)}}else if(N(b,10)===false&&(N(a[t],34)||N(a[t],39))){D=a[t];}else if(V!=="comment"&&N(b,10)===false&&N(a[t],60)&&N(a[t+1],33)&&N(a[t+2],45)&&N(a[t+3],45)&&s.types[r.count]!=="conditional"){D="-->";}else if(N(a[t],123)&&he(p[0],123)&&he(b,10)&&(N(a[t+1],123)||N(a[t+1],37))){if(N(a[t+1],123)){D="}}";}else {D=a[t+1]+"}";if(J.length<1&&(R.length<1||me(a[t-1]))){p.pop();do{if(N(a[t],10))B=B+1;J.push(a[t]);t=t+1;}while(t<d&&a[t-1]+a[t]!==D);J.push("}");R.push([J.join(""),B]);J=[];B=1;D="";}}if(D===b)D="";}else if((Z===true||V==="sgml")&&he(b,10)&&me(a[t])&&he(a[t-1],60)){if(V==="sgml"){p.push(" ");}else {re=true;}}else if(Z===true&&f.language==="jsx"&&N(a[t],45)&&(N(a[t+1],42)||N(a[t+1],45))){re=true;p[p.length-1]=" ";J.push(a[t]);if(N(a[t+1],42)){ae="*/";}else {ae="\n";}}else if((a[t]===M||N(b,10)&&N(a[t+1],60))&&(p.length>b.length+1||p[0]==="]")&&(f.language!=="jsx"||q===0)){if(N(b,10)){if(me(p[p.length-1])){do{p.pop();t=t-1;}while(me(p[p.length-1]))}break}P=p.length;O=b.length-1;if(O>-1){do{P=P-1;if(p[P]!==b.charAt(O))break;O=O-1;}while(O>-1)}if(O<0)break}}else if(a[t].charCodeAt(0)===D.charCodeAt(D.length-1)&&(f.language==="jsx"&&N(b,125)&&(a[t-1]!=="\\"||ie()===false)||f.language!=="jsx"||he(b,125))){P=0;if(p.length>1){C=p[1]+p[2];C=C.toLowerCase();}O=D.length-1;if(O>-1){do{if(a[t-P]!==D.charAt(O))break;P=P+1;O=O-1;}while(O>-1)}if(O<0)D="";}}t=t+1;}while(t<d);if(f.markup.correct===true){if(N(a[t+1],162)&&N(p[0],60)&&he(p[0],60)){do{t=t+1;}while(N(a[t+1],162))}else if(N(p[0],60)&&N(p[1],60)&&he(a[t+1],162)&&he(p[p.length-2],162)){do{p.splice(1,1);}while(p[1]==="<")}}A=0;j=p.join("");C=U(j);j=g(j);if(C==="xml"){n="xml";}else if(n===""&&C==="html"){n="html";}else if(n==="liquid"){n="html";}}h.token=j;h.types=V;C=U(j);if(I===false&&f.language!=="jsx")j=j.replace(/\s+/g," ");if(C==="comment"&&S(j,2)){let O=function(Y){w=Y===""?0:Y.split("\n").length;return ""},P=function(Y){q=Y===""?0:Y.split("\n").length;return ""};const o=j.slice(0,j.indexOf("%}")+2);const p=j.slice(j.indexOf("%}")+2,j.lastIndexOf("{%"));const v=j.slice(j.lastIndexOf("{%"));let w=0;let q=0;h.begin=r.structure[r.structure.length-1][1];h.ender=r.count+3;h.stack=r.structure[r.structure.length-1][0];h.types="template_start";h.token=o;L(s,h,"comment");j=p.replace(/^\s*/,O);j=j.replace(/\s*$/,P);h.begin=r.count;h.lines=w;h.stack="comment";h.token=j;h.types="comment";L(s,h,"");h.types="template_end";h.stack="comment";h.lines=q;h.token=v;L(s,h,"");return}h.types=V;X=(()=>{const o=/(\/>)$/;function p(w,q){if(!de.html.tags.has(w))return false;if(w===q)return true;if(w==="dd"&&q==="dt")return true;if(w==="dt"&&q==="dd")return true;if(w==="td"&&q==="th")return true;if(w==="th"&&q==="td")return true;if(w==="colgroup"&&(q==="tbody"||q==="tfoot"||q==="thead"||q==="tr"))return true;if(w==="tbody"&&(q==="colgroup"||q==="tfoot"||q==="thead"))return true;if(w==="tfoot"&&(q==="colgroup"||q==="tbody"||q==="thead"))return true;if(w==="thead"&&(q==="colgroup"||q==="tbody"||q==="tfoot"))return true;if(w==="tr"&&q==="colgroup")return true;return false}function v(w){h.lines=s.lines[r.count]>0?1:0;h.token=`</${r.structure[r.structure.length-1][0]}>`;h.types="end";L(s,h,"");if(w>0){do{h.begin=r.structure[r.structure.length-1][1];h.stack=r.structure[r.structure.length-1][0];h.token=`</${r.structure[r.structure.length-1][0]}>`;L(s,h,"");w=w-1;}while(w>0)}h.begin=r.structure[r.structure.length-1][1];h.lines=r.linesSpace;h.stack=r.structure[r.structure.length-1][0];h.token=j;h.types="end";s.lines[r.count-1]=0;}if(V==="end"){const w=s.token[r.count];if(s.types[r.count-1]==="singleton"&&w.charCodeAt(w.length-2)!==45&&"/"+U(w)===C){s.types[r.count-1]="start";}}if(n==="html"){if(j.charCodeAt(0)===60&&j.charCodeAt(1)!==33&&j.charCodeAt(1)!==63&&(r.count<0||s.types[r.count].indexOf("template")<0)){j=j.toLowerCase();}if(de.html.tags.has(r.structure[r.structure.length-1][0])&&p(C.slice(1),r.structure[r.structure.length-2][0])){v(0);}else if(r.structure.length>3&&de.html.tags.has(r.structure[r.structure.length-1][0])&&de.html.tags.has(r.structure[r.structure.length-2][0])&&de.html.tags.has(r.structure[r.structure.length-3][0])&&p(C,r.structure[r.structure.length-4][0])===true){v(3);}else if(r.structure.length>2&&de.html.tags.has(r.structure[r.structure.length-1][0])&&de.html.tags.has(r.structure[r.structure.length-2][0])&&p(C,r.structure[r.structure.length-3][0])===true){v(2);}else if(r.structure.length>1&&de.html.tags.has(r.structure[r.structure.length-1][0])&&p(C,r.structure[r.structure.length-2][0])===true){v(1);}else if(p(C,r.structure[r.structure.length-1][0])===true){v(0);}else if(C.charCodeAt(0)===45&&de.html.tags.has(r.structure[r.structure.length-1][0])&&r.structure[r.structure.length-1][0]!==C.slice(1)){G(j,false);h.begin=r.structure[r.structure.length-1][1];h.lines=r.linesSpace;h.stack=r.structure[r.structure.length-1][0];h.token=j;h.types="end";s.lines[r.count-1]=0;}if(de.html.voids.has(C)){if(f.markup.correct===true&&o.test(j)===false){j=j.slice(0,j.length-1)+" />";}return true}}return false})();if(/\bscript|style\b/.test(C)&&j.slice(j.length-2)!=="/>"||/\bschema|style|stylesheet|javascript\b/.test(C)&&j.slice(j.length-2)==="%}"){const o=S(j,3);let p=R.length-1;let v="";let w=[];if(p>-1){do{w=ne(R[p][0]);if(w[0]==="type"){v=w[1];if(v.charCodeAt(0)===34||v.charCodeAt(0)===39){v=v.slice(1,v.length-1);}break}p=p-1;}while(p>-1)}if(o===false&&C==="script"&&(v===""||v==="text/javascript"||v==="babel"||v==="module"||v==="application/javascript"||v==="application/x-javascript"||v==="text/ecmascript"||v==="application/ecmascript"||v==="text/jsx"||v==="application/jsx"||v==="text/cjs"||v==="application/json"||v==="application/ld+json")){$=true;}else if(C==="style"&&f.language!=="jsx"&&(v===""||v==="text/css")){$=true;}else if(o===true&&(C==="javascript"||C==="schema"||C==="style"||C==="stylesheet")){$=true;}if($===true){p=t+1;if(p<d){do{if(me(a[p])===false){if(N(a[p],60)){if(a.slice(p+1,p+4).join("")==="!--"){p=p+4;if(p<d){do{if(me(a[p])===false){$=false;break}if(a[p]==="\n"||a[p]==="\r")break;p=p+1;}while(p<d)}}else {$=false;}}break}p=p+1;}while(p<d)}}}if(Z&&Q===false&&V!=="xml"){if(X===true||j.slice(j.length-2)==="/>"){V="singleton";}else {V="start";}h.types=V;}if(Z&&I===false&&Q&&N(b,162)&&j.slice(j.length-2)!=="/>"){const o=[];const p=[];if(X===true){V="singleton";}else {R.forEach(v=>p.push(v[0]));I=true;V="ignore";t=t+1;if(t<d){let v="";let w=0;let q=0;let O=false;do{if(N(a[t],10))r.lineNumber=r.lineNumber+1;o.push(a[t]);if(v===""){if(N(a[t],34)){v='"';}else if(N(a[t],39)){v="'";}else if(he(o[0],123)&&N(a[t],123)&&(N(a[t+1],123)||N(a[t+1],37))){if(N(a[t+1],123)){v="}}";}else {v=a[t+1]+"}";}}else if(N(a[t],60)&&Z===true){if(N(a[t+1],45)){O=true;}else {O=false;}}else if(a[t]===M&&he(a[t-1],45)){if(O===true){A=A-1;if(A<0)break}else {A=A+1;}}}else if(a[t]===v.charAt(v.length-1)){q=0;w=v.length-1;if(w>-1){do{if(a[t-q]!==v.charAt(w))break;q=q+1;w=w-1;}while(w>-1)}if(w<0)v="";}t=t+1;}while(t<d)}}j=j+o.join("");j=j.replace(">",` ${p.join(" ")}>`);h.token=j;h.types="content-ignore";R=[];}if(h.types.indexOf("template")>-1){if(N(j[0],123)&&N(j[1],37)){if((C==="case"||C==="default")&&(r.structure[r.structure.length-1][0]==="switch"||r.structure[r.structure.length-1][0]==="case")){h.types="template_else";}else if(C==="else"||C==="when"||C==="elsif"){h.types="template_else";}else {if(de.liquid.tags.has(C)){h.types="template_start";}else if(C[0]==="e"&&C[1]==="n"&&C[2]==="d"&&de.liquid.tags.has(C.slice(3))){h.types="template_end";}else if(C[0]==="e"&&C[1]==="n"&&C[2]==="d"){h.types="template_end";h.stack=C.slice(3);let o=0;do{if(s.types[o]==="template"&&s.stack[o]===h.stack){s.types[o]="template_start";e.start=e.start+1;break}else {o=s.stack.indexOf(h.stack,o+1);}}while(o>-1)}else {h.stack=C;}}}else if(h.types==="template"){if(j.indexOf("else")>2)h.types="template_else";}if(h.types==="template_start"||h.types==="template_else"){if(C===""||C==="%"){C=C+j.slice(1).replace(C,"").replace(/^\s+/,"");C=C.slice(0,C.indexOf("(")).replace(/\s+/,"");}}}if(V==="cdata"&&(h.stack==="script"||h.stack==="style")){let o=r.count;let p=r.count;const v=h.stack;if(s.types[p]==="attribute"){do{o=o-1;p=p-1;}while(s.types[p]==="attribute"&&p>-1)}h.begin=o;h.token="<![CDATA[";h.types="cdata_start";j=j.replace(/^(\s*<!\[cdata\[)/i,"").replace(/(\]\]>\s*)$/,"");L(s,h,"");r.structure.push(["cdata",r.count]);if(v==="script"){z.lexers.script(j);}else {z.lexers.style(j);}h.begin=r.structure[r.structure.length-1][1];h.token="]]>";h.types="cdata_end";L(s,h,"");r.structure.pop();}else {L(s,h,C);}ke();if(f.wrap>0&&f.language==="jsx"){let o=0;let p=r.count;let v=0;if(s.types[p].indexOf("attribute")>-1){do{o=o+s.token[p].length+1;p=p-1;}while(s.lexer[p]!=="markup"||s.types[p].indexOf("attribute")>-1);if(s.lines[p]===1)o=o+s.token[p].length+1;}else if(s.lines[p]===1){o=s.token[p].length+1;}v=p-1;if(o>0&&s.types[v]!=="script_end"){if(s.types[v].indexOf("attribute")>-1){do{o=o+s.token[v].length+1;v=v-1;}while(s.lexer[v]!=="markup"||s.types[v].indexOf("attribute")>-1);if(s.lines[v]===1)o=o+s.token[v].length+1;}else if(s.lines[v]===1){o=s.token[v].length+1;}if(o>f.wrap&&s.lines[p]===1){h.begin=s.begin[p];h.ender=p+2;h.lexer=s.lexer[p];h.lines=1;h.stack=s.stack[p];h.token="{";h.types="script_start";r.splice({data:s,howmany:0,index:p,record:h});h.begin=p;h.lexer="script";h.lines=0;h.stack="script";if(f.markup.quoteConvert==="single"){h.token="' '";}else {h.token='" "';}h.types="string";r.splice({data:s,howmany:0,index:p+1,record:h});h.lexer="markup";h.token="}";h.types="script_end";r.splice({data:s,howmany:0,index:p+2,record:h});s.ender[p+3]=s.ender[p+3]+3;p=p+4;do{s.begin[p]=s.begin[p]+3;s.ender[p]=s.ender[p]+3;p=p+1;}while(p<r.count)}}}r.linesSpace=0;}function k(){let b="";let h=r.linesSpace;let A="";const j=[];const M=s.token[r.count]==="{";const V=t;if($===true){if(M===true){A="script";}else if(r.structure[r.structure.length-1][1]>-1){A=U(s.token[r.structure[r.structure.length-1][1]].toLowerCase());}else if(s.begin[r.count]>1){A=U(s.token[s.begin[r.count]].toLowerCase());}else {A=U(s.token[s.begin[r.count]].toLowerCase());}}const C=s.types[r.count]==="template_start"&&s.token[r.count].indexOf("<!")===0&&s.token[r.count].indexOf("<![")<0&&s.token[r.count].charAt(s.token[r.count].length-1)==="[";const _=Object.create(null);_.begin=r.structure[r.structure.length-1][1];_.ender=-1;_.lexer="markup";_.lines=h;_.stack=r.structure[r.structure.length-1][0];_.token="";_.types="content";function X(){let Q=t-1;let K=0;if(a[t-1]!=="\\")return false;if(Q>-1){do{if(a[Q]!=="\\")break;K=K+1;Q=Q-1;}while(Q>-1)}return K%2===1}if(t<d){let Q="";let K="";let W=0;do{if(a[t]==="\n")r.lineNumber=r.lineNumber+1;if($===true){if(K===""){if(a[t]==="/"){if(a[t+1]==="*"){K="*";}else if(a[t+1]==="/"){K="/";}else if(A==="script"&&"([{!=,;.?:&<>".indexOf(a[t-1])>-1){if(f.language!=="jsx"||a[t-1]!=="<")K="reg";}}else if((a[t]==='"'||a[t]==="'"||a[t]==="`")&&X()===false){K=a[t];}else if(a[t]==="{"&&M===true){W=W+1;}else if(a[t]==="}"&&M===true){if(W===0){z.lexers.script(j.join("").replace(/^(\s+)/,"").replace(/(\s+)$/,""));r.structure[r.structure.length-1][1]+=1;if(s.types[r.count]==="end"&&s.lexer[s.begin[r.count]-1]==="script"){_.lexer="script";_.token=f.markup.correct===true?";":"x;";_.types="separator";L(s,_,"");_.lexer="markup";}_.token="}";_.types="script_end";L(s,_,"");r.structure.pop();break}W=W-1;}if(S(s.token[r.count],3)===false){Q=a.slice(t,t+10).join("").toLowerCase();if(A==="script"){Q=t===d-9?Q.slice(0,Q.length-1):Q.slice(0,Q.length-2);if(Q==="<\/script"){let I=j.join("").replace(/^(\s+)/,"").replace(/(\s+)$/,"");t=t-1;if(j.length<1)break;if(/^<!--+/.test(I)&&/--+>$/.test(I)){_.token="<!--";_.types="comment";L(s,_,"");I=I.replace(/^<!--+/,"").replace(/--+>$/,"");z.lexers.script(I);_.token="-->";L(s,_,"");}else {z.lexers.script(I);}break}}if(A==="style"){if(t===d-8){Q=Q.slice(0,Q.length-1);}else if(t===d-9){Q=Q.slice(0,Q.length-2);}else {Q=Q.slice(0,Q.length-3);}if(Q==="</style"){let I=j.join("").replace(/^(\s+)/,"").replace(/(\s+)$/,"");t=t-1;if(j.length<1)break;if(/^<!--+/.test(I)&&/--+>$/.test(I)){_.token="<!--";_.types="comment";L(s,_,"");I=I.replace(/^<!--+/,"").replace(/--+>$/,"");z.lexers.style(I);_.token="-->";L(s,_,"");}else {z.lexers.style(I);if(f.style.sortProperties===true)r.sortCorrection(0,r.count+1);}break}}}else {if(A==="schema"){Q=a.slice(t+3,t+14).join("").toLowerCase();if(t===d-12){Q=Q.slice(0,Q.length-3);}else {Q=Q.slice(0,Q.length-2);}if(Q==="endschema"){let I=j.join("").replace(/^(\s+)/,"").replace(/(\s+)$/,"");t=t-1;if(j.length<1)break;if(/^<!--+/.test(I)&&/--+>$/.test(I)){_.token="<!--";_.types="comment";L(s,_,"");I=I.replace(/^<!--+/,"").replace(/--+>$/,"");z.lexers.script(I);_.token="-->";L(s,_,"");}else {z.options.language="json";z.lexers.script(I);if(f.script.objectSort===true)r.sortCorrection(0,r.count+1);z.options.language="liquid";}break}}else if(A==="style"){Q=a.slice(t+4,t+14).join("").toLowerCase();if(t===d-14){Q=Q.slice(0,Q.length-4);}else if(t===d-13){Q=Q.slice(0,Q.length-3);}else {Q=Q.slice(0,Q.length-2);}if(Q==="endstyle"){let I=j.join("").replace(/^(\s+)/,"").replace(/(\s+)$/,"");t=t-1;if(j.length<1)break;if(/^<!--+/.test(I)&&/--+>$/.test(I)){_.token="<!--";_.types="comment";L(s,_,"");I=I.replace(/^<!--+/,"").replace(/--+>$/,"");z.lexers.style(I);_.token="-->";L(s,_,"");}else {z.lexers.style(I);}break}}else if(A==="javascript"){Q=a.slice(t+4,t+19).join("").toLowerCase();if(t===d-19){Q=Q.slice(0,Q.length-4);}else if(t===d-18){Q=Q.slice(0,Q.length-3);}else {Q=Q.slice(0,Q.length-2);}if(Q==="endjavascript"){let I=j.join("").replace(/^(\s+)/,"").replace(/(\s+)$/,"");t=t-1;if(j.length<1)break;if(/^<!--+/.test(I)&&/--+>$/.test(I)){_.token="<!--";_.types="comment";L(s,_,"");I=I.replace(/^<!--+/,"").replace(/--+>$/,"");z.lexers.script(I);_.token="-->";L(s,_,"");}else {z.lexers.script(I);if(f.script.objectSort===true){r.sortCorrection(0,r.count+1);}}break}}}}else if(K===a[t]&&(K==='"'||K==="'"||K==="`"||K==="*"&&a[t+1]==="/")&&X()===false){K="";}else if(K==="`"&&a[t]==="$"&&a[t+1]==="{"&&X()===false){K="}";}else if(K==="}"&&a[t]==="}"&&X()===false){K="`";}else if(K==="/"&&(a[t]==="\n"||a[t]==="\r")){K="";}else if(K==="reg"&&a[t]==="/"&&X()===false){K="";}else if(K==="/"&&a[t]===">"&&a[t-1]==="-"&&a[t-2]==="-"){Q=a.slice(t+1,t+11).join("").toLowerCase();Q=Q.slice(0,Q.length-2);if(A==="script"&&Q==="<\/script")K="";Q=Q.slice(0,Q.length-1);if(A==="style"&&Q==="</style")K="";}}if(C===true&&a[t]==="]"){t=t-1;b=j.join("");b=b.replace(/\s+$/,"");h=0;_.token=b;L(s,_,"");break}if($===false&&j.length>0&&(a[t]==="<"&&a[t+1]!=="="&&!/\s|\d/.test(a[t+1])||a[t]==="["&&a[t+1]==="%"||a[t]==="{"&&(f.language==="jsx"||a[t+1]==="{"||a[t+1]==="%"))){t=t-1;if(r.structure[r.structure.length-1][0]==="comment"){b=j.join("");}else {b=j.join("").replace(/\s+$/,"");}b=g(b);h=0;_.token=b;if(f.wrap>0&&f.markup.preserveText!==true){let ke=function(){if(b.charAt(I)===" "){ne.push(b.slice(0,I));b=b.slice(I+1);Z=b.length;I=le;return}do{I=I-1;}while(I>0&&b.charAt(I)!==" ");if(I>0){ne.push(b.slice(0,I));b=b.slice(I+1);Z=b.length;I=le;}else {I=le;do{I=I+1;}while(I<Z&&b.charAt(I)!==" ");ne.push(b.slice(0,I));b=b.slice(I+1);Z=b.length;I=le;}};let I=f.wrap;let Z=b.length;const ge="";const R="";const le=f.wrap;const ne=[];if(s.token[s.begin[r.count]]==="<a>"&&s.token[s.begin[s.begin[r.count]]]==="<li>"&&s.lines[s.begin[r.count]]===0&&r.linesSpace===0&&b.length<f.wrap){L(s,_,"");break}if(Z<le){L(s,_,"");break}if(r.linesSpace<1){let we=r.count;do{I=I-s.token[we].length;if(s.types[we].indexOf("attribute")>-1)I=I-1;if(s.lines[we]>0&&s.types[we].indexOf("attribute")<0)break;we=we-1;}while(we>0&&I>0);if(I<1)I=b.indexOf(" ");}b=j.join("");b=b.replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ");do{ke();}while(I<Z);if(b!==""&&b!==" ")ne.push(b);b=f.crlf===true?ne.join("\r\n"):ne.join("\n");b=ge+b+R;}h=0;_.token=b;L(s,_,"");break}j.push(a[t]);t=t+1;}while(t<d)}if(t>V&&t<d){if(/\s/.test(a[t])===true){let Q=t;r.linesSpace=1;do{if(a[Q]==="\n")r.linesSpace=r.linesSpace+1;Q=Q-1;}while(Q>V&&/\s/.test(a[Q])===true)}else {r.linesSpace=0;}}else if(t!==V||t===V&&$===false){b=j.join("").replace(/\s+$/,"");h=0;if(_.token!==b){_.token=b;L(s,_,"");r.linesSpace=0;}}$=false;}if(y>0){do{f.markup.attributeSortList[t]=f.markup.attributeSortList[t].replace(/^\s+/,"").replace(/\s+$/,"");t=t+1;}while(t<y);t=0;}if(f.language==="html"||f.language==="liquid")n="html";do{if(/\s/.test(a[t])){if(s.types[r.count]==="template_start"&&r.structure[r.structure.length-1][0]==="comment"){k();}else {t=r.spacer({array:a,end:d,index:t});}}else if($){k();}else if(a[t]==="<"){l("");}else if(a[t]==="["&&a[t+1]==="%"){l("%]");}else if(a[t]==="{"&&(f.language==="jsx"||a[t+1]==="{"||a[t+1]==="%")){l("");}else if(a[t]==="]"&&H>0){l("]>");}else if(a[t]==="-"&&a[t+1]==="-"&&a[t+2]==="-"){l("---");}else {k();}t=t+1;}while(t<d);if(s.token[r.count].charAt(0)!=="/"&&de.html.tags.has(r.structure[r.structure.length-1][0])){G(s.token[r.count],true);}if(e.end!==e.start&&r.error===""){if(e.end>e.start){const b=e.end-e.start;const h=b===1?"":"s";r.error=`\u2716 Prettify Parse Error:

  ${b} more end type${h} than start types.

`;}else {const b=e.start-e.end;const h=b===1?"":"s";r.error=` \u2716 Prettify Parse Error:

  ${b} more start type${h} than end types.

`;}}return s};z.beautify.markup=c=>{const u=se(null);const f=se(null);const s=se(null);const y="markup";const e=z.parsed;const a=c.crlf===true?String.fromCharCode(13,10):String.fromCharCode(10);const d=z.end<1||z.end>e.token.length?e.token.length:z.end+1;u.is=(i,T)=>e.types[i]===T;u.not=(i,T)=>e.types[i]!==T;u.idx=(i,T)=>i>-1&&e.types[i].indexOf(T);f.is=(i,T)=>e.token[i]===T;f.not=(i,T)=>e.token[i]!==T;let t=z.start;let H=-1;let $=0;let n=0;let x=isNaN(c.indentLevel)?0:Number(c.indentLevel);const F=(()=>{const i=z.start>0?Array(z.start).fill(0,0,z.start):[];function T(){let l=t+1;let k=0;if(u.is(l,void 0))return l-1;if(u.is(l,"comment")||t<d-1&&u.idx(l,"attribute")>-1){do{if(u.is(l,"jsx_attribute_start")){k=l;do{if(u.is(l,"jsx_attribute_end")&&e.begin[l]===k)break;l=l+1;}while(l<d)}else if(u.not(l,"comment")&&u.idx(l,"attribute")<0)return l;l=l+1;}while(l<d)}return l}function S(){const l=e.begin[t];let k=t;do{k=k-1;if(f.is(k,"</li>")&&f.is(k-1,"</a>")&&e.begin[e.begin[k]]===l&&e.begin[k-1]===e.begin[k]+1){k=e.begin[k];}else {return}}while(k>l+1);k=t;do{k=k-1;if(u.is(k+1,"attribute")){i[k]=-10;}else if(f.not(k,"</li>")){i[k]=-20;}}while(k>l+1)}function g(){let l=t;let k=false;if(e.lines[t+1]===0&&c.markup.forceIndent===false){do{if(e.lines[l]>0){k=true;break}l=l-1;}while(l>H);l=t;}else {k=true;}if(k===true){const b=u.is($,"comment")||u.is($,"end")||u.is($,"template_end")?x+1:x;do{i.push(b);l=l-1;}while(l>H);if(b===x+1)i[t]=x;if(u.is(l,"attribute")||u.is(l,"template_attribute")||u.is(l,"jsx_attribute_start")){i[e.begin[l]]=b;}else {i[l]=b;}}else {do{i.push(-20);l=l-1;}while(l>H);i[l]=-20;}H=-1;}function L(){let l=x;if(c.markup.forceIndent===true||c.markup.forceAttribute===true){i.push(x);return}if($<d&&(u.idx($,"end")>-1||u.idx($,"start")>-1)&&e.lines[$]>0){i.push(x);l=l+1;if(e.types[t]==="singleton"&&t>0&&u.idx(t-1,"attribute")>-1&&u.is(e.begin[t-1],"singleton")){if(e.begin[t]<0||u.is(e.begin[t-1],"singleton")&&e.begin[e.ender[t]-1]!==t){i[t-1]=x;}else {i[t-1]=x+1;}}}else if(t>0&&u.is(t,"singleton")&&u.idx(t-1,"attribute")>-1){i[t-1]=x;n=e.token[t].length;i.push(-10);}else if(e.lines[$]===0){i.push(-20);}else if((c.wrap===0||t<d-2&&u.idx(t+2,"attribute")>-1&&e.token[t].length+e.token[t+1].length>c.wrap||(e.token[t].length+e.token[t+1]?e.token[t+1].length:0)>c.wrap)&&(u.is(t+1,"singleton")||u.is(t+1,"template"))){i.push(x);}else {n=n+1;i.push(-10);}if(t>0&&u.idx(t-1,"attribute")>-1&&e.lines[t]<1){i[t-1]=-20;}if(n>c.wrap){let k=t;let b=Math.max(e.begin[t],0);if(u.is(t,"content")&&c.markup.preserveText===false){let h=0;const A=e.token[t].replace(/\s+/g," ").split(" ");do{k=k-1;if(i[k]<0){h=h+e.token[k].length;if(i[k]===-10)h=h+1;}else {break}}while(k>0);k=0;b=A.length;do{if(A[k].length+h>c.wrap){A[k]=a+A[k];h=A[k].length;}else {A[k]=` ${A[k]}`;h=h+A[k].length;}k=k+1;}while(k<b);if(A[0].charAt(0)===" "){e.token[t]=A.join("").slice(1);}else {i[t-1]=l;e.token[t]=A.join("").replace(a,"");}if(e.token[t].indexOf(a)>0){n=e.token[t].length-e.token[t].lastIndexOf(a);}}else {do{k=k-1;if(i[k]>-1){n=e.token[t].length;if(e.lines[t+1]>0)n=n+1;return}if(e.types[k].indexOf("start")>-1){n=0;return}if(e.lines[k+1]>0&&(u.not(k,"attribute")||u.is(k,"attribute")&&u.is(k+1,"attribute"))){if(u.not(k,"singleton")||u.is(k,"attribute")&&u.is(k+1,"attribute")){n=e.token[t].length;if(e.lines[t+1]>0)n=n+1;break}}}while(k>b);i[k]=l;}}}function U(){const l=t;do{if(e.lexer[t+1]===y&&e.begin[t+1]<l&&u.not(t+1,"start")&&u.not(t+1,"singleton"))break;i.push(0);t=t+1;}while(t<d);s[l]=t;i.push(x-1);$=T();if(e.lexer[$]===y&&e.stack[t].indexOf("attribute")<0&&(e.types[$]==="end"||e.types[$]==="template_end")){x=x-1;}}function G(){function l(X){const te=X.indexOf("=");if(te>0&&(te<X.indexOf('"')&&X.indexOf('"')>0||te<X.indexOf("'")&&X.indexOf("'")>0)){return [X.slice(0,te),X.slice(te+1)]}return [X,""]}function k(X){const te=l(X);if(te[1]===""||te[0]==="href"){return X}else if(c.markup.attributeValues==="preserve"){return te[0]+"="+te[1]}else if(c.markup.attributeValues==="strip"){return te[0].trimStart()+"="+te[1].replace(/\s+/g," ").replace(/^["']\s+/,'"')}const Q=c.markup.attributeValues;const K=[];const W=c.wrap>0?te[1].length>c.wrap:false;let I;let Z=false;let ge="";let R="";let le=0;let ne=0;if(Q==="collapse"){I=te[1].replace(/\s+/g," ");}else if(Q==="wrap"){I=te[1].replace(/\s+/g,ke=>/\n/.test(ke)?"\n":ke.replace(/\s+/," "));}do{if(N(I[le],123)&&(N(I[le+1],123)||N(I[le+1],37))){if(Q==="collapse"){if(me(I[le-1])===false&&K[K.length-1]!=="\n"){K.push("\n");}}if(N(I[le+1],37)){ne=I.indexOf("%}",le+1);ge=I.slice(le,ne+2);R=N(ge[2],45)?ge.slice(3).trimStart():ge.slice(2).trimStart();le=ne+2;if(R.startsWith("end")){Z=false;}else if(de.liquid.tags.has(R.slice(0,R.search(/\s/)))){Z=true;}K.push(ge);}else {ne=I.indexOf("}}",le+1);ge=I.slice(le,ne+2);le=ne+2;K.push(ge);}if(Q==="collapse"){if(me(I[le])===false&&K[K.length-1]!=="\n"&&le<I.length-1){K.push("\n");}}}else {if(I[le]===" "){if(Q==="collapse"){if(K[K.length-1]!=="\n"){K.push("\n");}}else if(W&&Q==="wrap"){if(Z===false){K.push("\n");}}}else {K.push(I[le]);}le=le+1;}}while(le<I.length);return te[0]+"="+K.join("")}const b=t-1;function h(X){if(u.is(X,"attribute")||u.idx(X,"template_attribute")>-1){e.token[X]=k(e.token[X]);}else {const te=e.token[X].replace(/\s+/g," ").split(" ");const Q=te.length;let K=1;let W=te[0].length;do{if(W+te[K].length>c.wrap){W=te[K].length;te[K]=a+te[K];}else {te[K]=` ${te[K]}`;W=W+te[K].length;}K=K+1;}while(K<Q);e.token[X]=te.join("");}}let A=t;let j=false;let M=false;let V=false;let C=e.token[b].length+1;let _=(()=>{if(u.idx(t,"start")>0){let X=t;do{if(e.types[X].indexOf("end")>0&&e.begin[X]===t){if(X<d-1&&u.idx(X+1,"attribute")>-1){j=true;break}}X=X+1;}while(X<d)}else if(t<d-1&&u.idx(t+1,"attribute")>-1){j=true;}if(u.is($,"end")||u.is($,"template_end")){return x+(u.is(b,"singleton")?2:1)}if(u.is(b,"singleton")){return x+1}return x})();if(j===false&&u.is(t,"comment_attribute")){i.push(x);if(e.types[b]==="singleton"){i[b]=x+1;}else {i[b]=x;}return}if(_<1)_=1;do{n=n+e.token[t].length+1;if(e.types[t].indexOf("attribute")>0){if(e.types[t]==="template_attribute_start"){if(c.markup.preserveAttributes===true){i.push(-10);}else {do{C=C+e.token[t].length+1;if(e.types[t]==="template_attribute_end")break;if(c.markup.attributeChain==="inline"){i.push(-20);}else if(c.markup.attributeChain==="collapse"){i.push(_);}else if(c.markup.attributeChain==="preserve"){if(e.lines[t]===0){i.push(-20);}else if(e.lines[t]===1){i.push(-10);}else if(e.lines[t]>c.preserveLine){i.push(c.preserveLine);}else {i.push(_);}}t=t+1;n=n+e.token[t].length+1;}while(t<d);if(C>c.wrap);}}else if(e.types[t]==="template_attribute"){i.push(-10);}else if(e.types[t]==="comment_attribute"){i.push(_);}else if(e.types[t].indexOf("start")>0){V=true;if(t<d-2&&e.types[t+2].indexOf("attribute")>0){i.push(-20);t=t+1;s[t]=t;}else {if(b===t-1&&j===false){i.push(_);}else {i.push(_+1);}if(e.lexer[t+1]!==y){t=t+1;U();}}}else if(e.types[t].indexOf("end")>0&&e.types[t].indexOf("template")<0){if(i[t-1]!==-20)i[t-1]=i[e.begin[t]]-1;if(e.lexer[t+1]!==y){i.push(-20);}else {i.push(_);}}else {i.push(_);}M=true;}else if(u.is(t,"attribute")){C=C+e.token[t].length+1;if(c.markup.preserveAttributes===true){i.push(-10);}else if(c.markup.forceAttribute===true||c.markup.forceAttribute>=1||V===true||t<d-1&&u.not(t+1,"template_attribute")&&u.idx(t+1,"attribute")>0){i.push(_);e.token[t]=k(e.token[t]);}else {i.push(-10);}}else if(e.begin[t]<b+1){break}t=t+1;}while(t<d);t=t-1;if(i[t-1]>0&&u.idx(t,"end")>0&&u.idx(t,"attribute")>0&&u.not(b,"singleton")&&j===true){i[t-1]=i[t-1]-1;}if(i[t]!==-20){if(c.language==="jsx"&&u.idx(b,"start")>-1&&u.is(t+1,"script_start")){i[t]=_;}else {i[t]=i[b];}}if(c.markup.forceAttribute===true){n=0;i[b]=_;}else if(c.markup.forceAttribute>=1){if(i.length>c.markup.forceAttribute){i[b]=_;}else {i[b]=-10;}}else {i[b]=-10;}if(M===true||c.markup.preserveAttributes===true||f.is(b,"<%xml%>")||f.is(b,"<?xml?>")){n=0;return}A=t;if(A>b+1){if(c.markup.selfCloseSpace===false)C=C-1;if(C>c.wrap&&c.wrap>0&&c.markup.forceAttribute===false){n=e.token[t].length;do{if(e.token[A].length>c.wrap&&/\s/.test(e.token[A]))h(A);i[A]=_;A=A-1;}while(A>b)}}else if(c.wrap>0&&u.is(t,"attribute")&&e.token[t].length>c.wrap&&/\s/.test(e.token[t])){h(t);}}do{if(e.lexer[t]===y){if(e.token[t].toLowerCase().indexOf("<!doctype")===0)i[t-1]=x;if(e.types[t].indexOf("attribute")>-1){G();}else if(u.is(t,"comment")){if(H<0)H=t;if(u.not(t+1,"comment")||t>0&&u.idx(t-1,"end")>-1)g();}else if(u.not(t,"comment")){$=T();if(u.is($,"end")||u.is($,"template_end")){x=x-1;if(u.is($,"template_end")&&u.is(e.begin[$]+1,"template_else")){x=x-1;}if(f.is(t,"</ol>")||f.is(t,"</ul>")||f.is(t,"</dl>")){S();}}if(u.is(t,"script_end")&&u.is(t+1,"end")){if(e.lines[t+1]<1){i.push(-20);}else {i.push(-10);}}else if((c.markup.forceIndent===false||c.markup.forceIndent&&u.is($,"script_start"))&&(u.is(t,"content")||u.is(t,"singleton")||u.is(t,"template"))){n=n+e.token[t].length;if(u.is(t,"template")){i.push(x);const l=e.token[t].indexOf(a);if(l>0){const k=i[t-1]*c.indentSize+(e.token[t].charCodeAt(2)===45?c.indentSize:c.indentSize-1);const b=[];let h=0;do{b.push(" ");h=h+1;}while(h<k);e.token[t]=e.token[t].replace(/^\s+/gm,"").replace(/\n/g,A=>{return A+b.join("")});}}else if(e.lines[$]>0&&u.is($,"script_start")){i.push(-10);}else if(c.wrap>0&&(u.idx(t,"template")<0||$<d&&u.idx(t,"template")>-1&&u.idx(t,"template")<0)){L();}else if($<d&&(u.idx($,"end")>-1||u.idx($,"start")>-1)&&(e.lines[$]>0||u.idx(t,"template_")>-1)){i.push(x);}else if(e.lines[$]===0){i.push(-20);}else {i.push(x);}}else if(u.is(t,"start")||u.is(t,"template_start")){x=x+1;if(u.is(t,"template_start")&&u.is(t+1,"template_else")){x=x+1;}if(c.language==="jsx"&&f.is(t+1,"{")){if(e.lines[t+1]===0){i.push(-20);}else {i.push(-10);}}else if(u.is(t,"start")&&u.is($,"end")){i.push(-20);}else if(u.is(t,"start")&&u.is($,"script_start")){i.push(-10);}else if(c.markup.forceIndent===true){i.push(x);}else if(u.is(t,"template_start")&&u.is($,"template_end")){i.push(-20);}else if(e.lines[$]===0&&(u.is($,"content")||u.is($,"singleton")||u.is($,"start")&&u.is($,"template"))){i.push(-20);}else {i.push(x);}}else if(c.markup.forceIndent===false&&e.lines[$]===0&&(u.is($,"content")||u.is($,"singleton"))){i.push(-20);}else if(u.is(t+2,"script_end")){i.push(-20);}else if(u.is(t,"template_else")){if(u.is($,"template_end")){i[t-1]=x+1;}else {i[t-1]=x-1;}i.push(x);}else {i.push(x);}}if(u.not(t,"content")&&u.not(t,"singleton")&&u.not(t,"template")&&u.not(t,"attribute")){n=0;}}else {n=0;U();}t=t+1;}while(t<d);return i})();return (()=>{const i=[];const T=(()=>{const l=[c.indentChar];const k=c.indentSize-1;let b=0;if(b<k){do{l.push(c.indentChar);b=b+1;}while(b<k)}return l.join("")})();function S(l){const k=[];const b=c.preserveLine+1;const h=Math.min(e.lines[t+1]-1,b);let A=0;if(l<0)l=0;do{k.push(a);A=A+1;}while(A<h);if(l>0){A=0;do{k.push(T);A=A+1;}while(A<l)}return k.join("")}function g(){let l=e.token[t].split(a);const k=e.lines[t+1];if(u.is(t,"comment"))l=l.map(j=>j.trimStart());const b=F[t-1]>-1?u.is(t,"attribute")?F[t-1]+1:F[t-1]:(()=>{let j=t-1;let M=j>-1&&u.idx(j,"start")>-1;if(F[t]>-1&&u.is(t,"attribute")){return F[t]+1}do{j=j-1;if(F[j]>-1){if(u.is(t,"content")&&M===false){return F[j]}else {return F[j]+1}}if(u.idx(j,"start")>-1)M=true;}while(j>0);return 1})();e.lines[t+1]=0;let h=0;const A=l.length-1;do{if(u.is(t,"comment")){if(l[h]!==""){if(l[h+1].trimStart()!==""){i.push(l[h],S(b));}else {i.push(l[h],"\n");}}else {if(l[h+1].trimStart()===""){i.push("\n");}else {i.push(S(b));}}}else {i.push(l[h],S(b));}h=h+1;}while(h<A);e.lines[t+1]=k;i.push(l[A]);if(F[t]===-10){i.push(" ");}else if(F[t]>-1){i.push(S(F[t]));}}function L(){const l=e.token[t];const k=/(\/|\?)?>$/;const b=k.exec(l);let h=t+1;let A=false;let j=c.markup.selfCloseSpace===true&&b!==null&&b[0]==="/>"?" ":"";if(b===null)return;e.token[t]=l.replace(k,"");do{if(u.is(h,"jsx_attribute_end")&&e.begin[e.begin[h]]===t){A=false;}else if(e.begin[h]===t){if(u.is(h,"jsx_attribute_start")){A=true;}else if(u.idx(h,"attribute")<0&&A===false){break}}else if(A===false&&(e.begin[h]<t||u.idx(h,"attribute")<0)){break}h=h+1;}while(h<d);if(u.is(h-1,"comment_attribute"))j=S(F[h-2]-1);e.token[h-1]=e.token[h-1]+j+b[0];if(u.is(h,"comment")&&e.lines[t+1]<2)F[t]=-10;}t=z.start;let U="";let G;G=c.indentLevel;do{if(e.lexer[t]===y){if((u.is(t,"start")||u.is(t,"singleton")||u.is(t,"xml")||u.is(t,"sgml"))&&u.idx(t,"attribute")<0&&t<d-1&&e.types[t+1]!==void 0&&u.idx(t+1,"attribute")>-1){L();}if(f.not(t,void 0)&&e.token[t].indexOf(a)>0&&(u.is(t,"content")&&c.markup.preserveText===false||u.is(t,"comment")||u.is(t,"attribute"))){g();}else {i.push(e.token[t]);if(F[t]===-10&&t<d-1){i.push(" ");}else if(F[t]>-1){i.push(S(F[t]));G=F[t];}}}else {if(s[t]===t&&u.not(t,"reference")){i.push(e.token[t]);}else {z.end=s[t];z.start=t;c.indentLevel=G;U=z.beautify[e.lexer[t]](c).replace(/\s+$/,"");i.push(U);if(F[z.iterator]>-1&&s[t]>t){i.push(S(F[z.iterator]));}t=z.iterator;c.indentLevel=0;}}t=t+1;}while(t<d);z.iterator=d-1;if(i[0]===a||i[0]===" ")i[0]="";return i.join("")})()};z.beautify.style=c=>{const u=[];const f=z.parsed;const s=c.crlf===true?"\r\n":"\n";const y=z.end>0?z.end+1:f.token.length;const e=function x(){let F=0;const i=[];do{i.push(c.indentChar);F=F+1;}while(F<c.indentSize);return i.join("")}();const a=c.preserveLine+1;let d=c.indentLevel;let t=z.start;let H=["",""];const $=function x(F){const i=[];const T=function g(){if(t===y-1){return 1}if(f.lines[t+1]-1>a){return a}if(f.lines[t+1]>1){return f.lines[t+1]-1}return 1}();let S=0;if(F<0)F=0;do{i.push(s);S=S+1;}while(S<T);if(F>0){S=0;do{i.push(e);S=S+1;}while(S<F)}u.push(i.join(""));};const n=function x(){const F=f.begin[t];const i=f.token[F];const T=f.token[t];const S=[];let g=t;let L=0;let U;let G=0;if(F<0||g<=F)return;do{g=g-1;if(f.begin[g]===F){if(f.token[g]===":"){U=[g-1,0];do{g=g-1;if((f.token[g]===";"&&i==="{"||f.token[g]===","&&i==="(")&&f.begin[g]===F||f.token[g]===T&&f.begin[f.begin[g]]===F){break}if(f.types[g]!=="comment"&&f.types[g]!=="selector"&&f.token[g]!==i&&f.begin[g]===F){U[1]=f.token[g].length+U[1];}}while(g>F+1);if(U[1]>G)G=U[1];S.push(U);}}else if(f.types[g]==="end"){if(g<f.begin[g])break;g=f.begin[g];}}while(g>F);g=S.length;if(g<2)return;do{g=g-1;if(S[g][1]<G){L=S[g][1];do{f.token[S[g][0]]=f.token[S[g][0]]+" ";L=L+1;}while(L<G)}}while(g>0)};if(c.script.vertical===true&&c.style.compressCSS===false){t=y;do{t=t-1;if(f.token[t]==="}"||f.token[t]===")")n();}while(t>0);t=z.start;}do{if(f.types[t+1]==="end"||f.types[t+1]==="template_end"||f.types[t+1]==="template_else"){d=d-1;}if(f.types[t]==="template"&&f.lines[t]>0){u.push(f.token[t]);if(f.types[t-2]!=="property"&&f.types[t-1]!=="colon")$(d);}else if(f.types[t]==="template_else"){u.push(f.token[t]);d=d+1;$(d);}else if(f.types[t]==="start"||f.types[t]==="template_start"){d=d+1;u.push(f.token[t]);if(f.types[t+1]!=="end"&&f.types[t+1]!=="template_end"&&(c.style.compressCSS===false||c.style.compressCSS===true&&f.types[t+1]==="selector")){$(d);}}else if(f.token[t]===";"&&(c.style.compressCSS===false||c.style.compressCSS===true&&f.types[t+1]==="selector")||f.types[t]==="end"||f.types[t]==="template_end"||f.types[t]==="comment"){u.push(f.token[t]);if(f.types[t+1]==="value"){if(f.lines[t+1]===1){u.push(" ");}else if(f.lines[t+1]>1){$(d);}}else if(f.types[t+1]!=="separator"){if(f.types[t+1]!=="comment"||f.types[t+1]==="comment"&&f.lines[t+1]>1){$(d);}else {u.push(" ");}}}else if(f.token[t]===":"){u.push(f.token[t]);if(c.style.compressCSS===false)u.push(" ");}else if(f.types[t]==="selector"){if(c.style.classPadding===true&&f.types[t-1]==="end"&&f.lines[t]<3){u.push(s);}if(f.token[t].indexOf("and(")>0){f.token[t]=f.token[t].replace(/and\(/,"and (");u.push(f.token[t]);}else if(f.token[t].indexOf("when(")>0){H=f.token[t].split("when(");u.push(H[0].replace(/\s+$/,""));$(d+1);u.push(`when (${H[1]}`);}else {u.push(f.token[t]);}if(f.types[t+1]==="start"){if(c.script.braceAllman===true){$(d);}else if(c.style.compressCSS===false){u.push(" ");}}}else if(f.token[t]===","){u.push(f.token[t]);if(f.types[t+1]==="selector"||f.types[t+1]==="property"){$(d);}else if(c.style.compressCSS===false){u.push(" ");}}else if(f.stack[t]==="map"&&f.token[t+1]===")"&&t-f.begin[t]>5){u.push(f.token[t]);$(d);}else if(f.token[t]==="x;"){$(d);}else if((f.types[t]==="variable"||f.types[t]==="function")&&c.style.classPadding===true&&f.types[t-1]==="end"&&f.lines[t]<3){u.push(s);u.push(f.token[t]);}else if(f.token[t]!==";"||f.token[t]===";"&&(c.style.compressCSS===false||c.style.compressCSS===true&&f.token[t+1]!=="}")){u.push(f.token[t]);}t=t+1;}while(t<y);z.iterator=y-1;return u.join("")};z.beautify.script=c=>{const u=new Set(["ActiveXObject","ArrayBuffer","AudioContext","Canvas","CustomAnimation","DOMParser","DataView","Date","Error","EvalError","FadeAnimation","FileReader","Flash","Float32Array","Float64Array","FormField","Frame","Generator","HotKey","Image","Iterator","Intl","Int16Array","Int32Array","Int8Array","InternalError","Loader","Map","MenuItem","MoveAnimation","Notification","ParallelArray","Point","Promise","Proxy","RangeError","Rectangle","ReferenceError","Reflect","RegExp","ResizeAnimation","RotateAnimation","Set","SQLite","ScrollBar","Set","Shadow","StopIteration","Symbol","SyntaxError","Text","TextArea","Timer","TypeError","URL","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","URIError","WeakMap","WeakSet","Web","Window","XMLHttpRequest"]);const y=se(null);const e=z.parsed;const a="script";const d=z.scopes;const t=z.end<1||z.end>e.token.length?e.token.length:z.end+1;const H=(()=>{let n=z.start;let x=isNaN(c.indentLevel)?0:Number(c.indentLevel);let F=false;let i=false;let T="";let S="";let g=e.types[0];let L=e.token[0];const U=[-1];const G=[];const l=z.start>0?Array(z.start).fill(0,0,z.start):[];const k=[];const b=[[]];const h=[];const A=[];const j=[];const M=[false];const V=[];const C=[];function _(){X(false,false);const E=c.commentIndent===true?x:0;if(F===false&&/\/\u002a\s*global\s/.test(e.token[n])){const m=e.token[n].replace(/\/\u002a\s*global\s+/,"").replace(/\s*\u002a\/$/,"").split(",");let o=m.length;do{o=o-1;m[o]=m[o].replace(/\s+/g,"");if(m[o]!=="")d.push([m[o],-1]);}while(o>0)}if(e.types[n-1]==="comment"||e.types[n+1]==="comment"){l[n-1]=E;}else if(e.lines[n]<2){let m=n+1;if(e.types[m]==="comment"){do{m=m+1;}while(m<t&&e.types[m]==="comment")}if(n<t-1&&e.stack[m]!=="block"&&(e.token[m]==="{"||e.token[m]==="x{")){let o=d.length;e.begin.splice(n,0,e.begin[m]);e.ender.splice(n,0,e.ender[m]);e.lexer.splice(n,0,e.lexer[m]);e.lines.splice(n,0,e.lines[m]);e.stack.splice(n,0,e.stack[m]);e.token.splice(n,0,e.token[m]);e.types.splice(n,0,e.types[m]);if(o>0){do{o=o-1;if(d[o][1]===m){d[o][1]=n;}else if(d[o][1]<n){break}}while(o>0)}m=m+1;e.begin.splice(m,1);e.ender.splice(m,1);e.lexer.splice(m,1);e.lines.splice(m,1);e.stack.splice(m,1);e.token.splice(m,1);e.types.splice(m,1);o=n+1;do{e.begin[o]=n;e.stack[o]=e.stack[m];o=o+1;}while(o<m);o=o+1;do{if(e.begin[o]===e.begin[m]){e.begin[o]=n;if(e.types[o]==="end"){break}}o=o+1;}while(o<t-1);e.begin[m]=n;n=n-1;}else {l[n-1]=-10;if(e.stack[n]==="paren"||e.stack[n]==="method"){l.push(x+2);}else {l.push(x);}if(c.commentIndent===true&&l[n]>-1&&e.lines[n]<3){e.lines[n]=3;}}if(e.types[n+1]!=="comment")F=true;return}else if(e.token[n-1]===","){l[n-1]=E;}else if(L==="="&&e.types[n-1]!=="comment"&&/^(\/\*\*\s*@[a-z_]+\s)/.test(S)===true){l[n-1]=-10;}else if(L==="{"&&e.types[n-1]!=="comment"&&e.lines[0]<2){if(e.stack[n]==="function"){l[n-1]=E;}else {l[n-1]=/\n/.test(S)?E:-10;}}else {l[n-1]=E;}if(e.types[n+1]!=="comment")F=true;if(e.token[e.begin[n]]==="("){l.push(x+1);}else {l.push(x);}if(l[n]>-1&&e.lines[n]<3){if(e.types[n-1]==="comment"&&S.startsWith("//")){e.lines[n]=2;}else {e.lines[n]=3;}}if(c.script.commentNewline===true&&S.startsWith("//")===false&&e.lines[n]>=3){e.lines[n]=2;}}function X(E,m){let o=n-1;let p=E===true?0:1;const v=b[b.length-1]===void 0?[]:b[b.length-1];const w=m===false&&e.stack[n]==="array"&&E===true&&S!=="[";if(A[A.length-1]===false||e.stack[n]==="array"&&c.script.arrayFormat==="inline"||e.stack[n]==="object"&&c.script.objectIndent==="inline"){return}A[A.length-1]=false;do{if(e.types[o]==="end"){p=p+1;}else if(e.types[o]==="start"){p=p-1;}if(e.stack[o]==="global"){break}if(p===0){if(e.stack[n]==="class"||e.stack[n]==="map"||w===false&&(E===false&&e.token[o]!=="("&&e.token[o]!=="x("||E===true&&e.token[o]===",")){if(e.types[o+1]==="template_start"){if(e.lines[o]<1){l[o]=-20;}else {l[o]=x-1;}}else if(v.length>0&&v[v.length-1]>-1){l[o]=x-1;}else {l[o]=x;}}else if(e.stack[n]==="array"&&e.types[n]==="operator"){if(e.token[o]===",")l[o]=x;if(o===e.begin[n])break}if(E===false)break}if(p<0){if(e.types[o+1]==="template_start"||e.types[o+1]==="template_string_start"){if(e.lines[o]<1){l[o]=-20;}else {l[o]=x-1;}}else if(v.length>0&&v[v.length-1]>-1){l[o]=x-1;}else {l[o]=x;}break}o=o-1;}while(o>-1)}function te(){const E=b[b.length-1]===void 0?[]:b[b.length-1];const m=()=>{let o=n;let p=false;const v=e.begin[o];do{o=o-1;if(e.lexer[o]==="markup"){p=true;break}if(e.begin[o]!==v)o=e.begin[o];}while(o>v);if(p===true){o=n;do{o=o-1;if(e.begin[o]!==v){o=e.begin[o];}else if(e.token[o]===","){l[o]=x+1;}}while(o>v);l[v]=x+1;l[n-1]=x;}else {l[n-1]=-20;}};if(S===")"&&e.token[n+1]==="."&&E[E.length-1]>-1&&e.token[E[0]]!==":"){let o=e.begin[n];let p=false;let v=false;do{o=o-1;}while(o>0&&l[o]<-9);p=l[o]===x;o=n+1;do{o=o+1;if(e.token[o]==="{"){v=true;break}if(e.begin[o]===e.begin[n+1]&&(e.types[o]==="separator"||e.types[o]==="end")){break}}while(o<t);if(p===false&&v===true&&b.length>1){b[b.length-2].push(e.begin[n]);x=x+1;}}if(g!=="separator")W();if(e.token[n+1]===","&&(e.stack[n]==="object"||e.stack[n]==="array")){X(true,false);}if(e.token[e.begin[n]-1]===","&&(e.token[n+1]==="}"||e.token[n+1]==="]")&&(e.stack[n]==="object"||e.stack[n]==="array")){X(true,false);}if(e.stack[n]!=="attribute"){if(S!==")"&&S!=="x)"&&(e.lexer[n-1]!=="markup"||e.lexer[n-1]==="markup"&&e.token[n-2]!=="return")){x=x-1;}if(S==="}"&&e.stack[n]==="switch"&&c.script.noCaseIndent===false){x=x-1;}}if(S==="}"||S==="x}"){if(e.types[n-1]!=="comment"&&L!=="{"&&L!=="x{"&&g!=="end"&&g!=="string"&&g!=="number"&&g!=="separator"&&L!=="++"&&L!=="--"&&(n<2||e.token[n-2]!==";"||e.token[n-2]!=="x;"||L==="break"||L==="return")){let o=n-1;let p=false;const v=e.begin[n];const w=G.length;do{if(e.begin[o]===v){if(e.token[o]==="="||e.token[o]===";"||e.token[o]==="x;"){p=true;}if(e.token[o]==="."&&l[o-1]>-1){A[A.length-1]=false;l[v]=x+1;l[n-1]=x;break}if(o>0&&e.token[o]==="return"&&(e.token[o-1]===")"||e.token[o-1]==="x)"||e.token[o-1]==="{"||e.token[o-1]==="x{"||e.token[o-1]==="}"||e.token[o-1]==="x}"||e.token[o-1]===";"||e.token[o-1]==="x;")){x=x-1;l[n-1]=x;break}if(e.token[o]===":"&&k.length===0||e.token[o]===","&&p===false){break}if(o===0||e.token[o-1]==="{"||e.token[o-1]==="x{"||e.token[o]==="for"||e.token[o]==="if"||e.token[o]==="do"||e.token[o]==="function"||e.token[o]==="while"||e.token[o]==="var"||e.token[o]==="let"||e.token[o]==="const"||e.token[o]==="with"){if(G[w-1]===false&&w>1&&(n===t-1||e.token[n+1]!==")"&&e.token[n+1]!=="x)")&&e.stack[n]!=="object"){x=x-1;}break}}else {o=e.begin[o];}o=o-1;}while(o>v)}U.pop();}if(c.script.bracePadding===false&&S!=="}"&&g!=="markup"){l[n-1]=-20;}if(c.script.bracePadding===true&&g!=="start"&&L!==";"&&(l[e.begin[n]]<-9||A[A.length-1]===true)){l[e.begin[n]]=-10;l[n-1]=-10;l.push(-20);}else if(e.stack[n]==="attribute"){l[n-1]=-20;l.push(x);}else if(e.stack[n]==="array"&&(E.length>0||h[h.length-1]===true)){Q();A[A.length-1]=false;l[e.begin[n]]=x+1;l[n-1]=x;l.push(-20);}else if((e.stack[n]==="object"||e.begin[n]===0&&S==="}")&&E.length>0){Q();A[A.length-1]=false;l[e.begin[n]]=x+1;l[n-1]=x;l.push(-20);}else if(S===")"||S==="x)"){const o=S===")"&&L!=="("&&C.length>0?C.pop()+1:0;const p=e.token[e.begin[n]-1]==="if"?(()=>{let v=n;do{v=v-1;if(e.token[v]===")"&&l[v-1]>-1)return o}while(v>e.begin[n]);return o+5})():o;if(o>0&&(c.language!=="jsx"||c.language==="jsx"&&e.token[e.begin[n]-1]!=="render")){const v=c.wrap;const w=e.begin[n];const q=C.length;let O=n-2;if(p>v){l[e.begin[n]]=x+1;l[n-1]=x;do{if(e.begin[O]===w){if(e.token[O]==="&&"||e.token[O]==="||"){l[O]=x+1;}else if(l[O]>-1&&e.types[O]!=="comment"&&e.token[O+1]!=="."){l[O]=l[O]+1;}}else if(l[O]>-1&&e.token[O+1]!=="."){l[O]=l[O]+1;}O=O-1;}while(O>w)}else if(q>0){C[q-1]=C[q-1]+o;}}else if(S===")"&&n>e.begin[n]+2&&e.lexer[e.begin[n]+1]===a&&e.token[e.begin[n]+1]!=="function"){const v=e.begin[n]<0?0:e.begin[n];const w=c.wrap;const q=E.length;let O=0;let P=0;let Y=0;let B=0;let D=0;let ae=false;let re=false;let fe=x+1;let ee=false;let J=false;let pe=false;if(l[v]<-9){P=v;do{P=P+1;}while(P<n&&l[P]<-9);B=P;do{O=O+e.token[P].length;if(l[P]===-10)O=O+1;if(e.token[P]==="("&&Y>0&&Y<w-1&&B===n){Y=-1;}if(e.token[P]===")"){D=D-1;}else if(e.token[P]==="("){D=D+1;}if(P===v&&D>0)Y=O;P=P-1;}while(P>v&&l[P]<-9);if(e.token[P+1]===".")fe=l[P]+1;if(O>w-1&&w>0&&L!=="("&&Y!==-1&&A[A.length-2]===false){if(e.token[v-1]==="if"&&G[G.length-1]===true||e.token[v-1]!=="if"){l[v]=fe;if(e.token[v-1]==="for"){P=v;do{P=P+1;if(e.token[P]===";"&&e.begin[P]===v){l[P]=fe;}}while(P<n)}}}}P=n;O=0;do{P=P-1;if(e.stack[P]==="function"){P=e.begin[P];}else if(e.begin[P]===v){if(e.token[P]==="?"){pe=true;}else if(e.token[P]===","&&ae===false){ae=true;if(O>=w&&w>0)ee=true;}else if(e.types[P]==="markup"&&J===false){J=true;}if(l[P]>-9&&e.token[P]!==","&&e.types[P]!=="markup"){O=0;}else {if(l[P]===-10)O=O+1;O=O+e.token[P].length;if(O>=w&&w>0&&(ae===true||J===true)){ee=true;}}}else {if(l[P]>-9){O=0;}else {O=O+e.token[P].length;if(O>=w&&w>0&&(ae===true||J===true)){ee=true;}}}}while(P>v&&ee===false);if(ae===false&&e.token[e.begin[n]+1].charAt(0)==="`"){l[e.begin[n]]=-20;l[n-1]=-20;}else if((ae===true||J===true)&&O>=w&&w>0||l[v]>-9){if(pe===true){fe=l[v];if(e.token[v-1]==="["){P=n;do{P=P+1;if(e.types[P]==="end"||e.token[P]===","||e.token[P]===";"){break}}while(P<t);if(e.token[P]==="]"){fe=fe-1;re=true;}}}else if(q>0&&E[q-1]>P){fe=fe-q;}A[A.length-1]=false;P=n;do{P=P-1;if(e.begin[P]===v){if(e.token[P].indexOf("=")>-1&&e.types[P]==="operator"&&e.token[P].indexOf("!")<0&&e.token[P].indexOf("==")<0&&e.token[P]!=="<="&&e.token[P].indexOf(">")<0){O=P;do{O=O-1;if(e.begin[O]===v&&(e.token[O]===";"||e.token[O]===","||O===v)){break}}while(O>v)}else if(e.token[P]===","){l[P]=fe;}else if(l[P]>-9&&re===false&&(e.token[v-1]!=="for"||e.token[P+1]==="?"||e.token[P+1]===":")&&(e.token[e.begin[n]]!=="("||e.token[P]!=="+")){l[P]=l[P]+1;}}else if(l[P]>-9&&re===false){l[P]=l[P]+1;}}while(P>v);l[v]=fe;l[n-1]=fe-1;}else {l[n-1]=-20;}if(e.token[e.begin[n]-1]==="+"&&l[e.begin[n]]>-9){l[e.begin[n]-1]=-10;}}else if(c.language==="jsx"){m();}else {l[n-1]=-20;}l.push(-20);}else if(A[A.length-1]===true){if(S==="]"&&e.begin[n]-1>0&&e.token[e.begin[e.begin[n]-1]]==="["){A[A.length-2]=false;}if(e.begin[n]<l.length)l[e.begin[n]]=-20;if(c.language==="jsx"){m();}else if(S==="]"&&l[e.begin[n]]>-1){l[n-1]=l[e.begin[n]]-1;}else {l[n-1]=-20;}l.push(-20);}else if(e.types[n-1]==="comment"&&e.token[n-1].substring(0,2)==="//"){if(e.token[n-2]==="x}")l[n-3]=x+1;l[n-1]=x;l.push(-20);}else if(e.types[n-1]!=="comment"&&(L==="{"&&S==="}"||L==="["&&S==="]")){l[n-1]=-20;l.push(-20);}else if(S==="]"){if(G[G.length-1]===true&&A[A.length-1]===false&&c.script.arrayFormat!=="inline"||L==="]"&&l[n-2]===x+1){l[n-1]=x;l[e.begin[n]]=x+1;}else if(l[n-1]===-10){l[n-1]=-20;}if(e.token[e.begin[n]+1]==="function"){l[n-1]=x;}else if(G[G.length-1]===false){if(L==="}"||L==="x}")l[n-1]=x;let o=n-1;let p=1;do{if(e.token[o]==="]")p=p+1;if(e.token[o]==="["){p=p-1;if(p===0){if(o>0&&(e.token[o+1]==="{"||e.token[o+1]==="x{"||e.token[o+1]==="[")){l[o]=x+1;break}if(e.token[o+1]!=="["||i===false){l[o]=-20;break}break}}if(p===1&&e.token[o]==="+"&&l[o]>1){l[o]=l[o]-1;}o=o-1;}while(o>-1)}else if(c.language==="jsx"){m();}if(c.script.arrayFormat==="inline"){let o=n;const p=e.begin[n];do{o=o-1;if(e.types[o]==="end")break}while(o>p);if(o>p){l[e.begin[n]]=x+1;l[n-1]=x;}else {l[e.begin[n]]=-20;l[n-1]=-20;}}else if(l[e.begin[n]]>-1){l[n-1]=l[e.begin[n]]-1;}l.push(-20);}else if(S==="}"||S==="x}"||G[G.length-1]===true){if(S==="}"&&L==="x}"&&e.token[n+1]==="else"){l[n-2]=x+2;l.push(-20);}else {l.push(x);}l[n-1]=x;}else {l.push(-20);}if(e.types[n-1]==="comment")l[n-1]=x;if(c.script.inlineReturn&&c.attemptCorrection===false&&S==="x}"&&(e.stack[n]==="if"||e.stack[n]==="else")&&e.token[e.begin[e.begin[n-1]-1]-2]!=="else"){l[n-1]=-20;}Q();i=G[G.length-1];G.pop();b.pop();h.pop();j.pop();V.pop();A.pop();M.pop();}function Q(){let E=0;const m=b[b.length-1];if(m===void 0)return;E=m.length-1;if(E<1&&m[E]<0&&(S===";"||S==="x;"||S===")"||S==="x)"||S==="}"||S==="x}")){m.pop();return}if(E<0||m[E]<0)return;if(S===":"){if(e.token[m[E]]!=="?"){do{m.pop();E=E-1;x=x-1;}while(E>-1&&m[E]>-1&&e.token[m[E]]!=="?")}m[E]=n;l[n-1]=x;}else {do{m.pop();E=E-1;x=x-1;}while(E>-1&&m[E]>-1)}if((e.stack[n]==="array"||S===",")&&m.length<1)m.push(-1);}function K(){const E=n;do{if(e.lexer[n+1]===a&&e.begin[n+1]<E)break;if(e.token[E-1]==="return"&&e.types[n]==="end"&&e.begin[n]===E)break;l.push(0);n=n+1;}while(n<t);y[E]=n;l.push(x-1);}function W(){let E=n-1;const m=e.begin[n];if(x<1)return;do{if(m!==e.begin[E]){E=e.begin[E];}else {if(e.types[E]==="separator"||e.types[E]==="operator"){if(e.token[E]==="."&&l[E-1]>0){if(e.token[m-1]==="if"){x=x-2;}else {x=x-1;}}break}}E=E-1;}while(E>0&&E>m)}function I(){if(e.token[n+1]!==","&&S.indexOf("/>")!==S.length-2||e.token[n+1]===","&&e.token[e.begin[n]-3]!=="React"){X(false,false);}if(L==="return"||L==="?"||L===":"){l[n-1]=-10;l.push(-20);}else if(g==="start"||e.token[n-2]==="return"&&e.stack[n-1]==="method"){l.push(x);}else {l.push(-20);}}function Z(){const E=b[b.length-1]===void 0?[]:b[b.length-1];function m(){const o=e.token[n+1];let p=0;let v=0;let w=n;let q=S==="+"?x+2:x;let O=0;if(c.wrap<1){l.push(-10);return}do{w=w-1;if(e.token[e.begin[n]]==="("){if(w===e.begin[n]){O=p;}if(e.token[w]===","&&e.begin[w]===e.begin[n]&&G[G.length-1]===true){break}}if(p>c.wrap-1)break;if(l[w]>-9)break;if(e.types[w]==="operator"&&e.token[w]!=="="&&e.token[w]!=="+"&&e.begin[w]===e.begin[n]){break}p=p+e.token[w].length;if(w===e.begin[n]&&e.token[w]==="["&&p<c.wrap-1){break}if(e.token[w]==="."&&l[w]>-9)break;if(l[w]===-10)p=p+1;}while(w>0);if(O>0)O=O+o.length;p=p+o.length;v=w;if(p>c.wrap-1&&l[w]<-9){do{v=v-1;}while(v>0&&l[v]<-9)}if(e.token[v+1]==="."&&e.begin[n]<=e.begin[v]){q=q+1;}else if(e.types[v]==="operator"){q=l[v];}v=o.length;if(p+v<c.wrap){l.push(-10);return}if(e.token[e.begin[n]]==="("&&(e.token[E[0]]===":"||e.token[E[0]]==="?")){q=x+3;}else if(e.stack[n]==="method"){l[e.begin[n]]=x;if(G[G.length-1]===true){q=x+3;}else {q=x+1;}}else if(e.stack[n]==="object"||e.stack[n]==="array"){X(true,false);}if(e.token[w]==="var"||e.token[w]==="let"||e.token[w]==="const"){p=p-c.indentSize*c.indentChar.length*2;}if(O>0){w=c.wrap-O;}else {w=c.wrap-p;}if(w>0&&w<5){l.push(q);if(e.token[n].charAt(0)==='"'||e.token[n].charAt(0)==="'"){n=n+1;l.push(-10);}return}if(e.token[e.begin[n]]!=="("||O>c.wrap-1||O===0){if(O>0)p=O;if(p-o.length<c.wrap-1&&(o.charAt(0)==='"'||o.charAt(0)==="'")){n=n+1;p=p+3;if(p-o.length>c.wrap-4){l.push(q);return}l.push(-10);return}l.push(q);return}l.push(-10);}W();if(E.length>0&&E[E.length-1]>-1&&e.stack[n]==="array"){h[h.length-1]=true;}if(S!==":"){if(e.token[e.begin[n]]!=="("&&e.token[e.begin[n]]!=="x("&&A.length>0){X(true,false);}if(S!=="?"&&e.token[E[E.length-1]]==="."){let o=0;let p=n;const v=e.begin[p];do{if(e.begin[p]===v){if(e.token[p+1]==="{"||e.token[p+1]==="["||e.token[p]==="function"){break}if(e.token[p]===","||e.token[p]===";"||e.types[p]==="end"||e.token[p]===":"){E.pop();x=x-1;break}if(e.token[p]==="?"||e.token[p]===":"){if(e.token[E[E.length-1]]==="."&&o<2)E[E.length-1]=v+1;break}if(e.token[p]===".")o=o+1;}p=p+1;}while(p<t)}}if(S==="!"||S==="..."){if(L==="}"||L==="x}")l[n-1]=x;l.push(-20);return}if(L===";"||L==="x;"){if(e.token[e.begin[n]-1]!=="for")l[n-1]=x;l.push(-20);return}if(S==="*"){if(L==="function"||L==="yield"){l[n-1]=-20;}else {l[n-1]=-10;}l.push(-10);return}if(S==="?"){if(e.lines[n]===0&&e.types[n-2]==="word"&&e.token[n-2]!=="return"&&e.token[n-2]!=="in"&&e.token[n-2]!=="instanceof"&&e.token[n-2]!=="typeof"&&(g==="reference"||g==="word")){if(e.types[n+1]==="word"||e.types[n+1]==="reference"||(e.token[n+1]==="("||e.token[n+1]==="x(")&&e.token[n-2]==="new"){l[n-1]=-20;if(e.types[n+1]==="word"||e.types[n+1]==="reference"){l.push(-10);return}l.push(-20);return}}if(e.token[n+1]===":"){l[n-1]=-20;l.push(-20);return}k.push(n);if(c.script.ternaryLine===true){l[n-1]=-10;}else {let o=n-1;do{o=o-1;}while(o>-1&&l[o]<-9);E.push(n);x=x+1;if(l[o]===x&&e.token[o+1]!==":"){x=x+1;E.push(n);}l[n-1]=x;if(e.token[e.begin[n]]==="("&&(E.length<2||E[0]===E[1])){A[A.length-1]=false;if(n-2===e.begin[n]){l[e.begin[n]]=x-1;}else {l[e.begin[n]]=x;}o=n-2;do{if(e.types[o]==="end"&&l[o-1]>-1)break;if(l[o]>-1)l[o]=l[o]+1;o=o-1;}while(o>e.begin[n])}}l.push(-10);return}if(S===":"){if(e.stack[n]==="map"||e.types[n+1]==="type"||e.types[n+1]==="type_start"){l[n-1]=-20;l.push(-10);return}if(k.length>0&&e.begin[k[k.length-1]]===e.begin[n]){let o=n;const p=e.begin[n];do{o=o-1;if(e.begin[o]===p){if(e.token[o]===","||e.token[o]===";"){l[n-1]=-20;break}if(e.token[o]==="?"){k.pop();Q();if(c.script.ternaryLine===true)l[n-1]=-10;l.push(-10);return}}else if(e.types[o]==="end"){o=e.begin[o];}}while(o>p)}if(e.token[n-2]==="where"&&e.stack[n-2]===e.stack[n]){l[n-1]=-10;l.push(-10);return}if(g==="reference"&&e.token[e.begin[n]]!=="("&&e.token[e.begin[n]]!=="x("){l[n-1]=-20;l.push(-10);return}if((L===")"||L==="x)")&&e.token[e.begin[n-1]-2]==="function"){l[n-1]=-20;l.push(-10);return}if(e.stack[n]==="attribute"){l[n-1]=-20;l.push(-10);return}if(e.token[e.begin[n]]!=="("&&e.token[e.begin[n]]!=="x("&&(g==="reference"||L===")"||L==="]"||L==="?")&&(e.stack[n]==="map"||e.stack[n]==="class"||e.types[n+1]==="reference")&&(k.length===0||k[k.length-1]<e.begin[n])&&("mapclassexpressionmethodglobalparen".indexOf(e.stack[n])>-1||e.types[n-2]==="word"&&e.stack[n]!=="switch")){l[n-1]=-20;l.push(-10);return}if(e.stack[n]==="switch"&&(k.length<1||k[k.length-1]<e.begin[n])){l[n-1]=-20;if(c.script.caseSpace===true){l.push(-10);}else {l.push(x);}return}if(e.stack[n]==="object"){l[n-1]=-20;}else if(k.length>0){l[n-1]=x;}else {l[n-1]=-10;}l.push(-10);return}if(S==="++"||S==="--"){if(g==="number"||g==="reference"){l[n-1]=-20;l.push(-10);}else if(n<t-1&&(e.types[n+1]==="number"||e.types[n+1]==="reference")){l.push(-20);}else {l.push(-10);}return}if(S==="+"){if(g==="start"){l[n-1]=-20;}else {l[n-1]=-10;}if(c.wrap<1||e.token[e.begin[n]]==="x("){l.push(-10);return}const o=e.token[n+1];if(o===void 0){l.push(-10);return}if(e.types[n-1]==="operator"||e.types[n-1]==="start"){if(e.types[n+1]==="reference"||o==="("||o==="["){l.push(-20);return}if(Number(o.slice(1,-1))>-1&&(/\d/.test(o.charAt(1))===true||o.charAt(1)==="."||o.charAt(1)==="-"||o.charAt(1)==="+")){l.push(-20);return}}return m()}if(e.types[n-1]!=="comment"){if(L==="("){l[n-1]=-20;}else if(S==="*"&&e.stack[n]==="object"&&e.types[n+1]==="reference"&&(L==="{"||L===",")){l[n-1]=x;}else if(S!=="?"||k.length===0){l[n-1]=-10;}}if(S.indexOf("=")>-1&&S!=="=="&&S!=="==="&&S!=="!="&&S!=="!=="&&S!==">="&&S!=="<="&&S!=="=>"&&e.stack[n]!=="method"&&e.stack[n]!=="object"){let o=n+1;let p=0;let v=false;let w="";if((e.token[e.begin[n]]==="("||e.token[e.begin[n]]==="x(")&&e.token[n+1]!=="function"){return}do{if(e.types[o]==="start"){if(v===true&&e.token[o]!=="["){if(M[M.length-1]===true){M[M.length-1]=false;}break}p=p+1;}if(e.types[o]==="end")p=p-1;if(p<0){if(M[M.length-1]===true){M[M.length-1]=false;}break}if(p===0){w=e.token[o];if(v===true){if(e.types[o]==="operator"||e.token[o]===";"||e.token[o]==="x;"||e.token[o]==="?"||e.token[o]==="var"||e.token[o]==="let"||e.token[o]==="const"){if(w!==void 0&&(w==="?"||w.indexOf("=")>-1&&w!=="=="&&w!=="==="&&w!=="!="&&w!=="!=="&&w!==">="&&w!=="<=")){if(M[M.length-1]===false){M[M.length-1]=true;}}if((w===";"||w==="x;"||w==="var"||w==="let"||w==="const")&&M[M.length-1]===true){M[M.length-1]=false;}break}if(M[M.length-1]===true&&(w==="return"||w==="break"||w==="continue"||w==="throw")){M[M.length-1]=false;}}if(w===";"||w==="x;"||w===",")v=true;}o=o+1;}while(o<t);l.push(-10);return}if(S==="-"&&L==="return"||L==="="){l.push(-20);return}if(g==="operator"&&e.types[n+1]==="reference"&&L!=="--"&&L!=="++"&&S!=="&&"&&S!=="||"){l.push(-20);return}return m()}function ge(){const E=()=>{let m=e.begin[n];if(m<0){d.push([e.token[n],-1]);}else {if(e.stack[m+1]!=="function"){do{m=e.begin[m];}while(m>-1&&e.stack[m+1]!=="function")}d.push([e.token[n],m]);}};if(e.types[n-1]==="comment"){l[n-1]=x;}else if(g==="end"&&L!==")"&&e.token[e.begin[n-1]-1]!==")"){l[n-1]=-10;}else if(g!=="separator"&&g!=="start"&&g!=="end"&&g.indexOf("template_string")<0){if(g==="word"||g==="operator"||g==="property"||g==="type"||g==="reference"){l[n-1]=-10;}else {l[n-1]=-20;}}if(L==="var"&&e.lexer[n-1]===a){E();}else if(L==="function"){d.push([e.token[n],n]);}else if(L==="let"||L==="const"){d.push([e.token[n],n]);}else if(e.stack[n]==="arguments"){d.push([e.token[n],n]);}else if(L===","){let m=n;do{m=m-1;}while(m>e.begin[n]&&e.token[m]!=="var"&&e.token[m]!=="let"&&e.token[m]!=="const");if(e.token[m]==="var"){E();}else if(e.token[m]==="let"||e.token[m]==="const"){d.push([e.token[n],n]);}}l.push(-10);}function R(){const E=b[b.length-1]===void 0?[]:b[b.length-1];const m=()=>{if(c.script.methodChain>0){let o=n;let p=e.begin[n];const v=[n];const w=e.token[p-1]==="if";do{o=o-1;if(e.types[o]==="end")o=e.begin[o];if(e.begin[o]===p){if(e.types[o]==="string"&&e.token[o].indexOf("${")===e.token[o].length-2){break}if(e.token[o]==="."){if(l[o-1]>0){l[n-1]=w===true?x+1:x;return}v.push(o);}else if(e.token[o]===";"||e.token[o]===","||e.types[o]==="operator"||(e.types[o]==="word"||e.types[o]==="reference")&&(e.types[o-1]==="word"||e.types[o-1]==="reference")){break}}}while(o>p);if(v.length<c.script.methodChain){l[n-1]=-20;return}o=0;p=v.length;do{l[v[o]-1]=w===true?x+1:x;o=o+1;}while(o<p);o=v[v.length-1]-1;do{if(l[o]>-1)l[o]=l[o]+1;o=o+1;}while(o<n);x=w===true?x+2:x+1;}l[n-1]=x;};if(S==="::"){l[n-1]=-20;l.push(-20);return}if(S==="."){if(e.token[e.begin[n]]!=="("&&e.token[e.begin[n]]!=="x("&&E.length>0){if(e.stack[n]==="object"||e.stack[n]==="array"){X(true,false);}else {X(false,false);}}if(c.script.methodChain===0){l[n-1]=-20;}else if(c.script.methodChain<0){if(e.lines[n]>0){m();}else {l[n-1]=-20;}}else {m();}l.push(-20);return}if(S===","){W();if(G[G.length-1]===false&&(e.stack[n]==="object"||e.stack[n]==="array"||e.stack[n]==="paren"||e.stack[n]==="expression"||e.stack[n]==="method")){G[G.length-1]=true;if(e.token[e.begin[n]]==="("){let o=n;do{o=o-1;if(e.begin[o]===e.begin[n]&&e.token[o]==="+"&&l[o]>-9){l[o]=l[o]+2;}}while(o>e.begin[n])}}if(e.stack[n]==="array"&&c.script.arrayFormat==="indent"){l[n-1]=-20;l.push(x);return}if(e.stack[n]==="array"&&c.script.arrayFormat==="inline"){l[n-1]=-20;l.push(-10);return}if(e.stack[n]==="object"&&c.script.objectIndent==="indent"){l[n-1]=-20;l.push(x);return}if(e.stack[n]==="object"&&c.script.objectIndent==="inline"){l[n-1]=-20;l.push(-10);return}if(E.length>0){if(E[E.length-1]>-1)Q();l[n-1]=-20;l.push(x);return}if(e.token[n-2]===":"&&e.token[n-4]==="where"){l[n-1]=-20;l.push(-10);return}l[n-1]=-20;if(e.types[n+1]!=="end"){j[j.length-1]=j[j.length-1]+1;}if((e.token[e.begin[n]]==="("||e.token[e.begin[n]]==="x(")&&c.language!=="jsx"&&e.stack[n]!=="global"&&(e.types[n-1]!=="string"&&e.types[n-1]!=="number"||e.token[n-2]!=="+"||e.types[n-1]==="string"&&e.types[n-1]!=="number"&&e.token[n-2]==="+"&&e.types[n-3]!=="string"&&e.types[n-3]!=="number")){l.push(-10);return}if(g==="reference"&&e.types[n-2]==="word"&&"var-let-const-from".indexOf(e.token[n-2])<0&&(e.types[n-3]==="end"||e.token[n-3]===";")){V[V.length-1]=true;l.push(-10);return}if(V[V.length-1]===true||e.stack[n]==="notation"){l.push(-10);return}if(j[j.length-1]>3&&(e.stack[n]==="array"||e.stack[n]==="object")){if(A[A.length-1]===true)X(true,true);l[n-1]=-20;if(h[h.length-1]===true){l.push(x);return}const o=e.begin[n];let p=n;do{if(e.types[p]==="end"){p=e.begin[p];}else {if(e.token[p]===","&&e.types[p+1]!=="comment"){l[p]=x;}}p=p-1;}while(p>o);l[o]=x;h[h.length-1]=true;return}if(e.stack[n]==="object"){if(A[A.length-1]===true&&e.types[e.begin[n]-1]!=="word"&&e.types[e.begin[n]-1]!=="reference"&&e.token[e.begin[n]-1]!=="("&&e.token[e.begin[n]-1]!=="x("){const o=e.begin[n];let p=n-1;do{if(e.begin[p]===o){if(e.token[p]===",")break;if(e.token[p]===":"){X(true,false);break}}p=p-1;}while(p>o)}}if(A[A.length-1]===false||e.token[n-2]==="+"&&(g==="string"||g==="number")&&l[n-2]>0&&(L.charAt(0)==='"'||L.charAt(0)==="'")){if(e.stack[n]==="method"){if(e.token[n-2]==="+"&&(L.charAt(0)==='"'||L.charAt(0)==="'")&&(e.token[n-3].charAt(0)==='"'||e.token[n-3].charAt(0)==="'")){l.push(x+2);return}if(e.token[n-2]!=="+"){l.push(-10);return}}l.push(x);return}if(A[A.length-1]===true&&e.stack[n]!=="object"){l.push(-10);return}if(j[j.length-1]<4&&(e.stack[n]==="array"||e.stack[n]==="object")){l.push(-10);return}l.push(x);return}if(S===";"||S==="x;"){W();if(e.token[n+1]!==void 0&&e.types[n+1].indexOf("attribute")>0&&e.types[n+1].indexOf("end")>0){l[n-1]=-20;l.push(x-1);return}if(U[U.length-1]>-1&&e.stack[U[U.length-1]]!=="expression"){let o=n;do{o=o-1;if(e.token[o]===";")break;if(e.token[o]===","){x=x-1;break}if(e.types[o]==="end")o=e.begin[o];}while(o>0&&o>e.begin[n])}U[U.length-1]=-1;Q();if(e.token[e.begin[n]-1]!=="for")X(false,false);V[V.length-1]=false;l[n-1]=-20;if(e.begin[n]>0&&e.token[e.begin[n]-1]==="for"&&e.stack[n]!=="for"){l.push(-10);return}l.push(x);return}l.push(-20);}function le(){const E=e.stack[n+1];const m=n===0?e.stack[n]:e.stack[n-1];if(L===")"||(m==="object"||m==="array")&&L!=="]"){if(E!=="method"||E==="method"&&e.token[n+1]!==")"&&e.token[n+2]!==")"){if(L===")"&&(E!=="function"||e.token[e.begin[e.begin[n-1]-1]]==="("||e.token[e.begin[e.begin[n-1]-1]]==="x(")){X(false,false);}else if(e.types[n+1]!=="end"&&e.types[n+2]!=="end"){X(true,false);}}}G.push(false);b.push([]);M.push(false);h.push(false);V.push(false);j.push(0);if(c.script.neverFlatten===true||E==="array"&&c.script.arrayFormat==="indent"||E==="attribute"||g==="generic"||E==="class"&&L!=="("&&L!=="x("||S==="["&&e.token[n+1]==="function"){A.push(false);}else {if(E==="expression"||E==="method"){A.push(true);}else if((E==="object"||E==="class")&&(L==="("||L==="x("||g==="word"||g==="reference")){A.push(true);}else if(E==="array"||S==="("||S==="x("){A.push(true);}else if(S==="{"&&E==="object"&&g!=="operator"&&g!=="start"&&g!=="string"&&g!=="number"&&m!=="object"&&m!=="array"&&n>0){A.push(true);}else {A.push(false);}}if(S!=="("&&S!=="x("&&e.stack[n+1]!=="attribute"){x=x+1;}if(S==="{"||S==="x{"){U.push(-1);if(e.types[n-1]!=="comment"){if(g==="markup"){l[n-1]=x;}else if(c.script.braceAllman===true&&g!=="operator"&&L!=="return"){l[n-1]=x-1;}else if(e.stack[n+1]!=="block"&&(E==="function"||L===")"||L==="x)"||L===","||L==="}"||g==="markup")){l[n-1]=-10;}else if(L==="{"||L==="x{"||L==="["||L==="}"||L==="x}"){l[n-1]=x-1;}}if(E==="object"){if(c.script.objectIndent==="indent"){A[A.length-1]=false;l.push(x);return}if(c.script.objectIndent==="inline"){A[A.length-1]=true;l.push(-20);return}}if(E==="switch"){if(c.script.noCaseIndent===true){l.push(x-1);return}x=x+1;l.push(x);return}if(A[A.length-1]===true){if(g!=="word"&&g!=="reference"){l.push(-20);return}}l.push(x);return}if(S==="("||S==="x("){if(c.wrap>0&&S==="("&&e.token[n+1]!==")"){C.push(1);}if(L==="-"&&(e.token[n-2]==="("||e.token[n-2]==="x(")){l[n-2]=-20;}if(g==="end"&&m!=="if"&&m!=="for"&&m!=="catch"&&m!=="else"&&m!=="do"&&m!=="try"&&m!=="finally"&&m!=="catch"){if(e.types[n-1]==="comment"){l[n-1]=x;}else {l[n-1]=-20;}}if(L==="async"){l[n-1]=-10;}else if(E==="method"||e.token[n-2]==="function"&&g==="reference"){if(L==="import"||L==="in"||c.script.functionNameSpace===true){l[n-1]=-10;}else if(L==="}"&&e.stack[n-1]==="function"||g==="word"||g==="reference"||g==="property"){l[n-1]=-20;}else if(m!=="method"&&E!=="method"){l[n-1]=x;}}if(L==="+"&&(e.token[n-2].charAt(0)==='"'||e.token[n-2].charAt(0)==="'")){l.push(x);return}if(L==="}"||L==="x}"){l.push(-20);return}if(L==="-"&&(n<2||e.token[n-2]!==")"&&e.token[n-2]!=="x)"&&e.token[n-2]!=="]"&&e.types[n-2]!=="reference"&&e.types[n-2]!=="string"&&e.types[n-2]!=="number")||c.script.functionSpace===false&&L==="function"){l[n-1]=-20;}l.push(-20);return}if(S==="["){if(L==="[")G[G.length-2]=true;if(L==="return"||L==="var"||L==="let"||L==="const"){l[n-1]=-10;}else if(e.types[n-1]!=="comment"&&e.stack[n-1]!=="attribute"&&(g==="end"||g==="word"||g==="reference")){l[n-1]=-20;}else if(L==="["||L==="{"||L==="x{"){l[n-1]=x-1;}if(e.stack[n]==="attribute"){l.push(-20);return}if(c.script.arrayFormat==="indent"){A[A.length-1]=false;l.push(x);return}if(c.script.arrayFormat==="inline"){A[A.length-1]=true;l.push(-20);return}if(E==="method"||A[A.length-1]===true){l.push(-20);return}let o=n+1;do{if(e.token[o]==="]"){l.push(-20);return}if(e.token[o]===","){l.push(x);return}o=o+1;}while(o<t);l.push(-20);}}function ne(){if(S.length===1){l.push(-20);if(e.lines[n]===0)l[n-1]=-20;}else if(S.indexOf("#!/")===0){l.push(x);}else {l.push(-10);}if((L===","||g==="start")&&(e.stack[n]==="object"||e.stack[n]==="array")&&A[A.length-1]===false&&n>0){l[n-1]=x;}}function ke(){if(T==="template_else"){l[n-1]=x-1;l.push(x);}else if(T==="template_start"){x=x+1;if(e.lines[n-1]<1)l[n-1]=-20;if(e.lines[n]>0||L.length===1&&g==="string"){l.push(x);}else {l.push(-20);}}else if(T==="template_end"){x=x-1;if(g==="template_start"||e.lines[n-1]<1){l[n-1]=-20;}else {l[n-1]=x;}if(e.lines[n]>0){l.push(x);}else {l.push(-20);}}else if(T==="template"){if(e.lines[n]>0){l.push(x);}else {l.push(-20);}}}function we(){if(T==="template_string_start"){x=x+1;l.push(x);}else if(T==="template_string_else"){W();l[n-1]=x-1;l.push(x);}else {W();x=x-1;l[n-1]=x;l.push(-10);}if(n>2&&(e.types[n-2]==="template_string_else"||e.types[n-2]==="template_string_start")){if(c.script.bracePadding===true){l[n-2]=-10;l[n-1]=-10;}else {l[n-2]=-20;l[n-1]=-20;}}}function _e(){if(e.token[n-1]===","||e.token[n-1]===":"&&e.stack[n-1]!=="data_type"){l[n-1]=-10;}else {l[n-1]=-20;}if(e.types[n]==="type"||e.types[n]==="type_end"){l.push(-10);}if(e.types[n]==="type_start"){l.push(-20);}}function Oe(){if((L===")"||L==="x)")&&e.stack[n]==="class"&&(e.token[e.begin[n-1]-1]==="static"||e.token[e.begin[n-1]-1]==="final"||e.token[e.begin[n-1]-1]==="void")){l[n-1]=-10;l[e.begin[n-1]-1]=-10;}if(L==="]")l[n-1]=-10;if(S==="else"&&L==="}"){if(e.token[n-2]==="x}")l[n-3]=l[n-3]-1;if(c.script.braceAllman===true||c.script.elseNewline===true){l[n-1]=x;}}if(S==="new"&&u.has(e.token[n+1]));if(S==="from"&&g==="end"&&n>0&&(e.token[e.begin[n-1]-1]==="import"||e.token[e.begin[n-1]-1]===",")){l[n-1]=-10;}if(S==="function"){if(c.script.functionSpace===false&&n<t-1&&(e.token[n+1]==="("||e.token[n+1]==="x(")){l.push(-20);return}l.push(-10);return}if(L==="-"&&n>1){if(e.types[n-2]==="operator"||e.token[n-2]===","){l[n-1]=-20;}else if(e.types[n-2]==="start"){l[n-2]=-20;l[n-1]=-20;}}else if(S==="while"&&(L==="}"||L==="x}")){let E=n-1;let m=0;do{if(e.token[E]==="}"||e.token[E]==="x}")m=m+1;if(e.token[E]==="{"||e.token[E]==="x{")m=m-1;if(m===0){if(e.token[E-1]==="do"){l[n-1]=-10;break}l[n-1]=x;break}E=E-1;}while(E>-1)}else if(S==="in"||(S==="else"&&c.script.elseNewline===false&&c.script.braceAllman===false||S==="catch")&&(L==="}"||L==="x}")){l[n-1]=-10;}else if(S==="var"||S==="let"||S==="const"){U[U.length-1]=n;if(g==="end")l[n-1]=x;if(e.token[e.begin[n]-1]!=="for"){let E=n+1;let m=0;do{if(e.types[E]==="end")m=m-1;if(e.types[E]==="start")m=m+1;if(m<0||m===0&&(e.token[E]===";"||e.token[E]===",")){break}E=E+1;}while(E<t);if(e.token[E]===",")x=x+1;}l.push(-10);return}if((S==="default"||S==="case")&&g!=="word"&&e.stack[n]==="switch"){l[n-1]=x-1;l.push(-10);return}if(S==="catch"&&L==="."){l[n-1]=-20;l.push(-20);return}if(S==="catch"||S==="finally"){l[n-1]=-10;l.push(-10);return}if(c.script.bracePadding===false&&n<t-1&&e.token[n+1].charAt(0)==="}"){l.push(-20);return}if(e.stack[n]==="object"&&(L==="{"||L===",")&&(e.token[n+1]==="("||e.token[n+1]==="x(")){l.push(-20);return}if(e.types[n-1]==="comment"&&e.token[e.begin[n]]==="("){l[n-1]=x+1;}if(c.script.inlineReturn){if(e.stack[n]==="if"&&S==="return"&&(L==="x{"||L==="{")){const E=e.begin.lastIndexOf(e.begin[n-1],n-3);if(e.token[E-2]==="else"){if(L==="x{")e.token[n-1]="{";if(e.token[e.ender[n]]==="x}")e.token[e.ender[n]]="}";e.lines[e.ender[n]]=e.lines[e.ender[n]]-1;}else {if(e.token[e.ender[n-1]+2]!=="if"&&e.token[e.ender[n-1]+1]!=="else"){l[n-1]=-20;if(L==="{")e.token[n-1]="x{";if(e.token[e.ender[n]]==="}")e.token[e.ender[n]]="x}";}else if(e.token[e.ender[n-1]+2]!=="if"&&e.token[e.ender[n-1]+1]!=="x{"){l[n-1]=-20;e.lines[e.ender[n-1]+2]=e.lines[e.ender[n-1]+2]-1;if(e.token[n-1]==="{")e.token[n-1]="x{";if(e.token[e.ender[n]]==="}")e.token[e.ender[n]]="x}";if(e.token[e.ender[n-1]+2]==="{")e.token[e.ender[n-1]+2]="x{";}}}if((L==="x}"||L==="}")&&(e.stack[n-1]==="if"&&S==="else"&&(e.token[n+1]==="{"||e.token[n+1]==="x{")&&e.token[n+2]==="return")){if(e.token[n-2]==="x;")e.token[n-2]=";";}if(L==="x{"&&S==="return"&&e.stack[n]==="else"){l[n-1]=-20;if(e.token[e.ender[n-1]-1]==="x;")e.token[e.ender[n-1]-1]=";";e.lines[e.ender[n-1]]=e.lines[e.ender[n-1]]-1;e.lines[e.ender[n]+1]=e.lines[e.ender[n]+1]-1;}if(L==="x}"&&S==="else"&&e.token[n+1]==="x{"&&e.token[n+2]==="return"&&e.token[e.ender[n]-1]==="}"){e.token[e.ender[n]-1]="x}";}}l.push(-10);}do{if(e.lexer[n]===a){T=e.types[n];S=e.token[n];if(T==="comment"){_();}else if(T==="regex"){l.push(-20);}else if(T==="string"){ne();}else if(T.indexOf("template_string")===0){we();}else if(T==="separator"){R();}else if(T==="start"){le();}else if(T==="end"){te();}else if(T==="type"||T==="type_start"||T==="type_end"){_e();}else if(T==="operator"){Z();}else if(T==="word"){Oe();}else if(T==="reference"){ge();}else if(T==="markup"){I();}else if(T.indexOf("template")===0){ke();}else if(T==="generic"){if(L!=="return"&&L.charAt(0)!=="#"&&g!=="operator"&&L!=="public"&&L!=="private"&&L!=="static"&&L!=="final"&&L!=="implements"&&L!=="class"&&L!=="void"){l[n-1]=-20;}if(e.token[n+1]==="("||e.token[n+1]==="x("){l.push(-20);}else {l.push(-10);}}else {l.push(-10);}if(T!=="comment"){g=T;L=S;}if(C.length>0&&e.token[n]!==")"){if(e.types[n]==="comment"&&C[C.length-1]>-1){C[C.length-1]=c.wrap+1;}else if(l[n]>-1||e.token[n].charAt(0)==="`"&&e.token[n].indexOf("\n")>0){C[C.length-1]=-1;}else if(C[C.length-1]>-1){C[C.length-1]=C[C.length-1]+e.token[n].length;if(l[n]===-10)C[C.length-1]=C[C.length-1]+1;}}}else {K();}n=n+1;}while(n<t);return l})();const $=(()=>{const n=[];const x=(()=>{const l=[];const k=c.indentChar;let b=c.indentSize;if(typeof b!=="number"||b<1)return "";do{l.push(k);b=b-1;}while(b>0);return l.join("")})();const F=c.crlf===true?"\r\n":"\n";const i=c.preserveLine+1;const T=["x;","x}","x{","x(","x)"];let S=z.start;let g="";c.indentLevel;function U(l){const k=[];const b=(()=>{if(S===t-1)return 1;if(e.lines[S+1]-1>i)return i;if(e.lines[S+1]>1)return e.lines[S+1]-1;return 1})();let h=0;if(l<0)l=0;do{k.push(F);h=h+1;}while(h<b);if(l>0){h=0;do{k.push(x);h=h+1;}while(h<l)}return k.join("")}if(c.script.vertical===true){let l=function(k){let b=0;let h=0;let A=k-1;let j=0;let M=0;const V=e.begin[S];const C=[];do{if((e.begin[A]===V||e.token[A]==="]"||e.token[A]===")")&&(e.token[A+1]===":"&&e.stack[A]==="object"||e.token[A+1]==="=")){j=A;h=0;do{if(e.begin[j]===V){if(e.token[j]===","||e.token[j]===";"||e.token[j]==="x;"||H[j]>-1&&e.types[j]!=="comment"){if(e.token[j+1]==="."){h=h+c.indentSize*c.indentChar.length;}break}}else if(H[j]>-1){break}if(e.types[j]!=="comment"){if(H[j-1]===-10)h=h+1;h=e.token[j].length+h;}j=j-1;}while(j>V);M=j;if(e.token[M]===","&&e.token[A+1]==="="){do{if(e.types[M]==="end")M=e.begin[M];if(e.begin[M]===V){if(e.token[M]===";"||e.token[M]==="x;")break;if(e.token[M]==="var"||e.token[M]==="const"||e.token[M]==="let"){h=h+c.indentSize*c.indentChar.length;break}}M=M-1;}while(M>V)}if(h>b)b=h;C.push([A,h]);A=j;}else if(e.types[A]==="end"){A=e.begin[A];}A=A-1;}while(A>V);A=C.length;if(A>0){do{A=A-1;j=C[A][1];if(j<b){do{e.token[C[A][0]]=e.token[C[A][0]]+" ";j=j+1;}while(j<b)}}while(A>0)}};S=t;do{S=S-1;if(e.lexer[S]==="script"){if(e.token[S]==="}"&&e.token[S-1]!=="{"&&H[e.begin[S]]>0){l(S);}}else {S=e.begin[S];}}while(S>0)}S=z.start;do{if(e.lexer[S]===a||z.beautify[e.lexer[S]]===void 0){if(e.types[S]==="comment"&&c.commentIndent===true){if(/\n/.test(e.token[S])){const l=e.begin[S]>-1?e.token[S].charAt(2)==="*"?Ee(H[S],x)+c.indentChar:Ee(H[S],x):c.indentChar;const k=e.token[S].split(/\n/);let b=1;do{k[b]=l+k[b].trimLeft();b=b+1;}while(b<k.length);e.token.splice(S,1,k.join("\n"));}}if(T.indexOf(e.token[S])<0){if(e.token[S]!==";"||c.script.noSemicolon===false){n.push(e.token[S]);}else if(H[S]<0&&e.types[S+1]!=="comment"){n.push(";");}}if(S<t-1&&e.lexer[S+1]!==a&&e.begin[S]===e.begin[S+1]&&e.types[S+1].indexOf("end")<0&&e.token[S]!==","){n.push(" ");}else if(H[S]>-1){if((H[S]>-1&&e.token[S]==="{"||H[S]>-1&&e.token[S+1]==="}")&&e.lines[S]<3&&c.script.braceNewline===true){if(e.lines[S+1]<3)n.push(U(0));}n.push(U(H[S]));H[S];}else if(H[S]===-10){n.push(" ");if(e.lexer[S+1]!==a);}}else {if(y[S]===S){n.push(e.token[S]);}else {z.end=y[S];z.start=S;g=z.beautify[e.lexer[S]](c);n.push(g.replace(/\s+$/,""));S=z.iterator;if(H[S]===-10){n.push(" ");}else if(H[S]>-1){n.push(U(H[S]));}c.indentLevel=0;}}S=S+1;}while(S<t);z.iterator=t-1;return n.join("")})();return $};var it={};ot(it,{format:()=>Re,language:()=>Ce,options:()=>Ne,parse:()=>ht});var Me=[{pattern:/[a-z-]+:(?!:).+;/,type:"keyword"},{pattern:/<(\/)?style>/,type:"not"}];var He=[{pattern:/<!DOCTYPE (html|HTML PUBLIC .+)>/,type:"meta.module",nearTop:true},{pattern:/<[a-z0-9]+(\s*[\w]+=('|").+('|")\s*)?>.*<\/[a-z0-9]+>/g,type:"keyword"},{pattern:/<!--(.*)(-->)?/,type:"comment.block"},{pattern:/[a-z-]+=("|').+("|')/g,type:"keyword.other"},{pattern:/{[{%][\s\S]*?[%}]}/g,type:"not"},{pattern:/{%-?\s*(end)?(schema|style(sheet)?|javascript)\s*-?%}/,type:"not",deterministic:"liquid"}];var Ue=[{pattern:/<!DOCTYPE (html|HTML PUBLIC .+)>/,type:"meta.module",nearTop:true},{pattern:/<[a-z0-9]+(\s*[\w]+=('|").+('|")\s*)?>.*<\/[a-z0-9]+>/g,type:"keyword"},{pattern:/<!--(.*)(-->)?/,type:"comment.block"},{pattern:/[a-z-]+=("|').+("|')/g,type:"keyword.other"},{pattern:/{[{%][\s\S]*?[%}]}/g,type:"keyword",deterministic:"liquid",unless:/\/.*?{[{%][\s\S]*?[%}]}.*\//},{pattern:/{%-?\s*(end)?(schema|style(sheet)?|javascript)\s*-?%}/,type:"meta.module",deterministic:"liquid"}];var Ze=[{pattern:/^[{[]$/,type:"meta.module",nearTop:true},{pattern:/^\s*".+":\s*(".+"|[0-9]+|null|true|false)(,)?$/,type:"keyword"},{pattern:/^\s*".+":\s*(\{|\[)$/,type:"keyword"},{pattern:/^\s*".+":\s*\{(\s*".+":\s*(".+"|[0-9]+|null|true|false)(,)?\s*){1,}\}(,)?$/,type:"keyword"},{pattern:/\s*".+"\s*\[\s*((".+"|[0-9]+|null|true|false)(,)?\s*){1,}\](,)?$/,type:"keyword"}];var Je=[{pattern:/^( )*([A-Za-z0-9_. ]+):( )?(.*)?$/,type:"keyword"},{pattern:/^( )*-( )([A-Za-z0-9_. ]+):( )?(.*)?$/,type:"keyword"},{pattern:/^( )*-( )(.*)$/,type:"keyword"},{pattern:/^( )*([A-Za-z0-9_. ]+):( )!!binary( )?(|)?$/,type:"constant.type"},{pattern:/^( )*([A-Za-z0-9_. ]+):( )\|$/,type:"keyword"},{pattern:/^( )*([A-Za-z0-9_. ]+):( )>$/,type:"keyword"},{pattern:/^( )*\?( )(.*)$/,type:"keyword"},{pattern:/^( )*\?( )\|$/,type:"constant.type"},{pattern:/^( )*<<:( )(\*)(.*)?$/,type:"constant.type"},{pattern:/^( )*([A-Za-z0-9_. ]+):(.*)?( )?{$/,type:"not"},{pattern:/^( )*([A-Za-z0-9_. ]+):(.*)?( )?,$/,type:"not"}];var Ge=[{pattern:/undefined/g,type:"keyword"},{pattern:/window\./g,type:"keyword"},{pattern:/console\.log\s*\(/,type:"keyword.print"},{pattern:/(var|const|let)\s+\w+\s*=?/,type:"keyword.variable"},{pattern:/(('|").+('|")\s*|\w+):\s*[{[]/,type:"constant.array"},{pattern:/===/g,type:"keyword.operator"},{pattern:/!==/g,type:"keyword.operator"},{pattern:/function\*?\s*([A-Za-z$_][\w$]*)?\s*[(][^:;()]*[)]\s*{/g,type:"keyword.function"},{pattern:/\(* => {/g,type:"keyword.function"},{pattern:/null/g,type:"constant.null"},{pattern:/\(.*\)\s*=>\s*.+/,type:"keyword.control"},{pattern:/(else )?if\s+\(.+\)/,type:"keyword.control"},{pattern:/while\s+\(.+\)/,type:"keyword.control"},{pattern:/\*\w+/,type:"not"},{pattern:/(var|const|let)\s+\w+:\s*(string|number|boolean|string)(?:\[\])?/,type:"not"},{pattern:/(interface|type)\s+\w+?/,type:"not"},{pattern:/(declare|namespace)\s+\w+?/,type:"not"},{pattern:/<(\/)?script\s*(type=('|")text\/javascript('|"))?>/,type:"not"},{pattern:/<(\/)?style>/,type:"not"},{pattern:/fn\s[A-Za-z0-9<>,]+\(.*\)\s->\s\w+(\s\{|)/,type:"not"},{pattern:/{[{%][\s\S]*?[%}]}/g,type:"not"},{pattern:/{%-?\s*(end)?(schema|style(sheet)?|javascript)\s*-?%}/,type:"not",deterministic:"liquid"}];var Ve=[{pattern:/undefined/g,type:"keyword"},{pattern:/window\./g,type:"keyword"},{pattern:/console\.log\s*\(/,type:"keyword.print"},{pattern:/(var|const|let)\s+\w+\s*=?/,type:"keyword.variable"},{pattern:/(('|").+('|")\s*|\w+):\s*[{[]/,type:"constant.array"},{pattern:/===/g,type:"keyword.operator"},{pattern:/!==/g,type:"keyword.operator"},{pattern:/function\*?\s*([A-Za-z$_][\w$]*)?\s*[(][^:;()]*[)]\s*{/g,type:"keyword.function"},{pattern:/\(* => {/g,type:"keyword.function"},{pattern:/null/g,type:"constant.null"},{pattern:/\(.*\)\s*=>\s*.+/,type:"keyword.control"},{pattern:/(else )?if\s+\(.+\)/,type:"keyword.control"},{pattern:/while\s+\(.+\)/,type:"keyword.control"},{pattern:/\*\w+/,type:"not"},{pattern:/<(\/)?script( type=('|")text\/javascript('|"))?>/,type:"not"},{pattern:/<(\/)?style>/,type:"not"},{pattern:/fn\s[A-Za-z0-9<>,]+\(.*\)\s->\s\w+(\s\{|)/,type:"not"},{pattern:/{[{%][\s\S]*?[%}]}/g,type:"not"},{pattern:/{%-?\s*(end)?(schema|style(sheet)?|javascript)\s*-?%}/,type:"not",deterministic:"liquid"},{pattern:/(var|const|let)\s+\w+:\s*(string|number|boolean|string|any)(\[\])?/,type:"keyword.variable"},{pattern:/(\(\s*)?\w+:\s*(string|number|boolean|string|any)(\[\])?(\s*\))?/,type:"keyword.other"},{pattern:/\):\s*(\w+)(\[\])?\s*(=>|\{)\s*/,type:"keyword.function"},{pattern:/(interface|type)\s+\w+?/,type:"keyword.other"},{pattern:/(declare|namespace)\s+\w+?/,type:"keyword.other"},{pattern:/as\s+\w+?/,type:"keyword.other"}];var Xe=[{pattern:/^(#){2,6}\s.+/,type:"keyword"},{pattern:/^(?!!)(=|-){2,}(?<!>)$/,type:"meta.module"},{pattern:/(!)?\[.+\]\(.+\)/,type:"keyword"},{pattern:/\[.+\]\[.+\]/,type:"keyword"},{pattern:/^\[.+\]:\s?(<)?(http)?/,type:"keyword"},{pattern:/^(> .*)+/,type:"macro"},{pattern:/^```([A-Za-z0-9#_]+)?$/,type:"keyword"},{pattern:/^---$/,type:"meta.module",nearTop:true}];var at={node:"javascript",jsc:"javascript",deno:"typescript"};var Ke={css:Me,html:He,liquid:Ue,javascript:Ge,typescript:Ve,json:Ze,markdown:Xe,yaml:Je};function tt(c){let u=c.replace(/\r\n?/g,"\n").replace(/\n{2,}/g,"\n").split("\n");if(u.length>500){u=u.filter((d,t)=>{if(et(t,u))return true;return t%Math.ceil(u.length/500)===0});}if(u[0].startsWith("#!")){if(u[0].startsWith("#!/usr/bin/env")){let d;d=u[0].split(" ").slice(1).join(" ");d=at[d]||d.charAt(0).toUpperCase()+d.slice(1);return {language:d,statistics:{},linesOfCode:u.length}}if(u[0].startsWith("#!/bin/bash")){return {language:"javascript",statistics:{},linesOfCode:u.length}}}const f=ve(Ke).map(d=>({language:d,checkers:Ke[d]}));const s=[];const y=f.reduce((d,{language:t,checkers:H})=>{d[t]=H.filter($=>"deterministic"in $);return d},{});for(let d=0;d<f.length;d++){const{language:t,checkers:H}=f[d];let $=0;for(let n=0;n<u.length;n++){if(/^\s*$/.test(u[n]))continue;if(t in y){const x=ct(u[n],H);if(x){return {language:x,statistics:{},linesOfCode:n}}}if(!et(n,u)){$+=Ye(u[n],H.filter(x=>!x.nearTop));}else {$+=Ye(u[n],H);}}s.push({language:t,points:$});}const e=s.reduce((d,t)=>d.points>=t.points?d:t,{points:0,language:""});const a={};for(let d=0;d<s.length;d++)a[s[d].language]=s[d].points;return {language:e.language,statistics:a,linesOfCode:u.length}}function ct(c,u){for(const{pattern:f,deterministic:s,unless:y=null}of u){if(f.test(c)&&y!==null&&!y.test(c)){return s}}return false}function ut(c){switch(c){case"keyword.print":case"meta.import":case"meta.module":return 5;case"keyword.function":case"constant.null":return 4;case"constant.type":case"constant.string":case"constant.numeric":case"constant.boolean":case"constant.dictionary":case"constant.array":case"keyword.variable":return 3;case"section.scope":case"keyword.other":case"keyword.operator":case"keyword.control":case"keyword.visibility":case"keyword":return 2;case"comment.block":case"comment.line":case"comment.documentation":case"macro":return 1;case"not":default:return -20}}function Ye(c,u){const f=u.map(s=>{if(s.pattern.test(c))return ut(s.type);return 0});return f.reduce((s,y)=>s+y,0)}function et(c,u){if(u.length<=10)return true;return c<u.length/10}var ye=se(null);var Se=se(null);{ye.markup="markup";ye.html="markup";ye.liquid="markup";ye.js="script";ye.ts="script";ye.javascript="script";ye.typescript="script";ye.json="script";ye.jsx="script";ye.tsx="script";ye.less="style";ye.scss="style";ye.sass="style";ye.css="style";ye.text="text";ye.xml="markup";Se.javascript="JavaScript";Se.json="JSON";Se.jsx="JSX";Se.html="HTML";Se.liquid="Liquid";Se.markup="markup";Se.scss="SCSS";Se.text="Plain Text";Se.typescript="TypeScript";}function Pe(c){if(typeof c!=="string")return "script";if(c.indexOf("html")>-1)return "markup";if(ye[c]===void 0)return "script";return ye[c]}function nt(c){if(typeof c!=="string"||Se[c]===void 0)return c.toUpperCase();return Se[c]}function ft(c){const u=se(null);u.language=c;u.languageName=nt(c);u.lexer=Pe(c);return u}Ce.reference=ft;Ce.listen=function(c){z.hooks.language.push(c);};function Ce(c){const{language:u}=tt(c);const f=se(null);f.language=u;f.languageName=nt(u);f.lexer=Pe(u);if(z.hooks.language.length>0){for(const s of z.hooks.language){const y=s(f);if(typeof y==="object")je(f,y);}}return f}function rt(c){const u=c.source.search(/((\/(\*|\/))|{%-?\s*comment\s*-?%}|<!--)\s*@prettify\s+(\w+)?\s*{\s+/);const f=c.source.search(/((\/(\*|\/))|{%-?\s*comment\s*-?%}|<!--)\s*@prettify-ignore\b/);const s=ve(xe);const y=s.length;let e=0;if(f>-1&&c.source.slice(0,f).trimStart()==="")return false;if(u>-1&&(u===0||`"':`.indexOf(c.source.charAt(u-1))<0)){let k=function(){if($.charAt(x-1)!=="\\")return false;let b=x;do{b=b-1;}while(b>0&&$.charAt(b)==="\\");return (x-b)%2===0};const t=[];const H=u;const $=c.source;const n=$.length;let x=H;let F=0;let i="";let T="";let S="";let g="";let L=[];let U=[];let G;let l;if($.charAt(x)==="<"){l="<!--";}else if($.charAt(x+1)==="/"){l="//";}else if($.charAt(x+1)==="%"){G=$.indexOf("}",x+1);if($[G-1].charCodeAt(0)===37)l=$.slice(x,G+1);}else {l="/*";}do{if($.slice(x-9,x)==="@prettify")break;x=x+1;}while(x<n);do{if(k()===false){if(i===""){if($.charAt(x)==='"'||$.charAt(x)==="'"||$.charAt(x)==="`"){i=$.charAt(x);if(t.length>0&&t[t.length-1].charAt(t[t.length-1].length-1)===":")F=x;}else if(/\s/.test($.charAt(x))===false&&F===0){F=x;}else if($.charAt(x)===","||/\s/.test($.charAt(x))===true&&F>0){T=$.slice(F,x);if(t.length>0){if(t.length>0&&T===":"&&t[t.length-1].indexOf(":")<0){t[t.length-1]=t[t.length-1]+T;F=x;}else if(t.length>0&&t[t.length-1].charAt(t[t.length-1].length-1)===":"){t[t.length-1]=t[t.length-1]+T;F=0;}else {t.push(T);F=0;}}else {t.push(T);F=0;}}if(l==="<!--"&&$.slice(x-2,x+1)==="-->")break;if(l==="//"&&$.charAt(x)==="\n")break;if(l==="/*"&&$.slice(x-1,x+1)==="*/")break;if(l.charCodeAt(1)===37&&$.slice(x-1,x+1)==="%"&&$.indexOf("endcomment",$.indexOf("{%",G))>0)break}else if($.charAt(x)===i&&i!=="${"){i="";}else if(i==="`"&&$.slice(x,x+2)==="${"){i="${";}else if(i==="${"&&$.charAt(x)==="}"){i="`";}}x=x+1;}while(x<n);if(F>0){i=$.slice(F,x+1);if(l==="<!--")i=i.replace(/\s*-+>$/,"");else if(l==="//")i=i.replace(/\s+$/,"");else i=i.replace(/\s*\u002a\/$/,"");t.push(i);}x=t.length;if(x>0){do{x=x-1;if(t[x].indexOf(":")>0){U=[t[x].slice(0,t[x].indexOf(":")),t[x].slice(t[x].indexOf(":")+1)];}else if(xe[t[x]]!==void 0&&xe[t[x]].type==="boolean"){c.options[t[x]]=true;}if(U.length===2&&xe[U[0]]!==void 0){if(U[1].charAt(U[1].length-1)===U[1].charAt(0)&&(U[1].charAt(0)==='"'||U[1].charAt(0)==="'"||U[1].charAt(0)==="`")){U[1]=U[1].slice(1,U[1].length-1);}if(xe[U[0]].type==="number"&&isNaN(Number(U[1]))===false){c.options[U[0]]=Number(U[1]);}else if(xe[U[0]].type==="boolean"){c.options[U[0]]=U[1]==="true";}else {if(xe[U[0]].values!==void 0){L=ve(xe[U[0]].values);F=L.length;do{F=F-1;if(L[F]===U[1]){c.options[U[0]]=U[1];break}}while(F>0)}else {if(U[0]==="language"){S=U[1];}else if(U[0]==="lexer"){g=U[1];}c.options[U[0]]=U[1];}}}}while(x>0);if(g===""&&S!=="")g=Pe(S);}}if(c.options.lexer==="script"){if(c.options.script.styleGuide!==void 0){switch(c.options.script.styleGuide){case"airbnb":c.options.wrap=80;c.options.indentChar=" ";c.options.indentSize=2;c.options.preserveLine=1;c.options.script.correct=true;c.options.script.quoteConvert="single";c.options.script.variableList="each";c.options.script.endComma="always";c.options.script.bracePadding=true;break;case"crockford":c.options.indentChar=" ";c.options.indentSize=4;c.options.script.correct=true;c.options.script.bracePadding=false;c.options.script.elseNewline=false;c.options.script.endComma="never";c.options.script.noCaseIndent=true;c.options.script.functionSpace=true;c.options.script.variableList="each";c.options.script.vertical=false;break;case"google":c.options.wrap=-1;c.options.indentChar=" ";c.options.indentSize=4;c.options.preserveLine=1;c.options.script.correct=true;c.options.script.quoteConvert="single";c.options.script.vertical=false;break;case"jquery":c.options.wrap=80;c.options.indentChar="	";c.options.indentSize=1;c.options.script.correct=true;c.options.script.bracePadding=true;c.options.script.quoteConvert="double";c.options.script.variableList="each";break;case"jslint":c.options.indentChar=" ";c.options.indentSize=4;c.options.script.correct=true;c.options.script.bracePadding=false;c.options.script.elseNewline=false;c.options.script.endComma="never";c.options.script.noCaseIndent=true;c.options.script.functionSpace=true;c.options.script.variableList="each";c.options.script.vertical=false;break;case"standard":c.options.wrap=0;c.options.indentChar=" ";c.options.indentSize=2;c.options.endNewline=false;c.options.preserveLine=1;c.options.script.correct=true;c.options.script.noSemicolon=true;c.options.script.endComma="never";c.options.script.braceNewline=false;c.options.script.bracePadding=false;c.options.script.braceAllman=false;c.options.script.quoteConvert="single";c.options.script.functionSpace=true;c.options.script.ternaryLine=false;c.options.script.variableList="each";c.options.script.vertical=false;break;case"yandex":c.options.script.correct=true;c.options.script.bracePadding=false;c.options.script.quoteConvert="single";c.options.script.variableList="each";c.options.script.vertical=false;break}}if(c.options.script.braceStyle!==void 0){switch(c.options.script.braceStyle){case"collapse":c.options.script.braceNewline=false;c.options.script.bracePadding=false;c.options.script.braceAllman=false;c.options.script.objectIndent="indent";c.options.script.neverFlatten=true;break;case"collapse-preserve-inline":c.options.script.braceNewline=false;c.options.script.bracePadding=true;c.options.script.braceAllman=false;c.options.script.objectIndent="indent";c.options.script.neverFlatten=false;break;case"expand":c.options.script.braceNewline=false;c.options.script.bracePadding=false;c.options.script.braceAllman=true;c.options.script.objectIndent="indent";c.options.script.neverFlatten=true;break}}if(c.options.language==="json")c.options.wrap=0;}do{if(c.options[ve[e]]!==void 0){xe[ve[e]].lexer.length;}e=e+1;}while(e<y)}function pt(c){const u=c.options.language;const f=c.options.lexer;r.count=-1;r.linesSpace=0;r.lineNumber=1;r.data.begin=[];r.data.ender=[];r.data.lexer=[];r.data.lines=[];r.data.stack=[];r.data.token=[];r.data.types=[];r.datanames=["begin","ender","lexer","lines","stack","token","types"];r.structure=[["global",-1]];r.structure.pop=function d(){const t=r.structure.length-1;const H=r.structure[t];if(t>0)r.structure.splice(t,1);return H};if(c.options.language==="auto"||c.options.lexer==="auto"){const d=Ce(c.source);if(c.options.language==="auto")c.options.language=d.language;if(c.options.lexer==="auto")c.options.lexer=d.lexer;}if(typeof c.lexers[c.options.lexer]==="function"){r.references=[[]];r.error="";for(const d of ve(c.lexers)){if(c.options.language==="json"){c.options.json=c.options.json||se(null);}else {c.options[d]=c.options[d]||se(null);}}c.lexers[c.options.lexer](`${c.source} `);}else {r.error=`Specified lexer, ${c.options.lexer}, is not a function.`;}let s=0;let y=0;const e=ve(r.data);const a=e.length;do{y=s+1;do{if(r.data[e[s]].length!==r.data[e[y]].length){r.error=`"${e[s]}" array is of different length than "${e[y]}"`;break}y=y+1;}while(y<a);s=s+1;}while(s<a-1);if(r.data.begin.length>0){if(c.options.lexer==="script"&&c.options[c.options.lexer].objectSort){r.sortCorrection(0,r.count+1);}else if(c.options.lexer==="style"&&c.options[c.options.lexer].sortProperties){r.sortCorrection(0,r.count+1);}}c.options.language=u;c.options.lexer=f;return r.data}function Te(c){const u=Date.now();const f=c.mode;const s=c.options.crlf===true?"\r\n":"\n";let y="";if(c.source.trimStart()===""){const d=new RegExp(`\\n{${c.options.preserveLine},}`);y=c.source;y=c.source.replace(d,"\n\n");y=c.options.endNewline===true?y.replace(/\s*$/,s):y.replace(/\s+$/,"");c.stats.chars=y.length;c.stats.language=c.options.languageName;c.stats.size=$e(y.length);c.stats.time=(Date.now()-u).toFixed(1);return y}if(c.options.language==="text"){c.options.language="auto";}if(c.options.lexer==="text"){c.options.lexer="auto";}if(c.options.language==="text"||c.options.lexer==="text"){c.options.language="text";c.options.languageName="Plain Text";c.options.lexer="text";}else if(c.options.language==="auto"&&c.options.lexer==="auto"){const d=Ce(c.source);if(d.language==="text"){d.language="html";d.lexer="markup";d.languageName="HTML";}if(c.options.lexer==="auto"){c.options.lexer=d.lexer;}if(c.options.language==="auto"){c.options.language=d.language;c.options.languageName=d.languageName;}}else {c.options.lexer="markup";}c.stats.language=c.options.languageName;const e=rt(c);if(e===false){c.stats.time=-1;c.stats.chars=c.source.length;c.stats.size=$e(c.stats.chars);return c.source}c.parsed=pt(c);if(f==="parse"){c.stats.time=(Date.now()-u).toFixed(1);c.stats.chars=c.source.length;c.stats.size=$e(c.stats.chars);return c.parsed}y=c.beautify[c.options.lexer](c.options);y=c.options.endNewline===true?y.replace(/\s*$/,s):y.replace(/\s+$/,"");const a=y.length;c.stats.chars=a;c.stats.size=$e(a);c.stats.time=(Date.now()-u).toFixed(1);c.end=0;c.start=0;return y}Re.before=c=>z.hooks.before.push(c);Re.after=c=>z.hooks.after.push(c);Ne.listen=c=>z.hooks.rules.push(c);Object.defineProperty(Re,"stats",{get(){return z.stats}});Object.defineProperty(Ne,"rules",{get(){return z.options}});function Re(c,u){z.source=c;if(typeof u==="object")z.options=Ne(u);if(z.hooks.before.length>0){for(const s of z.hooks.before){if(s(z.options,c)===false)return c}}const f=Te(z);if(z.hooks.after.length>0){for(const s of z.hooks.after){if(s.call(z.parsed,f,z.options)===false)return c}}return new Promise((s,y)=>{if(r.error.length)return y(r.error);return s(f)})}function Ne(c){var u,f,s,y,e,a,d,t,H;for(const $ of ve(c)){if(((f=(u=xe)==null?void 0:u[$])==null?void 0:f.lexer)==="auto"){z.options[$]=c[$];}else if($==="markup"){je(z.options.markup,c.markup);}else if($==="script"){je(z.options.script,c.script);}else if($==="style"){je(z.options.style,c.style);}else if($==="json"){je(z.options.script,c.json);}else if($==="grammar"){if((y=(s=c.grammar)==null?void 0:s.html)==null?void 0:y.voids){je(z.options.grammar.html,c.grammar.html);for(const n of c.grammar.html.voids)de.html.voids.add(n);}if((e=c.grammar)==null?void 0:e.liquid){if((d=(a=c.grammar)==null?void 0:a.liquid)==null?void 0:d.tags){z.options.grammar.liquid.tags=c.grammar.liquid.tags;for(const n of c.grammar.liquid.tags)de.liquid.tags.add(n);}if((H=(t=c.grammar)==null?void 0:t.liquid)==null?void 0:H.singletons){z.options.grammar.liquid.singletons=c.grammar.liquid.singletons;for(const n of c.grammar.liquid.singletons)de.liquid.singletons.add(n);}}}else if($ in z.options){z.options[$]=c[$];}}if(z.hooks.rules.length>0){for(const $ of z.hooks.rules)$(z.options);}return z.options}function ht(c,u){z.source=c;z.mode="parse";if(typeof u==="object")z.options=Ne(u);const f=Te(z);return new Promise((s,y)=>{if(r.error.length)return y(r.error);return s(f)})}

export { it as default, xe as definitions };
