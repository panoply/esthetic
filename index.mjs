var Je=Object.defineProperty;var Be=(v,u)=>{for(var h in u)Je(v,h,{get:u[h],enumerable:true});};var be=Object.assign;var re=Object.create;var ge=Object.keys;var we={language:{description:"The language name",lexer:"all",type:"select",default:"auto",values:[{rule:"auto",description:"Prettify will automatically detect the language"},{rule:"text",description:"Plain Text"},{rule:"html",description:"HTML"},{rule:"liquid",description:"HTML + Liquid"},{rule:"javascript",description:"JavaScript"},{rule:"jsx",description:"JSX"},{rule:"typescript",description:"TypeScript"},{rule:"tsx",description:"TSX"},{rule:"json",description:"JSON"},{rule:"css",description:"CSS"},{rule:"scss",description:"SCSS"},{rule:"less",description:"LESS"},{rule:"xml",description:"XML"}]},wrap:{default:0,description:"Character width limit before applying word wrap. A 0 value disables this option. A negative value concatenates script strings.",lexer:"all",type:"number"},indentSize:{default:2,description:'The number of "indentChar" values to comprise a single indentation.',lexer:"all",type:"number"},indentChar:{default:" ",description:"The string characters to comprise a single indentation. Any string combination is accepted.",lexer:"all",type:"string"},crlf:{default:false,description:"If line termination should be Windows (CRLF) format. Unix (LF) format is the default.",lexer:"all",type:"boolean"},endNewline:{default:false,description:"Insert an empty line at the end of output.",lexer:"all",type:"boolean"},preserveLine:{default:2,description:"The maximum number of consecutive empty lines to retain.",lexer:"all",type:"number"},preserveComment:{default:false,description:"Prevent comment reformatting due to option wrap.",lexer:"all",type:"boolean"},commentNewline:{default:false,description:"If a blank new line should be forced above comments.",lexer:"all",type:"boolean"},commentIndent:{default:false,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",lexer:"all",type:"boolean"},quoteConvert:{lexer:"all",description:"If the quotes of markup attributes should be converted to single quotes or double quotes.",type:"select",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}]},attemptCorrection:{default:false,description:"Automatically correct some sloppiness in code.",lexer:"all",type:"boolean"},attributeSort:{default:false,description:"Alphanumerically sort markup attributes. Attribute sorting is ignored on tags that contain attributes template attributes.",lexer:"markup",type:"boolean"},attributeSortList:{default:[],description:"A comma separated list of attribute names. Attributes will be sorted according to this list and then alphanumerically. This option requires 'attributeSort' have a value of true.",lexer:"markup",type:"array"},forceAttribute:{default:false,description:"If all markup attributes should be indented each onto their own line.",lexer:"markup",type:"boolean"},forceIndent:{default:false,description:"Will force indentation upon all content and tags without regard for the creation of new text nodes.",lexer:"markup",type:"boolean"},preserveAttributes:{default:false,description:"If markup tags should have their insides preserved. This option is only available to markup and does not support child tokens that require a different lexer.",lexer:"markup",type:"boolean"},preserveAttributeValues:{default:false,description:"Whether or not attribute values should be preserved. When enabled, values will allow newline characters and processing on the contents will be skipped.",lexer:"markup",type:"boolean"},preserveText:{default:false,description:"If text in the provided markup code should be preserved exactly as provided. This option eliminates beautification and wrapping of text content.",lexer:"markup",type:"boolean"},selfCloseSpace:{default:false,description:'Markup self-closing tags end will end with " />" instead of "/>".',lexer:"markup",type:"boolean"},classPadding:{description:"Inserts new line characters between every CSS code block.",default:false,type:"boolean",lexer:"style"},sortSelectors:{default:false,type:"boolean",description:"If comma separated CSS selectors should present on a single line of code.",lexer:"style"},sortProperties:{lexer:"style",description:"This option will alphabetically sort CSS properties contained within classes.",default:false,type:"boolean"},noLeadZero:{lexer:"style",description:"This will eliminate leading zeros from numbers expressed within values.",default:false,type:"boolean"},compressCSS:{lexer:"style",description:"If CSS should be beautified in a style where the properties and values are minifed for faster reading of selectors.",default:false,type:"boolean"},braceAllman:{lexer:"script",default:false,description:'Determines if opening curly braces will exist on the same line as their condition or be forced onto a new line, otherwise known as "Allman Style" indentation.',type:"boolean"},bracePadding:{default:false,description:"This will create a newline before and after objects values",type:"boolean",lexer:"script"},braceNewline:{default:false,description:"If true an empty line will be inserted after opening curly braces and before closing curly braces.",type:"boolean",lexer:"script"},braceStyle:{default:"none",description:"Emulates JSBeautify's brace_style option using existing Prettify options",type:"select",lexer:"script",values:[{rule:"none",description:"Ignores this option"},{rule:"collapse",description:"Sets formatObject to indent and neverflatten to true."},{rule:"collapse-preserve-inline",description:"Sets formatObject to inline and bracePadding to true"},{rule:"expand",description:"Sets objectIndent to indent and braceNewline + neverflatten to true."}]},arrayFormat:{lexer:"script",description:"Determines if all array indexes should be indented, never indented, or left to the default",type:"select",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},objectSort:{default:false,description:"This option will alphabetically sort object properties in JSON objects",type:"boolean",lexer:"script"},objectIndent:{description:"This option will alphabetically sort object properties in JSON objects",type:"select",lexer:"script",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},functionSpace:{lexer:"script",default:true,type:"boolean",description:"Inserts a space following the function keyword for anonymous functions."},functionNameSpace:{lexer:"script",default:true,type:"boolean",description:"If a space should follow a JavaScript function name."},methodChain:{lexer:"script",default:-1,description:"When to break consecutively chained methods and properties onto separate lines. A negative value disables this option. A value of 0 ensures method chainsare never broken.",type:"number"},caseSpace:{default:false,type:"boolean",description:"If the colon separating a case's expression (of a switch/case block) from its statement should be followed by a space instead of indentation thereby keeping the case on a single line of code.",lexer:"script"},inlineReturn:{lexer:"script",default:true,type:"boolean",description:"Inlines return statements contained within `if` and `else` conditions. This rules also augments code and will reason about your structure to output the best and most readable results."},elseNewline:{lexer:"script",default:false,type:"boolean",description:'If keyword "else" is forced onto a new line.'},ternaryLine:{lexer:"script",description:"If ternary operators in JavaScript `?` and `:` should remain on the same line.",type:"boolean",default:false},neverFlatten:{lexer:"script",default:true,description:"If destructured lists in script should never be flattend.",type:"boolean"},variableList:{lexer:"script",description:"If consecutive JavaScript variables should be merged into a comma separated list or if variables in a list should be separated. each \u2014 Ensure each reference is a single declaration statement.",type:"select",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"each",description:"Ensure each reference is a single declaration statement"},{rule:"list",description:"Ensure consecutive declarations are a comma separated list"}]},vertical:{lexer:"script",description:"If lists of assignments and properties should be vertically aligned",type:"boolean",default:false},noSemicolon:{lexer:"script",description:"Removes semicolons that would be inserted by ASI. This option is in conflict with option `attemptCorrection` and takes precedence over conflicting features. Use of this option is a possible security/stability risk.",default:false,type:"boolean"},endComma:{description:"If there should be a trailing comma in arrays and objects.",type:"select",lexer:"script",default:"none",values:[{rule:"none",description:"Ignore this option"},{rule:"always",description:"Always ensure there is a tailing comma"},{rule:"never",description:"Remove trailing commas"}]}};var _=re(null);_.parsed=re(null);_.options=re(null);_.beautify=re(null);_.lexers=re(null);_.definitions=we;_.mode="beautify";_.source="";_.end=0;_.iterator=0;_.start=0;_.scopes=[];_.stats=re(null);_.stats.chars=-1;_.stats.time=-1;_.stats.size="";_.stats.language="";_.hooks=re(null);_.hooks.before=[];_.hooks.language=[];_.hooks.rules=[];_.hooks.after=[];_.options.mode="beautify";_.options.tagMerge=false;_.options.tagSort=false;_.options.lexer="auto";_.options.language="text";_.options.languageName="Plain Text";_.options.indentLevel=0;_.options.crlf=false;_.options.attemptCorrection=false;_.options.commentIndent=true;_.options.endNewline=false;_.options.indentChar=" ";_.options.indentSize=2;_.options.preserveComment=false;_.options.preserveLine=2;_.options.wrap=0;_.options.markup=re(null);_.options.markup.attributeGlue=true;_.options.markup.attributeSort=false;_.options.markup.attributeSortList=[];_.options.markup.attributeValueNewlines="force";_.options.markup.commentNewline=false;_.options.markup.forceAttribute=false;_.options.markup.preserveText=false;_.options.markup.preserveAttributes=false;_.options.markup.selfCloseSpace=false;_.options.markup.forceIndent=false;_.options.markup.quoteConvert="none";_.options.style=re(null);_.options.style.compressCSS=false;_.options.style.classPadding=false;_.options.style.noLeadZero=false;_.options.style.sortSelectors=false;_.options.style.sortProperties=false;_.options.style.quoteConvert="none";_.options.script=re(null);_.options.script.braceNewline=false;_.options.script.bracePadding=false;_.options.script.braceStyle="none";_.options.script.braceAllman=false;_.options.script.commentNewline=false;_.options.script.caseSpace=false;_.options.script.inlineReturn=true;_.options.script.elseNewline=false;_.options.script.endComma="never";_.options.script.arrayFormat="default";_.options.script.objectSort=false;_.options.script.objectIndent="default";_.options.script.functionNameSpace=false;_.options.script.functionSpace=false;_.options.script.styleGuide="none";_.options.script.ternaryLine=false;_.options.script.methodChain=4;_.options.script.neverFlatten=false;_.options.script.noCaseIndent=false;_.options.script.noSemicolon=false;_.options.script.quoteConvert="none";_.options.script.variableList="none";_.options.script.vertical=false;_.options.json=re(null);_.options.json.arrayFormat="default";_.options.json.braceAllman=false;_.options.json.bracePadding=false;_.options.json.objectIndent="default";_.options.json.objectSort=false;var s=new class ut{constructor(){this.error="";this.data=re(null);this.references=[[]];this.structure=[["global",-1]];this.datanames=["begin","ender","lexer","lines","stack","token","types"];this.count=-1;this.lineNumber=1;this.linesSpace=0;this.data.begin=[];this.data.ender=[];this.data.lexer=[];this.data.lines=[];this.data.stack=[];this.data.token=[];this.data.types=[];}get current(){const{begin:u,ender:h,lexer:r,lines:g,stack:y,token:e,types:m}=this.data;return {begin:u[u.length-1],ender:h[h.length-1],lexer:r[r.length-1],lines:g[g.length-1],stack:y[y.length-1],token:e[u.length-1],types:m[u.length-1]}}concat(u,h){for(const r of this.datanames)u[r]=u[r].concat(h[r]);if(u===this.data)this.count=u.token.length-1;}objectSort(u){let h=this.count;let r=this.structure[this.structure.length-1][1];let g=0;let y=0;let e=0;let m=0;let T=true;let i=0;let E=0;let f=0;const n=u.lexer[h]==="style"&&this.structure[this.structure.length-1][0]==="global";const k=[];const l=this.count;const A=r;const I=u.lexer[h]==="style";const a=I===true?[";","separator"]:[",","separator"];const z=this.linesSpace;const P=n===true?"global":this.structure[this.structure.length-1][0];function W(t,d){let x=t[0];let j=d[0];if(u.types[x]==="comment"){do{x=x+1;}while(x<l&&u.types[x]==="comment");if(u.token[x]===void 0){return 1}}if(u.types[j]==="comment"){do{j=j+1;}while(j<l&&u.types[j]==="comment");if(u.token[j]===void 0)return 1}if(I===true){if(u.token[x].indexOf("@import")===0||u.token[j].indexOf("@import")===0){return x<j?-1:1}if(u.types[x]!==u.types[j]){if(u.types[x]==="function")return 1;if(u.types[x]==="variable")return -1;if(u.types[x]==="selector")return 1;if(u.types[x]==="property"&&u.types[j]!=="variable")return -1;if(u.types[x]==="mixin"&&u.types[j]!=="property"&&u.types[j]!=="variable")return -1}}if(u.token[x].toLowerCase()>u.token[j].toLowerCase())return 1;return -1}const S=re(null);S.begin=[];S.ender=[];S.lexer=[];S.lines=[];S.stack=[];S.token=[];S.types=[];m=h;do{if(u.begin[h]===r||n===true&&h<m&&u.token[h]==="}"&&u.begin[u.begin[h]]===-1){if(u.types[h].indexOf("template")>-1)return;if(u.token[h]===a[0]||I===true&&u.token[h]==="}"&&u.token[h+1]!==";"){T=true;i=h+1;}else if(I===true&&u.token[h-1]==="}"){T=true;i=h;}if(i===0&&u.types[0]==="comment"){do{i=i+1;}while(u.types[i]==="comment")}else if(u.types[i]==="comment"&&u.lines[i]<2){i=i+1;}if(T===true&&(u.token[h]===a[0]||I===true&&u.token[h-1]==="}")&&i<=m){if(I===true&&"};".indexOf(u.token[m])<0){m=m+1;}else if(I===false&&u.token[m]!==","){m=m+1;}k.push([i,m]);if(I===true&&u.token[i]==="}"){m=i;}else {m=i-1;}}}h=h-1;}while(h>r);if(k.length>0&&k[k.length-1][0]>h+1){g=k[k.length-1][0]-1;if(u.types[g]==="comment"&&u.lines[g]>1){do{g=g-1;}while(g>0&&u.types[g]==="comment");k[k.length-1][0]=g+1;}if(u.types[h+1]==="comment"&&h===-1){do{h=h+1;}while(u.types[h+1]==="comment")}k.push([h+1,g]);}if(k.length>1){if(I===true||u.token[h-1]==="="||u.token[h-1]===":"||u.token[h-1]==="("||u.token[h-1]==="["||u.token[h-1]===","||u.types[h-1]==="word"||h===0){k.sort(W);f=k.length;T=false;r=0;do{E=k[r][1];if(I===true){e=E;if(u.types[e]==="comment")e=e-1;if(u.token[e]==="}"){E=E+1;a[0]="}";a[1]="end";}else {a[0]=";";a[1]="separator";}}g=k[r][0];if(I===true&&u.types[E-1]!=="end"&&u.types[E]==="comment"&&u.types[E+1]!=="comment"&&r<f-1){E=E+1;}if(g<E){do{if(I===false&&r===f-1&&g===E-2&&u.token[g]===","&&u.lexer[g]==="script"&&u.types[g+1]==="comment"){y=y+1;}else {const t=re(null);t.begin=u.begin[g];t.ender=u.ender[g];t.lexer=u.lexer[g];t.lines=u.lines[g];t.stack=u.stack[g];t.token=u.token[g];t.types=u.types[g];this.push(S,t,"");y=y+1;}if(u.token[g]===a[0]&&(I===true||u.begin[g]===u.begin[k[r][0]])){T=true;}else if(u.token[g]!==a[0]&&u.types[g]!=="comment"){T=false;}g=g+1;}while(g<E)}if(T===false&&S.token[S.token.length-1]!=="x;"&&(I===true||r<f-1)){g=S.types.length-1;if(S.types[g]==="comment"){do{g=g-1;}while(g>0&&S.types[g]==="comment")}g=g+1;this.splice({data:S,howmany:0,index:g,record:{begin:A,ender:this.count,lexer:S.lexer[g-1],lines:0,stack:P,token:a[0],types:a[1]}});y=y+1;}r=r+1;}while(r<f);this.splice({data:u,howmany:y,index:h+1});this.linesSpace=z;this.concat(u,S);}}}pop(u){const h=re(null);h.begin=u.begin.pop();h.ender=u.ender.pop();h.lexer=u.lexer.pop();h.lines=u.lines.pop();h.stack=u.stack.pop();h.token=u.token.pop();h.types=u.types.pop();if(u===this.data)this.count=this.count-1;return h}push(u,h,r){const g=()=>{let y=this.count;const e=u.begin[y];if((u.lexer[y]==="script"||u.lexer[y]==="style")&&_.options[u.lexer[y]].objectSort===true){return}do{if(u.begin[y]===e||u.begin[u.begin[y]]===e&&u.types[y].indexOf("attribute")>-1&&u.types[y].indexOf("attribute_end")<0){u.ender[y]=this.count;}else {y=u.begin[y];}y=y-1;}while(y>e);if(y>-1)u.ender[y]=this.count;};this.datanames.forEach(y=>u[y].push(h[y]));if(u===this.data){this.count=this.count+1;this.linesSpace=0;if(h.lexer!=="style"){if(r.replace(/(\{|\}|@|<|>|%|#|)/g,"")===""){r=h.types==="else"?"else":r=h.token;}}if(h.types==="start"||h.types.indexOf("_start")>0){this.structure.push([r,this.count]);}else if(h.types==="end"||h.types.indexOf("_end")>0){let y=0;if(this.structure.length>2&&(u.types[this.structure[this.structure.length-1][1]]==="else"||u.types[this.structure[this.structure.length-1][1]].indexOf("_else")>0)&&(u.types[this.structure[this.structure.length-2][1]]==="start"||u.types[this.structure[this.structure.length-2][1]].indexOf("_start")>0)&&(u.types[this.structure[this.structure.length-2][1]+1]==="else"||u.types[this.structure[this.structure.length-2][1]+1].indexOf("_else")>0)){this.structure.pop();u.begin[this.count]=this.structure[this.structure.length-1][1];u.stack[this.count]=this.structure[this.structure.length-1][0];u.ender[this.count-1]=this.count;y=u.ender[u.begin[this.count]+1];}g();if(y>0)u.ender[u.begin[this.count]+1]=y;this.structure.pop();}else if(h.types==="else"||h.types.indexOf("_else")>0){if(r==="")r="else";if(this.count>0&&(u.types[this.count-1]==="start"||u.types[this.count-1].indexOf("_start")>0)){this.structure.push([r,this.count]);}else {g();if(r===""){this.structure[this.structure.length-1]=["else",this.count];}else {this.structure[this.structure.length-1]=[r,this.count];}}}}}safeSort(u,h,r){let g=i=>i;const y=i=>Array.isArray(i)===true;function e(i){let E=i;const f=[i[0]];function n(){let l=0;const A=E.length;if(l<A){do{if(y(E[l])===true)E[l]=e(E[l]);l=l+1;}while(l<A)}}function k(l){let A=0;const I=[];const a=E.length;if(A<a){do{if(E[A]!==l)I.push(E[A]);A=A+1;}while(A<a)}E=I;if(I.length>0){f.push(I[0]);g(I[0]);}else {if(r===true)n();i=E;}}g=k;k(u[0]);return i}function m(i){let E=0;const f=i.length;const n=i;function k(){let A=0;const I=n.length;if(A<I){do{if(y(n[A]))n[A]=m(n[A]);A=A+1;}while(A<I)}}function l(A){let I=E;let a=0;let z=0;let P=0;let W=n[E];let S=[];let t="";const d=typeof W;if(I<f){do{t=typeof n[I];if(n[I]>W||t>d){W=n[I];S=[I];}else if(n[I]===W){S.push(I);}I=I+1;}while(I<f)}z=S.length;I=E;a=z+E;if(I<a){do{n[S[P]]=n[I];n[I]=W;P=P+1;I=I+1;}while(I<a)}E=E+z;if(E<f){g("");}else {if(r===true)k();i=n;}return A}g=l;l("");return i}function T(i){let E=0;const f=i.length;const n=i;function k(){let A=0;const I=n.length;if(A<I){do{if(y(n[A])===true)n[A]=T(n[A]);A=A+1;}while(A<I)}}function l(A){let I=E;let a=0;let z=0;let P=0;let W=[];let S=n[E];let t="";const d=typeof S;if(I<f){do{t=typeof n[I];if(n[I]<S||t<d){S=n[I];W=[I];}else if(n[I]===S){W.push(I);}I=I+1;}while(I<f)}z=W.length;I=E;a=z+E;if(I<a){do{n[W[P]]=n[I];n[I]=S;P=P+1;I=I+1;}while(I<a)}E=E+z;if(E<f){g("");}else {if(r===true)k();i=n;}return A}g=l;l("");return i}if(y(u)===false)return u;if(h==="normal")return e(u);if(h==="descend")return m(u);return T(u)}sortCorrection(u,h){let r=u;let g=-1;const y=this.data;const e=[];const m=this.structure.length<2?[-1]:[this.structure[this.structure.length-2][1]];do{if(r>0&&y.types[r].indexOf("attribute")>-1&&y.types[r].indexOf("end")<0&&y.types[r-1].indexOf("start")<0&&y.types[r-1].indexOf("attribute")<0&&y.lexer[r]==="markup"){m.push(r-1);}if(r>0&&y.types[r-1].indexOf("attribute")>-1&&y.types[r].indexOf("attribute")<0&&y.lexer[m[m.length-1]]==="markup"&&y.types[m[m.length-1]].indexOf("start")<0){m.pop();}if(y.begin[r]!==m[m.length-1]){if(m.length>0){y.begin[r]=m[m.length-1];}else {y.begin[r]=-1;}}if(y.types[r].indexOf("else")>-1){if(m.length>0){m[m.length-1]=r;}else {m.push(r);}}if(y.types[r].indexOf("end")>-1)m.pop();if(y.types[r].indexOf("start")>-1)m.push(r);r=r+1;}while(r<h);r=h;do{r=r-1;if(y.types[r].indexOf("end")>-1){e.push(r);g=g+1;}y.ender[r]=g>-1?e[g]:-1;if(y.types[r].indexOf("start")>-1){e.pop();g=g-1;}}while(r>u)}spacer(u){this.linesSpace=1;do{if(u.array[u.index]==="\n"){this.linesSpace=this.linesSpace+1;this.lineNumber=this.lineNumber+1;}if(/\s/.test(u.array[u.index+1])===false)break;u.index=u.index+1;}while(u.index<u.end);return u.index}splice(u){const h=[this.data.begin[this.count],this.data.token[this.count]];if(u.record!==void 0&&u.record.token!==""){for(const r of this.datanames){u.data[r].splice(u.index,u.howmany,u.record[r]);}if(u.data===this.data){this.count=this.count-u.howmany+1;if(h[0]!==this.data.begin[this.count]||h[1]!==this.data.token[this.count]){this.linesSpace=0;}}return}for(const r of this.datanames){u.data[r].splice(u.index,u.howmany);}if(u.data===this.data){this.count=this.count-u.howmany;this.linesSpace=0;}}wrapCommentBlock(u){let h=u.start;let r=0;let g=0;let y=0;let e=0;let m=[];let T="";let i="";let E=false;let f=false;let n=false;let k=false;let l="";let A=u.terminator.length-1;let I=u.terminator.charAt(A);let a=0;const{wrap:z,crlf:P,preserveComment:W}=_.options;const S=[];const t=[];const d=P===true?"\r\n":"\n";const x=R=>`\\${R}`;const j=/(\/|\\|\||\*|\[|\]|\{|\})/g;const C=new RegExp(`\\s*${u.terminator.replace(j,x)}$`);const F=u.opening.replace(j,x);const M=new RegExp(`^(${F}\\s*@prettify-ignore-start\b)`);const $=new RegExp(`(${F}\\s*)`);function q(){if(/^\s+$/.test(m[r+1])||m[r+1]===""){do{r=r+1;}while(r<e&&(/^\s+$/.test(m[r+1])||m[r+1]===""))}if(r<e-1)t.push("");}do{S.push(u.chars[h]);if(u.chars[h]==="\n")this.lineNumber=this.lineNumber+1;if(u.chars[h]===I&&u.chars.slice(h-A,h+1).join("")===u.terminator)break;h=h+1;}while(h<u.end);l=S.join("");if(M.test(l)===true){let R="\n";h=h+1;do{S.push(u.chars[h]);h=h+1;}while(h<u.end&&(u.chars[h-1]!=="d"||u.chars[h-1]==="d"&&S.slice(S.length-20).join("")!=="@prettify-ignore-end"));r=h;A=u.opening.length-1;I=u.opening.charAt(A);do{if(u.opening==="/*"&&u.chars[r-1]==="/"&&(u.chars[r]==="*"||u.chars[r]==="/"))break;if(u.opening!=="/*"&&u.chars[r]===I&&u.chars.slice(r-A,r+1).join("")===u.opening)break;r=r-1;}while(r>u.start);if(u.opening==="/*"&&u.chars[r]==="*"){R="*/";}else if(u.opening!=="/*"){R=u.terminator;}A=R.length-1;I=R.charAt(A);if(R!=="\n"||u.chars[h]!=="\n"){do{S.push(u.chars[h]);if(R==="\n"&&u.chars[h+1]==="\n")break;if(u.chars[h]===I&&u.chars.slice(h-A,h+1).join("")===R)break;h=h+1;}while(h<u.end)}if(u.chars[h]==="\n")h=h-1;l=S.join("").replace(/\s+$/,"");return [l,h]}if(W===true||z<1||h===u.end||l.length<=z&&l.indexOf("\n")<0||u.opening==="/*"&&l.indexOf("\n")>0&&l.replace("\n","").indexOf("\n")>0&&/\n(?!(\s*\*))/.test(l)===false){return [l,h]}r=u.start;if(r>0&&u.chars[r-1]!=="\n"&&/\s/.test(u.chars[r-1])){do{r=r-1;}while(r>0&&u.chars[r-1]!=="\n"&&/\s/.test(u.chars[r-1]))}T=u.chars.slice(r,u.start).join("");const te=new RegExp("\n"+T,"g");m=l.replace(/\r\n/g,"\n").replace(te,"\n").split("\n");e=m.length;m[0]=m[0].replace($,"");m[e-1]=m[e-1].replace(C,"");if(e<2)m=m[0].split(" ");if(m[0]===""){m[0]=u.opening;}else {m.splice(0,0,u.opening);}e=m.length;r=0;do{i=r<e-1?m[r+1].replace(/^\s+/,""):"";if(/^\s+$/.test(m[r])===true||m[r]===""){q();}else if(m[r].slice(0,4)==="    "){t.push(m[r]);}else if(m[r].replace(/^\s+/,"").length>z&&m[r].replace(/^\s+/,"").indexOf(" ")>z){m[r]=m[r].replace(/^\s+/,"");g=m[r].indexOf(" ");t.push(m[r].slice(0,g));m[r]=m[r].slice(g+1);r=r-1;}else {m[r]=u.opening==="/*"&&m[r].indexOf("/*")!==0?`   ${m[r].replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}`:`${m[r].replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}`;a=r<1?z-(u.opening.length+1):z;g=m[r].length;y=m[r].replace(/^\s+/,"").indexOf(" ");if(g>a&&y>0&&y<a){g=a;do{g=g-1;if(/\s/.test(m[r].charAt(g))&&g<=z)break}while(g>0);if(m[r].slice(0,4)!=="    "&&/^\s*(\*|-)\s/.test(m[r])===true&&/^\s*(\*|-)\s/.test(m[r+1])===false){m.splice(r+1,0,"* ");}if(m[r].slice(0,4)!=="    "&&/^\s*\d+\.\s/.test(m[r])===true&&/^\s*\d+\.\s/.test(m[r+1])===false){m.splice(r+1,0,"1. ");}if(g<4){t.push(m[r]);k=true;}else if(r===e-1){t.push(m[r].slice(0,g));m[r]=m[r].slice(g+1);k=true;r=r-1;}else if(/^\s+$/.test(m[r+1])===true||m[r+1]===""){t.push(m[r].slice(0,g));m[r]=m[r].slice(g+1);E=true;r=r-1;}else if(m[r+1].slice(0,4)!=="    "&&/^\s*(\*|-)\s/.test(m[r+1])){t.push(m[r].slice(0,g));m[r]=m[r].slice(g+1);f=true;r=r-1;}else if(m[r+1].slice(0,4)!=="    "&&/^\s*\d+\.\s/.test(m[r+1])){t.push(m[r].slice(0,g));m[r]=m[r].slice(g+1);n=true;r=r-1;}else if(m[r+1].slice(0,4)==="    "){t.push(m[r].slice(0,g));m[r]=m[r].slice(g+1);k=true;r=r-1;}else if(g+i.length>z&&i.indexOf(" ")<0){t.push(m[r].slice(0,g));m[r]=m[r].slice(g+1);k=true;r=r-1;}else if(m[r].replace(/^\s+/,"").indexOf(" ")<z){m[r+1]=m[r].length>z?m[r].slice(g+1)+d+m[r+1]:`${m[r].slice(g+1)} ${m[r+1]}`;}if(E===false&&f===false&&n===false&&k===false){m[r]=m[r].slice(0,g);}}else if(m[r+1]!==void 0&&(m[r].length+i.indexOf(" ")>z&&i.indexOf(" ")>0||m[r].length+i.length>z&&i.indexOf(" ")<0)){t.push(m[r]);r=r+1;}else if(m[r+1]!==void 0&&/^\s+$/.test(m[r+1])===false&&m[r+1]!==""&&m[r+1].slice(0,4)!=="    "&&/^\s*(\*|-|(\d+\.))\s/.test(m[r+1])===false){m[r+1]=`${m[r]} ${m[r+1]}`;E=true;}if(k===false&&f===false&&n===false){if(E===true){E=false;}else if(/^\s*(\*|-|(\d+\.))\s*$/.test(m[r])===false){if(r<e-1&&m[r+1]!==""&&/^\s+$/.test(m[r])===false&&m[r+1].slice(0,4)!=="    "&&/^\s*(\*|-|(\d+\.))\s/.test(m[r+1])===false){m[r]=`${m[r]} ${m[r+1]}`;m.splice(r+1,1);e=e-1;r=r-1;}else {if(u.opening==="/*"&&m[r].indexOf("/*")!==0){t.push(`   ${m[r].replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}`);}else {t.push(`${m[r].replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}`);}}}}k=false;f=false;n=false;}r=r+1;}while(r<e);if(t.length>0){if(t[t.length-1].length>z-(u.terminator.length+1)){t.push(u.terminator);}else {t[t.length-1]=`${t[t.length-1]} ${u.terminator}`;}l=t.join(d);}else {m[m.length-1]=m[m.length-1]+u.terminator;l=m.join(d);}return [l,h]}wrapCommentLine(u){let h=u.start;let r=0;let g="";let y=[];const{wrap:e,preserveComment:m}=_.options;function T(){let E="";do{r=r+1;if(u.chars[r+1]==="\n")return}while(r<u.end&&/\s/.test(u.chars[r])===true);if(u.chars[r]+u.chars[r+1]==="//"){y=[];do{y.push(u.chars[r]);r=r+1;}while(r<u.end&&u.chars[r]!=="\n");E=y.join("");if(/^\/\/ (\*|-|(\d+\.))/.test(E)===false&&E.slice(0,6)!=="//    "&&/^\/\/\s*$/.test(E)===false){g=`${g} ${E.replace(/(^\/\/\s*)/,"").replace(/\s+$/,"")}`;h=r-1;T();}}}const i=()=>{const E=[];const f=re(null);f.ender=-1;f.types="comment";f.lexer=u.lexer;f.lines=this.linesSpace;if(this.count>-1){f.begin=this.structure[this.structure.length-1][1];f.stack=this.structure[this.structure.length-1][0];f.token=this.data.token[this.count];}else {f.begin=-1;f.stack="global";f.token="";}let n=0;let k=0;g=g.replace(/\s+/g," ").replace(/\s+$/,"");k=g.length;if(e>k)return;do{n=e;if(g.charAt(n)!==" "){do{n=n-1;}while(n>0&&g.charAt(n)!==" ");if(n<3){n=e;do{n=n+1;}while(n<k-1&&g.charAt(n)!==" ")}}E.push(g.slice(0,n));g=`// ${g.slice(n).replace(/^\s+/,"")}`;k=g.length;}while(e<k);n=0;k=E.length;do{f.token=E[n];this.push(this.data,f,"");f.lines=2;this.linesSpace=2;n=n+1;}while(n<k)};do{y.push(u.chars[h]);h=h+1;}while(h<u.end&&u.chars[h]!=="\n");if(h===u.end){u.chars.push("\n");}else {h=h-1;}g=y.join("").replace(/\s+$/,"");if(/^(\/\/\s*@prettify-ignore-start\b)/.test(g)===true){let E="\n";h=h+1;do{y.push(u.chars[h]);h=h+1;}while(h<u.end&&(u.chars[h-1]!=="d"||u.chars[h-1]==="d"&&y.slice(y.length-20).join("")!=="@prettify-ignore-end"));r=h;do{}while(r>u.start&&u.chars[r-1]==="/"&&(u.chars[r]==="*"||u.chars[r]==="/"));if(u.chars[r]==="*")E="*/";if(E!=="\n"||u.chars[h]!=="\n"){do{y.push(u.chars[h]);if(E==="\n"&&u.chars[h+1]==="\n")break;h=h+1;}while(h<u.end&&(E==="\n"||E==="*/"&&(u.chars[h-1]!=="*"||u.chars[h]!=="/")))}if(u.chars[h]==="\n")h=h-1;g=y.join("").replace(/\s+$/,"");return [g,h]}if(g==="//"||g.slice(0,6)==="//    "||m===true){return [g,h]}g=g.replace(/(\/\/\s*)/,"// ");if(e<1||h===u.end-1&&this.data.begin[this.count]<1)return [g,h];r=h+1;T();i();return [g,h]}};_.lexers.style=function v(u){const{options:h}=_;let r=0;let g="";let y="";const e=s.data;const m=u.split("");const T=u.length;const i=[];const E=[];function f(W){const S=re(null);S.begin=s.structure[s.structure.length-1][1];S.ender=-1;S.lexer="style";S.lines=s.linesSpace;S.stack=s.structure[s.structure.length-1][0];S.token=y;S.types=g;s.push(e,S,W);}const n=function W(S){const t=S;do{S=S-1;}while(m[S]==="\\"&&S>0);if((t-S)%2===1){return true}return false};function k(W){const S=W.replace(/\s*!important/," !important").split("");const t=[];const d=/-?transition$/.test(e.token[s.count-2]);const x=function ue(ne){return ne};const j=function ue(ne){ne=ne.replace(/\s*/g,"");if(/\/\d/.test(ne)===true&&W.indexOf("url(")===0)return ne;return ` ${ne.charAt(0)} ${ne.charAt(1)}`};const C=function ue(ne){if(h.style.noLeadZero===true){const fe=function Ae(xe){return xe.replace(/0+/,"")};return ne.replace(/^-?\D0+(\.|\d)/,fe)}if(/0*\./.test(ne)===true)return ne.replace(/0*\./,"0.");if(/0+/.test(/\d+/.exec(ne)[0])===true){if(/^\D*0+\D*$/.test(ne)===true)return ne.replace(/0+/,"0");return ne.replace(/\d+/.exec(ne)[0],/\d+/.exec(ne)[0].replace(/^0+/,""))}return ne};const F=function ue(ne){return ne.replace(",",", ")};const M=function ue(ne){return `${ne} `};const $=function ue(){const ne=L-1;let fe=ne;if(ne<1){return true}do{fe=fe-1;}while(fe>0&&S[fe]==="\\");if((ne-fe)%2===1){return true}return false};const q=/^-?0+\.\d+[a-z]/;const te=/^-?\.\d+[a-z]/;const R=/(\s|\(|,)-?0+\.?\d+([a-z]|\)|,|\s)/g;const X=/(\s|\(|,)-?\.?\d+([a-z]|\)|,|\s)/g;const le="%|cap|ch|cm|deg|dpcm|dpi|dppx|em|ex|fr|grad|Hz|ic|in|kHz|lh|mm|ms|mS|pc|pt|px|Q|rad|rem|rlh|s|turn|vb|vh|vi|vmax|vmin|vw";let L=0;let K=0;let G="";let H=S.length;let B=[];if(L<H){do{B.push(S[L]);if(S[L-1]!=="\\"||$()===false){if(G===""){if(S[L]==='"'){G='"';K=K+1;}else if(S[L]==="'"){G="'";K=K+1;}else if(S[L]==="("){G=")";K=K+1;}else if(S[L]==="["){G="]";K=K+1;}}else if(S[L]==="("&&G===")"||S[L]==="["&&G==="]"){K=K+1;}else if(S[L]===G){K=K-1;if(K===0){G="";}}}if(G===""&&S[L]===" "){B.pop();t.push(x(B.join("")));B=[];}L=L+1;}while(L<H)}t.push(x(B.join("")));H=t.length;L=0;if(L<H){do{if(h.style.noLeadZero===true&&q.test(t[L])===true){t[L]=t[L].replace(/0+\./,".");}else if((h.style.noLeadZero===false||h.style.noLeadZero===void 0)&&te.test(t[L])===true){t[L]=t[L].replace(".","0.");}else if(R.test(t[L])===true||X.test(t[L])===true){t[L]=t[L].replace(R,C).replace(X,C);}else if(/^(0+([a-z]{2,3}|%))$/.test(t[L])===true&&d===false){t[L]="0";}else if(/^(0+)/.test(t[L])===true){t[L]=t[L].replace(/0+/,"0");if(/\d/.test(t[L].charAt(1))===true){t[L]=t[L].substr(1);}}else if(/^url\((?!('|"))/.test(t[L])===true&&t[L].charAt(t[L].length-1)===")"){G=t[L].charAt(t[L].indexOf("url(")+4);if(G!=="@"&&G!=="{"&&G!=="<"){if(h.style.quoteConvert==="double"){t[L]=t[L].replace(/url\(/,'url("').replace(/\)$/,'")');}else {t[L]=t[L].replace(/url\(/,"url('").replace(/\)$/,"')");}}}if(/^(\+|-)?\d+(\.\d+)?(e-?\d+)?\D+$/.test(t[L])===true){if(le.indexOf(t[L].replace(/(\+|-)?\d+(\.\d+)?(e-?\d+)?/,""))<0){t[L]=t[L].replace(/(\+|-)?\d+(\.\d+)?(e-?\d+)?/,M);}}if(/^\w+\(/.test(t[L])===true&&t[L].charAt(t[L].length-1)===")"&&(t[L].indexOf("url(")!==0||t[L].indexOf("url(")===0&&t[L].indexOf(" ")>0)){t[L]=t[L].replace(/,\S/g,F);}L=L+1;}while(L<H)}G=t.join(" ");return G.charAt(0)+G.slice(1).replace(/\s*(\/|\+|\*)\s*(\d|\$)/,j)}const l=function W(){let S=r;let t=0;const d=[];let x="";let j=null;const C=[];const F=h.style.quoteConvert===void 0?"none":h.style.quoteConvert;const M=function $(){d.push(m[S]);if(/\s/.test(m[S+1])===true){do{S=S+1;}while(S<T&&/\s/.test(m[S+1])===true)}};if(S<T){do{if(m[S]==='"'||m[S]==="'"){if(j===null){j=false;}if(C[C.length-1]===m[S]&&(m[S-1]!=="\\"||n(S-1)===false)){C.pop();if(F==="double"){m[S]='"';}else if(F==="single"){m[S]="'";}}else if(C[C.length-1]!=='"'&&C[C.length-1]!=="'"&&(m[S-1]!=="\\"||n(S-1)===false)){C.push(m[S]);if(F==="double"){m[S]='"';}else if(F==="single"){m[S]="'";}}else if(m[S-1]==="\\"&&F!=="none"){if(n(S-1)===true){if(F==="double"&&m[S]==="'"){d.pop();}else if(F==="single"&&m[S]==='"'){d.pop();}}}else if(F==="double"&&m[S]==='"'){m[S]='\\"';}else if(F==="single"&&m[S]==="'"){m[S]="\\'";}d.push(m[S]);}else if(m[S-1]!=="\\"||n(S-1)===false){if(m[S]==="("){if(j===null){j=true;}C.push(")");M();}else if(m[S]==="["){j=false;C.push("]");M();}else if((m[S]==="#"||m[S]==="@")&&m[S+1]==="{"){j=false;d.push(m[S]);S=S+1;C.push("}");M();}else if(m[S]===C[C.length-1]){d.push(m[S]);C.pop();}else {d.push(m[S]);}}else {d.push(m[S]);}if(s.structure[s.structure.length-1][0]==="map"&&C.length===0&&(m[S+1]===","||m[S+1]===")")){if(m[S+1]===")"&&e.token[s.count]==="("){s.pop(e);s.structure.pop();d.splice(0,0,"(");}else {break}}if(m[S+1]===":"){t=S;if(/\s/.test(m[t])===true){do{t=t-1;}while(/\s/.test(m[t])===true)}x=m.slice(t-6,t+1).join("");if(x.indexOf("filter")===x.length-6||x.indexOf("progid")===x.length-6){x="filter";}}if(C.length===0){if(m[S+1]===";"&&n(S+1)===true||m[S+1]===":"&&m[S]!==":"&&m[S+2]!==":"&&x!=="filter"&&x!=="progid"||m[S+1]==="}"||m[S+1]==="{"||m[S+1]==="/"&&(m[S+2]==="*"||m[S+2]==="/")){t=d.length-1;if(/\s/.test(d[t])===true){do{t=t-1;S=S-1;d.pop();}while(/\s/.test(d[t])===true)}break}if(m[S+1]===","){break}}S=S+1;}while(S<T)}r=S;if(s.structure[s.structure.length-1][0]==="map"&&d[0]==="("){i[i.length-1]=i[i.length-1]-1;}y=d.join("").replace(/\s+/g," ").replace(/^\s/,"").replace(/\s$/,"");if(j===true){y=y.replace(/\s+\(/g,"(").replace(/\s+\)/g,")").replace(/,\(/g,", (");}if(s.count>-1&&e.token[s.count].indexOf("extend(")===0){g="pseudo";}else if(j===true&&/\d/.test(y.charAt(0))===false&&/^rgba?\(/.test(y)===false&&y.indexOf("url(")!==0&&(y.indexOf(" ")<0||y.indexOf(" ")>y.indexOf("("))&&y.charAt(y.length-1)===")"){if(e.token[s.count]===":"){g="value";}else {y=y.replace(/,\u0020?/g,", ");g="function";}y=k(y);}else if(s.count>-1&&`"'`.indexOf(e.token[s.count].charAt(0))>-1&&e.types[s.count]==="variable"){g="item";}else if(d[0]==="@"||d[0]==="$"){if(e.types[s.count]==="colon"&&h.language==="css"&&(e.types[s.count-1]==="property"||e.types[s.count-1]==="variable")){g="value";}else if(s.count>-1){g="item";x=e.token[s.count];S=x.indexOf("(");if(x.charAt(x.length-1)===")"&&S>0){x=x.slice(S+1,x.length-1);e.token[s.count]=e.token[s.count].slice(0,S+1)+k(x)+")";}}y=k(y);}else {g="item";}f("");};const A=function W(S){let t=s.count;let d=0;let x="";const j=[];const C=function M(){if(e.types[t]==="comment"||e.types[t]==="ignore"){do{t=t-1;j.push(e.token[t]);}while(t>0&&e.lexer[t]==="style"&&(e.types[t]==="comment"||e.types[t]==="ignore"))}d=t-1;if(e.types[d]==="comment"||e.types[d]==="ignore"){do{d=d-1;}while(d>0&&e.lexer[t]==="style"&&(e.types[d]==="comment"||e.types[d]==="ignore"))}x=e.token[t].charAt(0);};const F=function M($){let q=$;const te=e.begin[q];e.token[$]=e.token[$].replace(/\s*&/," &").replace(/(\s*>\s*)/g," > ").replace(/:\s+/g,": ").replace(/^(\s+)/,"").replace(/(\s+)$/,"").replace(/\s+::\s+/,"::");if(e.token[q-1]===","||e.token[q-1]===":"||e.types[q-1]==="comment"){do{q=q-1;if(e.begin[q]===te){if(e.token[q]===";"){break}if(e.token[q]!==","&&e.types[q]!=="comment"){e.types[q]="selector";}if(e.token[q]===":"){e.token[q-1]=`${e.token[q-1]}:${e.token[q+1]}`;s.splice({data:e,howmany:2,index:q});}}else {break}}while(q>0)}q=s.count;if(h.style.sortSelectors===true&&e.token[q-1]===","){const R=[e.token[q]];do{q=q-1;if(e.types[q]==="comment"||e.types[q]==="ignore"){do{q=q-1;}while(q>0&&(e.types[q]==="comment"||e.types[q]==="ignore"))}if(e.token[q]===","){q=q-1;}R.push(e.token[q]);}while(q>0&&(e.token[q-1]===","||e.types[q-1]==="selector"||e.types[q-1]==="comment"||e.types[q-1]==="ignore"));R.sort();q=s.count;e.token[q]=R.pop();do{q=q-1;if(e.types[q]==="comment"||e.types[q]==="ignore"){do{q=q-1;}while(q>0&&(e.types[q]==="comment"||e.types[q]==="ignore"))}if(e.token[q]===","){q=q-1;}e.token[q]=R.pop();}while(q>0&&(e.token[q-1]===","||e.token[q-1]==="selector"||e.types[q-1]==="comment"||e.types[q-1]==="ignore"))}t=s.count;C();};C();if(S==="start"&&(e.types[t]==="value"||e.types[t]==="variable")){e.types[t]="item";}if(e.lexer[s.count-1]!=="style"||d<0){if(S==="colon"){if(x==="$"||x==="@"){e.types[t]="variable";}else {e.types[t]="property";}}else if(e.lexer[t]==="style"){e.types[t]="selector";F(t);}}else if(S==="start"&&e.types[t]==="function"&&e.lexer[t]==="style"){e.types[t]="selector";F(t);}else if(e.types[t]==="item"&&e.lexer[t]==="style"){if(S==="start"){F(t);e.types[t]="selector";if(e.token[t]===":"){e.types[d]="selector";}if(e.token[t].indexOf("=\u201C")>0){s.error=`Quote looking character (\u201C, \\201c) used instead of actual quotes on line number ${s.lineNumber}`;}else if(e.token[t].indexOf("=\u201D")>0){s.error=`Quote looking character (\u201D, \\201d) used instead of actual quotes on line number ${s.lineNumber}`;}}else if(S==="end"){if(x==="$"||x==="@"){e.types[t]="variable";}else {e.types[t]="value";}e.token[t]=k(e.token[t]);}else if(S==="separator"){if(e.types[d]==="colon"||e.token[d]===","||e.token[d]==="{"){if(m[r]!==";"&&(e.types[d]==="selector"||e.token[d]==="{")){e.types[t]="selector";F(t);}else if(e.token[t].charAt(0)==="$"||e.token[t].charAt(0)==="@"){e.types[t]="variable";}else {e.types[t]="value";}e.token[t]=k(e.token[t]);if(e.token[t].charAt(0)==="\u201C"){s.error=`Quote looking character (\u201C, \\201c) used instead of actual quotes on line number ${s.lineNumber}`;}else if(e.token[t].charAt(0)==="\u201D"){s.error=`Quote looking character (\u201D, \\201d) used instead of actual quotes on line number ${s.lineNumber}`;}}else {if(x==="$"||x==="@"){e.types[t]="variable";}else if(e.types[d]==="value"||e.types[d]==="variable"){e.token[d]=e.token[d]+e.token[t];s.pop(e);}else {e.types[t]="value";}}}else if(S==="colon"){if(x==="$"||x==="@"){e.types[t]="variable";}else {e.types[t]="property";}}else if(e.token[d].charAt(0)==="@"&&(e.types[d-2]!=="variable"&&e.types[d-2]!=="property"||e.types[d-1]==="separator")){e.types[d]="variable";g="variable";e.token[d]=k(e.token[d]);}}};const I=function W(){let S=s.count;do{S=S-1;}while(S>0&&e.types[S]==="comment");if(e.token[S]===";"){return}s.splice({data:e,howmany:0,index:S+1,record:{begin:s.structure[s.structure.length-1][1],ender:-1,lexer:"style",lines:s.linesSpace,stack:s.structure[s.structure.length-1][0],token:";",types:"separator"}});};const a=function W(S,t){let d="";let x="";let j=S.length;let C=0;const F=[];const M=function $(q){const te=e.types[s.count-1];if(g==="item"){if(te==="colon"){e.types[s.count]="value";}else {A(te);}}g=q;if(g.indexOf("start")>-1||g.indexOf("else")>-1){f(y);}else {f("");}};E[E.length-1]=true;if(r<T){do{F.push(m[r]);if(d===""){if(m[r]==='"'){d='"';}else if(m[r]==="'"){d="'";}else if(m[r]==="/"){if(m[r+1]==="/"){d="/";}else if(m[r+1]==="*"){d="*";}}else if(m[r+1]===t.charAt(0)){do{C=C+1;r=r+1;F.push(m[r]);}while(r<T&&C<t.length&&m[r+1]===t.charAt(C));if(C===t.length){d=F.join("");if(/\s/.test(d.charAt(j))===true){do{j=j+1;}while(/\s/.test(d.charAt(j))===true)}C=j;do{C=C+1;}while(C<t.length&&/\s/.test(d.charAt(C))===false);if(C===d.length){C=C-t.length;}if(S==="{%"){if(d.indexOf("{%-")===0){d=d.replace(/^(\{%-\s*)/,"{%- ").replace(/(\s*-%\})$/," -%}").replace(/(\s*%\})$/," %}");x=d.slice(4);}else {d=d.replace(/^(\{%\s*)/,"{% ").replace(/(\s*%\})$/," %}").replace(/(\s*-%\})$/," -%}");x=d.slice(3);}}if(S==="{{"){d=d.replace(/^(\{\{\s*)/,"{{ ").replace(/^(\{\{-\s*)/,"{{- ").replace(/(\s*-\}\})$/," -}}").replace(/(\s*\}\})$/," }}");}if(g==="item"&&e.types[s.count-1]==="colon"&&(e.types[s.count-2]==="property"||e.types[s.count-2]==="variable")){g="value";e.types[s.count]="value";if(Number.isNaN(Number(e.token[s.count]))===true&&e.token[s.count].charAt(e.token[s.count].length-1)!==")"){e.token[s.count]=e.token[s.count]+d;}else {e.token[s.count]=e.token[s.count]+" "+d;}return}y=d;if(S==="{%"){const $=["autoescape","block","capture","case","comment","embed","filter","for","form","if","macro","paginate","raw","sandbox","spaceless","tablerow","unless","verbatim"];let q=$.length-1;x=x.slice(0,x.indexOf(" "));if(x.indexOf("(")>0){x=x.slice(0,x.indexOf("("));}if(x==="else"||x==="elseif"||x==="when"||x==="elsif"){M("template_else");return}q=$.length-1;if(q>-1){do{if(x===$[q]){M("template_start");return}if(x==="end"+$[q]){M("template_end");return}q=q-1;}while(q>-1)}}else if(S==="{{"){let $=d.slice(2);const q=$.length;let te=0;do{te=te+1;}while(te<q&&/\s/.test($.charAt(te))===false&&$.charAt(j)!=="(");$=$.slice(0,te);if($.charAt($.length-2)==="}"){$=$.slice(0,$.length-2);}if($==="end"){M("template_end");return}if($==="block"||$==="define"||$==="form"||$==="if"||$==="range"||$==="with"){M("template_start");return}}M("template");return}C=0;}}else if(d===m[r]){if(d==='"'||d==="'"){d="";}else if(d==="/"&&(m[r]==="\r"||m[r]==="\n")){d="";}else if(d==="*"&&m[r+1]==="/"){d="";}}r=r+1;}while(r<T)}};const z=function W(S){const t=S===true?s.wrapCommentLine({chars:m,end:T,lexer:"style",opening:"//",start:r,terminator:"\n"}):s.wrapCommentBlock({chars:m,end:T,lexer:"style",opening:"/*",start:r,terminator:"*/"});y=t[0];g=/^(\/\*\s*parse-ignore-start)/.test(y)===true?"ignore":"comment";f("");r=t[1];};const P=function W(){const S=s.linesSpace;const t={data:{margin:["","","","",false],padding:["","","","",false]},last:{margin:0,padding:0},removes:[]};const d=s.structure[s.structure.length-1][1];const x=function M($){if(e.token[C-2]===$){const q=e.token[C].replace(/\s*!important\s*/g,"").split(" ");const te=q.length;if(e.token[C].indexOf("!important")>-1){t.data[$[4]]=true;}if(te>3){if(t.data[$][0]===""){t.data[$][0]=q[0];}if(t.data[$][1]===""){t.data[$][1]=q[1];}if(t.data[$][2]===""){t.data[$][2]=q[2];}if(t.data[$][3]===""){t.data[$][3]=q[3];}}else if(te>2){if(t.data[$][0]===""){t.data[$][0]=q[0];}if(t.data[$][1]===""){t.data[$][1]=q[1];}if(t.data[$][2]===""){t.data[$][2]=q[2];}if(t.data[$][3]===""){t.data[$][3]=q[1];}}else if(te>1){if(t.data[$][0]===""){t.data[$][0]=q[0];}if(t.data[$][1]===""){t.data[$][1]=q[1];}if(t.data[$][2]===""){t.data[$][2]=q[0];}if(t.data[$][3]===""){t.data[$][3]=q[1];}}else {if(t.data[$][0]===""){t.data[$][0]=q[0];}if(t.data[$][1]===""){t.data[$][1]=q[0];}if(t.data[$][2]===""){t.data[$][2]=q[0];}if(t.data[$][3]===""){t.data[$][3]=q[0];}}}else if(e.token[C-2]===`${$}-bottom`){if(t.data[$][2]==="")t.data[$][2]=e.token[C];}else if(e.token[C-2]===`${$}-left`){if(t.data[$][3]==="")t.data[$][3]=e.token[C];}else if(e.token[C-2]===`${$}-right`){if(t.data[$][1]==="")t.data[$][1]=e.token[C];}else if(e.token[C-2]===`${$}-top`){if(t.data[$][0]==="")t.data[$][0]=e.token[C];}else {return}t.removes.push([C,$]);t.last[$]=C;};const j=function M(){let $=0;let q="";const te=/^(0+([a-z]+|%))/;const R=t.removes.length;const X=t.data.margin[0]!==""&&t.data.margin[1]!==""&&t.data.margin[2]!==""&&t.data.margin[3]!=="";const le=t.data.padding[0]!==""&&t.data.padding[1]!==""&&t.data.padding[2]!==""&&t.data.padding[3]!=="";const L=function K(G){if(te.test(t.data[G][0])===true)t.data[G][0]="0";if(te.test(t.data[G][1])===true)t.data[G][1]="0";if(te.test(t.data[G][2])===true)t.data[G][2]="0";if(te.test(t.data[G][3])===true)t.data[G][3]="0";if(t.data[G][0]===t.data[G][1]&&t.data[G][0]===t.data[G][2]&&t.data[G][0]===t.data[G][3]){q=t.data[G][0];}else if(t.data[G][0]===t.data[G][2]&&t.data[G][1]===t.data[G][3]&&t.data[G][0]!==t.data[G][1]){q=`${t.data[G][0]} ${t.data[G][1]}`;}else if(t.data[G][1]===t.data[G][3]&&t.data[G][0]!==t.data[G][2]){q=`${t.data[G][0]} ${t.data[G][1]} ${t.data[G][2]}`;}else {q=`${t.data[G][0]} ${t.data[G][1]} ${t.data[G][2]} ${t.data[G][3]}`;}if(t.data[G[4]]===true)q=`${q.replace(" !important","")} !important`;if(t.last[G]>s.count){$=d<1?1:d+1;do{if(e.begin[$]===d&&e.types[$]==="value"&&e.token[$-2].indexOf(G)===0){t.last[G]=$;break}$=$+1;}while($<s.count)}e.token[t.last[G]]=q;e.token[t.last[G]-2]=G;};if(R>1&&(X===true||le===true)){do{if(t.removes[$][0]!==t.last.margin&&t.removes[$][0]!==t.last.padding&&(X===true&&t.removes[$][1]==="margin"||le===true&&t.removes[$][1]==="padding")){s.splice({data:e,howmany:e.types[t.removes[$][0]+1]==="separator"?4:3,index:t.removes[$][0]-2});}$=$+1;}while($<R-1)}if(X===true)L("margin");if(le===true)L("padding");if(F===true){if(d<0){s.error="Brace mismatch. There appears to be more closing braces than starting braces.";}else {s.sortCorrection(d,s.count+1);}}};let C=s.count;let F=false;do{C=C-1;if(e.begin[C]===d){if(e.types[C]==="value"&&e.types[C-2]==="property"){if(e.token[C-2].indexOf("margin")===0){x("margin");}else if(e.token[C-2].indexOf("padding")===0){x("padding");}}}else {F=true;C=e.begin[C];}}while(C>d);j();s.linesSpace=S;};do{if(/\s/.test(m[r])===true){r=s.spacer({array:m,end:T,index:r});}else if(m[r]==="/"&&m[r+1]==="*"){z(false);}else if(m[r]==="/"&&m[r+1]==="/"){z(true);}else if(m[r]==="{"&&m[r+1]==="%"){a("{%","%}");}else if(m[r]==="{"&&m[r+1]==="{"){a("{{","}}");}else if(m[r]==="{"||m[r]==="("&&e.token[s.count]===":"&&e.types[s.count-1]==="variable"){A("start");g="start";y=m[r];if(m[r]==="("){f("map");i.push(0);}else if(e.types[s.count]==="selector"||e.types[s.count]==="variable"){f(e.token[s.count]);}else if(e.types[s.count]==="colon"){f(e.token[s.count-1]);}else {f("block");}E.push(false);}else if(m[r]==="}"||m[r]===")"&&s.structure[s.structure.length-1][0]==="map"&&i[i.length-1]===0){if(m[r]==="}"&&e.types[s.count]==="item"&&e.token[s.count-1]==="{"&&e.token[s.count-2]!==void 0&&e.token[s.count-2].charAt(e.token[s.count-2].length-1)==="@"){e.token[s.count-2]=e.token[s.count-2]+"{"+e.token[s.count]+"}";s.pop(e);s.pop(e);s.structure.pop();}else {if(m[r]===")")i.pop();A("end");if(m[r]==="}"&&e.token[s.count]!==";"){if(e.types[s.count]==="value"||e.types[s.count]==="function"||e.types[s.count]==="variable"&&(e.token[s.count-1]===":"||e.token[s.count-1]===";")){if(h.attemptCorrection===true){y=";";}else {y="x;";}g="separator";f("");}else if(e.types[s.count]==="comment"){I();}}g="end";E.pop();y=m[r];g="end";if(m[r]==="}")P();if(h.style.sortProperties===true&&m[r]==="}")s.objectSort(e);f("");}}else if(m[r]===";"||m[r]===","){if(e.types[s.count-1]==="selector"||e.token[s.count-1]==="}"&&e.types[s.count]!=="function"){A("start");}else {A("separator");}if(e.types[s.count]!=="separator"&&n(r)===true){y=m[r];g="separator";f("");}}else if(m[r]===":"&&e.types[s.count]!=="end"){A("colon");y=":";g="colon";f("");}else {if(s.structure[s.structure.length-1][0]==="map"&&m[r]==="("){i[i.length-1]=i[i.length-1]+1;}l();}r=r+1;}while(r<T);if(h.style.sortProperties===true)s.objectSort(e);return e};_.lexers.script=function v(u){const{options:h}=_;if(h.language==="json"){h.script.quoteConvert="double";}let r=0;let g="";let y="";let e=[];let m=0;let T=-1;let i=-1;let E=[];let f;let n;let k;const l=s.data;const A=s.references;const I=u.length;const a=u.split("");const z=[];const P=[];const W=[];const S=[0,""];const t=[false];const d=["autoescape","block","capture","case","comment","embed","filter","for","form","if","macro","paginate","raw","sandbox","spaceless","tablerow","unless","verbatim"];const x=re(null);x.count=[];x.index=[];x.len=-1;x.word=[];function j(c){let p=0;const o=L(1,false);const b=s.structure.length===0?"":s.structure[s.structure.length-1][0];const w=re(null);w.begin=l.begin[s.count];w.ender=l.begin[s.count];w.lexer=l.lexer[s.count];w.lines=l.lines[s.count];w.stack=l.stack[s.count];w.token=l.token[s.count];w.types=l.types[s.count];if(/^(\/(\/|\*)\s*@ignore\s+start)/.test(g))return;if(y==="start"||y==="type_start")return;if(h.language==="json")return;if(w.token===";"||w.token===","||w.stack==="class"||w.stack==="map"||w.stack==="attribute"||l.types[w.begin-1]==="generic"||o==="{"||b==="initializer"){return}if(w.token==="}"&&l.stack[w.begin-1]==="global"&&l.types[w.begin-1]!=="operator"&&w.stack===l.stack[s.count-1]){return}if(w.stack==="array"&&w.token!=="]")return;if(l.token[l.begin[s.count]]==="{"&&w.stack==="data_type")return;if(w.types!==void 0&&w.types.indexOf("template")>-1&&w.types.indexOf("template_string")<0){return}if(o===";"&&c===false)return;if(l.lexer[s.count-1]!=="script"&&(r<I&&I===_.source.length-1||I<_.source.length-1)){return}if(w.token==="}"&&(w.stack==="function"||w.stack==="if"||w.stack==="else"||w.stack==="for"||w.stack==="do"||w.stack==="while"||w.stack==="switch"||w.stack==="class"||w.stack==="try"||w.stack==="catch"||w.stack==="finally"||w.stack==="block")){if(w.stack==="function"&&(l.stack[w.begin-1]==="data_type"||l.types[w.begin-1]==="type")){p=w.begin;do{p=p-1;}while(p>0&&l.token[p]!==")"&&l.stack[p]!=="arguments");p=l.begin[p];}else {p=l.begin[w.begin-1];}if(l.token[p]==="("){p=p-1;if(l.token[p-1]==="function")p=p-1;if(l.stack[p-1]==="object"||l.stack[p-1]==="switch")return;if(l.token[p-1]!=="="&&l.token[p-1]!=="return"&&l.token[p-1]!==":"){return}}else {return}}if(w.types==="comment"||b==="method"||b==="paren"||b==="expression"||b==="array"||b==="object"||b==="switch"&&w.stack!=="method"&&l.token[l.begin[s.count]]==="("&&l.token[l.begin[s.count]-1]!=="return"&&l.types[l.begin[s.count]-1]!=="operator"){return}if(l.stack[s.count]==="expression"&&(l.token[l.begin[s.count]-1]!=="while"||l.token[l.begin[s.count]-1]==="while"&&l.stack[l.begin[s.count]-2]!=="do")){return}if(o!==""&&"=<>+*?|^:&%~,.()]".indexOf(o)>-1&&c===false)return;if(w.types==="comment"){p=s.count;do{p=p-1;}while(p>0&&l.types[p]==="comment");if(p<1)return;w.token=l.token[p];w.types=l.types[p];w.stack=l.stack[p];}if(w.token===void 0||w.types==="start"||w.types==="separator"||w.types==="operator"&&w.token!=="++"&&w.token!=="--"||w.token==="x}"||w.token==="var"||w.token==="let"||w.token==="const"||w.token==="else"||w.token.indexOf("#!/")===0||w.token==="instanceof"){return}if(w.stack==="method"&&(l.token[w.begin-1]==="function"||l.token[w.begin-2]==="function")){return}if(h.script.variableList==="list")x.index[x.len]=s.count;g=h.attemptCorrection===true?";":"x;";y="separator";p=s.linesSpace;s.linesSpace=0;B("");s.linesSpace=p;$();}function C(){let c=s.count;do{c=c-1;}while(c>-1&&l.token[c]==="x}");if(l.stack[c]==="else")return B("");c=c+1;s.splice({data:l,howmany:0,index:c,record:{begin:l.begin[c],ender:-1,lexer:"script",lines:s.linesSpace,stack:l.stack[c],token:g,types:y}});B("");}function F(){let c=s.count;if(l.types[c]==="comment"){do{c=c-1;}while(c>0&&l.types[c]==="comment")}if(l.token[c]==="from")c=c-2;if(l.token[c]==="x;"){s.splice({data:l,howmany:1,index:c});}}function M(){j(false);if(T>-1)V();k=s.wrapCommentBlock({chars:a,end:I,lexer:"script",opening:"/*",start:r,terminator:"*/"});r=k[1];if(l.token[s.count]==="var"||l.token[s.count]==="let"||l.token[s.count]==="const"){f=s.pop(l);B("");s.push(l,f,"");if(l.lines[s.count-2]===0)l.lines[s.count-2]=l.lines[s.count];l.lines[s.count]=0;}else if(k[0]!==""){g=k[0];y=/^\/\*\s*@ignore\s*\bstart\b/.test(g)?"ignore":"comment";if(g.indexOf("# sourceMappingURL=")===2){S[0]=s.count+1;S[1]=g;}s.push(l,{begin:s.structure[s.structure.length-1][1],ender:-1,lexer:"script",lines:s.linesSpace,stack:s.structure[s.structure.length-1][0],token:g,types:y},"");}if(/\/\*\s*global\s+/.test(l.token[s.count])===true&&l.types.indexOf("word")<0){A[0]=l.token[s.count].replace(/\/\*\s*global\s+/,"").replace("*/","").replace(/,\s+/g,",").split(",");}}function $(){let c="";const p=L(5,false);const o=s.count;const b=s.linesSpace;if(h.language==="json"||P.length<1||P[P.length-1].charAt(0)!=="x"||/^x?(;|\}|\))$/.test(g)===false){return}if(l.stack[s.count]==="do"&&p==="while"&&l.token[s.count]==="}"){return}if(g===";"&&l.token[o-1]==="x{"){c=l.token[l.begin[o-2]-1];if(l.token[o-2]==="do"||l.token[o-2]===")"&&"ifforwhilecatch".indexOf(c)>-1){f=s.pop(l);g=h.attemptCorrection===true?"}":"x}";y="end";n=s.structure[s.structure.length-1];B("");P.pop();s.linesSpace=b;return}f=s.pop(l);g=h.attemptCorrection===true?"}":"x}";y="end";n=s.structure[s.structure.length-1];B("");P.pop();g=";";y="end";s.push(l,f,"");s.linesSpace=b;return}g=h.attemptCorrection===true?"}":"x}";y="end";if(l.token[s.count]==="x}")return;if(l.stack[s.count]==="if"&&(l.token[s.count]===";"||l.token[s.count]==="x;")&&p==="else"){n=s.structure[s.structure.length-1];B("");P.pop();s.linesSpace=b;return}do{n=s.structure[s.structure.length-1];B("");P.pop();if(l.stack[s.count]==="do")break}while(P[P.length-1]==="x{");s.linesSpace=b;}function q(){let c=s.count;if(l.stack[c]==="object"&&h.script.objectSort===true){g=",";y="separator";F();B("");}else {do{c=c-1;}while(c>0&&l.types[c-1]==="comment");s.splice({data:l,howmany:0,index:c,record:{begin:l.begin[c],ender:-1,lexer:"script",lines:s.linesSpace,stack:l.stack[c],token:",",types:"separator"}});B("");}}function te(c){let p=false;let o=false;const b=L(1,false);const w=l.token[s.count]==="("?s.count:l.begin[s.count];function N(){let O=0;const D=l.token[w-1]==="Array";const Z=D===true?"[":"{";const U=D===true?"]":"}";const J=D===true?"array":"object";if(D===true&&l.types[s.count]==="number"){O=Number(l.token[s.count]);f=s.pop(l);}f=s.pop(l);f=s.pop(l);f=s.pop(l);s.structure.pop();g=Z;y="start";B(J);if(O>0){g=",";y="separator";do{B("");O=O-1;}while(O>0)}g=U;y="end";B("");}if(T>-1)V();if(W.length>0){if(W[W.length-1]===0){W.pop();}else {W[W.length-1]=W[W.length-1]-1;}}if(c===")"||c==="x)"||c==="]"){if(h.attemptCorrection===true)H();F();}if(c===")"||c==="x)")j(false);if(x.len>-1){if(c==="}"&&(h.script.variableList==="list"&&x.count[x.len]===0||l.token[s.count]==="x;"&&h.script.variableList==="each")){me();}x.count[x.len]=x.count[x.len]-1;if(x.count[x.len]<0)me();}if(g===","&&l.stack[s.count]!=="initializer"&&(c==="]"&&l.token[s.count-1]==="["||c==="}")){f=s.pop(l);}if(c===")"||c==="x)"){g=c;if(z.length>0){e=z[z.length-1];if(e.length>1&&b!=="{"&&(e[0]==="if"||e[0]==="for"||e[0]==="with"||e[0]==="while"&&l.stack[e[1]-2]!==void 0&&l.stack[e[1]-2]!=="do")){p=true;}}}else if(c==="]"){g="]";}else if(c==="}"){if(g!==","&&h.attemptCorrection===true)H();if(s.structure.length>0&&s.structure[s.structure.length-1][0]!=="object")j(true);if(h.script.objectSort===true&&s.structure[s.structure.length-1][0]==="object"){s.objectSort(l);}if(y==="comment"){g=l.token[s.count];y=l.types[s.count];}g="}";}if(s.structure[s.structure.length-1][0]==="data_type"){y="type_end";}else {y="end";}z.pop();n=s.structure[s.structure.length-1];if(c===")"&&h.attemptCorrection===true&&w-s.count<2&&(l.token[s.count]==="("||l.types[s.count]==="number")&&(l.token[w-1]==="Array"||l.token[w-1]==="Object")&&l.token[w-2]==="new"){N();o=true;}if(P[P.length-1]==="x{"&&c==="}"){$();P.pop();if(l.stack[s.count]!=="try"){if(b!==":"&&b!==";"&&l.token[l.begin[r]-1]!=="?")$();}g="}";}else {P.pop();}if(h.script.endComma!==void 0&&h.script.endComma!=="none"&&s.structure[s.structure.length-1][0]==="array"||s.structure[s.structure.length-1][0]==="object"||s.structure[s.structure.length-1][0]==="data_type"){if(h.script.endComma==="always"&&l.token[s.count]!==","){const O=s.structure[s.structure.length-1][1];let D=s.count;do{if(l.begin[D]===O){if(l.token[D]===",")break}else {D=l.begin[D];}D=D-1;}while(D>O);if(D>O){const Z=y;const U=g;g=",";y="separator";B("");g=U;y=Z;}}else if(h.script.endComma==="never"&&l.token[s.count]===","){s.pop(l);}}if(o===false){B("");if(g==="}"&&l.stack[s.count]!=="object"&&l.stack[s.count]!=="class"&&l.stack[s.count]!=="data_type"){A.pop();$();}}if(p===true){g=h.attemptCorrection===true?"{":"x{";y="start";B(e[0]);P.push("x{");e[1]=s.count;}t.pop();if(s.structure[s.structure.length-1][0]!=="data_type")t[t.length-1]=false;}function R(c,p,o){let b=0;let w=false;let N=false;let O=[c];let D;const Z=p.split("");const U=Z.length;const J=r;const ie=r+c.length;const Q=h.script.quoteConvert===void 0?"none":h.script.quoteConvert;function ce(){let se=0;O=[];y=o;b=r;if(o==="string"&&/\s/.test(a[b+1])===true){se=1;do{b=b+1;if(a[b]==="\n")se=se+1;}while(b<I&&/\s/.test(a[b+1])===true);s.linesSpace=se;}}function Y(){let se="";function he(ee){if(h.language!=="javascript"&&h.language!=="typescript"&&h.language!=="jsx"&&h.language!=="tsx"){const ae=oe=>oe.replace(/\s*$/," ");const de=oe=>oe.replace(/^\s*/," ");if(/\{(#|\/|(%>)|(%\]))/.test(ee)||/\}%(>|\])/.test(ee))return ee;ee=ee.replace(/\{((\{+)|%-?)\s*/g,ae);ee=ee.replace(/\s*((\}\}+)|(-?%\}))/g,de);return ee}return ee}if(c==='"'&&Q==="single"){O[0]="'";O[O.length-1]="'";}else if(c==="'"&&Q==="double"){O[0]='"';O[O.length-1]='"';}else if(w===true){se=O[O.length-1];O.pop();O.pop();O.push(se);}r=b;if(p==="\n"){r=r-1;O.pop();}g=O.join("");if(c==='"'||c==="'"||c==="{{"||c==="{%"){g=he(g);}if(c==="{%"||c==="{{"){D=xe(g);y=D[0];B(D[1]);return}if(o==="string"){y="string";if(h.language==="json"){g=g.replace(/\u0000/g,"\\u0000").replace(/\u0001/g,"\\u0001").replace(/\u0002/g,"\\u0002").replace(/\u0003/g,"\\u0003").replace(/\u0004/g,"\\u0004").replace(/\u0005/g,"\\u0005").replace(/\u0006/g,"\\u0006").replace(/\u0007/g,"\\u0007").replace(/\u0008/g,"\\u0008").replace(/\u0009/g,"\\u0009").replace(/\u000a/g,"\\u000a").replace(/\u000b/g,"\\u000b").replace(/\u000c/g,"\\u000c").replace(/\u000d/g,"\\u000d").replace(/\u000e/g,"\\u000e").replace(/\u000f/g,"\\u000f").replace(/\u0010/g,"\\u0010").replace(/\u0011/g,"\\u0011").replace(/\u0012/g,"\\u0012").replace(/\u0013/g,"\\u0013").replace(/\u0014/g,"\\u0014").replace(/\u0015/g,"\\u0015").replace(/\u0016/g,"\\u0016").replace(/\u0017/g,"\\u0017").replace(/\u0018/g,"\\u0018").replace(/\u0019/g,"\\u0019").replace(/\u001a/g,"\\u001a").replace(/\u001b/g,"\\u001b").replace(/\u001c/g,"\\u001c").replace(/\u001d/g,"\\u001d").replace(/\u001e/g,"\\u001e").replace(/\u001f/g,"\\u001f");}else if(c.indexOf("#!")===0){g=g.slice(0,g.length-1);s.linesSpace=2;}else if(s.structure[s.structure.length-1][0]!=="object"||s.structure[s.structure.length-1][0]==="object"&&L(1,false)!==":"&&l.token[s.count]!==","&&l.token[s.count]!=="{"){if(g.length>h.wrap&&h.wrap>0||h.wrap!==0&&l.token[s.count]==="+"&&(l.token[s.count-1].charAt(0)==='"'||l.token[s.count-1].charAt(0)==="'")){let ee=g;let ae="";let de=Q==="double"?'"':Q==="single"?"'":ee.charAt(0);const oe=h.wrap;const Se=/u[0-9a-fA-F]{4}/;const Le=/x[0-9a-fA-F]{2}/;ee=ee.slice(1,ee.length-1);if(l.token[s.count]==="+"&&(l.token[s.count-1].charAt(0)==='"'||l.token[s.count-1].charAt(0)==="'")){s.pop(l);de=l.token[s.count].charAt(0);ee=l.token[s.count].slice(1,l.token[s.count].length-1)+ee;s.pop(l);}if(ee.length>oe&&oe>0){do{ae=ee.slice(0,oe);if(ae.charAt(oe-5)==="\\"&&Se.test(ee.slice(oe-4,oe+1))){ae=ae.slice(0,oe-5);}else if(ae.charAt(oe-4)==="\\"&&Se.test(ee.slice(oe-3,oe+2))){ae=ae.slice(0,oe-4);}else if(ae.charAt(oe-3)==="\\"&&(Se.test(ee.slice(oe-2,oe+3))||Le.test(ee.slice(oe-2,oe+1)))){ae=ae.slice(0,oe-3);}else if(ae.charAt(oe-2)==="\\"&&(Se.test(ee.slice(oe-1,oe+4))||Le.test(ee.slice(oe-1,oe+2)))){ae=ae.slice(0,oe-2);}else if(ae.charAt(oe-1)==="\\"){ae=ae.slice(0,oe-1);}ae=de+ae+de;ee=ee.slice(ae.length-2);g=ae;y="string";B("");s.linesSpace=0;g="+";y="operator";B("");}while(ee.length>oe)}if(ee===""){g=de+de;}else {g=de+ee+de;}y="string";}}}else if(/\{\s*\?>$/.test(g)){y="template_start";}else {y=o;}if(g.length>0)B("");}if(T>-1)V();if(a[r-1]==="\\"&&ne(r-1)===true&&(a[r]==='"'||a[r]==="'")){s.pop(l);if(l.token[0]==="{"){if(a[r]==='"'){c='"';p='\\"';O=['"'];}else {c="'";p="\\'";O=["'"];}w=true;}else {if(a[r]==='"'){O=['\\"'];Y();return}O=["\\'"];Y();return}}b=ie;if(b<I){do{if(l.token[0]!=="{"&&l.token[0]!=="["&&Q!=="none"&&(a[b]==='"'||a[b]==="'")){if(a[b-1]==="\\"){if(ne(b-1)===true){if(Q==="double"&&a[b]==="'"){O.pop();}else if(Q==="single"&&a[b]==='"'){O.pop();}}}else if(Q==="double"&&a[b]==='"'&&a[r]==="'"){a[b]='\\"';}else if(Q==="single"&&a[b]==="'"&&a[r]==='"'){a[b]="\\'";}O.push(a[b]);}else if(b>J){N=true;if(a[b]==="{"&&a[b+1]==="%"&&a[b+2]!==c){Y();R("{%","%}","template");ce();}else if(a[b]==="{"&&a[b+1]==="{"&&a[b+2]!==c){Y();R("{{","}}","template");ce();}else {N=false;O.push(a[b]);}}else {O.push(a[b]);}if((c==='"'||c==="'")&&(N===true||b>J)&&h.language!=="json"&&a[b-1]!=="\\"&&a[b]!=='"'&&a[b]!=="'"&&(a[b]==="\n"||b===I-1)){s.error="Unterminated string in script on line number "+s.lineNumber;break}if(a[b]===Z[U-1]&&(a[b-1]!=="\\"||ne(b-1)===false)){if(U===1)break;if(O[b-ie]===Z[0]&&O.slice(b-ie-U+2).join("")===p)break}b=b+1;}while(b<I)}Y();}function X(){j(false);$();if(T>-1)V();k=s.wrapCommentLine({chars:a,end:I,lexer:"script",opening:"//",start:r,terminator:"\n"});r=k[1];if(k[0]!==""){g=k[0];y=/^(\/\/\s*@ignore:?\s+\bstart\b)/.test(g)?"ignore":"comment";if(g.indexOf("# sourceMappingURL=")===2){S[0]=s.count+1;S[1]=g;}s.push(l,{begin:s.structure[s.structure.length-1][1],ender:-1,lexer:"script",lines:s.linesSpace,stack:s.structure[s.structure.length-1][0],token:g,types:y},"");}}function le(){let c=0;let p=false;let o=false;let b=0;let w=0;let N=0;let O="";let D="";let Z="";const U=[];const J=t[t.length-1];const ie="0123456789=<>+-*?|^:&.,;%(){}[]~";function Q(){if(g==="(")s.structure[s.structure.length-1]=["paren",s.count];_.lexers.markup(U.join(""));}if(T>-1)V();D=s.count>0?l.token[s.count-1]:"";Z=s.count>0?l.types[s.count-1]:"";O=L(1,false);if(h.language!=="jsx"&&h.language!=="tsx"&&/\d/.test(O)===false&&(g==="function"||D==="=>"||D==="void"||D==="."||l.stack[s.count]==="arguments"||y==="type"&&D==="type"||y==="reference"&&(Z==="operator"||D==="function"||D==="class"||D==="new")||y==="type"&&Z==="operator"||g==="return"||y==="operator")){const ce=[];let Y=0;let se=0;c=r;do{ce.push(a[c]);if(a[c]==="<"){Y=Y+1;}else if(a[c]===">"){Y=Y-1;if(Y<1)break}c=c+1;}while(c<I);se=r;r=c;O=L(1,false);if(a[c]===">"&&(J===true||D==="=>"||D==="."||Z!=="operator"||Z==="operator"&&(O==="("||O==="="))){y="generic";g=ce.join("").replace(/^<\s+/,"<").replace(/\s+>$/,">").replace(/,\s*/g,", ");B("");return}r=se;}c=s.count;if(l.types[c]==="comment"){do{c=c-1;}while(c>0&&l.types[c]==="comment")}if(J===false&&L(1,false)!==">"&&(a[r]!=="<"&&ie.indexOf(a[r+1])>-1||l.token[c]==="++"||l.token[c]==="--"||/\s/.test(a[r+1])===true||/\d/.test(a[r+1])===true&&(y==="operator"||y==="string"||y==="number"||y==="reference"||y==="word"&&g!=="return"))){y="operator";g=G();return B("")}if(h.language!=="typescript"&&(l.token[c]==="return"||l.types[c]==="operator"||l.types[c]==="start"||l.types[c]==="separator"||l.types[c]==="jsx_attribute_start"||l.token[c]==="}"&&s.structure[s.structure.length-1][0]==="global")){y="markup";h.language="jsx";do{U.push(a[r]);if(a[r]==="{"){w=w+1;p=true;}else if(a[r]==="}"){w=w-1;if(w===0)p=false;}else if(a[r]==="<"&&p===false){if(a[r+1]==="<"){do{U.push(a[r]);r=r+1;}while(r<I&&a[r+1]==="<")}b=b+1;if(L(1,false)==="/")o=true;}else if(a[r]===">"&&p===false){if(a[r+1]===">"){do{U.push(a[r]);r=r+1;}while(a[r+1]===">")}b=b-1;if(o===true){N=N-1;}else if(a[r-1]!=="/"){N=N+1;}if(b===0&&w===0&&N<1){O=L(2,false);if(O.charAt(0)!=="<")return Q();if(O.charAt(0)==="<"&&ie.indexOf(O.charAt(1))<0&&/\s/.test(O.charAt(1))===false){c=r+1;do{c=c+1;if(a[c]===">"||/\s/.test(a[c-1])&&ie.indexOf(a[c])<0)break;if(ie.indexOf(a[c])>-1)return Q()}while(c<I)}else {return Q()}}o=false;}r=r+1;}while(r<I);return Q()}y="operator";g=G();B("");}function L(c,p){let o=p===true?r:r+1;let b="";if(typeof c!=="number"||c<1)c=1;if(a[r]==="/"){if(a[r+1]==="/"){b="\n";}else if(a[r+1]==="*"){b="/";}}if(o<I){do{if(/\s/.test(a[o])===false){if(a[o]==="/"){if(b===""){if(a[o+1]==="/"){b="\n";}else if(a[o+1]==="*"){b="/";}}else if(b==="/"&&a[o-1]==="*"){b="";}}if(b===""&&a[o-1]+a[o]!=="*/")return a.slice(o,o+c).join("")}else if(b==="\n"&&a[o]==="\n"){b="";}o=o+1;}while(o<I)}return ""}function K(){const c=I;const p=[a[r]];let o=0;let b=/zz/;let w=p[0]===".";if(r<I-2&&a[r]==="0"){if(a[r+1]==="x"){b=/[0-9a-fA-F]/;}else if(a[r+1]==="o"){b=/[0-9]/;}else if(a[r+1]==="b"){b=/0|1/;}if(b.test(a[r+2])===true){p.push(a[r+1]);o=r+1;do{o=o+1;p.push(a[o]);}while(b.test(a[o+1])===true);r=o;return p.join("")}}o=r+1;if(o<c){do{if(/[0-9]/.test(a[o])||a[o]==="."&&w===false){p.push(a[o]);if(a[o]===".")w=true;}else {break}o=o+1;}while(o<c)}if(o<c-1&&(/\d/.test(a[o-1])===true||/\d/.test(a[o-2])===true&&(a[o-1]==="-"||a[o-1]==="+"))&&(a[o]==="e"||a[o]==="E")){p.push(a[o]);if(a[o+1]==="-"||a[o+1]==="+"){p.push(a[o+1]);o=o+1;}w=false;o=o+1;if(o<c){do{if(/[0-9]/.test(a[o])||a[o]==="."&&w===false){p.push(a[o]);if(a[o]===".")w=true;}else {break}o=o+1;}while(o<c)}}r=o-1;return p.join("")}function G(){let c=0;let p=0;let o=I;let b="";const w=["=","<",">","+","*","?","|","^",":","&","%","~"];const N=w.length;if(T>-1)V();if(a[r]==="/"&&(s.count>-1&&(y!=="word"&&y!=="reference"||g==="typeof"||g==="return"||g==="else")&&y!=="number"&&y!=="string"&&y!=="end")){if(g==="return"||g==="typeof"||g==="else"||y!=="word"){g=ue();y="regex";}else {g="/";y="operator";}B("");return "regex"}if(a[r]==="?"&&("+-*/.?".indexOf(a[r+1])>-1||a[r+1]===":"&&w.join("").indexOf(a[r+2])<0)){if(a[r+1]==="."&&/\d/.test(a[r+2])===false){b="?.";}else if(a[r+1]==="?"){b="??";}if(b==="")return "?"}if(a[r]===":"&&"+-*/".indexOf(a[r+1])>-1)return ":";if(r<I-1){if(a[r]!=="<"&&a[r+1]==="<")return a[r];if(a[r]==="!"&&a[r+1]==="/")return "!";if(a[r]==="-"){t[t.length-1]=false;if(a[r+1]==="-"){b="--";}else if(a[r+1]==="="){b="-=";}else if(a[r+1]===">"){b="->";}if(b==="")return "-"}if(a[r]==="+"){t[t.length-1]=false;if(a[r+1]==="+"){b="++";}else if(a[r+1]==="="){b="+=";}if(b==="")return "+"}if(a[r]==="="&&a[r+1]!=="="&&a[r+1]!=="!"&&a[r+1]!==">"){t[t.length-1]=false;return "="}}if(a[r]===":"){if(h.language==="typescript"){if(l.stack[s.count]==="arguments"){if(l.token[s.count]==="?"){s.pop(l);b="?:";r=r-1;}t[t.length-1]=true;}else if(g===")"&&(l.token[l.begin[s.count]-1]==="function"||l.token[l.begin[s.count]-2]==="function")){t[t.length-1]=true;}else if(y==="reference"){c=s.count;let O=false;do{if(l.begin[c]===l.begin[s.count]){if(c<s.count&&l.token[c]===":"&&l.types[c+1]!=="type")O=true;if(l.token[c]==="?"&&O===false)break;if(l.token[c]===";"||l.token[c]==="x;")break;if(l.token[c]==="var"||l.token[c]==="let"||l.token[c]==="const"||l.types[c]==="type"){t[t.length-1]=true;break}}else {if(l.types[c]==="type_end"){t[t.length-1]=true;break}c=l.begin[c];}c=c-1;}while(c>l.begin[s.count])}}else if(l.token[s.count-1]==="["&&(l.types[s.count]==="word"||l.types[s.count]==="reference")){s.structure[s.structure.length-1][0]="attribute";l.stack[s.count]="attribute";}}if(b===""){if(a[r+1]==="+"&&a[r+2]==="+"||a[r+1]==="-"&&a[r+2]==="-"){b=a[r];}else {const O=[a[r]];c=r+1;if(c<o){do{if(a[c]==="+"&&a[c+1]==="+"||a[c]==="-"&&a[c+1]==="-")break;p=0;if(p<N){do{if(a[c]===w[p]){O.push(w[p]);break}p=p+1;}while(p<N)}if(p===N)break;c=c+1;}while(c<o)}b=O.join("");}}r=r+(b.length-1);if(b==="=>"&&g===")"){c=s.count;o=l.begin[c];do{if(l.begin[c]===o)l.stack[c]="method";c=c-1;}while(c>o-1)}return b}function H(){let c=true;let p="+";let o="";let b="";let w="";let N=0;let O=0;let D=0;let Z="";const U=[];function J(){D=l.begin[D]-1;if(l.types[D]==="end"){J();}else if(l.token[D-1]==="."){ie();}}function ie(){D=D-2;if(l.types[D]==="end"){J();}else if(l.token[D-1]==="."){ie();}}function Q(){let Y=0;const se=U.length;if(Y<se){do{s.push(l,U[Y],"");Y=Y+1;}while(Y<se)}}function ce(Y){const se=re(null);se.begin=l.begin[Y];se.ender=l.ender[Y];se.lexer=l.lexer[Y];se.lines=l.lines[Y];se.stack=l.stack[Y];se.token=l.token[Y];se.types=l.types[Y];return se}o=l.token[s.count];b=l.token[s.count-1];w=l.token[s.count-2];if(o!=="++"&&o!=="--"&&b!=="++"&&b!=="--"){D=s.count;if(l.types[D]==="end"){J();}else if(l.token[D-1]==="."){ie();}}if(l.token[D-1]==="++"||l.token[D-1]==="--"){if("startendoperator".indexOf(l.types[D-2])>-1)return;N=D;if(N<s.count+1){do{U.push(ce(N));N=N+1;}while(N<s.count+1);s.splice({data:l,howmany:s.count-D,index:D});}}else {if(h.attemptCorrection===false||o!=="++"&&o!=="--"&&b!=="++"&&b!=="--"){return}Z=L(1,false);if((o==="++"||o==="--")&&(a[r]===";"||Z===";"||a[r]==="}"||Z==="}"||a[r]===")"||Z===")")){p=l.stack[s.count];if(p==="array"||p==="method"||p==="object"||p==="paren"||p==="notation"||l.token[l.begin[s.count]-1]==="while"&&p!=="while"){return}N=s.count;do{N=N-1;if(l.token[N]==="return")return;if(l.types[N]==="end"){do{N=l.begin[N]-1;}while(l.types[N]==="end"&&N>0)}}while(N>0&&(l.token[N]==="."||l.types[N]==="word"||l.types[N]==="reference"||l.types[N]==="end"));if(l.token[N]===","&&a[r]!==";"&&Z!==";"&&a[r]!=="}"&&Z!=="}"&&a[r]!==")"&&Z!==")"){return}if(l.types[N]==="operator"){if(l.stack[N]==="switch"&&l.token[N]===":"){do{N=N-1;if(l.types[N]==="start"){O=O-1;if(O<0)break}else if(l.types[N]==="end"){O=O+1;}if(l.token[N]==="?"&&O===0)return}while(N>0)}else {return}}c=false;p=o==="--"?"-":"+";}else if(w==="["||w===";"||w==="x;"||w==="}"||w==="{"||w==="("||w===")"||w===","||w==="return"){if(o==="++"||o==="--"){if(w==="["||w==="("||w===","||w==="return")return;if(o==="--")p="-";c=false;}else if(b==="--"||o==="--"){p="-";}}else {return}if(c===false)f=s.pop(l);D=s.count;if(l.types[D]==="end"){J();}else if(l.token[D-1]==="."){ie();}N=D;if(N<s.count+1){do{U.push(ce(N));N=N+1;}while(N<s.count+1)}}if(c===true){s.splice({data:l,howmany:1,index:D-1});g="=";y="operator";B("");Q();g=p;y="operator";B("");g="1";y="number";B("");}else {g="=";y="operator";B("");Q();g=p;y="operator";B("");g="1";y="number";B("");}g=l.token[s.count];y=l.types[s.count];if(Z==="}"&&a[r]!==";")j(false);}function B(c){const p=re(null);p.begin=s.structure[s.structure.length-1][1];p.ender=-1;p.lexer="script";p.lines=s.linesSpace;p.stack=s.structure[s.structure.length-1][0];p.token=g;p.types=y;s.push(l,p,c);}function ue(){let c=r+1;let p=0;let o=0;let b="";let w=false;const N=I;const O=["/"];if(c<N){do{O.push(a[c]);if(a[c-1]!=="\\"||a[c-2]==="\\"){if(a[c]==="["){w=true;}if(a[c]==="]"){w=false;}}if(a[c]==="/"&&w===false){if(a[c-1]==="\\"){o=0;p=c-1;if(p>0){do{if(a[p]==="\\"){o=o+1;}else {break}p=p-1;}while(p>0)}if(o%2===0){break}}else {break}}c=c+1;}while(c<N)}if(a[c+1]==="g"||a[c+1]==="i"||a[c+1]==="m"||a[c+1]==="y"||a[c+1]==="u"){O.push(a[c+1]);if(a[c+2]!==a[c+1]&&(a[c+2]==="g"||a[c+2]==="i"||a[c+2]==="m"||a[c+2]==="y"||a[c+2]==="u")){O.push(a[c+2]);if(a[c+3]!==a[c+1]&&a[c+3]!==a[c+2]&&(a[c+3]==="g"||a[c+3]==="i"||a[c+3]==="m"||a[c+3]==="y"||a[c+3]==="u")){O.push(a[c+3]);if(a[c+4]!==a[c+1]&&a[c+4]!==a[c+2]&&a[c+4]!==a[c+3]&&(a[c+4]==="g"||a[c+4]==="i"||a[c+4]==="m"||a[c+4]==="y"||a[c+4]==="u")){O.push(a[c+4]);if(a[c+5]!==a[c+1]&&a[c+5]!==a[c+2]&&a[c+5]!==a[c+3]&&a[c+5]!==a[c+4]&&(a[c+5]==="g"||a[c+5]==="i"||a[c+5]==="m"||a[c+5]==="y"||a[c+5]==="u")){O.push(a[c+4]);r=c+5;}else {r=c+4;}}else {r=c+3;}}else {r=c+2;}}else {r=c+1;}}else {r=c;}b=O.join("");return b}function ne(c){const p=c;do{c=c-1;}while(a[c]==="\\"&&c>0);return (p-c)%2===1}function fe(c){let p=s.count;let o="";let b="";let w="";let N=false;P.push(c);if(c==="{"&&(l.types[s.count]==="type"||l.types[s.count]==="type_end"||l.types[s.count]==="generic")){let O=0;if(l.types[s.count]==="type_end")p=l.begin[s.count];O=p;do{p=p-1;if(l.begin[p]!==O&&l.begin[p]!==-1)break;if(l.token[p]===":")break}while(p>l.begin[p]);if(l.token[p]===":"&&l.stack[p-1]==="arguments"){t.push(false);N=true;}else {t.push(t[t.length-1]);}p=s.count;}else if(c==="["&&l.types[s.count]==="type_end"){t.push(true);}else {t.push(t[t.length-1]);}if(T>-1){V();p=s.count;}if(x.len>-1)x.count[x.len]=x.count[x.len]+1;if(l.token[p-1]==="function"){z.push(["function",p+1]);}else {z.push([g,p+1]);}g=c;if(t[t.length-1]===true){y="type_start";}else {y="start";}if(c==="("||c==="x("){F();}else if(c==="{"){if(i>-1){if(l.begin[i-1]===l.begin[l.begin[p]-1]||l.token[l.begin[p]]==="x("){i=-1;if(h.attemptCorrection===true){te(")");}else {te("x)");}F();g="{";y="start";}}else if(g===")"){F();}if(y==="comment"&&l.token[p-1]===")"){g=l.token[p];l.token[p]="{";y=l.types[p];l.types[p]="start";}}o=(()=>{let O=s.count;if(l.types[O]==="comment"){do{O=O-1;}while(O>0&&l.types[O]==="comment")}return l.token[O]})();b=l.stack[p]===void 0?"":(()=>{let O=s.count;if(l.types[O]==="comment"){do{O=O-1;}while(O>0&&l.types[O]==="comment")}return l.token[l.begin[O]-1]})();if(g==="{"&&(l.types[p]==="word"||l.token[p]==="]")){let O=p;if(l.token[O]==="]"){do{O=l.begin[O]-1;}while(l.token[O]==="]")}do{if(l.types[O]==="start"||l.types[O]==="end"||l.types[O]==="operator")break;O=O-1;}while(O>0);if(l.token[O]===":"&&l.stack[O-1]==="arguments"){w="function";A.push(E);E=[];}}if(y==="type_start"){w="data_type";}else if(w===""&&(g==="{"||g==="x{")){if(o==="else"||o==="do"||o==="try"||o==="finally"||o==="switch"){w=o;}else if(W[W.length-1]===0&&o!=="return"){W.pop();w="class";}else if(l.token[p-1]==="class"){w="class";}else if(l.token[p]==="]"&&l.token[p-1]==="["){w="array";}else if((l.types[p]==="word"||l.types[p]==="reference")&&(l.types[p-1]==="word"||l.types[p-1]==="reference"||l.token[p-1]==="?"&&(l.types[p-2]==="word"||l.types[p-2]==="reference"))&&l.token[p]!=="in"&&l.token[p-1]!=="export"&&l.token[p-1]!=="import"){w="map";}else if(l.stack[p]==="method"&&l.types[p]==="end"&&(l.types[l.begin[p]-1]==="word"||l.types[l.begin[p]-1]==="reference")&&l.token[l.begin[p]-2]==="new"){w="initializer";}else if(g==="{"&&(o===")"||o==="x)")&&(l.types[l.begin[p]-1]==="word"||l.types[l.begin[p]-1]==="reference"||l.token[l.begin[p]-1]==="]")){if(b==="if"){w="if";}else if(b==="for"){w="for";}else if(b==="while"){w="while";}else if(b==="class"){w="class";}else if(b==="switch"||l.token[l.begin[p]-1]==="switch"){w="switch";}else if(b==="catch"){w="catch";}else {w="function";}}else if(g==="{"&&(o===";"||o==="x;")){w="block";}else if(g==="{"&&l.token[p]===":"&&l.stack[p]==="switch"){w="block";}else if(l.token[p-1]==="import"||l.token[p-2]==="import"||l.token[p-1]==="export"||l.token[p-2]==="export"){w="object";}else if(o===")"&&(e[0]==="function"||e[0]==="if"||e[0]==="for"||e[0]==="class"||e[0]==="while"||e[0]==="switch"||e[0]==="catch")){w=e[0];}else if(l.stack[p]==="notation"){w="function";}else if((l.types[p]==="number"||l.types[p]==="string"||l.types[p]==="word"||l.types[p]==="reference")&&(l.types[p-1]==="word"||l.types[p-1]==="reference")&&l.token[l.begin[p]-1]!=="for"){w="function";}else if(s.structure.length>0&&l.token[p]!==":"&&s.structure[s.structure.length-1][0]==="object"&&(l.token[l.begin[p]-2]==="{"||l.token[l.begin[p]-2]===",")){w="function";}else if(l.types[e[1]-1]==="markup"&&l.token[e[1]-3]==="function"){w="function";}else if(o==="=>"){w="function";}else if(N===true||l.types[s.count]==="type_end"&&l.stack[l.begin[s.count]-2]==="arguments"){w="function";}else if(o===")"&&l.stack[p]==="method"&&(l.types[l.begin[p]-1]==="word"||l.types[l.begin[p]-1]==="property"||l.types[l.begin[p]-1]==="reference")){w="function";}else if(l.types[p]==="word"&&g==="{"&&l.token[p]!=="return"&&l.token[p]!=="in"&&l.token[p]!=="import"&&l.token[p]!=="const"&&l.token[p]!=="let"&&l.token[p]!==""){w="block";}else if(g==="{"&&"if|else|for|while|function|class|switch|catch|finally".indexOf(l.stack[p])>-1&&(l.token[p]==="x}"||l.token[p]==="}")){w="block";}else if(l.stack[p]==="arguments"){w="function";}else if(l.types[p]==="generic"){do{p=p-1;if(l.token[p]==="function"||l.stack[p]==="arguments"){w="function";break}if(l.token[p]==="interface"){w="map";break}if(l.token[p]===";"){w="object";break}}while(p>l.begin[s.count])}else {w="object";}if(w!=="object"&&w!=="class"){if(w==="function"){A.push(E);E=[];}else {A.push([]);}}}else if(g==="["){w="array";}else if(g==="("||g==="x("){if(o==="function"||l.token[p-1]==="function"||l.token[p-1]==="function*"||l.token[p-2]==="function"){w="arguments";}else if(l.token[p-1]==="."||l.token[l.begin[p]-2]==="."){w="method";}else if(l.types[p]==="generic"){w="method";}else if(l.token[p]==="}"&&l.stack[p]==="function"){w="method";}else if(o==="if"||o==="for"||o==="class"||o==="while"||o==="catch"||o==="finally"||o==="switch"||o==="with"){w="expression";}else if(l.types[p]==="word"||l.types[p]==="property"||l.types[p]==="reference"){w="method";}else {w="paren";}}B(w);if(W.length>0)W[W.length-1]=W[W.length-1]+1;}function Ae(){const c=[a[r]];r=r+1;if(r<I){do{c.push(a[r]);if(a[r]==="`"&&(a[r-1]!=="\\"||ne(r-1)===false))break;if(a[r-1]==="$"&&a[r]==="{"&&(a[r-2]!=="\\"||ne(r-2)===false))break;r=r+1;}while(r<I)}return c.join("")}function xe(c){let p=2;let o=0;let b="";const w=c.slice(0,2);const N=c.length;if(c.charAt(2)==="-")p=p+1;if(/\s/.test(c.charAt(p))===true){do{p=p+1;}while(/\s/.test(c.charAt(p))===true&&p<N)}o=p;do{o=o+1;}while(/\s/.test(c.charAt(o))===false&&c.charAt(o)!=="("&&o<N);if(o===N)o=c.length-2;b=c.slice(p,o);if(b==="else"||w==="{%"&&(b==="elseif"||b==="when"||b==="elif"||b==="elsif")){return ["template_else",`template_${b}`]}if(w==="{{"){if(b==="end")return ["template_end",""];if(b==="block"&&/\{%\s*\w/.test(u)===false||b==="define"||b==="form"||b==="if"||b==="unless"||b==="range"||b==="with"){return ["template_start",`template_${b}`]}return ["template",""]}o=d.length-1;if(o>-1){do{if(b===d[o]&&(b!=="block"||/\{%\s*\w/.test(u)===false)){return ["template_start",`template_${b}`]}if(b==="end"+d[o]){return ["template_end",""]}o=o-1;}while(o>-1)}return ["template",""]}function me(){x.count.pop();x.index.pop();x.word.pop();x.len=x.len-1;}function V(){let c=T;let p=1;let o="";let b="";let w=g;let N=y;const O=[];function D(){P.push("x{");s.splice({data:l,howmany:1,index:s.count-3});}function Z(U,J,ie){const Q=l.begin[U];let ce=0;do{if(l.token[U]===J&&l.types[U]==="word"){if(ie===true){l.types[U]="reference";}else if(l.begin[U]>Q&&l.token[l.begin[U]]==="{"&&l.stack[U]!=="object"&&l.stack[U]!=="class"&&l.stack[U]!=="data_type"){if(l.stack[U]==="function"){l.types[U]="reference";}else {ce=l.begin[U];do{if(l.stack[ce]==="function"){l.types[U]="reference";break}ce=l.begin[ce];}while(ce>Q)}}}U=U-1;}while(U>Q)}do{O.push(a[c]);if(a[c]==="\\"){s.error=`Illegal escape in JavaScript on line number ${s.lineNumber}`;}c=c+1;}while(c<r);if(g.charAt(0)==="\u201C"){s.error=`Quote looking character (\u201C, \\u201c) used instead of actual quotes on line number ${s.lineNumber}`;}else if(g.charAt(0)==="\u201D"){s.error=`Quote looking character (\u201D, \\u201d) used instead of actual quotes on line number ${s.lineNumber}`;}o=O.join("");T=-1;if(s.count>0&&o==="function"&&l.token[s.count]==="("&&(l.token[s.count-1]==="{"||l.token[s.count-1]==="x{")){l.types[s.count]="start";}if(s.count>1&&o==="function"&&g==="("&&(l.token[s.count-1]==="}"||l.token[s.count-1]==="x}")){if(l.token[s.count-1]==="}"){c=s.count-2;if(c>-1){do{if(l.types[c]==="end"){p=p+1;}else if(l.types[c]==="start"||l.types[c]==="end"){p=p-1;}if(p===0)break;c=c-1;}while(c>-1)}if(l.token[c]==="{"&&l.token[c-1]===")"){p=1;c=c-2;if(c>-1){do{if(l.types[c]==="end"){p=p+1;}else if(l.types[c]==="start"||l.types[c]==="end"){p=p-1;}if(p===0)break;c=c-1;}while(c>-1)}if(l.token[c-1]!=="function"&&l.token[c-2]!=="function"){l.types[s.count]="start";}}}else {l.types[s.count]="start";}}if(h.attemptCorrection===true&&(o==="Object"||o==="Array")&&a[r+1]==="("&&a[r+2]===")"&&l.token[s.count-1]==="="&&l.token[s.count]==="new"){if(o==="Object"){l.token[s.count]="{";g="}";l.stack[s.count]="object";s.structure[s.structure.length-1][0]="object";}else {l.token[s.count]="[";g="]";l.stack[s.count]="array";s.structure[s.structure.length-1][0]="array";}l.types[s.count]="start";y="end";a[r+1]="";a[r+2]="";r=r+2;}else {p=s.count;c=p;if(h.script.variableList!=="none"&&(o==="var"||o==="let"||o==="const")){if(l.types[p]==="comment"){do{p=p-1;}while(p>0&&l.types[p]==="comment")}if(h.script.variableList==="list"&&x.len>-1&&x.index[x.len]===p&&o===x.word[x.len]){g=",";y="separator";l.token[p]=g;l.types[p]=y;x.count[x.len]=0;x.index[x.len]=p;x.word[x.len]=o;return}x.len=x.len+1;x.count.push(0);x.index.push(p);x.word.push(o);p=c;}else if(x.len>-1&&o!==x.word[x.len]&&s.count===x.index[x.len]&&l.token[x.index[x.len]]===";"&&g!==x.word[x.len]&&h.script.variableList==="list"){me();}if(o==="from"&&l.token[s.count]==="x;"&&l.token[s.count-1]==="}"){F();}if(o==="while"&&l.token[s.count]==="x;"&&l.token[s.count-1]==="}"){let U=0;let J=s.count-2;if(J>-1){do{if(l.types[J]==="end"){U=U+1;}else if(l.types[J]==="start"){U=U-1;}if(U<0){if(l.token[J]==="{"&&l.token[J-1]==="do")F();return}J=J-1;}while(J>-1)}}if(N==="comment"){let U=s.count;do{U=U-1;}while(U>0&&l.types[U]==="comment");N=l.types[U];w=l.token[U];}b=L(2,false);if(o==="void"){if(w===":"&&l.stack[s.count-1]==="arguments"){y="type";}else {y="word";}}else if((s.structure[s.structure.length-1][0]==="object"||s.structure[s.structure.length-1][0]==="class"||s.structure[s.structure.length-1][0]==="data_type")&&(l.token[s.count]==="{"||l.token[l.begin[s.count]]==="{"&&l.token[s.count]===","||l.types[s.count]==="template_end"&&(l.token[l.begin[s.count]-1]==="{"||l.token[l.begin[s.count]-1]===","))){if(o==="return"||o==="break"){y="word";}else {y="property";}}else if(t[t.length-1]===true||(h.language==="typescript"||h.language==="flow")&&w==="type"){y="type";}else if(A.length>0&&(w==="function"||w==="class"||w==="const"||w==="let"||w==="var"||w==="new"||w==="void")){y="reference";A[A.length-1].push(o);if(h.language==="javascript"||h.language==="jsx"||h.language==="typescript"||h.language==="tsx"){if(w==="var"||w==="function"&&l.types[s.count-1]!=="operator"&&l.types[s.count-1]!=="start"&&l.types[s.count-1]!=="end"){Z(s.count,o,true);}else {Z(s.count,o,false);}}else {Z(s.count,o,false);}}else if(s.structure[s.structure.length-1][0]==="arguments"&&y!=="operator"){y="reference";E.push(o);}else if(w===","&&l.stack[s.count]!=="method"&&(l.stack[s.count]!=="expression"||l.token[l.begin[s.count]-1]==="for")){let U=s.count;const J=s.structure[s.structure.length-1][1];do{if(l.begin[U]===J){if(l.token[U]===";")break;if(l.token[U]==="var"||l.token[U]==="let"||l.token[U]==="const"||l.token[U]==="type"){break}}else if(l.types[U]==="end"){U=l.begin[U];}U=U-1;}while(U>J);if(A.length>0&&l.token[U]==="var"){y="reference";A[A.length-1].push(o);if(h.language==="javascript"||h.language==="jsx"||h.language==="typescript"||h.language==="tsx"){Z(U,o,true);}else {Z(U,o,false);}}else if(A.length>0&&(l.token[U]==="let"||l.token[U]==="const"||l.token[U]==="type"&&(h.language==="typescript"||h.language==="tsx"))){y="reference";A[A.length-1].push(o);Z(U,o,false);}else {y="word";}}else if(s.structure[s.structure.length-1][0]!=="object"||s.structure[s.structure.length-1][0]==="object"&&g!==","&&g!=="{"){let U=A.length;let J=0;if(U>0){do{U=U-1;J=A[U].length;if(J>0){do{J=J-1;if(o===A[U][J])break}while(J>0);if(o===A[U][J])break}}while(U>0);if(A[U][J]===o&&w!=="."){y="reference";}else {y="word";}}else {y="word";}}else {y="word";}g=o;if(o==="from"&&l.token[s.count]==="}")F();}B("");if(o==="class")W.push(0);if(o==="do"){b=L(1,true);if(b!=="{"){g=h.attemptCorrection===true?"{":"x{";y="start";P.push("x{");B("do");}}if(o==="else"){b=L(2,true);let U=s.count-1;if(l.types[U]==="comment"){do{U=U-1;}while(U>0&&l.types[U]==="comment")}if(l.token[U]==="x}"){if(l.token[s.count]==="else"){if(l.stack[s.count-1]!=="if"&&l.types[s.count-1]!=="comment"&&l.stack[s.count-1]!=="else"){P.pop();s.splice({data:l,howmany:0,index:s.count-1,record:{begin:l.begin[l.begin[l.begin[s.count-1]-1]-1],ender:-1,lexer:"script",lines:0,stack:"if",token:h.attemptCorrection===true?"}":"x}",types:"end"}});if(s.structure.length>1){s.structure.splice(s.structure.length-2,1);s.structure[s.structure.length-1][1]=s.count;}}else if(l.token[s.count-2]==="x}"&&n[0]!=="if"&&l.stack[s.count]==="else"){D();}else if(l.token[s.count-2]==="}"&&l.stack[s.count-2]==="if"&&n[0]==="if"&&l.token[n[1]-1]!=="if"&&l.token[l.begin[s.count-1]]==="x{"){D();}}else if(l.token[s.count]==="x}"&&l.stack[s.count]==="if"){D();}}if(b!=="if"&&b.charAt(0)!=="{"){g=h.attemptCorrection===true?"{":"x{";y="start";P.push("x{");B("else");}}if((o==="for"||o==="if"||o==="switch"||o==="catch")&&l.token[s.count-1]!=="."){b=L(1,true);if(b!=="("){i=s.count;if(h.attemptCorrection===true){fe("(");}else {fe("x(");}}}}do{if(/\s/.test(a[r])){if(T>-1)V();r=s.spacer({array:a,end:I,index:r});if(s.linesSpace>1&&g!==";"&&m<s.count&&a[r+1]!=="}"){j(false);m=s.count;}}else if(a[r]==="{"&&a[r+1]==="%"){R("{%","%}","template");}else if(a[r]==="{"&&a[r+1]==="{"){R("{{","}}","template");}else if(a[r]==="<"&&a[r+1]==="!"&&a[r+2]==="-"&&a[r+3]==="-"){R("<!--","-->","comment");}else if(a[r]==="<"){le();}else if(a[r]==="/"&&(r===I-1||a[r+1]==="*")){M();}else if((s.count<0||l.lines[s.count]>0)&&a[r]==="#"&&a[r+1]==="!"&&(a[r+2]==="/"||a[r+2]==="[")){R("#!"+a[r+2],"\n","string");}else if(a[r]==="/"&&(r===I-1||a[r+1]==="/")){X();}else if(a[r]==="`"||a[r]==="}"&&s.structure[s.structure.length-1][0]==="template_string"){if(T>-1)V();g=Ae();if(g.charAt(0)==="}"&&g.slice(g.length-2)==="${"){y="template_string_else";B("template_string");}else if(g.slice(g.length-2)==="${"){y="template_string_start";B("template_string");}else if(g.charAt(0)==="}"){y="template_string_end";B("");}else {y="string";B("");}}else if(a[r]==='"'||a[r]==="'"){R(a[r],a[r],"string");}else if(a[r]==="-"&&(r<I-1&&a[r+1]!=="="&&a[r+1]!=="-")&&(y==="number"||y==="word"||y==="reference")&&g!=="return"&&(g===")"||g==="]"||y==="word"||y==="reference"||y==="number")){if(T>-1)V();g="-";y="operator";B("");}else if(T===-1&&(a[r]!=="0"||a[r]==="0"&&a[r+1]!=="b")&&(/\d/.test(a[r])||r!==I-2&&a[r]==="-"&&a[r+1]==="."&&/\d/.test(a[r+2])||r!==I-1&&(a[r]==="-"||a[r]===".")&&/\d/.test(a[r+1]))){if(T>-1)V();if(y==="end"&&a[r]==="-"){g="-";y="operator";}else {g=K();y="number";}B("");}else if(a[r]===":"&&a[r+1]===":"){if(T>-1)V();if(h.attemptCorrection===true)H();F();r=r+1;g="::";y="separator";B("");}else if(a[r]===","){if(T>-1)V();if(h.attemptCorrection===true)H();if(t[t.length-1]===true&&l.stack[s.count].indexOf("type")<0){t[t.length-1]=false;}if(y==="comment"){q();}else if(x.len>-1&&x.count[x.len]===0&&h.script.variableList==="each"){F();g=";";y="separator";B("");g=x.word[x.len];y="word";B("");x.index[x.len]=s.count;}else {g=",";y="separator";F();B("");}}else if(a[r]==="."){if(T>-1)V();t[t.length-1]=false;if(a[r+1]==="."&&a[r+2]==="."){g="...";y="operator";r=r+2;}else {F();g=".";y="separator";}if(/\s/.test(a[r-1])===true)s.linesSpace=1;B("");}else if(a[r]===";"){if(T>-1)V();if(t[t.length-1]===true&&l.stack[s.count].indexOf("type")<0){t[t.length-1]=false;}if(W[W.length-1]===0)W.pop();if(x.len>-1&&x.count[x.len]===0){if(h.script.variableList==="each"){me();}else {x.index[x.len]=s.count+1;}}if(h.attemptCorrection===true)H();g=";";y="separator";if(l.token[s.count]==="x}"){C();}else {B("");}$();}else if(a[r]==="("||a[r]==="["||a[r]==="{"){fe(a[r]);}else if(a[r]===")"||a[r]==="]"||a[r]==="}"){te(a[r]);}else if(a[r]==="*"&&l.stack[s.count]==="object"&&T<0&&/\s/.test(a[r+1])===false&&a[r+1]!=="="&&/\d/.test(a[r+1])===false){T=r;}else if(a[r]==="="||a[r]==="&"||a[r]==="<"||a[r]===">"||a[r]==="+"||a[r]==="-"||a[r]==="*"||a[r]==="/"||a[r]==="!"||a[r]==="?"||a[r]==="|"||a[r]==="^"||a[r]===":"||a[r]==="%"||a[r]==="~"){g=G();if(g==="regex"){g=l.token[s.count];}else if(g==="*"&&l.token[s.count]==="function"){l.token[s.count]="function*";}else {y="operator";if(g!=="!"&&g!=="++"&&g!=="--")F();B("");}}else if(T<0&&a[r]!==""){T=r;}if(x.len>-1&&s.count===x.index[x.len]+1&&l.token[x.index[x.len]]===";"&&g!==x.word[x.len]&&y!=="comment"&&h.script.variableList==="list"){me();}r=r+1;}while(r<I);if(T>-1)V();if((l.token[s.count]!=="}"&&l.token[0]==="{"||l.token[0]!=="{")&&(l.token[s.count]!=="]"&&l.token[0]==="["||l.token[0]!=="[")){j(false);}if(S[0]===s.count){g="\n"+S[1];y="string";B("");}if(l.token[s.count]==="x;"&&(l.token[s.count-1]==="}"||l.token[s.count-1]==="]")&&l.begin[s.count-1]===0){s.pop(l);}return l};_.lexers.markup=function v(u){const h=new Set(["body","colgroup","dd","dt","head","html","li","option","p","tbody","td","tfoot","th","thead","tr"]);const r=new Set(["area","base","basefont","br","col","embed","eventsource","frame","hr","image","img","input","isindex","keygen","link","meta","path","param","progress","source","wbr","use"]);const g=new Set(["autoescape","case","capture","comment","embed","filter","for","form","if","macro","paginate","raw","switch","tablerow","unless","verbatim","schema","style","script","javascript","highlight","stylesheet"]);const{options:y}=_;const{data:e}=s;const m=y.markup.attributeSortList.length;const T=re(null);T.end=0;T.index=-1;T.start=0;const i=u.split("");const E=i.length;let f=0;const n=0;let k=false;let l="html";function A(t,d){if(d===1){return t.charCodeAt(0)===123&&(t.charCodeAt(1)===37||t.charCodeAt(1)===123)}else if(d===2){return t.charCodeAt(t.length-1)===125&&(t.charCodeAt(t.length-2)===37||t.charCodeAt(t.length-2)===125)}else if(d===3){return t.charCodeAt(0)===123&&(t.charCodeAt(1)===37||t.charCodeAt(1)===123)&&(t.charCodeAt(t.length-1)===125&&(t.charCodeAt(t.length-2)===37||t.charCodeAt(t.length-2)===125))}else if(d===4){return /{[{%}]/.test(t)}else if(d===5){return /{[{%]/.test(t)&&/[%}]}/.test(t)}}function I(t){if(y.language!=="xml"&&y.language!=="jsx"){const d=j=>j.replace(/\s*$/," ");const x=j=>j.replace(/^\s*/," ");if(/(?:{[=#/]|%[>\]])|\}%[>\]]/.test(t))return t;t=t.replace(/{[{%]-?\s*/g,d);t=t.replace(/\s*-?[%}]}/g,x);return t}return t}function a(t,d,x){if(t===e){if(d.types.indexOf("end")>-1){T.end=T.end+1;}else if(d.types.indexOf("start")>-1){T.start=T.start+1;}}s.push(t,d,x);}function z(t){let d=0;let x="";const j=/^({[{%]-?\s*)/;if(typeof t!=="string")return "";d=t.replace(j,"%").replace(/\s+/," ").indexOf(" ");x=t.replace(j," ");x=d<0?x.slice(1,t.length-1):x.slice(1,d);if(l==="html")x=x.toLowerCase();x=x.replace(/-?[%}]}$/,"");if(x.indexOf("(")>0)x=x.slice(0,x.indexOf("("));if(x==="?xml?")return "xml";return x}function P(t,d){const x=z(t);const j=Object.create(null);j.begin=s.structure[s.structure.length-1][1];j.ender=-1;j.lexer="markup";j.lines=e.lines[s.count]>0?1:0;j.stack=s.structure[s.structure.length-1][0];j.token=`</${s.structure[s.structure.length-1][0]}>`;j.types="end";a(e,j,"");if(h.has(s.structure[s.structure.length-1][0])&&(d===true&&s.structure.length>1||d===false&&`/${s.structure[s.structure.length-1][0]}`!==x)){do{j.begin=s.structure[s.structure.length-1][1];j.stack=s.structure[s.structure.length-1][0];j.token=`</${s.structure[s.structure.length-1][0]}>`;a(e,j,"");}while(h.has(s.structure[s.structure.length-1][0])&&(d===true&&s.structure.length>1||d===false&&`/${s.structure[s.structure.length-1][0]}`!==x))}}function W(t){const d=re(null);d.begin=s.structure[s.structure.length-1][1];d.ender=-1;d.lexer="markup";d.lines=s.linesSpace;d.stack=s.structure[s.structure.length-1][0];d.token="";d.types="";let x=0;let j="";let C="";let F="";let M="";let $="";let q=false;let te=false;let R=false;let X=false;let le=false;let L=false;let K=false;let H=[];let B=["",0];function ue(V){const c=V.indexOf("=");if(c>0&&(c<V.indexOf('"')&&V.indexOf('"')>0||c<V.indexOf("'")&&V.indexOf("'")>0)){return [V.slice(0,c),V.slice(c+1)]}return [V,""]}function ne(){const V=s.count;const c=M.replace(/\/$/,"");const p=y.markup.quoteConvert;let o=0;let b=0;let w=0;let O="";let D="";let Z=[];let U=H.length;function J(){if(R===true||p==="none"||d.types!=="attribute"||p==="single"&&d.token.indexOf('"')<0||p==="double"&&d.token.indexOf("'")<0){a(e,d,"");}else {let Q=0;let ce=false;const Y=d.token.split("");const se=d.token.indexOf("=");const he=Y.length-1;if(Y[se+1]!=='"'&&Y[Y.length-1]!=='"'&&p==="single"){a(e,d,"");}else if(Y[se+1].charCodeAt(0)!==39&&Y[Y.length-1].charCodeAt(0)!==39&&p==="double"){a(e,d,"");}else {Q=se+2;if(p==="double"){if(d.token.slice(se+2,he).indexOf('"')>-1)ce=true;Y[se+1]='"';Y[Y.length-1]='"';}else {if(d.token.slice(se+2,he).indexOf("'")>-1)ce=true;Y[se+1]="'";Y[Y.length-1]="'";}if(ce===true){do{if(Y[Q]==="'"&&p==="single"){Y[Q]='"';}else if(Y[Q]==='"'&&p==="double"){Y[Q]="'";}Q=Q+1;}while(Q<he)}d.token=Y.join("");a(e,d,"");}}}function ie(Q,ce){if(Q.charAt(0)==="{"&&"{%".indexOf(Q.charAt(1))>-1){d.types="template_attribute";}else if(Q.charAt(0)==="<"){d.types="template_attribute";}else {d.token=ce;J();return}d.token=ce;J();d.types="attribute";}if(H.length<1)return;if(H[H.length-1][0]==="/"){H.pop();j=j.replace(/>$/,"/>");}b=H.length;w=1;if(w<b){do{O=H[w-1][0];if(O.charAt(O.length-1)==="="&&H[w][0].indexOf("=")<0){H[w-1][0]=O+H[w][0];H.splice(w,1);b=b-1;w=w-1;}w=w+1;}while(w<b)}if(y.markup.attributeSort===true&&y.language!=="jsx"&&X===false&&le===false){if(m>0){const Q=[];w=0;b=0;U=H.length;do{b=0;do{O=H[b][0].split("=")[0];if(y.markup.attributeSortList[w]===O){Q.push(H[b]);H.splice(b,1);U=U-1;break}b=b+1;}while(b<U);w=w+1;}while(w<m);H=s.safeSort(H,"",false);H=Q.concat(H);U=H.length;}else {H=s.safeSort(H,"",false);}}d.begin=V;d.stack=c;d.types="attribute";Z=[];if(o<U){do{if(H[o]===void 0)break;H[o][0]=H[o][0].replace(/\s+$/,"");d.lines=H[o][1];b=H[o][0].indexOf("=");w=H[o][0].indexOf('"');H[o][0].indexOf("'");if(/^\/(\/|\*)/.test(H[o][0])&&y.language==="jsx"){d.types="comment_attribute";d.token=H[o][0];J();}else if(b<0){if(A(H[o][0],3)||A(H[o][0],5)){d.types="template_attribute";d.token=H[o][0];J();}else {d.types="attribute";d.token="#[{(".indexOf(H[o][0].charAt(0))<0?H[o][0].toLowerCase():d.token=H[o][0];J();}}else {O=H[o][0].slice(0,b);D=H[o][0].slice(b+1);if(y.attemptCorrection){if(`<{"'=`.indexOf(D.charAt(0))<0)D='"'+D+'"';}if(y.language==="jsx"&&/^\s*\{/.test(D)){d.token=O+"={";d.types="jsx_attribute_start";a(e,d,"jsx_attribute");_.lexers.script(D.slice(1,D.length-1));d.begin=s.count;if(/\s\}$/.test(D)){D=D.slice(0,D.length-1);D=/\s+$/.exec(D)[0];if(D.indexOf("\n")<0)d.lines=1;else d.lines=D.split("\n").length;}else {d.lines=0;}d.begin=s.structure[s.structure.length-1][1];d.stack=s.structure[s.structure.length-1][0];d.token="}";d.types="jsx_attribute_end";J();d.types="attribute";d.begin=V;d.stack=c;}else if(A(O,5)){O=O+"="+D;ie(D.replace(/^(["'])/,"").slice(0,2),O.replace(/(\s+)$/,""));}else {d.types="attribute";d.token="#[{(".indexOf(H[o][0].charAt(0))<0?H[o][0].toLowerCase():d.token=H[o][0];J();}}o=o+1;}while(o<U)}if(Z.length>0){d.token=Z.join(" ");J();}}k=false;if(t==="---"){$="---";F="comment";}else if(i[f]==="<"){if(i[f+1]==="/"){t=">";F="end";}else if(i[f+1]==="!"){if(i[f+2]==="-"&&i[f+3]==="-"){t="-->";F="comment";$="<!--";}else if(i[f+2]==="["&&i[f+3]==="C"&&i[f+4]==="D"&&i[f+5]==="A"&&i[f+6]==="T"&&i[f+7]==="A"&&i[f+8]==="["){t="]]>";F="cdata";L=true;}}else if(i[f+1]==="?"){t="?>";if(i[f+2]==="x"&&i[f+3]==="m"&&i[f+4]==="l"){F="xml";K=true;}else {L=true;F="template";}}else if(i[f+1]==="%"){L=true;}else if((i[f+1]==="p"||i[f+1]==="P")&&(i[f+2]==="r"||i[f+2]==="R")&&(i[f+3]==="e"||i[f+3]==="E")&&(i[f+4]===">"||/\s/.test(i[f+4]))){t="</pre>";F="ignore";L=true;}else {K=true;t=">";}}else if(i[f]==="{"){if(y.language==="jsx"){k=true;te=true;d.token="{";d.types="script_start";s.structure.push(["script",s.count]);a(e,d,"");return}if(i[f+1]==="{"){L=true;t="}}";F="template";}else if(i[f+1]==="%"){L=true;t="%}";F="template";const V=i.indexOf("}",f+2);if(i[V-1].charCodeAt(0)===37){let c=i.slice(f+2,V-1).join("");if(c.charCodeAt(0)===45){$="{%-";c=c.slice(1).trimStart();}else {$="{%";c=c.trimStart();}if(c.charCodeAt(c.length-1)===45){t="-%}";c=c.slice(0,c.length-1).trimEnd();}else {t="%}";c=c.trimEnd();}if(c==="comment"){const p=u.indexOf("{%",V);let o=p;if(i[p+1].charCodeAt(0)===45)o=p+1;o=u.indexOf("endcomment",o);if(o>0){o=i.indexOf("}",o);if(o>0&&i[o-1].charCodeAt(0)===37){F="comment";$=i.slice(f,V+1).join("");t=i.slice(p,o+1).join("");}}}}else {L=true;t="%}";F="template";}}else {L=true;t=i[f+1]+"}";F="template";}}if(y.markup.preserveAttributes===true)L=true;if(te)return;C=t.charAt(t.length-1);if(F==="comment"&&(i[f]==="<"||i[f]==="{"&&i[f+1]==="%")){B=s.wrapCommentBlock({chars:i,end:E,lexer:"markup",opening:$,start:f,terminator:t});j=B[0];f=B[1];if(j.replace($,"").replace(/(^\s*)/,"").indexOf("@parse-ignore-start")===0){d.token=j;d.types="ignore";a(e,d,"");return}}else if(f<E){let ce=function(){let se=f;do{se=se-1;}while(i[se]==="\\");se=f-se;return se%2===1},Y=function(se){let he;let ee="";let ae=0;let de=0;const oe="data-prettify-ignore";if(se===true){ee=J.join("");he=ue(ee);O="";if(he[0]===oe)R=true;}else {ee=J.join("");if(y.language!=="jsx"||y.language==="jsx"&&ee.charAt(ee.length-1)!=="}"){ee=ee.replace(/\s+/g," ");}he=ue(ee);if(he[0]===oe)R=true;if(y.language==="jsx"&&J[0]==="{"&&J[J.length-1]==="}"){p=0;}}if(ee.slice(0,2)==="{%")le=true;ee=ee.replace(/^\u0020/,"").replace(/\u0020$/,"");J=ee.replace(/\r\n/g,"\n").split("\n");de=J.length;if(ae<de){do{J[ae]=J[ae].replace(/(\s+)$/,"");ae=ae+1;}while(ae<de)}if(ee==="="){H[H.length-1][0]=`${H[H.length-1][0]}=`;}else if(ee.charAt(0)==="="&&H.length>0&&H[H.length-1][0].indexOf("=")<0){H[H.length-1][0]=H[H.length-1][0]+ee;}else if(ee.charAt(0)!=="="&&H.length>0&&H[H.length-1][0].indexOf("=")===H[H.length-1][0].length-1){H[H.length-1][0]=H[H.length-1][0]+ee;}else if(ee!==""&&ee!==" "){H.push([ee,N]);}if(H.length>0&&H[H.length-1][0].indexOf("=\u201C")>0){s.error=`Quote looking character (\u201C, &#x201c) used instead of actual quotes on line number ${s.lineNumber}`;}else if(H.length>0&&H[H.length-1][0].indexOf("=\u201D")>0){s.error=`Quote looking character (\u201D, &#x201d) used instead of actual quotes on line number ${s.lineNumber}`;}J=[];N=i[f]==="\n"?2:1;};let V=0;let p=0;let o=0;let b=0;let w=0;let N=1;let O="";let D="";let Z=false;let U=false;let J=[];const ie=[];const Q=[];do{if(i[f]==="\n"){N=N+1;s.lineNumber=s.lineNumber+1;}if(L===true||(/\s/.test(i[f])===false&&O!=="}"||O==="}")){Q.push(i[f]);if(Q[0]==="<"&&Q[1]===">"&&t===">"){d.token="<>";d.types="start";a(e,d,"(empty)");return}if(Q[0]==="<"&&Q[1]==="/"&&Q[2]===">"&&t===">"){d.token="</>";d.types="end";a(e,d,"");return}}if(F==="cdata"&&i[f]===">"&&i[f-1]==="]"&&i[f-2]!=="]"){s.error=`CDATA tag ${Q.join("")} not properly terminated with ]]>`;break}if(F==="comment"){O="";if(i[f]===C&&Q.length>t.length+1){b=Q.length;o=t.length-1;if(o>-1){do{b=b-1;if(Q[b]!==t.charAt(o))break;o=o-1;}while(o>-1)}if(o<0)break}}else {if(O===""){if(Q[0]+Q[1]==="<!"&&F!=="cdata"){if(i[f]==="["){if(i[f+1]==="<"){F="start";break}if(/\s/.test(i[f+1])===true){do{f=f+1;if(i[f]==="\n"){N=N+1;}}while(f<E-1&&/\s/.test(i[f+1])===true)}if(i[f+1]==="<"){F="start";break}}}if(y.language==="jsx"){if(i[f]==="{"){p=p+1;}else if(i[f]==="}"){p=p-1;}}if(i[f]==="<"&&L===false&&Q.length>1&&t!==">>"&&t!==">>>"&&K===true){s.error=`Parse error (line ${s.lineNumber}) on: ${Q.join("")}`;}if(Z===true&&/\s/.test(i[f])===false&&i[f]!==C){Z=false;O=D;x=0;Q.pop();if(f<E){do{if(i[f]==="\n")s.lineNumber=s.lineNumber+1;if(y.markup.preserveAttributes===true){Q.push(i[f]);}else {J.push(i[f]);}if(y.language!=="jsx"&&(i[f]==="<"||i[f]===">")&&(O===""||O===">")){if(O===""&&i[f]==="<"){O=">";}else if(O===">"){if(i[f]==="<");else if(i[f]===">");}}else if(O===""){if(i[f+1]===C){if(J[J.length-1]==="/"||J[J.length-1]==="?"&&F==="xml"){J.pop();if(L===true)Q.pop();f=f-1;}if(J.length>0)Y(false);break}if(L===false){J.pop();if(i[f]!=="="&&J.length>0)Y(false);O="";do{J.push(i[f]);if(i[f]===ie[ie.length-1]){ie.pop();if(i[f]==="}"&&i[f+1]==="}"){J.push("}");f=f+1;if(i[f+1]==="}"){J.push("}");f=f+1;}}if(ie.length<1){Y(false);i[f]=" ";break}}else if((i[f]==='"'||i[f]==="'")&&ie[ie.length-1]!=='"'&&ie[ie.length-1]!=="'"){ie.push(i[f]);}else if(i[f]==="{"&&"{%#@:/?^<+~=".indexOf(i[f+1])&&ie[ie.length-1]!=="}"){ie.push("}");}else if(i[f]==="<"&&ie[ie.length-1]!==">"){ie.push(">");}f=f+1;}while(f<E)}else if(i[f]==="{"&&i[f-1]==="="&&y.language!=="jsx"){O="}";}else if(i[f]==='"'||i[f]==="'"){O=i[f];if(i[f-1]==="="&&(i[f+1]==="<"||i[f+1]==="{"&&i[f+2]==="%"||/\s/.test(i[f+1])&&i[f-1]!=="=")){x=f;}}else if(i[f]==="("){O=")";w=1;}else if(y.language==="jsx"){if((i[f-1]==="="||/\s/.test(i[f-1])===true)&&i[f]==="{"){O="}";V=1;}else if(i[f]==="/"){if(i[f+1]==="*"){O="*/";}else if(i[f+1]==="/"){O="\n";}}}else if(Q[0]!=="{"&&i[f]==="{"&&(i[f+1]==="{"||i[f+1]==="%")){if(i[f+1]==="{"){O="}}";}else {O=i[f+1]+"}";}}if(/\s/.test(i[f])===true&&O===""){if(J[J.length-2]==="="){o=f+1;if(o<E){do{if(/\s/.test(i[o])===false){if(i[o]==='"'||i[o]==="'"){f=o-1;U=true;J.pop();}break}o=o+1;}while(o<E)}}if(U===true){U=false;}else if(p===0||p===1&&J[0]==="{"){J.pop();Y(false);Z=true;break}}}else if(i[f]==="("&&O===")"){w=w+1;}else if(i[f]===")"&&O===")"){w=w-1;if(w===0){O="";if(i[f+1]===t.charAt(0)){Y(false);break}}}else if(y.language==="jsx"&&(O==="}"||O==="\n"&&i[f]==="\n"||O==="*/"&&i[f-1]==="*"&&i[f]==="/")){if(O==="}"){if(i[f]==="{"){V=V+1;}else if(i[f]===O){V=V-1;if(V===0){p=0;O="";j=J.join("");if(y.markup.preserveAttributes===false){if(y.language==="jsx"){if(/^(\s*)$/.test(j)===false){H.push([j,N]);}}else {j=j.replace(/\s+/g," ");if(j!==" "){H.push([j,N]);}}}J=[];N=1;break}}}else {D="";X=true;j=J.join("");if(j!==" ")H.push([j,N]);J=[];N=O==="\n"?2:1;O="";break}}else if(i[f]==="{"&&i[f+1]==="%"&&i[x-1]==="="&&(O==='"'||O==="'")){O=O+"{%";x=0;}else if(i[f-1]==="%"&&i[f]==="}"&&(O==='"{%'||O==="'{%")){O=O.charAt(0);x=0;}else if(i[f]==="<"&&t===">"&&i[x-1]==="="&&(O==='"'||O==="'")){O=O+"<";x=0;}else if(i[f]===">"&&(O==='"<'||O==="'<")){O=O.charAt(0);x=0;}else if(x===0&&O!==">"&&(O.length<2||O.charAt(0)!=='"'&&O.charAt(0)!=="'")){b=0;if(Q.length>1){M=Q[1]+Q[2];M=M.toLowerCase();}o=O.length-1;if(o>-1){do{if(i[f-b]!==O.charAt(o))break;b=b+1;o=o-1;}while(o>-1)}if(o<0){Y(true);if(i[f+1]===C)break}}else if(x>0&&/\s/.test(i[f])===false){x=0;}f=f+1;}while(f<E)}}else if(t!=="\n"&&(i[f]==='"'||i[f]==="'")){O=i[f];}else if(F!=="comment"&&t!=="\n"&&i[f]==="<"&&i[f+1]==="!"&&i[f+2]==="-"&&i[f+3]==="-"&&i[f+4]!=="#"&&e.types[s.count]!=="conditional"){O="-->";}else if(i[f]==="{"&&Q[0]!=="{"&&t!=="\n"&&(i[f+1]==="{"||i[f+1]==="%")){if(i[f+1]==="{"){O="}}";}else {O=i[f+1]+"}";if(J.length<1&&(H.length<1||/\s/.test(i[f-1])===true)){Q.pop();do{if(i[f]==="\n")N=N+1;J.push(i[f]);f=f+1;}while(f<E&&i[f-1]+i[f]!==O);J.push("}");H.push([J.join(""),N]);J=[];N=1;O="";}}if(O===t)O="";}else if((K===true||F==="sgml")&&t!=="\n"&&/\s/.test(i[f])===true&&i[f-1]!=="<"){if(F==="sgml"){Q.push(" ");}else {Z=true;}}else if(K===true&&y.language==="jsx"&&i[f]==="/"&&(i[f+1]==="*"||i[f+1]==="/")){Z=true;Q[Q.length-1]=" ";J.push(i[f]);if(i[f+1]==="*"){D="*/";}else {D="\n";}}else if((i[f]===C||t==="\n"&&i[f+1]==="<")&&(Q.length>t.length+1||Q[0]==="]")&&(y.language!=="jsx"||p===0)){if(t==="\n"){if(/\s/.test(Q[Q.length-1])){do{Q.pop();f=f-1;}while(/\s/.test(Q[Q.length-1]))}break}b=Q.length;o=t.length-1;if(o>-1){do{b=b-1;if(Q[b]!==t.charAt(o))break;o=o-1;}while(o>-1)}if(o<0)break}}else if(i[f]===O.charAt(O.length-1)&&(y.language==="jsx"&&t==="}"&&(i[f-1]!=="\\"||ce()===false)||y.language!=="jsx"||t!=="}")){b=0;if(Q.length>1){M=Q[1]+Q[2];M=M.toLowerCase();}o=O.length-1;if(o>-1){do{if(i[f-b]!==O.charAt(o))break;b=b+1;o=o-1;}while(o>-1)}if(o<0)O="";}}f=f+1;}while(f<E);if(y.attemptCorrection===true){if(i[f+1]===">"&&Q[0]==="<"&&Q[1]!=="<"){do{f=f+1;}while(i[f+1]===">")}else if(Q[0]==="<"&&Q[1]==="<"&&i[f+1]!==">"&&Q[Q.length-2]!==">"){do{Q.splice(1,1);}while(Q[1]==="<")}}x=0;j=Q.join("");M=z(j);j=I(j);if(M==="xml"){l="xml";}else if(l===""&&M==="!DOCTYPE"&&j.toLowerCase().indexOf("xhtml")>0){l="xml";}else if(l===""&&M==="html"){l="html";}else if(l==="liquid"){l="html";}if(j.replace($,"").replace(/^\s+/,"").indexOf("@prettify-ignore-start")===0){f=f+1;do{Q.push(i[f]);if(i[f]==="d"&&Q.slice(Q.length-20).join("")==="@prettify-ignore-end")break;f=f+1;}while(f<E);do{Q.push(i[f]);if(i[f]===t.charAt(t.length-1)&&i.slice(f-(t.length-1),f+1).join("")===t){break}f=f+1;}while(f<E);d.token=Q.join("");d.types="ignore";a(e,d,"");return}}d.token=j;d.types=F;M=z(j);if(L===false&&y.language!=="jsx")j=j.replace(/\s+/g," ");if(M==="comment"&&A(j,2)){let w=function(O){o=O===""?0:O.split("\n").length;return ""},N=function(O){b=O===""?0:O.split("\n").length;return ""};const V=j.slice(0,j.indexOf("%}")+2);const c=j.slice(j.indexOf("%}")+2,j.lastIndexOf("{%"));const p=j.slice(j.lastIndexOf("{%"));let o=0;let b=0;d.begin=s.structure[s.structure.length-1][1];d.ender=s.count+3;d.stack=s.structure[s.structure.length-1][0];d.types="template_start";d.token=V;a(e,d,"comment");j=c.replace(/^\s*/,w);j=j.replace(/\s*$/,N);d.begin=s.count;d.lines=o;d.stack="comment";d.token=j;d.types="comment";a(e,d,"");d.types="template_end";d.stack="comment";d.lines=b;d.token=p;a(e,d,"");return}d.types=F;q=(()=>{const V=/(\/>)$/;function c(o,b){if(!h.has(o))return false;if(o===b)return true;if(o==="dd"&&b==="dt")return true;if(o==="dt"&&b==="dd")return true;if(o==="td"&&b==="th")return true;if(o==="th"&&b==="td")return true;if(o==="colgroup"&&(b==="tbody"||b==="tfoot"||b==="thead"||b==="tr"))return true;if(o==="tbody"&&(b==="colgroup"||b==="tfoot"||b==="thead"))return true;if(o==="tfoot"&&(b==="colgroup"||b==="tbody"||b==="thead"))return true;if(o==="thead"&&(b==="colgroup"||b==="tbody"||b==="tfoot"))return true;if(o==="tr"&&b==="colgroup")return true;return false}function p(o){d.lines=e.lines[s.count]>0?1:0;d.token=`</${s.structure[s.structure.length-1][0]}>`;d.types="end";a(e,d,"");if(o>0){do{d.begin=s.structure[s.structure.length-1][1];d.stack=s.structure[s.structure.length-1][0];d.token=`</${s.structure[s.structure.length-1][0]}>`;a(e,d,"");o=o-1;}while(o>0)}d.begin=s.structure[s.structure.length-1][1];d.lines=s.linesSpace;d.stack=s.structure[s.structure.length-1][0];d.token=j;d.types="end";e.lines[s.count-1]=0;}if(F==="end"){const o=e.token[s.count];if(e.types[s.count-1]==="singleton"&&o.charAt(o.length-2)!=="/"&&"/"+z(o)===M){e.types[s.count-1]="start";}}if(l==="html"){if(j.charAt(0)==="<"&&j.charAt(1)!=="!"&&j.charAt(1)!=="?"&&(s.count<0||e.types[s.count].indexOf("template")<0)){j=j.toLowerCase();}if(h.has(s.structure[s.structure.length-1][0])&&c(M.slice(1),s.structure[s.structure.length-2][0])){p(0);}else if(s.structure.length>3&&h.has(s.structure[s.structure.length-1][0])&&h.has(s.structure[s.structure.length-2][0])&&h.has(s.structure[s.structure.length-3][0])&&c(M,s.structure[s.structure.length-4][0])===true){p(3);}else if(s.structure.length>2&&h.has(s.structure[s.structure.length-1][0])&&h.has(s.structure[s.structure.length-2][0])&&c(M,s.structure[s.structure.length-3][0])===true){p(2);}else if(s.structure.length>1&&h.has(s.structure[s.structure.length-1][0])&&c(M,s.structure[s.structure.length-2][0])===true){p(1);}else if(c(M,s.structure[s.structure.length-1][0])===true){p(0);}else if(M.charAt(0)==="/"&&h.has(s.structure[s.structure.length-1][0])&&s.structure[s.structure.length-1][0]!==M.slice(1)){P(j,false);d.begin=s.structure[s.structure.length-1][1];d.lines=s.linesSpace;d.stack=s.structure[s.structure.length-1][0];d.token=j;d.types="end";e.lines[s.count-1]=0;}if(r.has(M)){if(y.attemptCorrection===true&&V.test(j)===false){j=j.slice(0,j.length-1)+" />";}return true}}return false})();if(/\bscript|style\b/.test(M)&&j.slice(j.length-2)!=="/>"||/\bschema|style|stylesheet|javascript\b/.test(M)&&j.slice(j.length-2)==="%}"){const V=A(j,3);let c=H.length-1;let p="";let o=[];if(c>-1){do{o=ue(H[c][0]);if(o[0]==="type"){p=o[1];if(p.charAt(0)==='"'||p.charAt(0)==="'"){p=p.slice(1,p.length-1);}break}c=c-1;}while(c>-1)}if(V===false&&M==="script"&&(p===""||p==="text/javascript"||p==="babel"||p==="module"||p==="application/javascript"||p==="application/x-javascript"||p==="text/ecmascript"||p==="application/ecmascript"||p==="text/jsx"||p==="application/jsx"||p==="text/cjs"||p==="application/json"||p==="application/ld+json")){k=true;}else if((M==="style"||M==="stylsheet")&&y.language!=="jsx"&&(p===""||p==="text/css")){k=true;}else if(V===true&&(M==="javascript"||M==="schema"||M==="style")){k=true;}if(k===true){c=f+1;if(c<E){do{if(/\s/.test(i[c])===false){if(i[c]==="<"){if(i.slice(c+1,c+4).join("")==="!--"){c=c+4;if(c<E){do{if(/\s/.test(i[c])===false){k=false;break}if(i[c]==="\n"||i[c]==="\r")break;c=c+1;}while(c<E)}}else {k=false;}}break}c=c+1;}while(c<E)}}}if(K&&R===false&&F!=="xml"){if(q===true||j.slice(j.length-2)==="/>"){F="singleton";}else {F="start";}d.types=F;}if(K&&L===false&&R&&t===">"&&j.slice(j.length-2)!=="/>"){const V=[];const c=[];if(q===true){F="singleton";}else {H.forEach(p=>c.push(p[0]));L=true;F="ignore";f=f+1;if(f<E){let p="";let o=0;let b=0;let w=false;do{if(i[f]==="\n")s.lineNumber=s.lineNumber+1;V.push(i[f]);if(p===""){if(i[f]==='"'){p='"';}else if(i[f]==="'"){p="'";}else if(V[0]!=="{"&&i[f]==="{"&&(i[f+1]==="{"||i[f+1]==="%")){if(i[f+1]==="{"){p="}}";}else {p=i[f+1]+"}";}}else if(i[f]==="<"&&K===true){if(i[f+1]==="/"){w=true;}else {w=false;}}else if(i[f]===C&&i[f-1]!=="/"){if(w===true){x=x-1;if(x<0)break}else {x=x+1;}}}else if(i[f]===p.charAt(p.length-1)){b=0;o=p.length-1;if(o>-1){do{if(i[f-b]!==p.charAt(o))break;b=b+1;o=o-1;}while(o>-1)}if(o<0)p="";}f=f+1;}while(f<E)}}j=j+V.join("");j=j.replace(">",` ${c.join(" ")}>`);d.token=j;d.types="content-ignore";H=[];}if(d.types.indexOf("template")>-1){if(j.slice(0,2)==="{%"){if((M==="case"||M==="default")&&(s.structure[s.structure.length-1][0]==="switch"||s.structure[s.structure.length-1][0]==="case")){d.types="template_else";}else if(M==="else"||M==="when"||M==="elsif"){d.types="template_else";}else {if(g.has(M)){d.types="template_start";}else if(M[0]==="e"&&M[1]==="n"&&M[2]==="d"&&g.has(M.slice(3))){d.types="template_end";}else if(M[0]==="e"&&M[1]==="n"&&M[2]==="d"){d.types="template_end";d.stack=M.slice(3);let V=0;do{if(e.types[V]==="template"&&e.stack[V]===d.stack){e.types[V]="template_start";T.start=T.start+1;break}else {V=e.stack.indexOf(d.stack,V+1);}}while(V>-1)}else {d.stack=M;}}}else if(d.types==="template"){if(j.indexOf("else")>2){d.types="template_else";}}if(d.types==="template_start"||d.types==="template_else"){if(M===""||M==="%"){M=M+j.slice(1).replace(M,"").replace(/^\s+/,"");M=M.slice(0,M.indexOf("(")).replace(/\s+/,"");}}}if(F==="cdata"&&(d.stack==="script"||d.stack==="style")){let V=s.count;let c=s.count;const p=d.stack;if(e.types[c]==="attribute"){do{V=V-1;c=c-1;}while(e.types[c]==="attribute"&&c>-1)}d.begin=V;d.token="<![CDATA[";d.types="cdata_start";j=j.replace(/^(\s*<!\[cdata\[)/i,"").replace(/(\]\]>\s*)$/,"");a(e,d,"");s.structure.push(["cdata",s.count]);if(p==="script"){_.lexers.script(j);}else {_.lexers.style(j);}d.begin=s.structure[s.structure.length-1][1];d.token="]]>";d.types="cdata_end";a(e,d,"");s.structure.pop();}else {a(e,d,M);}ne();if(y.wrap>0&&y.language==="jsx"){let V=0;let c=s.count;let p=0;if(e.types[c].indexOf("attribute")>-1){do{V=V+e.token[c].length+1;c=c-1;}while(e.lexer[c]!=="markup"||e.types[c].indexOf("attribute")>-1);if(e.lines[c]===1)V=V+e.token[c].length+1;}else if(e.lines[c]===1){V=e.token[c].length+1;}p=c-1;if(V>0&&e.types[p]!=="script_end"){if(e.types[p].indexOf("attribute")>-1){do{V=V+e.token[p].length+1;p=p-1;}while(e.lexer[p]!=="markup"||e.types[p].indexOf("attribute")>-1);if(e.lines[p]===1)V=V+e.token[p].length+1;}else if(e.lines[p]===1){V=e.token[p].length+1;}if(V>y.wrap&&e.lines[c]===1){d.begin=e.begin[c];d.ender=c+2;d.lexer=e.lexer[c];d.lines=1;d.stack=e.stack[c];d.token="{";d.types="script_start";s.splice({data:e,howmany:0,index:c,record:d});d.begin=c;d.lexer="script";d.lines=0;d.stack="script";if(y.markup.quoteConvert==="single"){d.token="' '";}else {d.token='" "';}d.types="string";s.splice({data:e,howmany:0,index:c+1,record:d});d.lexer="markup";d.token="}";d.types="script_end";s.splice({data:e,howmany:0,index:c+2,record:d});e.ender[c+3]=e.ender[c+3]+3;c=c+4;do{e.begin[c]=e.begin[c]+3;e.ender[c]=e.ender[c]+3;c=c+1;}while(c<s.count)}}}s.linesSpace=0;}function S(){let t="";let d=s.linesSpace;let x="";const j=[];const C=e.token[s.count]==="{";const F=f;if(k===true){if(C===true){x="script";}else if(s.structure[s.structure.length-1][1]>-1){x=z(e.token[s.structure[s.structure.length-1][1]].toLowerCase());}else if(e.begin[s.count]>1){x=z(e.token[e.begin[s.count]].toLowerCase());}else {x=z(e.token[e.begin[s.count]].toLowerCase());}}const M=e.types[s.count]==="template_start"&&e.token[s.count].indexOf("<!")===0&&e.token[s.count].indexOf("<![")<0&&e.token[s.count].charAt(e.token[s.count].length-1)==="[";const $=Object.create(null);$.begin=s.structure[s.structure.length-1][1];$.ender=-1;$.lexer="markup";$.lines=d;$.stack=s.structure[s.structure.length-1][0];$.token="";$.types="content";function q(){let R=f-1;let X=0;if(i[f-1]!=="\\")return false;if(R>-1){do{if(i[R]!=="\\")break;X=X+1;R=R-1;}while(R>-1)}return X%2===1}if(f<E){let R="";let X="";let le=0;do{if(i[f]==="\n")s.lineNumber=s.lineNumber+1;if(k===true){if(X===""){if(i[f]==="/"){if(i[f+1]==="*"){X="*";}else if(i[f+1]==="/"){X="/";}else if(x==="script"&&"([{!=,;.?:&<>".indexOf(i[f-1])>-1){if(y.language!=="jsx"||i[f-1]!=="<")X="reg";}}else if((i[f]==='"'||i[f]==="'"||i[f]==="`")&&q()===false){X=i[f];}else if(i[f]==="{"&&C===true){le=le+1;}else if(i[f]==="}"&&C===true){if(le===0){_.lexers.script(j.join("").replace(/^(\s+)/,"").replace(/(\s+)$/,""));s.structure[s.structure.length-1][1]+=1;if(e.types[s.count]==="end"&&e.lexer[e.begin[s.count]-1]==="script"){$.lexer="script";$.token=y.attemptCorrection===true?";":"x;";$.types="separator";a(e,$,"");$.lexer="markup";}$.token="}";$.types="script_end";a(e,$,"");s.structure.pop();break}le=le-1;}if(A(e.token[s.count],3)===false){R=i.slice(f,f+10).join("").toLowerCase();if(x==="script"){R=f===E-9?R.slice(0,R.length-1):R.slice(0,R.length-2);if(R==="<\/script"){let L=j.join("").replace(/^(\s+)/,"").replace(/(\s+)$/,"");f=f-1;if(j.length<1)break;if(/^<!--+/.test(L)&&/--+>$/.test(L)){$.token="<!--";$.types="comment";a(e,$,"");L=L.replace(/^<!--+/,"").replace(/--+>$/,"");_.lexers.script(L);$.token="-->";a(e,$,"");}else {_.lexers.script(L);}break}}if(x==="style"){if(f===E-8){R=R.slice(0,R.length-1);}else if(f===E-9){R=R.slice(0,R.length-2);}else {R=R.slice(0,R.length-3);}if(R==="</style"){let L=j.join("").replace(/^(\s+)/,"").replace(/(\s+)$/,"");f=f-1;if(j.length<1)break;if(/^<!--+/.test(L)&&/--+>$/.test(L)){$.token="<!--";$.types="comment";a(e,$,"");L=L.replace(/^<!--+/,"").replace(/--+>$/,"");_.lexers.style(L);$.token="-->";a(e,$,"");}else {_.lexers.style(L);if(y.style.sortProperties===true)s.sortCorrection(0,s.count+1);}break}}}else {if(x==="schema"){R=i.slice(f+3,f+14).join("").toLowerCase();if(f===E-12){R=R.slice(0,R.length-3);}else {R=R.slice(0,R.length-2);}if(R==="endschema"){let L=j.join("").replace(/^(\s+)/,"").replace(/(\s+)$/,"");f=f-1;if(j.length<1)break;if(/^<!--+/.test(L)&&/--+>$/.test(L)){$.token="<!--";$.types="comment";a(e,$,"");L=L.replace(/^<!--+/,"").replace(/--+>$/,"");_.lexers.script(L);$.token="-->";a(e,$,"");}else {_.options.language="json";_.lexers.script(L);if(y.script.objectSort===true)s.sortCorrection(0,s.count+1);_.options.language="liquid";}break}}else if(x==="style"){R=i.slice(f+4,f+14).join("").toLowerCase();if(f===E-14){R=R.slice(0,R.length-4);}else if(f===E-13){R=R.slice(0,R.length-3);}else {R=R.slice(0,R.length-2);}if(R==="endstyle"){let L=j.join("").replace(/^(\s+)/,"").replace(/(\s+)$/,"");f=f-1;if(j.length<1)break;if(/^<!--+/.test(L)&&/--+>$/.test(L)){$.token="<!--";$.types="comment";a(e,$,"");L=L.replace(/^<!--+/,"").replace(/--+>$/,"");_.lexers.style(L);$.token="-->";a(e,$,"");}else {_.lexers.style(L);}break}}else if(x==="javascript"){R=i.slice(f+4,f+19).join("").toLowerCase();if(f===E-19){R=R.slice(0,R.length-4);}else if(f===E-18){R=R.slice(0,R.length-3);}else {R=R.slice(0,R.length-2);}if(R==="endjavascript"){let L=j.join("").replace(/^(\s+)/,"").replace(/(\s+)$/,"");f=f-1;if(j.length<1)break;if(/^<!--+/.test(L)&&/--+>$/.test(L)){$.token="<!--";$.types="comment";a(e,$,"");L=L.replace(/^<!--+/,"").replace(/--+>$/,"");_.lexers.script(L);$.token="-->";a(e,$,"");}else {_.lexers.script(L);if(y.script.objectSort===true){s.sortCorrection(0,s.count+1);}}break}}}}else if(X===i[f]&&(X==='"'||X==="'"||X==="`"||X==="*"&&i[f+1]==="/")&&q()===false){X="";}else if(X==="`"&&i[f]==="$"&&i[f+1]==="{"&&q()===false){X="}";}else if(X==="}"&&i[f]==="}"&&q()===false){X="`";}else if(X==="/"&&(i[f]==="\n"||i[f]==="\r")){X="";}else if(X==="reg"&&i[f]==="/"&&q()===false){X="";}else if(X==="/"&&i[f]===">"&&i[f-1]==="-"&&i[f-2]==="-"){R=i.slice(f+1,f+11).join("").toLowerCase();R=R.slice(0,R.length-2);if(x==="script"&&R==="<\/script")X="";R=R.slice(0,R.length-1);if(x==="style"&&R==="</style")X="";}}if(M===true&&i[f]==="]"){f=f-1;t=j.join("");t=t.replace(/\s+$/,"");d=0;$.token=t;a(e,$,"");break}if(k===false&&j.length>0&&(i[f]==="<"&&i[f+1]!=="="&&!/\s|\d/.test(i[f+1])||i[f]==="["&&i[f+1]==="%"||i[f]==="{"&&(y.language==="jsx"||i[f+1]==="{"||i[f+1]==="%"))){f=f-1;if(s.structure[s.structure.length-1][0]==="comment"){t=j.join("");}else {t=j.join("").replace(/\s+$/,"");}t=I(t);d=0;$.token=t;if(y.wrap>0&&y.markup.preserveText!==true){let ne=function(){if(t.charAt(L)===" "){ue.push(t.slice(0,L));t=t.slice(L+1);K=t.length;L=B;return}do{L=L-1;}while(L>0&&t.charAt(L)!==" ");if(L>0){ue.push(t.slice(0,L));t=t.slice(L+1);K=t.length;L=B;}else {L=B;do{L=L+1;}while(L<K&&t.charAt(L)!==" ");ue.push(t.slice(0,L));t=t.slice(L+1);K=t.length;L=B;}};let L=y.wrap;let K=t.length;const G="";const H="";const B=y.wrap;const ue=[];if(e.token[e.begin[s.count]]==="<a>"&&e.token[e.begin[e.begin[s.count]]]==="<li>"&&e.lines[e.begin[s.count]]===0&&s.linesSpace===0&&t.length<y.wrap){a(e,$,"");break}if(K<B){a(e,$,"");break}if(s.linesSpace<1){let fe=s.count;do{L=L-e.token[fe].length;if(e.types[fe].indexOf("attribute")>-1)L=L-1;if(e.lines[fe]>0&&e.types[fe].indexOf("attribute")<0)break;fe=fe-1;}while(fe>0&&L>0);if(L<1)L=t.indexOf(" ");}t=j.join("");t=t.replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ");do{ne();}while(L<K);if(t!==""&&t!==" ")ue.push(t);t=y.crlf===true?ue.join("\r\n"):ue.join("\n");t=G+t+H;}d=0;$.token=t;a(e,$,"");break}j.push(i[f]);f=f+1;}while(f<E)}if(f>F&&f<E){if(/\s/.test(i[f])===true){let R=f;s.linesSpace=1;do{if(i[R]==="\n")s.linesSpace=s.linesSpace+1;R=R-1;}while(R>F&&/\s/.test(i[R])===true)}else {s.linesSpace=0;}}else if(f!==F||f===F&&k===false){t=j.join("").replace(/\s+$/,"");d=0;if($.token!==t){$.token=t;a(e,$,"");s.linesSpace=0;}}k=false;}if(m>0){do{y.markup.attributeSortList[f]=y.markup.attributeSortList[f].replace(/^\s+/,"").replace(/\s+$/,"");f=f+1;}while(f<m);f=0;}if(y.language==="html"||y.language==="liquid")l="html";do{if(/\s/.test(i[f])){if(e.types[s.count]==="template_start"&&s.structure[s.structure.length-1][0]==="comment"){S();}else {f=s.spacer({array:i,end:E,index:f});}}else if(k){S();}else if(i[f]==="<"){W("");}else if(i[f]==="["&&i[f+1]==="%"){W("%]");}else if(i[f]==="{"&&(y.language==="jsx"||i[f+1]==="{"||i[f+1]==="%")){W("");}else if(i[f]==="]"&&n>0){W("]>");}else if(i[f]==="-"&&i[f+1]==="-"&&i[f+2]==="-"){W("---");}else {S();}f=f+1;}while(f<E);if(e.token[s.count].charAt(0)!=="/"&&h.has(s.structure[s.structure.length-1][0])){P(e.token[s.count],true);}if(T.end!==T.start&&s.error===""){if(T.end>T.start){const t=T.end-T.start;const d=t===1?"":"s";s.error=`\u2716 Prettify Parse Error:

  ${t} more end type${d} than start types.

`;}else {const t=T.start-T.end;const d=t===1?"":"s";s.error=` \u2716 Prettify Parse Error:

  ${t} more start type${d} than end types.

`;}}return e};_.beautify.markup=function v(u){const h=re(null);const r=re(null);const g=re(null);const y="markup";const e=_.parsed;const m=u.crlf===true?String.fromCharCode(13,10):String.fromCharCode(10);const T=_.end<1||_.end>e.token.length?e.token.length:_.end+1;h.is=(A,I)=>e.types[A]===I;h.not=(A,I)=>e.types[A]!==I;h.idx=(A,I)=>A>-1&&e.types[A].indexOf(I);r.is=(A,I)=>e.token[A]===I;r.not=(A,I)=>e.token[A]!==I;let i=_.start;let E=-1;let f=0;let n=0;let k=isNaN(u.indentLevel)?0:Number(u.indentLevel);const l=(()=>{const A=_.start>0?Array(_.start).fill(0,0,_.start):[];function I(){let t=i+1;let d=0;if(h.is(t,void 0))return t-1;if(h.is(t,"comment")||i<T-1&&h.idx(t,"attribute")>-1){do{if(h.is(t,"jsx_attribute_start")){d=t;do{if(h.is(t,"jsx_attribute_end")&&e.begin[t]===d)break;t=t+1;}while(t<T)}else if(h.not(t,"comment")&&h.idx(t,"attribute")<0)return t;t=t+1;}while(t<T)}return t}function a(){const t=e.begin[i];let d=i;do{d=d-1;if(r.is(d,"</li>")&&r.is(d-1,"</a>")&&e.begin[e.begin[d]]===t&&e.begin[d-1]===e.begin[d]+1){d=e.begin[d];}else {return}}while(d>t+1);d=i;do{d=d-1;if(h.is(d+1,"attribute")){A[d]=-10;}else if(r.not(d,"</li>")){A[d]=-20;}}while(d>t+1)}function z(){let t=i;let d=false;if(e.lines[i+1]===0&&u.markup.forceIndent===false){do{if(e.lines[t]>0){d=true;break}t=t-1;}while(t>E);t=i;}else {d=true;}if(d===true){const x=h.is(f,"comment")||h.is(f,"end")||h.is(f,"template_end")?k+1:k;do{A.push(x);t=t-1;}while(t>E);if(x===k+1)A[i]=k;if(h.is(t,"attribute")||h.is(t,"template_attribute")||h.is(t,"jsx_attribute_start")){A[e.begin[t]]=x;}else {A[t]=x;}}else {do{A.push(-20);t=t-1;}while(t>E);A[t]=-20;}E=-1;}function P(){let t=k;if(u.markup.forceIndent===true||u.markup.forceAttribute===true){A.push(k);return}if(f<T&&(h.idx(f,"end")>-1||h.idx(f,"start")>-1)&&e.lines[f]>0){A.push(k);t=t+1;if(e.types[i]==="singleton"&&i>0&&h.idx(i-1,"attribute")>-1&&h.is(e.begin[i-1],"singleton")){if(e.begin[i]<0||h.is(e.begin[i-1],"singleton")&&e.begin[e.ender[i]-1]!==i){A[i-1]=k;}else {A[i-1]=k+1;}}}else if(i>0&&h.is(i,"singleton")&&h.idx(i-1,"attribute")>-1){A[i-1]=k;n=e.token[i].length;A.push(-10);}else if(e.lines[f]===0){A.push(-20);}else if((u.wrap===0||i<T-2&&h.idx(i+2,"attribute")>-1&&e.token[i].length+e.token[i+1].length+e.token[i+2].length+1>u.wrap||e.token[i].length+e.token[i+1].length>u.wrap)&&(h.is(i+1,"singleton")||h.is(i+1,"template"))){A.push(k);}else {n=n+1;A.push(-10);}if(i>0&&h.idx(i-1,"attribute")>-1&&e.lines[i]<1){A[i-1]=-20;}if(n>u.wrap){let d=i;let x=Math.max(e.begin[i],0);if(h.is(i,"content")&&u.markup.preserveText===false){let j=0;const C=e.token[i].replace(/\s+/g," ").split(" ");do{d=d-1;if(A[d]<0){j=j+e.token[d].length;if(A[d]===-10)j=j+1;}else {break}}while(d>0);d=0;x=C.length;do{if(C[d].length+j>u.wrap){C[d]=m+C[d];j=C[d].length;}else {C[d]=` ${C[d]}`;j=j+C[d].length;}d=d+1;}while(d<x);if(C[0].charAt(0)===" "){e.token[i]=C.join("").slice(1);}else {A[i-1]=t;e.token[i]=C.join("").replace(m,"");}if(e.token[i].indexOf(m)>0){n=e.token[i].length-e.token[i].lastIndexOf(m);}}else {do{d=d-1;if(A[d]>-1){n=e.token[i].length;if(e.lines[i+1]>0)n=n+1;return}if(e.types[d].indexOf("start")>-1){n=0;return}if(e.lines[d+1]>0&&(h.not(d,"attribute")||h.is(d,"attribute")&&h.is(d+1,"attribute"))){if(h.not(d,"singleton")||h.is(d,"attribute")&&h.is(d+1,"attribute")){n=e.token[i].length;if(e.lines[i+1]>0)n=n+1;break}}}while(d>x);A[d]=t;}}}function W(){const t=i;do{if(e.lexer[i+1]===y&&e.begin[i+1]<t&&h.not(i+1,"start")&&h.not(i+1,"singleton"))break;A.push(0);i=i+1;}while(i<T);g[t]=i;A.push(k-1);f=I();if(e.lexer[f]===y&&e.stack[i].indexOf("attribute")<0&&(e.types[f]==="end"||e.types[f]==="template_end")){k=k-1;}}function S(){function t(R){const X=R.indexOf("=");if(X>0&&(X<R.indexOf('"')&&R.indexOf('"')>0||X<R.indexOf("'")&&R.indexOf("'")>0)){return [R.slice(0,X),R.slice(X+1)]}return [R,""]}function d(R){const X=t(R);const le=X[1].replace(/\s+/g,B=>B==="\n"?"\n":" ");const L=["=",le.slice(0,1)];let K=1;let G="";let H=0;do{if(le[K]==="{"&&(le[K+1]==="{"||le[K+1]==="%")){H=(le[K+1]==="%"?le.indexOf("%}",K+1):le.indexOf("}}",K+1))+2;G=le.slice(K,H);K=H;L.push([G]);}else {L.push(le[K]);K=K+1;}}while(K<le.length);return [X[0]+"=",L]}const x=i-1;function j(R){const X=d(e.token[R]);X.length;let L=1;let K=X[0].length;console.log(X);const G=t(e.token[R]);const H=G[1].replace(/\s+/g," ");let B=1;let ue=G[0]+"="+H.slice(0,1);let ne=0;do{K=K+X[L].length;if(H[B]==="{"&&(H[B+1]==="{"||H[B+1]==="%")){ne=(H[B+1]==="%"?H.indexOf("%}",B+1):H.indexOf("}}",B+1))+2;ue+=H.slice(B,ne);B=ne;}else {if(H[B]===" "){ue+="\n";}else {ue+=H[B];}B=B+1;}}while(B<H.length);e.token[R]=ue;return;}let C=i;let F=false;let M=false;let $=false;let q=e.token[x].length+1;let te=(()=>{if(h.idx(i,"start")>0){let R=i;do{if(e.types[R].indexOf("end")>0&&e.begin[R]===i){if(R<T-1&&h.idx(R+1,"attribute")>-1){F=true;break}}R=R+1;}while(R<T)}else if(i<T-1&&h.idx(i+1,"attribute")>-1){F=true;}if(h.is(f,"end")||h.is(f,"template_end")){if(h.is(x,"singleton"))return k+2;return k+1}if(h.is(x,"singleton"))return k+1;return k})();if(F===false&&h.is(i,"comment_attribute")){A.push(k);if(e.types[x]==="singleton"){A[x]=k+1;}else {A[x]=k;}return}if(te<1)te=1;do{n=n+e.token[i].length+1;if(e.types[i].indexOf("attribute")>0){if(h.is(i,"template_attribute")){A.push(te);}else if(e.types[i]==="comment_attribute"){A.push(te);}else if(e.types[i].indexOf("start")>0){$=true;if(i<T-2&&h.idx(i+2,"attribute")>0){A.push(-20);i=i+1;g[i]=i;}else {if(x===i-1&&F===false){A.push(te);}else {A.push(te+1);}if(e.lexer[i+1]!==y){i=i+1;W();}}}else if(e.types[i].indexOf("end")>0){if(A[i-1]!==-20)A[i-1]=A[e.begin[i]]-1;if(e.lexer[i+1]!==y){A.push(-20);}else {A.push(te);}}else {A.push(te);}M=true;}else if(e.types[i]==="attribute"){q=q+e.token[i].length+1;if(u.markup.preserveAttributes===true){if(e.lines[i]===2){A.push(te);}else if(e.lines[i]===1){A.push(-10);}}else if(u.markup.forceAttribute===true||$===true||i<T-1&&h.not(i+1,"template_attribute")&&h.idx(i+1,"attribute")>0){A.push(te);}else {A.push(te);}}else if(e.begin[i]<x+1){break}i=i+1;}while(i<T);i=i-1;if(A[i-1]>0&&h.idx(i,"end")>0&&h.idx(i,"attribute")>0&&h.not(x,"singleton")&&F===true){A[i-1]=A[i-1]-1;}if(A[i]!==-20){if(u.language==="jsx"&&h.idx(x,"start")>-1&&h.is(i+1,"script_start")){A[i]=te;}else {A[i]=A[x];}}if(u.markup.forceAttribute===true){n=0;A[x]=te;}else {A[x]=-10;}if(M===true||u.markup.preserveAttributes===true||r.is(x,"<%xml%>")||r.is(x,"<?xml?>")){n=0;return}C=i;if(C>x+1){if(u.markup.selfCloseSpace===false)q=q-1;if(q>u.wrap&&u.wrap>0&&u.markup.forceAttribute===false){n=e.token[i].length;do{if(e.token[C].length>u.wrap&&/\s/.test(e.token[C]))j(C);C=C-1;A[C]=te;}while(C>x)}}else if(u.wrap>0&&e.types[i]==="attribute"&&e.token[i].length>u.wrap&&/\s/.test(e.token[i])===true){j(i);}}do{if(e.lexer[i]===y){if(e.token[i].toLowerCase().indexOf("<!doctype")===0)A[i-1]=k;else if(e.types[i].indexOf("attribute")>-1){S();}else if(h.is(i,"comment")){if(E<0)E=i;if(h.not(i+1,"comment")||i>0&&h.idx(i-1,"end")>-1){z();}}else if(h.not(i,"comment")){f=I();if(h.is(f,"end")||h.is(f,"template_end")){k=k-1;if(h.is(f,"template_end")&&h.is(e.begin[f]+1,"template_else")){k=k-1;}if(r.is(i,"</ol>")||r.is(i,"</ul>")||r.is(i,"</dl>")){a();}}if(h.is(i,"script_end")&&h.is(i+1,"end")){if(e.lines[i+1]<1){A.push(-20);}else {A.push(-10);}}else if((u.markup.forceIndent===false||u.markup.forceIndent&&h.is(f,"script_start"))&&(h.is(i,"content")||h.is(i,"singleton")||h.is(i,"template"))){n=n+e.token[i].length;if(h.is(i,"template")){A.push(k);const t=e.token[i].indexOf(m);if(t>0){const d=A[i-1]*u.indentSize+(e.token[i].charCodeAt(2)===45?u.indentSize:u.indentSize-1);const x=[];let j=0;do{x.push(" ");j=j+1;}while(j<d);e.token[i]=e.token[i].replace(/^\s+/gm,"").replace(/\n/g,C=>{return C+x.join("")});}}else if(e.lines[f]>0&&h.is(f,"script_start")){A.push(-10);}else if(u.wrap>0&&(h.idx(i,"template")<0||f<T&&h.idx(i,"template")>-1&&h.idx(i,"template")<0)){P();}else if(f<T&&(h.idx(f,"end")>-1||h.idx(f,"start")>-1)&&(e.lines[f]>0||h.idx(i,"template_")>-1)){A.push(k);}else if(e.lines[f]===0){A.push(-20);}else {A.push(k);}}else if(h.is(i,"start")||h.is(i,"template_start")){k=k+1;if(h.is(i,"template_start")&&h.is(i+1,"template_else")){k=k+1;}if(u.language==="jsx"&&r.is(i+1,"{")){if(e.lines[i+1]===0){A.push(-20);}else {A.push(-10);}}else if(h.is(i,"start")&&h.is(f,"end")){A.push(-20);}else if(h.is(i,"start")&&h.is(f,"script_start")){A.push(-10);}else if(u.markup.forceIndent===true){A.push(k);}else if(h.is(i,"template_start")&&h.is(f,"template_end")){A.push(-20);}else if(e.lines[f]===0&&(h.is(f,"content")||h.is(f,"singleton")||h.is(f,"start")&&h.is(f,"template"))){A.push(-20);}else {A.push(k);}}else if(u.markup.forceIndent===false&&e.lines[f]===0&&(h.is(f,"content")||h.is(f,"singleton"))){A.push(-20);}else if(h.is(i+2,"script_end")){A.push(-20);}else if(h.is(i,"template_else")){if(h.is(f,"template_end")){A[i-1]=k+1;}else {A[i-1]=k-1;}A.push(k);}else {A.push(k);}}if(h.not(i,"content")&&h.not(i,"singleton")&&h.not(i,"template")&&h.not(i,"attribute")){n=0;}}else {n=0;W();}i=i+1;}while(i<T);return A})();return (()=>{const A=[];const I=(()=>{const t=[u.indentChar];const d=u.indentSize-1;let x=0;if(x<d){do{t.push(u.indentChar);x=x+1;}while(x<d)}return t.join("")})();function a(t){const d=[];const x=u.preserveLine+1;const j=Math.min(e.lines[i+1]-1,x);let C=0;if(t<0)t=0;do{d.push(m);C=C+1;}while(C<j);if(t>0){C=0;do{d.push(I);C=C+1;}while(C<t)}return d.join("")}function z(){let t=e.token[i].split(m);const d=e.lines[i+1];if(h.is(i,"comment"))t=t.map(F=>F.trimStart());const x=l[i-1]>-1?h.is(i,"attribute")?l[i-1]+1:l[i-1]:(()=>{let F=i-1;let M=F>-1&&h.idx(F,"start")>-1;if(l[i]>-1&&h.is(i,"attribute")){return l[i]+1}do{F=F-1;if(l[F]>-1){if(h.is(i,"content")&&M===false){return l[F]}else {return l[F]+1}}if(h.idx(F,"start")>-1)M=true;}while(F>0);return 1})();e.lines[i+1]=0;let j=0;const C=t.length-1;do{if(h.is(i,"comment")){if(t[j]!==""){if(t[j+1].trimStart()!==""){A.push(t[j],a(x));}else {A.push(t[j],"\n");}}else {if(t[j+1].trimStart()===""){A.push("\n");}else {A.push(a(x));}}}else if(h.is(i,"attribute")){A.push(t[j],a(x));}else {A.push(t[j],a(x));}j=j+1;}while(j<C);e.lines[i+1]=d;A.push(t[C]);if(l[i]===-10){A.push(" ");}else if(l[i]>-1){A.push(a(l[i]));}}function P(){const t=e.token[i];const d=/(\/|\?)?>$/;const x=d.exec(t);let j=i+1;let C=false;let F=u.markup.selfCloseSpace===true&&x!==null&&x[0]==="/>"?" ":"";if(x===null)return;e.token[i]=t.replace(d,"");do{if(h.is(j,"jsx_attribute_end")&&e.begin[e.begin[j]]===i){C=false;}else if(e.begin[j]===i){if(h.is(j,"jsx_attribute_start")){C=true;}else if(h.idx(j,"attribute")<0&&C===false){break}}else if(C===false&&(e.begin[j]<i||h.idx(j,"attribute")<0)){break}j=j+1;}while(j<T);if(h.is(j-1,"comment_attribute"))F=a(l[j-2]-1);e.token[j-1]=e.token[j-1]+F+x[0];if(h.is(j,"comment")&&e.lines[i+1]<2)l[i]=-10;}i=_.start;let W="";let S;S=u.indentLevel;do{if(e.lexer[i]===y){if((h.is(i,"start")||h.is(i,"singleton")||h.is(i,"xml")||h.is(i,"sgml"))&&h.idx(i,"attribute")<0&&i<T-1&&e.types[i+1]!==void 0&&h.idx(i+1,"attribute")>-1){P();}if(r.not(i,void 0)&&e.token[i].indexOf(m)>0&&(h.is(i,"content")&&u.markup.preserveText===false||h.is(i,"comment")||h.is(i,"attribute"))){z();}else {A.push(e.token[i]);if(l[i]===-10&&i<T-1){A.push(" ");}else if(l[i]>-1){A.push(a(l[i]));S=l[i];}}}else {if(g[i]===i&&h.not(i,"reference")){A.push(e.token[i]);}else {_.end=g[i];_.start=i;u.indentLevel=S;if(e.stack[i]==="schema"){W=_.beautify.script(_.options);A[A.length-1]="\n";}else if(e.stack[i]==="style"){W=_.beautify.style(_.options);A[A.length-1]="\n";}else if(e.stack[i]==="javascript"){u.indentLevel=S;W=_.beautify.script(_.options);A[A.length-1]="\n";}else {W=_.beautify.script(_.options);}A.push(W.replace(/\s+$/,""));if(l[_.iterator]>-1&&g[i]>i){A.push(a(l[_.iterator]));}i=_.iterator;u.indentLevel=0;}}i=i+1;}while(i<T);_.iterator=T-1;if(A[0]===m||A[0]===" ")A[0]="";return A.join("")})()};_.beautify.style=function v(u){const h=[];const r=_.parsed;const g=u.crlf===true?"\r\n":"\n";const y=_.end>0?_.end+1:r.token.length;const e=function k(){let l=0;const A=[];do{A.push(u.indentChar);l=l+1;}while(l<u.indentSize);return A.join("")}();const m=u.preserveLine+1;let T=u.indentLevel;let i=_.start;let E=["",""];const f=function k(l){const A=[];const I=function z(){if(i===y-1){return 1}if(r.lines[i+1]-1>m){return m}if(r.lines[i+1]>1){return r.lines[i+1]-1}return 1}();let a=0;if(l<0)l=0;do{A.push(g);a=a+1;}while(a<I);if(l>0){a=0;do{A.push(e);a=a+1;}while(a<l)}h.push(A.join(""));};const n=function k(){const l=r.begin[i];const A=r.token[l];const I=r.token[i];const a=[];let z=i;let P=0;let W;let S=0;if(l<0||z<=l)return;do{z=z-1;if(r.begin[z]===l){if(r.token[z]===":"){W=[z-1,0];do{z=z-1;if((r.token[z]===";"&&A==="{"||r.token[z]===","&&A==="(")&&r.begin[z]===l||r.token[z]===I&&r.begin[r.begin[z]]===l){break}if(r.types[z]!=="comment"&&r.types[z]!=="selector"&&r.token[z]!==A&&r.begin[z]===l){W[1]=r.token[z].length+W[1];}}while(z>l+1);if(W[1]>S)S=W[1];a.push(W);}}else if(r.types[z]==="end"){if(z<r.begin[z])break;z=r.begin[z];}}while(z>l);z=a.length;if(z<2)return;do{z=z-1;if(a[z][1]<S){P=a[z][1];do{r.token[a[z][0]]=r.token[a[z][0]]+" ";P=P+1;}while(P<S)}}while(z>0)};if(u.script.vertical===true&&u.style.compressCSS===false){i=y;do{i=i-1;if(r.token[i]==="}"||r.token[i]===")")n();}while(i>0);i=_.start;}do{if(r.types[i+1]==="end"||r.types[i+1]==="template_end"||r.types[i+1]==="template_else"){T=T-1;}if(r.types[i]==="template"&&r.lines[i]>0){h.push(r.token[i]);if(r.types[i-2]!=="property"&&r.types[i-1]!=="colon")f(T);}else if(r.types[i]==="template_else"){h.push(r.token[i]);T=T+1;f(T);}else if(r.types[i]==="start"||r.types[i]==="template_start"){T=T+1;h.push(r.token[i]);if(r.types[i+1]!=="end"&&r.types[i+1]!=="template_end"&&(u.style.compressCSS===false||u.style.compressCSS===true&&r.types[i+1]==="selector")){f(T);}}else if(r.token[i]===";"&&(u.style.compressCSS===false||u.style.compressCSS===true&&r.types[i+1]==="selector")||r.types[i]==="end"||r.types[i]==="template_end"||r.types[i]==="comment"){h.push(r.token[i]);if(r.types[i+1]==="value"){if(r.lines[i+1]===1){h.push(" ");}else if(r.lines[i+1]>1){f(T);}}else if(r.types[i+1]!=="separator"){if(r.types[i+1]!=="comment"||r.types[i+1]==="comment"&&r.lines[i+1]>1){f(T);}else {h.push(" ");}}}else if(r.token[i]===":"){h.push(r.token[i]);if(u.style.compressCSS===false)h.push(" ");}else if(r.types[i]==="selector"){if(u.style.classPadding===true&&r.types[i-1]==="end"&&r.lines[i]<3){h.push(g);}if(r.token[i].indexOf("and(")>0){r.token[i]=r.token[i].replace(/and\(/,"and (");h.push(r.token[i]);}else if(r.token[i].indexOf("when(")>0){E=r.token[i].split("when(");h.push(E[0].replace(/\s+$/,""));f(T+1);h.push(`when (${E[1]}`);}else {h.push(r.token[i]);}if(r.types[i+1]==="start"){if(u.script.braceAllman===true){f(T);}else if(u.style.compressCSS===false){h.push(" ");}}}else if(r.token[i]===","){h.push(r.token[i]);if(r.types[i+1]==="selector"||r.types[i+1]==="property"){f(T);}else if(u.style.compressCSS===false){h.push(" ");}}else if(r.stack[i]==="map"&&r.token[i+1]===")"&&i-r.begin[i]>5){h.push(r.token[i]);f(T);}else if(r.token[i]==="x;"){f(T);}else if((r.types[i]==="variable"||r.types[i]==="function")&&u.style.classPadding===true&&r.types[i-1]==="end"&&r.lines[i]<3){h.push(g);h.push(r.token[i]);}else if(r.token[i]!==";"||r.token[i]===";"&&(u.style.compressCSS===false||u.style.compressCSS===true&&r.token[i+1]!=="}")){h.push(r.token[i]);}i=i+1;}while(i<y);_.iterator=y-1;return h.join("")};function Ce(v,u=" "){if(v===0)return u;let h="";let r=1;do{h+=u;}while(r++<v);return h}function ve(v){const u=1024;const h=1048576;const r=1073741824;if(v<u)return v+" B";else if(v<h)return (v/u).toFixed(1)+" KB";else if(v<r)return (v/h).toFixed(1)+" MB";else return (v/r).toFixed(1)+" GB"}_.beautify.script=function v(u){const h=new Set(["ActiveXObject","ArrayBuffer","AudioContext","Canvas","CustomAnimation","DOMParser","DataView","Date","Error","EvalError","FadeAnimation","FileReader","Flash","Float32Array","Float64Array","FormField","Frame","Generator","HotKey","Image","Iterator","Intl","Int16Array","Int32Array","Int8Array","InternalError","Loader","Map","MenuItem","MoveAnimation","Notification","ParallelArray","Point","Promise","Proxy","RangeError","Rectangle","ReferenceError","Reflect","RegExp","ResizeAnimation","RotateAnimation","Set","SQLite","ScrollBar","Set","Shadow","StopIteration","Symbol","SyntaxError","Text","TextArea","Timer","TypeError","URL","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","URIError","WeakMap","WeakSet","Web","Window","XMLHttpRequest"]);const y=re(null);const e=_.parsed;const m="script";const T=_.scopes;const i=_.end<1||_.end>e.token.length?e.token.length:_.end+1;const E=(()=>{let n=_.start;let k=isNaN(u.indentLevel)?0:Number(u.indentLevel);let l=false;let A=false;let I="";let a="";let z=e.types[0];let P=e.token[0];const W=[-1];const S=[];const t=_.start>0?Array(_.start).fill(0,0,_.start):[];const d=[];const x=[[]];const j=[];const C=[];const F=[];const M=[false];const $=[];const q=[];function te(){R(false,false);const c=u.commentIndent===true?k:0;if(l===false&&/\/\u002a\s*global\s/.test(e.token[n])){const p=e.token[n].replace(/\/\u002a\s*global\s+/,"").replace(/\s*\u002a\/$/,"").split(",");let o=p.length;do{o=o-1;p[o]=p[o].replace(/\s+/g,"");if(p[o]!=="")T.push([p[o],-1]);}while(o>0)}if(e.types[n-1]==="comment"||e.types[n+1]==="comment"){t[n-1]=c;}else if(e.lines[n]<2){let p=n+1;if(e.types[p]==="comment"){do{p=p+1;}while(p<i&&e.types[p]==="comment")}if(n<i-1&&e.stack[p]!=="block"&&(e.token[p]==="{"||e.token[p]==="x{")){let o=T.length;e.begin.splice(n,0,e.begin[p]);e.ender.splice(n,0,e.ender[p]);e.lexer.splice(n,0,e.lexer[p]);e.lines.splice(n,0,e.lines[p]);e.stack.splice(n,0,e.stack[p]);e.token.splice(n,0,e.token[p]);e.types.splice(n,0,e.types[p]);if(o>0){do{o=o-1;if(T[o][1]===p){T[o][1]=n;}else if(T[o][1]<n){break}}while(o>0)}p=p+1;e.begin.splice(p,1);e.ender.splice(p,1);e.lexer.splice(p,1);e.lines.splice(p,1);e.stack.splice(p,1);e.token.splice(p,1);e.types.splice(p,1);o=n+1;do{e.begin[o]=n;e.stack[o]=e.stack[p];o=o+1;}while(o<p);o=o+1;do{if(e.begin[o]===e.begin[p]){e.begin[o]=n;if(e.types[o]==="end"){break}}o=o+1;}while(o<i-1);e.begin[p]=n;n=n-1;}else {t[n-1]=-10;if(e.stack[n]==="paren"||e.stack[n]==="method"){t.push(k+2);}else {t.push(k);}if(u.commentIndent===true&&t[n]>-1&&e.lines[n]<3){e.lines[n]=3;}}if(e.types[n+1]!=="comment")l=true;return}else if(e.token[n-1]===","){t[n-1]=c;}else if(P==="="&&e.types[n-1]!=="comment"&&/^(\/\*\*\s*@[a-z_]+\s)/.test(a)===true){t[n-1]=-10;}else if(P==="{"&&e.types[n-1]!=="comment"&&e.lines[0]<2){if(e.stack[n]==="function"){t[n-1]=c;}else {t[n-1]=/\n/.test(a)?c:-10;}}else {t[n-1]=c;}if(e.types[n+1]!=="comment")l=true;if(e.token[e.begin[n]]==="("){t.push(k+1);}else {t.push(k);}if(t[n]>-1&&e.lines[n]<3){if(e.types[n-1]==="comment"&&a.startsWith("//")){e.lines[n]=2;}else {e.lines[n]=3;}}if(u.script.commentNewline===true&&a.startsWith("//")===false&&e.lines[n]>=3){e.lines[n]=2;}}function R(c,p){let o=n-1;let b=c===true?0:1;const w=x[x.length-1]===void 0?[]:x[x.length-1];const N=p===false&&e.stack[n]==="array"&&c===true&&a!=="[";if(C[C.length-1]===false||e.stack[n]==="array"&&u.script.arrayFormat==="inline"||e.stack[n]==="object"&&u.script.objectIndent==="inline"){return}C[C.length-1]=false;do{if(e.types[o]==="end"){b=b+1;}else if(e.types[o]==="start"){b=b-1;}if(e.stack[o]==="global"){break}if(b===0){if(e.stack[n]==="class"||e.stack[n]==="map"||N===false&&(c===false&&e.token[o]!=="("&&e.token[o]!=="x("||c===true&&e.token[o]===",")){if(e.types[o+1]==="template_start"){if(e.lines[o]<1){t[o]=-20;}else {t[o]=k-1;}}else if(w.length>0&&w[w.length-1]>-1){t[o]=k-1;}else {t[o]=k;}}else if(e.stack[n]==="array"&&e.types[n]==="operator"){if(e.token[o]===",")t[o]=k;if(o===e.begin[n])break}if(c===false)break}if(b<0){if(e.types[o+1]==="template_start"||e.types[o+1]==="template_string_start"){if(e.lines[o]<1){t[o]=-20;}else {t[o]=k-1;}}else if(w.length>0&&w[w.length-1]>-1){t[o]=k-1;}else {t[o]=k;}break}o=o-1;}while(o>-1)}function X(){const c=x[x.length-1]===void 0?[]:x[x.length-1];const p=()=>{let o=n;let b=false;const w=e.begin[o];do{o=o-1;if(e.lexer[o]==="markup"){b=true;break}if(e.begin[o]!==w)o=e.begin[o];}while(o>w);if(b===true){o=n;do{o=o-1;if(e.begin[o]!==w){o=e.begin[o];}else if(e.token[o]===","){t[o]=k+1;}}while(o>w);t[w]=k+1;t[n-1]=k;}else {t[n-1]=-20;}};if(a===")"&&e.token[n+1]==="."&&c[c.length-1]>-1&&e.token[c[0]]!==":"){let o=e.begin[n];let b=false;let w=false;do{o=o-1;}while(o>0&&t[o]<-9);b=t[o]===k;o=n+1;do{o=o+1;if(e.token[o]==="{"){w=true;break}if(e.begin[o]===e.begin[n+1]&&(e.types[o]==="separator"||e.types[o]==="end")){break}}while(o<i);if(b===false&&w===true&&x.length>1){x[x.length-2].push(e.begin[n]);k=k+1;}}if(z!=="separator")K();if(e.token[n+1]===","&&(e.stack[n]==="object"||e.stack[n]==="array")){R(true,false);}if(e.token[e.begin[n]-1]===","&&(e.token[n+1]==="}"||e.token[n+1]==="]")&&(e.stack[n]==="object"||e.stack[n]==="array")){R(true,false);}if(e.stack[n]!=="attribute"){if(a!==")"&&a!=="x)"&&(e.lexer[n-1]!=="markup"||e.lexer[n-1]==="markup"&&e.token[n-2]!=="return")){k=k-1;}if(a==="}"&&e.stack[n]==="switch"&&u.script.noCaseIndent===false){k=k-1;}}if(a==="}"||a==="x}"){if(e.types[n-1]!=="comment"&&P!=="{"&&P!=="x{"&&z!=="end"&&z!=="string"&&z!=="number"&&z!=="separator"&&P!=="++"&&P!=="--"&&(n<2||e.token[n-2]!==";"||e.token[n-2]!=="x;"||P==="break"||P==="return")){let o=n-1;let b=false;const w=e.begin[n];const N=S.length;do{if(e.begin[o]===w){if(e.token[o]==="="||e.token[o]===";"||e.token[o]==="x;"){b=true;}if(e.token[o]==="."&&t[o-1]>-1){C[C.length-1]=false;t[w]=k+1;t[n-1]=k;break}if(o>0&&e.token[o]==="return"&&(e.token[o-1]===")"||e.token[o-1]==="x)"||e.token[o-1]==="{"||e.token[o-1]==="x{"||e.token[o-1]==="}"||e.token[o-1]==="x}"||e.token[o-1]===";"||e.token[o-1]==="x;")){k=k-1;t[n-1]=k;break}if(e.token[o]===":"&&d.length===0||e.token[o]===","&&b===false){break}if(o===0||e.token[o-1]==="{"||e.token[o-1]==="x{"||e.token[o]==="for"||e.token[o]==="if"||e.token[o]==="do"||e.token[o]==="function"||e.token[o]==="while"||e.token[o]==="var"||e.token[o]==="let"||e.token[o]==="const"||e.token[o]==="with"){if(S[N-1]===false&&N>1&&(n===i-1||e.token[n+1]!==")"&&e.token[n+1]!=="x)")&&e.stack[n]!=="object"){k=k-1;}break}}else {o=e.begin[o];}o=o-1;}while(o>w)}W.pop();}if(u.script.bracePadding===false&&a!=="}"&&z!=="markup"){t[n-1]=-20;}if(u.script.bracePadding===true&&z!=="start"&&P!==";"&&(t[e.begin[n]]<-9||C[C.length-1]===true)){t[e.begin[n]]=-10;t[n-1]=-10;t.push(-20);}else if(e.stack[n]==="attribute"){t[n-1]=-20;t.push(k);}else if(e.stack[n]==="array"&&(c.length>0||j[j.length-1]===true)){le();C[C.length-1]=false;t[e.begin[n]]=k+1;t[n-1]=k;t.push(-20);}else if((e.stack[n]==="object"||e.begin[n]===0&&a==="}")&&c.length>0){le();C[C.length-1]=false;t[e.begin[n]]=k+1;t[n-1]=k;t.push(-20);}else if(a===")"||a==="x)"){const o=a===")"&&P!=="("&&q.length>0?q.pop()+1:0;const b=e.token[e.begin[n]-1]==="if"?(()=>{let w=n;do{w=w-1;if(e.token[w]===")"&&t[w-1]>-1)return o}while(w>e.begin[n]);return o+5})():o;if(o>0&&(u.language!=="jsx"||u.language==="jsx"&&e.token[e.begin[n]-1]!=="render")){const w=u.wrap;const N=e.begin[n];const O=q.length;let D=n-2;if(b>w){t[e.begin[n]]=k+1;t[n-1]=k;do{if(e.begin[D]===N){if(e.token[D]==="&&"||e.token[D]==="||"){t[D]=k+1;}else if(t[D]>-1&&e.types[D]!=="comment"&&e.token[D+1]!=="."){t[D]=t[D]+1;}}else if(t[D]>-1&&e.token[D+1]!=="."){t[D]=t[D]+1;}D=D-1;}while(D>N)}else if(O>0){q[O-1]=q[O-1]+o;}}else if(a===")"&&n>e.begin[n]+2&&e.lexer[e.begin[n]+1]===m&&e.token[e.begin[n]+1]!=="function"){const w=e.begin[n]<0?0:e.begin[n];const N=u.wrap;const O=c.length;let D=0;let Z=0;let U=0;let J=0;let ie=0;let Q=false;let ce=false;let Y=k+1;let se=false;let he=false;let ee=false;if(t[w]<-9){Z=w;do{Z=Z+1;}while(Z<n&&t[Z]<-9);J=Z;do{D=D+e.token[Z].length;if(t[Z]===-10)D=D+1;if(e.token[Z]==="("&&U>0&&U<N-1&&J===n){U=-1;}if(e.token[Z]===")"){ie=ie-1;}else if(e.token[Z]==="("){ie=ie+1;}if(Z===w&&ie>0)U=D;Z=Z-1;}while(Z>w&&t[Z]<-9);if(e.token[Z+1]===".")Y=t[Z]+1;if(D>N-1&&N>0&&P!=="("&&U!==-1&&C[C.length-2]===false){if(e.token[w-1]==="if"&&S[S.length-1]===true||e.token[w-1]!=="if"){t[w]=Y;if(e.token[w-1]==="for"){Z=w;do{Z=Z+1;if(e.token[Z]===";"&&e.begin[Z]===w){t[Z]=Y;}}while(Z<n)}}}}Z=n;D=0;do{Z=Z-1;if(e.stack[Z]==="function"){Z=e.begin[Z];}else if(e.begin[Z]===w){if(e.token[Z]==="?"){ee=true;}else if(e.token[Z]===","&&Q===false){Q=true;if(D>=N&&N>0)se=true;}else if(e.types[Z]==="markup"&&he===false){he=true;}if(t[Z]>-9&&e.token[Z]!==","&&e.types[Z]!=="markup"){D=0;}else {if(t[Z]===-10)D=D+1;D=D+e.token[Z].length;if(D>=N&&N>0&&(Q===true||he===true)){se=true;}}}else {if(t[Z]>-9){D=0;}else {D=D+e.token[Z].length;if(D>=N&&N>0&&(Q===true||he===true)){se=true;}}}}while(Z>w&&se===false);if(Q===false&&e.token[e.begin[n]+1].charAt(0)==="`"){t[e.begin[n]]=-20;t[n-1]=-20;}else if((Q===true||he===true)&&D>=N&&N>0||t[w]>-9){if(ee===true){Y=t[w];if(e.token[w-1]==="["){Z=n;do{Z=Z+1;if(e.types[Z]==="end"||e.token[Z]===","||e.token[Z]===";"){break}}while(Z<i);if(e.token[Z]==="]"){Y=Y-1;ce=true;}}}else if(O>0&&c[O-1]>Z){Y=Y-O;}C[C.length-1]=false;Z=n;do{Z=Z-1;if(e.begin[Z]===w){if(e.token[Z].indexOf("=")>-1&&e.types[Z]==="operator"&&e.token[Z].indexOf("!")<0&&e.token[Z].indexOf("==")<0&&e.token[Z]!=="<="&&e.token[Z].indexOf(">")<0){D=Z;do{D=D-1;if(e.begin[D]===w&&(e.token[D]===";"||e.token[D]===","||D===w)){break}}while(D>w)}else if(e.token[Z]===","){t[Z]=Y;}else if(t[Z]>-9&&ce===false&&(e.token[w-1]!=="for"||e.token[Z+1]==="?"||e.token[Z+1]===":")&&(e.token[e.begin[n]]!=="("||e.token[Z]!=="+")){t[Z]=t[Z]+1;}}else if(t[Z]>-9&&ce===false){t[Z]=t[Z]+1;}}while(Z>w);t[w]=Y;t[n-1]=Y-1;}else {t[n-1]=-20;}if(e.token[e.begin[n]-1]==="+"&&t[e.begin[n]]>-9){t[e.begin[n]-1]=-10;}}else if(u.language==="jsx"){p();}else {t[n-1]=-20;}t.push(-20);}else if(C[C.length-1]===true){if(a==="]"&&e.begin[n]-1>0&&e.token[e.begin[e.begin[n]-1]]==="["){C[C.length-2]=false;}if(e.begin[n]<t.length)t[e.begin[n]]=-20;if(u.language==="jsx"){p();}else if(a==="]"&&t[e.begin[n]]>-1){t[n-1]=t[e.begin[n]]-1;}else {t[n-1]=-20;}t.push(-20);}else if(e.types[n-1]==="comment"&&e.token[n-1].substring(0,2)==="//"){if(e.token[n-2]==="x}")t[n-3]=k+1;t[n-1]=k;t.push(-20);}else if(e.types[n-1]!=="comment"&&(P==="{"&&a==="}"||P==="["&&a==="]")){t[n-1]=-20;t.push(-20);}else if(a==="]"){if(S[S.length-1]===true&&C[C.length-1]===false&&u.script.arrayFormat!=="inline"||P==="]"&&t[n-2]===k+1){t[n-1]=k;t[e.begin[n]]=k+1;}else if(t[n-1]===-10){t[n-1]=-20;}if(e.token[e.begin[n]+1]==="function"){t[n-1]=k;}else if(S[S.length-1]===false){if(P==="}"||P==="x}")t[n-1]=k;let o=n-1;let b=1;do{if(e.token[o]==="]")b=b+1;if(e.token[o]==="["){b=b-1;if(b===0){if(o>0&&(e.token[o+1]==="{"||e.token[o+1]==="x{"||e.token[o+1]==="[")){t[o]=k+1;break}if(e.token[o+1]!=="["||A===false){t[o]=-20;break}break}}if(b===1&&e.token[o]==="+"&&t[o]>1){t[o]=t[o]-1;}o=o-1;}while(o>-1)}else if(u.language==="jsx"){p();}if(u.script.arrayFormat==="inline"){let o=n;const b=e.begin[n];do{o=o-1;if(e.types[o]==="end")break}while(o>b);if(o>b){t[e.begin[n]]=k+1;t[n-1]=k;}else {t[e.begin[n]]=-20;t[n-1]=-20;}}else if(t[e.begin[n]]>-1){t[n-1]=t[e.begin[n]]-1;}t.push(-20);}else if(a==="}"||a==="x}"||S[S.length-1]===true){if(a==="}"&&P==="x}"&&e.token[n+1]==="else"){t[n-2]=k+2;t.push(-20);}else {t.push(k);}t[n-1]=k;}else {t.push(-20);}if(e.types[n-1]==="comment")t[n-1]=k;if(u.script.inlineReturn&&u.attemptCorrection===false&&a==="x}"&&(e.stack[n]==="if"||e.stack[n]==="else")&&e.token[e.begin[e.begin[n-1]-1]-2]!=="else"){t[n-1]=-20;}le();A=S[S.length-1];S.pop();x.pop();j.pop();F.pop();$.pop();C.pop();M.pop();}function le(){let c=0;const p=x[x.length-1];if(p===void 0)return;c=p.length-1;if(c<1&&p[c]<0&&(a===";"||a==="x;"||a===")"||a==="x)"||a==="}"||a==="x}")){p.pop();return}if(c<0||p[c]<0)return;if(a===":"){if(e.token[p[c]]!=="?"){do{p.pop();c=c-1;k=k-1;}while(c>-1&&p[c]>-1&&e.token[p[c]]!=="?")}p[c]=n;t[n-1]=k;}else {do{p.pop();c=c-1;k=k-1;}while(c>-1&&p[c]>-1)}if((e.stack[n]==="array"||a===",")&&p.length<1)p.push(-1);}function L(){const c=n;do{if(e.lexer[n+1]===m&&e.begin[n+1]<c)break;if(e.token[c-1]==="return"&&e.types[n]==="end"&&e.begin[n]===c)break;t.push(0);n=n+1;}while(n<i);y[c]=n;t.push(k-1);}function K(){let c=n-1;const p=e.begin[n];if(k<1)return;do{if(p!==e.begin[c]){c=e.begin[c];}else {if(e.types[c]==="separator"||e.types[c]==="operator"){if(e.token[c]==="."&&t[c-1]>0){if(e.token[p-1]==="if"){k=k-2;}else {k=k-1;}}break}}c=c-1;}while(c>0&&c>p)}function G(){if(e.token[n+1]!==","&&a.indexOf("/>")!==a.length-2||e.token[n+1]===","&&e.token[e.begin[n]-3]!=="React"){R(false,false);}if(P==="return"||P==="?"||P===":"){t[n-1]=-10;t.push(-20);}else if(z==="start"||e.token[n-2]==="return"&&e.stack[n-1]==="method"){t.push(k);}else {t.push(-20);}}function H(){const c=x[x.length-1]===void 0?[]:x[x.length-1];function p(){const o=e.token[n+1];let b=0;let w=0;let N=n;let O=a==="+"?k+2:k;let D=0;if(u.wrap<1){t.push(-10);return}do{N=N-1;if(e.token[e.begin[n]]==="("){if(N===e.begin[n]){D=b;}if(e.token[N]===","&&e.begin[N]===e.begin[n]&&S[S.length-1]===true){break}}if(b>u.wrap-1)break;if(t[N]>-9)break;if(e.types[N]==="operator"&&e.token[N]!=="="&&e.token[N]!=="+"&&e.begin[N]===e.begin[n]){break}b=b+e.token[N].length;if(N===e.begin[n]&&e.token[N]==="["&&b<u.wrap-1){break}if(e.token[N]==="."&&t[N]>-9)break;if(t[N]===-10)b=b+1;}while(N>0);if(D>0)D=D+o.length;b=b+o.length;w=N;if(b>u.wrap-1&&t[N]<-9){do{w=w-1;}while(w>0&&t[w]<-9)}if(e.token[w+1]==="."&&e.begin[n]<=e.begin[w]){O=O+1;}else if(e.types[w]==="operator"){O=t[w];}w=o.length;if(b+w<u.wrap){t.push(-10);return}if(e.token[e.begin[n]]==="("&&(e.token[c[0]]===":"||e.token[c[0]]==="?")){O=k+3;}else if(e.stack[n]==="method"){t[e.begin[n]]=k;if(S[S.length-1]===true){O=k+3;}else {O=k+1;}}else if(e.stack[n]==="object"||e.stack[n]==="array"){R(true,false);}if(e.token[N]==="var"||e.token[N]==="let"||e.token[N]==="const"){b=b-u.indentSize*u.indentChar.length*2;}if(D>0){N=u.wrap-D;}else {N=u.wrap-b;}if(N>0&&N<5){t.push(O);if(e.token[n].charAt(0)==='"'||e.token[n].charAt(0)==="'"){n=n+1;t.push(-10);}return}if(e.token[e.begin[n]]!=="("||D>u.wrap-1||D===0){if(D>0)b=D;if(b-o.length<u.wrap-1&&(o.charAt(0)==='"'||o.charAt(0)==="'")){n=n+1;b=b+3;if(b-o.length>u.wrap-4){t.push(O);return}t.push(-10);return}t.push(O);return}t.push(-10);}K();if(c.length>0&&c[c.length-1]>-1&&e.stack[n]==="array"){j[j.length-1]=true;}if(a!==":"){if(e.token[e.begin[n]]!=="("&&e.token[e.begin[n]]!=="x("&&C.length>0){R(true,false);}if(a!=="?"&&e.token[c[c.length-1]]==="."){let o=0;let b=n;const w=e.begin[b];do{if(e.begin[b]===w){if(e.token[b+1]==="{"||e.token[b+1]==="["||e.token[b]==="function"){break}if(e.token[b]===","||e.token[b]===";"||e.types[b]==="end"||e.token[b]===":"){c.pop();k=k-1;break}if(e.token[b]==="?"||e.token[b]===":"){if(e.token[c[c.length-1]]==="."&&o<2)c[c.length-1]=w+1;break}if(e.token[b]===".")o=o+1;}b=b+1;}while(b<i)}}if(a==="!"||a==="..."){if(P==="}"||P==="x}")t[n-1]=k;t.push(-20);return}if(P===";"||P==="x;"){if(e.token[e.begin[n]-1]!=="for")t[n-1]=k;t.push(-20);return}if(a==="*"){if(P==="function"||P==="yield"){t[n-1]=-20;}else {t[n-1]=-10;}t.push(-10);return}if(a==="?"){if(e.lines[n]===0&&e.types[n-2]==="word"&&e.token[n-2]!=="return"&&e.token[n-2]!=="in"&&e.token[n-2]!=="instanceof"&&e.token[n-2]!=="typeof"&&(z==="reference"||z==="word")){if(e.types[n+1]==="word"||e.types[n+1]==="reference"||(e.token[n+1]==="("||e.token[n+1]==="x(")&&e.token[n-2]==="new"){t[n-1]=-20;if(e.types[n+1]==="word"||e.types[n+1]==="reference"){t.push(-10);return}t.push(-20);return}}if(e.token[n+1]===":"){t[n-1]=-20;t.push(-20);return}d.push(n);if(u.script.ternaryLine===true){t[n-1]=-10;}else {let o=n-1;do{o=o-1;}while(o>-1&&t[o]<-9);c.push(n);k=k+1;if(t[o]===k&&e.token[o+1]!==":"){k=k+1;c.push(n);}t[n-1]=k;if(e.token[e.begin[n]]==="("&&(c.length<2||c[0]===c[1])){C[C.length-1]=false;if(n-2===e.begin[n]){t[e.begin[n]]=k-1;}else {t[e.begin[n]]=k;}o=n-2;do{if(e.types[o]==="end"&&t[o-1]>-1)break;if(t[o]>-1)t[o]=t[o]+1;o=o-1;}while(o>e.begin[n])}}t.push(-10);return}if(a===":"){if(e.stack[n]==="map"||e.types[n+1]==="type"||e.types[n+1]==="type_start"){t[n-1]=-20;t.push(-10);return}if(d.length>0&&e.begin[d[d.length-1]]===e.begin[n]){let o=n;const b=e.begin[n];do{o=o-1;if(e.begin[o]===b){if(e.token[o]===","||e.token[o]===";"){t[n-1]=-20;break}if(e.token[o]==="?"){d.pop();le();if(u.script.ternaryLine===true)t[n-1]=-10;t.push(-10);return}}else if(e.types[o]==="end"){o=e.begin[o];}}while(o>b)}if(e.token[n-2]==="where"&&e.stack[n-2]===e.stack[n]){t[n-1]=-10;t.push(-10);return}if(z==="reference"&&e.token[e.begin[n]]!=="("&&e.token[e.begin[n]]!=="x("){t[n-1]=-20;t.push(-10);return}if((P===")"||P==="x)")&&e.token[e.begin[n-1]-2]==="function"){t[n-1]=-20;t.push(-10);return}if(e.stack[n]==="attribute"){t[n-1]=-20;t.push(-10);return}if(e.token[e.begin[n]]!=="("&&e.token[e.begin[n]]!=="x("&&(z==="reference"||P===")"||P==="]"||P==="?")&&(e.stack[n]==="map"||e.stack[n]==="class"||e.types[n+1]==="reference")&&(d.length===0||d[d.length-1]<e.begin[n])&&("mapclassexpressionmethodglobalparen".indexOf(e.stack[n])>-1||e.types[n-2]==="word"&&e.stack[n]!=="switch")){t[n-1]=-20;t.push(-10);return}if(e.stack[n]==="switch"&&(d.length<1||d[d.length-1]<e.begin[n])){t[n-1]=-20;if(u.script.caseSpace===true){t.push(-10);}else {t.push(k);}return}if(e.stack[n]==="object"){t[n-1]=-20;}else if(d.length>0){t[n-1]=k;}else {t[n-1]=-10;}t.push(-10);return}if(a==="++"||a==="--"){if(z==="number"||z==="reference"){t[n-1]=-20;t.push(-10);}else if(n<i-1&&(e.types[n+1]==="number"||e.types[n+1]==="reference")){t.push(-20);}else {t.push(-10);}return}if(a==="+"){if(z==="start"){t[n-1]=-20;}else {t[n-1]=-10;}if(u.wrap<1||e.token[e.begin[n]]==="x("){t.push(-10);return}const o=e.token[n+1];if(o===void 0){t.push(-10);return}if(e.types[n-1]==="operator"||e.types[n-1]==="start"){if(e.types[n+1]==="reference"||o==="("||o==="["){t.push(-20);return}if(Number(o.slice(1,-1))>-1&&(/\d/.test(o.charAt(1))===true||o.charAt(1)==="."||o.charAt(1)==="-"||o.charAt(1)==="+")){t.push(-20);return}}return p()}if(e.types[n-1]!=="comment"){if(P==="("){t[n-1]=-20;}else if(a==="*"&&e.stack[n]==="object"&&e.types[n+1]==="reference"&&(P==="{"||P===",")){t[n-1]=k;}else if(a!=="?"||d.length===0){t[n-1]=-10;}}if(a.indexOf("=")>-1&&a!=="=="&&a!=="==="&&a!=="!="&&a!=="!=="&&a!==">="&&a!=="<="&&a!=="=>"&&e.stack[n]!=="method"&&e.stack[n]!=="object"){let o=n+1;let b=0;let w=false;let N="";if((e.token[e.begin[n]]==="("||e.token[e.begin[n]]==="x(")&&e.token[n+1]!=="function"){return}do{if(e.types[o]==="start"){if(w===true&&e.token[o]!=="["){if(M[M.length-1]===true){M[M.length-1]=false;}break}b=b+1;}if(e.types[o]==="end")b=b-1;if(b<0){if(M[M.length-1]===true){M[M.length-1]=false;}break}if(b===0){N=e.token[o];if(w===true){if(e.types[o]==="operator"||e.token[o]===";"||e.token[o]==="x;"||e.token[o]==="?"||e.token[o]==="var"||e.token[o]==="let"||e.token[o]==="const"){if(N!==void 0&&(N==="?"||N.indexOf("=")>-1&&N!=="=="&&N!=="==="&&N!=="!="&&N!=="!=="&&N!==">="&&N!=="<=")){if(M[M.length-1]===false){M[M.length-1]=true;}}if((N===";"||N==="x;"||N==="var"||N==="let"||N==="const")&&M[M.length-1]===true){M[M.length-1]=false;}break}if(M[M.length-1]===true&&(N==="return"||N==="break"||N==="continue"||N==="throw")){M[M.length-1]=false;}}if(N===";"||N==="x;"||N===",")w=true;}o=o+1;}while(o<i);t.push(-10);return}if(a==="-"&&P==="return"||P==="="){t.push(-20);return}if(z==="operator"&&e.types[n+1]==="reference"&&P!=="--"&&P!=="++"&&a!=="&&"&&a!=="||"){t.push(-20);return}return p()}function B(){const c=()=>{let p=e.begin[n];if(p<0){T.push([e.token[n],-1]);}else {if(e.stack[p+1]!=="function"){do{p=e.begin[p];}while(p>-1&&e.stack[p+1]!=="function")}T.push([e.token[n],p]);}};if(e.types[n-1]==="comment"){t[n-1]=k;}else if(z==="end"&&P!==")"&&e.token[e.begin[n-1]-1]!==")"){t[n-1]=-10;}else if(z!=="separator"&&z!=="start"&&z!=="end"&&z.indexOf("template_string")<0){if(z==="word"||z==="operator"||z==="property"||z==="type"||z==="reference"){t[n-1]=-10;}else {t[n-1]=-20;}}if(P==="var"&&e.lexer[n-1]===m){c();}else if(P==="function"){T.push([e.token[n],n]);}else if(P==="let"||P==="const"){T.push([e.token[n],n]);}else if(e.stack[n]==="arguments"){T.push([e.token[n],n]);}else if(P===","){let p=n;do{p=p-1;}while(p>e.begin[n]&&e.token[p]!=="var"&&e.token[p]!=="let"&&e.token[p]!=="const");if(e.token[p]==="var"){c();}else if(e.token[p]==="let"||e.token[p]==="const"){T.push([e.token[n],n]);}}t.push(-10);}function ue(){const c=x[x.length-1]===void 0?[]:x[x.length-1];const p=()=>{if(u.script.methodChain>0){let o=n;let b=e.begin[n];const w=[n];const N=e.token[b-1]==="if";do{o=o-1;if(e.types[o]==="end")o=e.begin[o];if(e.begin[o]===b){if(e.types[o]==="string"&&e.token[o].indexOf("${")===e.token[o].length-2){break}if(e.token[o]==="."){if(t[o-1]>0){t[n-1]=N===true?k+1:k;return}w.push(o);}else if(e.token[o]===";"||e.token[o]===","||e.types[o]==="operator"||(e.types[o]==="word"||e.types[o]==="reference")&&(e.types[o-1]==="word"||e.types[o-1]==="reference")){break}}}while(o>b);if(w.length<u.script.methodChain){t[n-1]=-20;return}o=0;b=w.length;do{t[w[o]-1]=N===true?k+1:k;o=o+1;}while(o<b);o=w[w.length-1]-1;do{if(t[o]>-1)t[o]=t[o]+1;o=o+1;}while(o<n);k=N===true?k+2:k+1;}t[n-1]=k;};if(a==="::"){t[n-1]=-20;t.push(-20);return}if(a==="."){if(e.token[e.begin[n]]!=="("&&e.token[e.begin[n]]!=="x("&&c.length>0){if(e.stack[n]==="object"||e.stack[n]==="array"){R(true,false);}else {R(false,false);}}if(u.script.methodChain===0){t[n-1]=-20;}else if(u.script.methodChain<0){if(e.lines[n]>0){p();}else {t[n-1]=-20;}}else {p();}t.push(-20);return}if(a===","){K();if(S[S.length-1]===false&&(e.stack[n]==="object"||e.stack[n]==="array"||e.stack[n]==="paren"||e.stack[n]==="expression"||e.stack[n]==="method")){S[S.length-1]=true;if(e.token[e.begin[n]]==="("){let o=n;do{o=o-1;if(e.begin[o]===e.begin[n]&&e.token[o]==="+"&&t[o]>-9){t[o]=t[o]+2;}}while(o>e.begin[n])}}if(e.stack[n]==="array"&&u.script.arrayFormat==="indent"){t[n-1]=-20;t.push(k);return}if(e.stack[n]==="array"&&u.script.arrayFormat==="inline"){t[n-1]=-20;t.push(-10);return}if(e.stack[n]==="object"&&u.script.objectIndent==="indent"){t[n-1]=-20;t.push(k);return}if(e.stack[n]==="object"&&u.script.objectIndent==="inline"){t[n-1]=-20;t.push(-10);return}if(c.length>0){if(c[c.length-1]>-1)le();t[n-1]=-20;t.push(k);return}if(e.token[n-2]===":"&&e.token[n-4]==="where"){t[n-1]=-20;t.push(-10);return}t[n-1]=-20;if(e.types[n+1]!=="end"){F[F.length-1]=F[F.length-1]+1;}if((e.token[e.begin[n]]==="("||e.token[e.begin[n]]==="x(")&&u.language!=="jsx"&&e.stack[n]!=="global"&&(e.types[n-1]!=="string"&&e.types[n-1]!=="number"||e.token[n-2]!=="+"||e.types[n-1]==="string"&&e.types[n-1]!=="number"&&e.token[n-2]==="+"&&e.types[n-3]!=="string"&&e.types[n-3]!=="number")){t.push(-10);return}if(z==="reference"&&e.types[n-2]==="word"&&"var-let-const-from".indexOf(e.token[n-2])<0&&(e.types[n-3]==="end"||e.token[n-3]===";")){$[$.length-1]=true;t.push(-10);return}if($[$.length-1]===true||e.stack[n]==="notation"){t.push(-10);return}if(F[F.length-1]>3&&(e.stack[n]==="array"||e.stack[n]==="object")){if(C[C.length-1]===true)R(true,true);t[n-1]=-20;if(j[j.length-1]===true){t.push(k);return}const o=e.begin[n];let b=n;do{if(e.types[b]==="end"){b=e.begin[b];}else {if(e.token[b]===","&&e.types[b+1]!=="comment"){t[b]=k;}}b=b-1;}while(b>o);t[o]=k;j[j.length-1]=true;return}if(e.stack[n]==="object"){if(C[C.length-1]===true&&e.types[e.begin[n]-1]!=="word"&&e.types[e.begin[n]-1]!=="reference"&&e.token[e.begin[n]-1]!=="("&&e.token[e.begin[n]-1]!=="x("){const o=e.begin[n];let b=n-1;do{if(e.begin[b]===o){if(e.token[b]===",")break;if(e.token[b]===":"){R(true,false);break}}b=b-1;}while(b>o)}}if(C[C.length-1]===false||e.token[n-2]==="+"&&(z==="string"||z==="number")&&t[n-2]>0&&(P.charAt(0)==='"'||P.charAt(0)==="'")){if(e.stack[n]==="method"){if(e.token[n-2]==="+"&&(P.charAt(0)==='"'||P.charAt(0)==="'")&&(e.token[n-3].charAt(0)==='"'||e.token[n-3].charAt(0)==="'")){t.push(k+2);return}if(e.token[n-2]!=="+"){t.push(-10);return}}t.push(k);return}if(C[C.length-1]===true&&e.stack[n]!=="object"){t.push(-10);return}if(F[F.length-1]<4&&(e.stack[n]==="array"||e.stack[n]==="object")){t.push(-10);return}t.push(k);return}if(a===";"||a==="x;"){K();if(e.token[n+1]!==void 0&&e.types[n+1].indexOf("attribute")>0&&e.types[n+1].indexOf("end")>0){t[n-1]=-20;t.push(k-1);return}if(W[W.length-1]>-1&&e.stack[W[W.length-1]]!=="expression"){let o=n;do{o=o-1;if(e.token[o]===";")break;if(e.token[o]===","){k=k-1;break}if(e.types[o]==="end")o=e.begin[o];}while(o>0&&o>e.begin[n])}W[W.length-1]=-1;le();if(e.token[e.begin[n]-1]!=="for")R(false,false);$[$.length-1]=false;t[n-1]=-20;if(e.begin[n]>0&&e.token[e.begin[n]-1]==="for"&&e.stack[n]!=="for"){t.push(-10);return}t.push(k);return}t.push(-20);}function ne(){const c=e.stack[n+1];const p=n===0?e.stack[n]:e.stack[n-1];if(P===")"||(p==="object"||p==="array")&&P!=="]"){if(c!=="method"||c==="method"&&e.token[n+1]!==")"&&e.token[n+2]!==")"){if(P===")"&&(c!=="function"||e.token[e.begin[e.begin[n-1]-1]]==="("||e.token[e.begin[e.begin[n-1]-1]]==="x(")){R(false,false);}else if(e.types[n+1]!=="end"&&e.types[n+2]!=="end"){R(true,false);}}}S.push(false);x.push([]);M.push(false);j.push(false);$.push(false);F.push(0);if(u.script.neverFlatten===true||c==="array"&&u.script.arrayFormat==="indent"||c==="attribute"||z==="generic"||c==="class"&&P!=="("&&P!=="x("||a==="["&&e.token[n+1]==="function"){C.push(false);}else {if(c==="expression"||c==="method"){C.push(true);}else if((c==="object"||c==="class")&&(P==="("||P==="x("||z==="word"||z==="reference")){C.push(true);}else if(c==="array"||a==="("||a==="x("){C.push(true);}else if(a==="{"&&c==="object"&&z!=="operator"&&z!=="start"&&z!=="string"&&z!=="number"&&p!=="object"&&p!=="array"&&n>0){C.push(true);}else {C.push(false);}}if(a!=="("&&a!=="x("&&e.stack[n+1]!=="attribute"){k=k+1;}if(a==="{"||a==="x{"){W.push(-1);if(e.types[n-1]!=="comment"){if(z==="markup"){t[n-1]=k;}else if(u.script.braceAllman===true&&z!=="operator"&&P!=="return"){t[n-1]=k-1;}else if(e.stack[n+1]!=="block"&&(c==="function"||P===")"||P==="x)"||P===","||P==="}"||z==="markup")){t[n-1]=-10;}else if(P==="{"||P==="x{"||P==="["||P==="}"||P==="x}"){t[n-1]=k-1;}}if(c==="object"){if(u.script.objectIndent==="indent"){C[C.length-1]=false;t.push(k);return}if(u.script.objectIndent==="inline"){C[C.length-1]=true;t.push(-20);return}}if(c==="switch"){if(u.script.noCaseIndent===true){t.push(k-1);return}k=k+1;t.push(k);return}if(C[C.length-1]===true){if(z!=="word"&&z!=="reference"){t.push(-20);return}}t.push(k);return}if(a==="("||a==="x("){if(u.wrap>0&&a==="("&&e.token[n+1]!==")"){q.push(1);}if(P==="-"&&(e.token[n-2]==="("||e.token[n-2]==="x(")){t[n-2]=-20;}if(z==="end"&&p!=="if"&&p!=="for"&&p!=="catch"&&p!=="else"&&p!=="do"&&p!=="try"&&p!=="finally"&&p!=="catch"){if(e.types[n-1]==="comment"){t[n-1]=k;}else {t[n-1]=-20;}}if(P==="async"){t[n-1]=-10;}else if(c==="method"||e.token[n-2]==="function"&&z==="reference"){if(P==="import"||P==="in"||u.script.functionNameSpace===true){t[n-1]=-10;}else if(P==="}"&&e.stack[n-1]==="function"||z==="word"||z==="reference"||z==="property"){t[n-1]=-20;}else if(p!=="method"&&c!=="method"){t[n-1]=k;}}if(P==="+"&&(e.token[n-2].charAt(0)==='"'||e.token[n-2].charAt(0)==="'")){t.push(k);return}if(P==="}"||P==="x}"){t.push(-20);return}if(P==="-"&&(n<2||e.token[n-2]!==")"&&e.token[n-2]!=="x)"&&e.token[n-2]!=="]"&&e.types[n-2]!=="reference"&&e.types[n-2]!=="string"&&e.types[n-2]!=="number")||u.script.functionSpace===false&&P==="function"){t[n-1]=-20;}t.push(-20);return}if(a==="["){if(P==="[")S[S.length-2]=true;if(P==="return"||P==="var"||P==="let"||P==="const"){t[n-1]=-10;}else if(e.types[n-1]!=="comment"&&e.stack[n-1]!=="attribute"&&(z==="end"||z==="word"||z==="reference")){t[n-1]=-20;}else if(P==="["||P==="{"||P==="x{"){t[n-1]=k-1;}if(e.stack[n]==="attribute"){t.push(-20);return}if(u.script.arrayFormat==="indent"){C[C.length-1]=false;t.push(k);return}if(u.script.arrayFormat==="inline"){C[C.length-1]=true;t.push(-20);return}if(c==="method"||C[C.length-1]===true){t.push(-20);return}let o=n+1;do{if(e.token[o]==="]"){t.push(-20);return}if(e.token[o]===","){t.push(k);return}o=o+1;}while(o<i);t.push(-20);}}function fe(){if(a.length===1){t.push(-20);if(e.lines[n]===0)t[n-1]=-20;}else if(a.indexOf("#!/")===0){t.push(k);}else {t.push(-10);}if((P===","||z==="start")&&(e.stack[n]==="object"||e.stack[n]==="array")&&C[C.length-1]===false&&n>0){t[n-1]=k;}}function Ae(){if(I==="template_else"){t[n-1]=k-1;t.push(k);}else if(I==="template_start"){k=k+1;if(e.lines[n-1]<1)t[n-1]=-20;if(e.lines[n]>0||P.length===1&&z==="string"){t.push(k);}else {t.push(-20);}}else if(I==="template_end"){k=k-1;if(z==="template_start"||e.lines[n-1]<1){t[n-1]=-20;}else {t[n-1]=k;}if(e.lines[n]>0){t.push(k);}else {t.push(-20);}}else if(I==="template"){if(e.lines[n]>0){t.push(k);}else {t.push(-20);}}}function xe(){if(I==="template_string_start"){k=k+1;t.push(k);}else if(I==="template_string_else"){K();t[n-1]=k-1;t.push(k);}else {K();k=k-1;t[n-1]=k;t.push(-10);}if(n>2&&(e.types[n-2]==="template_string_else"||e.types[n-2]==="template_string_start")){if(u.script.bracePadding===true){t[n-2]=-10;t[n-1]=-10;}else {t[n-2]=-20;t[n-1]=-20;}}}function me(){if(e.token[n-1]===","||e.token[n-1]===":"&&e.stack[n-1]!=="data_type"){t[n-1]=-10;}else {t[n-1]=-20;}if(e.types[n]==="type"||e.types[n]==="type_end"){t.push(-10);}if(e.types[n]==="type_start"){t.push(-20);}}function V(){if((P===")"||P==="x)")&&e.stack[n]==="class"&&(e.token[e.begin[n-1]-1]==="static"||e.token[e.begin[n-1]-1]==="final"||e.token[e.begin[n-1]-1]==="void")){t[n-1]=-10;t[e.begin[n-1]-1]=-10;}if(P==="]")t[n-1]=-10;if(a==="else"&&P==="}"){if(e.token[n-2]==="x}")t[n-3]=t[n-3]-1;if(u.script.braceAllman===true||u.script.elseNewline===true){t[n-1]=k;}}if(a==="new"&&h.has(e.token[n+1]));if(a==="from"&&z==="end"&&n>0&&(e.token[e.begin[n-1]-1]==="import"||e.token[e.begin[n-1]-1]===",")){t[n-1]=-10;}if(a==="function"){if(u.script.functionSpace===false&&n<i-1&&(e.token[n+1]==="("||e.token[n+1]==="x(")){t.push(-20);return}t.push(-10);return}if(P==="-"&&n>1){if(e.types[n-2]==="operator"||e.token[n-2]===","){t[n-1]=-20;}else if(e.types[n-2]==="start"){t[n-2]=-20;t[n-1]=-20;}}else if(a==="while"&&(P==="}"||P==="x}")){let c=n-1;let p=0;do{if(e.token[c]==="}"||e.token[c]==="x}")p=p+1;if(e.token[c]==="{"||e.token[c]==="x{")p=p-1;if(p===0){if(e.token[c-1]==="do"){t[n-1]=-10;break}t[n-1]=k;break}c=c-1;}while(c>-1)}else if(a==="in"||(a==="else"&&u.script.elseNewline===false&&u.script.braceAllman===false||a==="catch")&&(P==="}"||P==="x}")){t[n-1]=-10;}else if(a==="var"||a==="let"||a==="const"){W[W.length-1]=n;if(z==="end")t[n-1]=k;if(e.token[e.begin[n]-1]!=="for"){let c=n+1;let p=0;do{if(e.types[c]==="end")p=p-1;if(e.types[c]==="start")p=p+1;if(p<0||p===0&&(e.token[c]===";"||e.token[c]===",")){break}c=c+1;}while(c<i);if(e.token[c]===",")k=k+1;}t.push(-10);return}if((a==="default"||a==="case")&&z!=="word"&&e.stack[n]==="switch"){t[n-1]=k-1;t.push(-10);return}if(a==="catch"&&P==="."){t[n-1]=-20;t.push(-20);return}if(a==="catch"||a==="finally"){t[n-1]=-10;t.push(-10);return}if(u.script.bracePadding===false&&n<i-1&&e.token[n+1].charAt(0)==="}"){t.push(-20);return}if(e.stack[n]==="object"&&(P==="{"||P===",")&&(e.token[n+1]==="("||e.token[n+1]==="x(")){t.push(-20);return}if(e.types[n-1]==="comment"&&e.token[e.begin[n]]==="("){t[n-1]=k+1;}if(u.script.inlineReturn){if(e.stack[n]==="if"&&a==="return"&&(P==="x{"||P==="{")){const c=e.begin.lastIndexOf(e.begin[n-1],n-3);if(e.token[c-2]==="else"){if(P==="x{")e.token[n-1]="{";if(e.token[e.ender[n]]==="x}")e.token[e.ender[n]]="}";e.lines[e.ender[n]]=e.lines[e.ender[n]]-1;}else {if(e.token[e.ender[n-1]+2]!=="if"&&e.token[e.ender[n-1]+1]!=="else"){t[n-1]=-20;if(P==="{")e.token[n-1]="x{";if(e.token[e.ender[n]]==="}")e.token[e.ender[n]]="x}";}else if(e.token[e.ender[n-1]+2]!=="if"&&e.token[e.ender[n-1]+1]!=="x{"){t[n-1]=-20;e.lines[e.ender[n-1]+2]=e.lines[e.ender[n-1]+2]-1;if(e.token[n-1]==="{")e.token[n-1]="x{";if(e.token[e.ender[n]]==="}")e.token[e.ender[n]]="x}";if(e.token[e.ender[n-1]+2]==="{")e.token[e.ender[n-1]+2]="x{";}}}if((P==="x}"||P==="}")&&(e.stack[n-1]==="if"&&a==="else"&&(e.token[n+1]==="{"||e.token[n+1]==="x{")&&e.token[n+2]==="return")){if(e.token[n-2]==="x;")e.token[n-2]=";";}if(P==="x{"&&a==="return"&&e.stack[n]==="else"){t[n-1]=-20;if(e.token[e.ender[n-1]-1]==="x;")e.token[e.ender[n-1]-1]=";";e.lines[e.ender[n-1]]=e.lines[e.ender[n-1]]-1;e.lines[e.ender[n]+1]=e.lines[e.ender[n]+1]-1;}if(P==="x}"&&a==="else"&&e.token[n+1]==="x{"&&e.token[n+2]==="return"&&e.token[e.ender[n]-1]==="}"){e.token[e.ender[n]-1]="x}";}}t.push(-10);}do{if(e.lexer[n]===m){I=e.types[n];a=e.token[n];if(I==="comment"){te();}else if(I==="regex"){t.push(-20);}else if(I==="string"){fe();}else if(I.indexOf("template_string")===0){xe();}else if(I==="separator"){ue();}else if(I==="start"){ne();}else if(I==="end"){X();}else if(I==="type"||I==="type_start"||I==="type_end"){me();}else if(I==="operator"){H();}else if(I==="word"){V();}else if(I==="reference"){B();}else if(I==="markup"){G();}else if(I.indexOf("template")===0){Ae();}else if(I==="generic"){if(P!=="return"&&P.charAt(0)!=="#"&&z!=="operator"&&P!=="public"&&P!=="private"&&P!=="static"&&P!=="final"&&P!=="implements"&&P!=="class"&&P!=="void"){t[n-1]=-20;}if(e.token[n+1]==="("||e.token[n+1]==="x("){t.push(-20);}else {t.push(-10);}}else {t.push(-10);}if(I!=="comment"){z=I;P=a;}if(q.length>0&&e.token[n]!==")"){if(e.types[n]==="comment"&&q[q.length-1]>-1){q[q.length-1]=u.wrap+1;}else if(t[n]>-1||e.token[n].charAt(0)==="`"&&e.token[n].indexOf("\n")>0){q[q.length-1]=-1;}else if(q[q.length-1]>-1){q[q.length-1]=q[q.length-1]+e.token[n].length;if(t[n]===-10)q[q.length-1]=q[q.length-1]+1;}}}else {L();}n=n+1;}while(n<i);return t})();const f=(()=>{const n=[];const k=(()=>{const t=[];const d=u.indentChar;let x=u.indentSize;if(typeof x!=="number"||x<1)return "";do{t.push(d);x=x-1;}while(x>0);return t.join("")})();const l=u.crlf===true?"\r\n":"\n";const A=u.preserveLine+1;const I=["x;","x}","x{","x(","x)"];let a=_.start;let z="";u.indentLevel;function W(t){const d=[];const x=(()=>{if(a===i-1)return 1;if(e.lines[a+1]-1>A)return A;if(e.lines[a+1]>1)return e.lines[a+1]-1;return 1})();let j=0;if(t<0)t=0;do{d.push(l);j=j+1;}while(j<x);if(t>0){j=0;do{d.push(k);j=j+1;}while(j<t)}return d.join("")}if(u.script.vertical===true){let t=function(d){let x=0;let j=0;let C=d-1;let F=0;let M=0;const $=e.begin[a];const q=[];do{if((e.begin[C]===$||e.token[C]==="]"||e.token[C]===")")&&(e.token[C+1]===":"&&e.stack[C]==="object"||e.token[C+1]==="=")){F=C;j=0;do{if(e.begin[F]===$){if(e.token[F]===","||e.token[F]===";"||e.token[F]==="x;"||E[F]>-1&&e.types[F]!=="comment"){if(e.token[F+1]==="."){j=j+u.indentSize*u.indentChar.length;}break}}else if(E[F]>-1){break}if(e.types[F]!=="comment"){if(E[F-1]===-10)j=j+1;j=e.token[F].length+j;}F=F-1;}while(F>$);M=F;if(e.token[M]===","&&e.token[C+1]==="="){do{if(e.types[M]==="end")M=e.begin[M];if(e.begin[M]===$){if(e.token[M]===";"||e.token[M]==="x;")break;if(e.token[M]==="var"||e.token[M]==="const"||e.token[M]==="let"){j=j+u.indentSize*u.indentChar.length;break}}M=M-1;}while(M>$)}if(j>x)x=j;q.push([C,j]);C=F;}else if(e.types[C]==="end"){C=e.begin[C];}C=C-1;}while(C>$);C=q.length;if(C>0){do{C=C-1;F=q[C][1];if(F<x){do{e.token[q[C][0]]=e.token[q[C][0]]+" ";F=F+1;}while(F<x)}}while(C>0)}};a=i;do{a=a-1;if(e.lexer[a]==="script"){if(e.token[a]==="}"&&e.token[a-1]!=="{"&&E[e.begin[a]]>0){t(a);}}else {a=e.begin[a];}}while(a>0)}a=_.start;do{if(e.lexer[a]===m||_.beautify[e.lexer[a]]===void 0){if(e.types[a]==="comment"&&u.commentIndent===true){if(/\n/.test(e.token[a])){const t=e.begin[a]>-1?e.token[a].charAt(2)==="*"?Ce(E[a],k)+u.indentChar:Ce(E[a],k):u.indentChar;const d=e.token[a].split(/\n/);let x=1;do{d[x]=t+d[x].trimLeft();x=x+1;}while(x<d.length);e.token.splice(a,1,d.join("\n"));}}if(I.indexOf(e.token[a])<0){if(e.token[a]!==";"||u.script.noSemicolon===false){n.push(e.token[a]);}else if(E[a]<0&&e.types[a+1]!=="comment"){n.push(";");}}if(a<i-1&&e.lexer[a+1]!==m&&e.begin[a]===e.begin[a+1]&&e.types[a+1].indexOf("end")<0&&e.token[a]!==","){n.push(" ");}else if(E[a]>-1){if((E[a]>-1&&e.token[a]==="{"||E[a]>-1&&e.token[a+1]==="}")&&e.lines[a]<3&&u.script.braceNewline===true){if(e.lines[a+1]<3)n.push(W(0));}n.push(W(E[a]));E[a];}else if(E[a]===-10){n.push(" ");if(e.lexer[a+1]!==m);}}else {if(y[a]===a){n.push(e.token[a]);}else {_.end=y[a];_.start=a;z=_.beautify[e.lexer[a]](u);n.push(z.replace(/\s+$/,""));a=_.iterator;if(E[a]===-10){n.push(" ");}else if(E[a]>-1){n.push(W(E[a]));}u.indentLevel=0;}}a=a+1;}while(a<i);_.iterator=i-1;return n.join("")})();return f};var Qe={};Be(Qe,{format:()=>_e,language:()=>ye,options:()=>je,parse:()=>tt});var Pe=[{pattern:/[a-z-]+:(?!:).+;/,type:"keyword"},{pattern:/<(\/)?style>/,type:"not"}];var Ne=[{pattern:/<!DOCTYPE (html|HTML PUBLIC .+)>/,type:"meta.module",nearTop:true},{pattern:/<[a-z0-9]+(\s*[\w]+=('|").+('|")\s*)?>.*<\/[a-z0-9]+>/g,type:"keyword"},{pattern:/<!--(.*)(-->)?/,type:"comment.block"},{pattern:/[a-z-]+=("|').+("|')/g,type:"keyword.other"},{pattern:/{[{%][\s\S]*?[%}]}/g,type:"not"},{pattern:/{%-?\s*(end)?(schema|style(sheet)?|javascript)\s*-?%}/,type:"not",deterministic:"liquid"}];var Ie=[{pattern:/<!DOCTYPE (html|HTML PUBLIC .+)>/,type:"meta.module",nearTop:true},{pattern:/<[a-z0-9]+(\s*[\w]+=('|").+('|")\s*)?>.*<\/[a-z0-9]+>/g,type:"keyword"},{pattern:/<!--(.*)(-->)?/,type:"comment.block"},{pattern:/[a-z-]+=("|').+("|')/g,type:"keyword.other"},{pattern:/{[{%][\s\S]*?[%}]}/g,type:"keyword",deterministic:"liquid",unless:/\/.*?{[{%][\s\S]*?[%}]}.*\//},{pattern:/{%-?\s*(end)?(schema|style(sheet)?|javascript)\s*-?%}/,type:"meta.module",deterministic:"liquid"}];var qe=[{pattern:/^[{[]$/,type:"meta.module",nearTop:true},{pattern:/^\s*".+":\s*(".+"|[0-9]+|null|true|false)(,)?$/,type:"keyword"},{pattern:/^\s*".+":\s*(\{|\[)$/,type:"keyword"},{pattern:/^\s*".+":\s*\{(\s*".+":\s*(".+"|[0-9]+|null|true|false)(,)?\s*){1,}\}(,)?$/,type:"keyword"},{pattern:/\s*".+"\s*\[\s*((".+"|[0-9]+|null|true|false)(,)?\s*){1,}\](,)?$/,type:"keyword"}];var ze=[{pattern:/^( )*([A-Za-z0-9_. ]+):( )?(.*)?$/,type:"keyword"},{pattern:/^( )*-( )([A-Za-z0-9_. ]+):( )?(.*)?$/,type:"keyword"},{pattern:/^( )*-( )(.*)$/,type:"keyword"},{pattern:/^( )*([A-Za-z0-9_. ]+):( )!!binary( )?(|)?$/,type:"constant.type"},{pattern:/^( )*([A-Za-z0-9_. ]+):( )\|$/,type:"keyword"},{pattern:/^( )*([A-Za-z0-9_. ]+):( )>$/,type:"keyword"},{pattern:/^( )*\?( )(.*)$/,type:"keyword"},{pattern:/^( )*\?( )\|$/,type:"constant.type"},{pattern:/^( )*<<:( )(\*)(.*)?$/,type:"constant.type"},{pattern:/^( )*([A-Za-z0-9_. ]+):(.*)?( )?{$/,type:"not"},{pattern:/^( )*([A-Za-z0-9_. ]+):(.*)?( )?,$/,type:"not"}];var Re=[{pattern:/undefined/g,type:"keyword"},{pattern:/window\./g,type:"keyword"},{pattern:/console\.log\s*\(/,type:"keyword.print"},{pattern:/(var|const|let)\s+\w+\s*=?/,type:"keyword.variable"},{pattern:/(('|").+('|")\s*|\w+):\s*[{[]/,type:"constant.array"},{pattern:/===/g,type:"keyword.operator"},{pattern:/!==/g,type:"keyword.operator"},{pattern:/function\*?\s*([A-Za-z$_][\w$]*)?\s*[(][^:;()]*[)]\s*{/g,type:"keyword.function"},{pattern:/\(* => {/g,type:"keyword.function"},{pattern:/null/g,type:"constant.null"},{pattern:/\(.*\)\s*=>\s*.+/,type:"keyword.control"},{pattern:/(else )?if\s+\(.+\)/,type:"keyword.control"},{pattern:/while\s+\(.+\)/,type:"keyword.control"},{pattern:/\*\w+/,type:"not"},{pattern:/(var|const|let)\s+\w+:\s*(string|number|boolean|string)(?:\[\])?/,type:"not"},{pattern:/(interface|type)\s+\w+?/,type:"not"},{pattern:/(declare|namespace)\s+\w+?/,type:"not"},{pattern:/<(\/)?script\s*(type=('|")text\/javascript('|"))?>/,type:"not"},{pattern:/<(\/)?style>/,type:"not"},{pattern:/fn\s[A-Za-z0-9<>,]+\(.*\)\s->\s\w+(\s\{|)/,type:"not"},{pattern:/{[{%][\s\S]*?[%}]}/g,type:"not"},{pattern:/{%-?\s*(end)?(schema|style(sheet)?|javascript)\s*-?%}/,type:"not",deterministic:"liquid"}];var Ee=[{pattern:/undefined/g,type:"keyword"},{pattern:/window\./g,type:"keyword"},{pattern:/console\.log\s*\(/,type:"keyword.print"},{pattern:/(var|const|let)\s+\w+\s*=?/,type:"keyword.variable"},{pattern:/(('|").+('|")\s*|\w+):\s*[{[]/,type:"constant.array"},{pattern:/===/g,type:"keyword.operator"},{pattern:/!==/g,type:"keyword.operator"},{pattern:/function\*?\s*([A-Za-z$_][\w$]*)?\s*[(][^:;()]*[)]\s*{/g,type:"keyword.function"},{pattern:/\(* => {/g,type:"keyword.function"},{pattern:/null/g,type:"constant.null"},{pattern:/\(.*\)\s*=>\s*.+/,type:"keyword.control"},{pattern:/(else )?if\s+\(.+\)/,type:"keyword.control"},{pattern:/while\s+\(.+\)/,type:"keyword.control"},{pattern:/\*\w+/,type:"not"},{pattern:/<(\/)?script( type=('|")text\/javascript('|"))?>/,type:"not"},{pattern:/<(\/)?style>/,type:"not"},{pattern:/fn\s[A-Za-z0-9<>,]+\(.*\)\s->\s\w+(\s\{|)/,type:"not"},{pattern:/{[{%][\s\S]*?[%}]}/g,type:"not"},{pattern:/{%-?\s*(end)?(schema|style(sheet)?|javascript)\s*-?%}/,type:"not",deterministic:"liquid"},{pattern:/(var|const|let)\s+\w+:\s*(string|number|boolean|string|any)(\[\])?/,type:"keyword.variable"},{pattern:/(\(\s*)?\w+:\s*(string|number|boolean|string|any)(\[\])?(\s*\))?/,type:"keyword.other"},{pattern:/\):\s*(\w+)(\[\])?\s*(=>|\{)\s*/,type:"keyword.function"},{pattern:/(interface|type)\s+\w+?/,type:"keyword.other"},{pattern:/(declare|namespace)\s+\w+?/,type:"keyword.other"},{pattern:/as\s+\w+?/,type:"keyword.other"}];var Te=[{pattern:/^(#){2,6}\s.+/,type:"keyword"},{pattern:/^(?!!)(=|-){2,}(?<!>)$/,type:"meta.module"},{pattern:/(!)?\[.+\]\(.+\)/,type:"keyword"},{pattern:/\[.+\]\[.+\]/,type:"keyword"},{pattern:/^\[.+\]:\s?(<)?(http)?/,type:"keyword"},{pattern:/^(> .*)+/,type:"macro"},{pattern:/^```([A-Za-z0-9#_]+)?$/,type:"keyword"},{pattern:/^---$/,type:"meta.module",nearTop:true}];var Ge={node:"javascript",jsc:"javascript",deno:"typescript"};var De={css:Pe,html:Ne,liquid:Ie,javascript:Re,typescript:Ee,json:qe,markdown:Te,yaml:ze};function We(v){let u=v.replace(/\r\n?/g,"\n").replace(/\n{2,}/g,"\n").split("\n");if(u.length>500){u=u.filter((m,T)=>{if(Me(T,u))return true;return T%Math.ceil(u.length/500)===0});}if(u[0].startsWith("#!")){if(u[0].startsWith("#!/usr/bin/env")){let m;m=u[0].split(" ").slice(1).join(" ");m=Ge[m]||m.charAt(0).toUpperCase()+m.slice(1);return {language:m,statistics:{},linesOfCode:u.length}}if(u[0].startsWith("#!/bin/bash")){return {language:"javascript",statistics:{},linesOfCode:u.length}}}const h=ge(De).map(m=>({language:m,checkers:De[m]}));const r=[];const g=h.reduce((m,{language:T,checkers:i})=>{m[T]=i.filter(E=>"deterministic"in E);return m},{});for(let m=0;m<h.length;m++){const{language:T,checkers:i}=h[m];let E=0;for(let f=0;f<u.length;f++){if(/^\s*$/.test(u[f]))continue;if(T in g){const n=Xe(u[f],i);if(n){return {language:n,statistics:{},linesOfCode:f}}}if(!Me(f,u)){E+=Fe(u[f],i.filter(n=>!n.nearTop));}else {E+=Fe(u[f],i);}}r.push({language:T,points:E});}const y=r.reduce((m,T)=>m.points>=T.points?m:T,{points:0,language:""});const e={};for(let m=0;m<r.length;m++)e[r[m].language]=r[m].points;return {language:y.language,statistics:e,linesOfCode:u.length}}function Xe(v,u){for(const{pattern:h,deterministic:r,unless:g=null}of u){if(h.test(v)&&g!==null&&!g.test(v)){return r}}return false}function Ye(v){switch(v){case"keyword.print":case"meta.import":case"meta.module":return 5;case"keyword.function":case"constant.null":return 4;case"constant.type":case"constant.string":case"constant.numeric":case"constant.boolean":case"constant.dictionary":case"constant.array":case"keyword.variable":return 3;case"section.scope":case"keyword.other":case"keyword.operator":case"keyword.control":case"keyword.visibility":case"keyword":return 2;case"comment.block":case"comment.line":case"comment.documentation":case"macro":return 1;case"not":default:return -20}}function Fe(v,u){const h=u.map(r=>{if(r.pattern.test(v))return Ye(r.type);return 0});return h.reduce((r,g)=>r+g,0)}function Me(v,u){if(u.length<=10)return true;return v<u.length/10}var pe=re(null);var ke=re(null);{pe.markup="markup";pe.html="markup";pe.liquid="markup";pe.js="script";pe.ts="script";pe.javascript="script";pe.typescript="script";pe.json="script";pe.jsx="script";pe.tsx="script";pe.less="style";pe.scss="style";pe.sass="style";pe.css="style";pe.text="text";pe.xml="markup";ke.javascript="JavaScript";ke.json="JSON";ke.jsx="JSX";ke.html="HTML";ke.liquid="Liquid";ke.markup="markup";ke.scss="SCSS";ke.text="Plain Text";ke.typescript="TypeScript";}function Oe(v){if(typeof v!=="string")return "script";if(v.indexOf("html")>-1)return "markup";if(pe[v]===void 0)return "script";return pe[v]}function Ze(v){if(typeof v!=="string"||ke[v]===void 0)return v.toUpperCase();return ke[v]}function Ke(v){const u=re(null);u.language=v;u.languageName=Ze(v);u.lexer=Oe(v);return u}ye.reference=Ke;ye.listen=function(v){_.hooks.language.push(v);};function ye(v){const{language:u}=We(v);const h=re(null);h.language=u;h.languageName=Ze(u);h.lexer=Oe(u);if(_.hooks.language.length>0){for(const r of _.hooks.language){const g=r(h);if(typeof g==="object")be(h,g);}}return h}function Ue(v){const u=v.definitions;const h=v.source.search(/((\/(\*|\/))|{%-?\s*comment\s*-?%}|<!--)\s*@format\s*(\w+)?\s*{\s+/);const r=v.source.search(/((\/(\*|\/))|{%-?\s*comment\s*-?%}|<!--)\s*@prettify-ignore\b/);const g=ge(u);const y=g.length;let e=0;if(r>-1&&v.source.slice(0,r).trimStart()==="")return false;if(h>-1&&(h===0||`"':`.indexOf(v.source.charAt(h-1))<0)){let d=function(){if(f.charAt(k-1)!=="\\")return false;let x=k;do{x=x-1;}while(x>0&&f.charAt(x)==="\\");return (k-x)%2===0};const i=[];const E=h;const f=v.source;const n=f.length;let k=E;let l=0;let A="";let I="";let a="";let z="";let P=[];let W=[];let S;let t;if(f.charAt(k)==="<"){t="<!--";}else if(f.charAt(k+1)==="/"){t="//";}else if(f.charAt(k+1)==="%"){S=f.indexOf("}",k+1);if(f[S-1].charCodeAt(0)===37)t=f.slice(k,S+1);}else {t="/*";}do{if(f.slice(k-7,k)==="@format")break;k=k+1;}while(k<n);do{if(d()===false){if(A===""){if(f.charAt(k)==='"'||f.charAt(k)==="'"||f.charAt(k)==="`"){A=f.charAt(k);if(i.length>0&&i[i.length-1].charAt(i[i.length-1].length-1)===":")l=k;}else if(/\s/.test(f.charAt(k))===false&&l===0){l=k;}else if(f.charAt(k)===","||/\s/.test(f.charAt(k))===true&&l>0){I=f.slice(l,k);if(i.length>0){if(i.length>0&&I===":"&&i[i.length-1].indexOf(":")<0){i[i.length-1]=i[i.length-1]+I;l=k;}else if(i.length>0&&i[i.length-1].charAt(i[i.length-1].length-1)===":"){i[i.length-1]=i[i.length-1]+I;l=0;}else {i.push(I);l=0;}}else {i.push(I);l=0;}}if(t==="<!--"&&f.slice(k-2,k+1)==="-->")break;if(t==="//"&&f.charAt(k)==="\n")break;if(t==="/*"&&f.slice(k-1,k+1)==="*/")break;if(t.charCodeAt(1)===37&&f.slice(k-1,k+1)==="%"&&f.indexOf("endcomment",f.indexOf("{%",S))>0)break}else if(f.charAt(k)===A&&A!=="${"){A="";}else if(A==="`"&&f.slice(k,k+2)==="${"){A="${";}else if(A==="${"&&f.charAt(k)==="}"){A="`";}}k=k+1;}while(k<n);if(l>0){A=f.slice(l,k+1);if(t==="<!--")A=A.replace(/\s*-+>$/,"");else if(t==="//")A=A.replace(/\s+$/,"");else A=A.replace(/\s*\u002a\/$/,"");i.push(A);}k=i.length;if(k>0){do{k=k-1;if(i[k].indexOf(":")>0){W=[i[k].slice(0,i[k].indexOf(":")),i[k].slice(i[k].indexOf(":")+1)];}else if(u[i[k]]!==void 0&&u[i[k]].type==="boolean"){v.options[i[k]]=true;}if(W.length===2&&u[W[0]]!==void 0){if(W[1].charAt(W[1].length-1)===W[1].charAt(0)&&(W[1].charAt(0)==='"'||W[1].charAt(0)==="'"||W[1].charAt(0)==="`")){W[1]=W[1].slice(1,W[1].length-1);}if(u[W[0]].type==="number"&&isNaN(Number(W[1]))===false){v.options[W[0]]=Number(W[1]);}else if(u[W[0]].type==="boolean"){v.options[W[0]]=W[1]==="true";}else {if(u[W[0]].values!==void 0){P=ge(u[W[0]].values);l=P.length;do{l=l-1;if(P[l]===W[1]){v.options[W[0]]=W[1];break}}while(l>0)}else {if(W[0]==="language"){a=W[1];}else if(W[0]==="lexer"){z=W[1];}v.options[W[0]]=W[1];}}}}while(k>0);if(z===""&&a!=="")z=Oe(a);}}if(v.options.lexer==="script"){if(v.options.script.styleGuide!==void 0){switch(v.options.script.styleGuide){case"airbnb":v.options.wrap=80;v.options.attemptCorrection=true;v.options.indentChar=" ";v.options.indentSize=2;v.options.preserveLine=1;v.options.script.quoteConvert="single";v.options.script.variableList="each";v.options.script.endComma="always";v.options.script.bracePadding=true;break;case"crockford":v.options.indentChar=" ";v.options.indentSize=4;v.options.attemptCorrection=true;v.options.script.bracePadding=false;v.options.script.elseNewline=false;v.options.script.endComma="never";v.options.script.noCaseIndent=true;v.options.script.functionSpace=true;v.options.script.variableList="each";v.options.script.vertical=false;break;case"google":v.options.wrap=-1;v.options.attemptCorrection=true;v.options.indentChar=" ";v.options.indentSize=4;v.options.preserveLine=1;v.options.script.quoteConvert="single";v.options.script.vertical=false;break;case"jquery":v.options.wrap=80;v.options.attemptCorrection=true;v.options.indentChar="	";v.options.indentSize=1;v.options.script.bracePadding=true;v.options.script.quoteConvert="double";v.options.script.variableList="each";break;case"jslint":v.options.indentChar=" ";v.options.indentSize=4;v.options.attemptCorrection=true;v.options.script.bracePadding=false;v.options.script.elseNewline=false;v.options.script.endComma="never";v.options.script.noCaseIndent=true;v.options.script.functionSpace=true;v.options.script.variableList="each";v.options.script.vertical=false;break;case"standard":v.options.wrap=0;v.options.attemptCorrection=true;v.options.indentChar=" ";v.options.indentSize=2;v.options.endNewline=false;v.options.preserveLine=1;v.options.script.noSemicolon=true;v.options.script.endComma="never";v.options.script.braceNewline=false;v.options.script.bracePadding=false;v.options.script.braceAllman=false;v.options.script.quoteConvert="single";v.options.script.functionSpace=true;v.options.script.ternaryLine=false;v.options.script.variableList="each";v.options.script.vertical=false;break;case"yandex":v.options.attemptCorrection=true;v.options.script.bracePadding=false;v.options.script.quoteConvert="single";v.options.script.variableList="each";v.options.script.vertical=false;break}}if(v.options.script.braceStyle!==void 0){switch(v.options.script.braceStyle){case"collapse":v.options.script.braceNewline=false;v.options.script.bracePadding=false;v.options.script.braceAllman=false;v.options.script.objectIndent="indent";v.options.script.neverFlatten=true;break;case"collapse-preserve-inline":v.options.script.braceNewline=false;v.options.script.bracePadding=true;v.options.script.braceAllman=false;v.options.script.objectIndent="indent";v.options.script.neverFlatten=false;break;case"expand":v.options.script.braceNewline=false;v.options.script.bracePadding=false;v.options.script.braceAllman=true;v.options.script.objectIndent="indent";v.options.script.neverFlatten=true;break}}if(v.options.language==="json")v.options.wrap=0;}do{if(v.options[ge[e]]!==void 0){u[ge[e]].lexer.length;}e=e+1;}while(e<y)}function et(v){const u=v.options.language;const h=v.options.lexer;s.count=-1;s.linesSpace=0;s.lineNumber=1;s.data.begin=[];s.data.ender=[];s.data.lexer=[];s.data.lines=[];s.data.stack=[];s.data.token=[];s.data.types=[];s.datanames=["begin","ender","lexer","lines","stack","token","types"];s.structure=[["global",-1]];s.structure.pop=function m(){const T=s.structure.length-1;const i=s.structure[T];if(T>0)s.structure.splice(T,1);return i};if(v.options.language==="auto"||v.options.lexer==="auto"){const m=ye(v.source);if(v.options.language==="auto")v.options.language=m.language;if(v.options.lexer==="auto")v.options.lexer=m.lexer;}if(typeof v.lexers[v.options.lexer]==="function"){s.references=[[]];s.error="";for(const m of ge(v.lexers)){if(v.options.language==="json"){v.options.json=v.options.json||re(null);}else {v.options[m]=v.options[m]||re(null);}}v.lexers[v.options.lexer](`${v.source} `);}else {s.error=`Specified lexer, ${v.options.lexer}, is not a function.`;}let r=0;let g=0;const y=ge(s.data);const e=y.length;do{g=r+1;do{if(s.data[y[r]].length!==s.data[y[g]].length){s.error=`"${y[r]}" array is of different length than "${y[g]}"`;break}g=g+1;}while(g<e);r=r+1;}while(r<e-1);if(s.data.begin.length>0){if(v.options.lexer==="script"&&v.options[v.options.lexer].objectSort){s.sortCorrection(0,s.count+1);}else if(v.options.lexer==="style"&&v.options[v.options.lexer].sortProperties){s.sortCorrection(0,s.count+1);}}v.options.language=u;v.options.lexer=h;return s.data}function $e(v){const u=Date.now();const h=v.mode;const r=v.options.crlf===true?"\r\n":"\n";let g="";if(v.source.trimStart()===""){const m=new RegExp(`\\n{${v.options.preserveLine},}`);g=v.source;g=v.source.replace(m,"\n\n");g=v.options.endNewline===true?g.replace(/\s*$/,r):g.replace(/\s+$/,"");v.stats.chars=g.length;v.stats.language=v.options.languageName;v.stats.size=ve(g.length);v.stats.time=(Date.now()-u).toFixed(1);return g}if(v.options.language==="text"){v.options.language="auto";}if(v.options.lexer==="text"){v.options.lexer="auto";}if(v.options.language==="text"||v.options.lexer==="text"){v.options.language="text";v.options.languageName="Plain Text";v.options.lexer="text";}else if(v.options.language==="auto"||v.options.lexer==="auto"){const m=ye(v.source);if(m.language==="text"){m.language="html";m.lexer="markup";m.languageName="HTML";}if(v.options.lexer==="auto"){v.options.lexer=m.lexer;}if(v.options.language==="auto"){v.options.language=m.language;v.options.languageName=m.languageName;}}v.stats.language=v.options.languageName;const y=Ue(v);if(y===false){v.stats.time=-1;v.stats.chars=v.source.length;v.stats.size=ve(v.stats.chars);return v.source}v.parsed=et(v);if(h==="parse"){v.stats.time=(Date.now()-u).toFixed(1);v.stats.chars=v.source.length;v.stats.size=ve(v.stats.chars);return v.parsed}g=v.beautify[v.options.lexer](v.options);g=v.options.endNewline===true?g.replace(/\s*$/,r):g.replace(/\s+$/,"");const e=g.length;v.stats.chars=e;v.stats.size=ve(e);v.stats.time=(Date.now()-u).toFixed(1);v.end=0;v.start=0;return g}_e.before=function(v){_.hooks.before.push(v);};_e.after=function(v){_.hooks.after.push(v);};je.listen=function(v){_.hooks.rules.push(v);};Object.defineProperty(_e,"stats",{get(){return _.stats}});Object.defineProperty(je,"rules",{get(){return _.options}});function _e(v,u){_.source=v;if(typeof u==="object")_.options=je(u);if(_.hooks.before.length>0){for(const r of _.hooks.before){if(r(_.options,v)===false)return v}}const h=$e(_);if(_.hooks.after.length>0){for(const r of _.hooks.after){if(r.call(_.parsed,h,_.options)===false)return v}}return new Promise((r,g)=>{if(s.error.length)return g(s.error);return r(h)})}function je(v){var u,h;for(const r of ge(v)){if(((h=(u=we)==null?void 0:u[r])==null?void 0:h.lexer)==="all"){_.options[r]=v[r];}else if(r==="markup"){be(_.options.markup,v.markup);}else if(r==="script"){be(_.options.script,v.script);}else if(r==="style"){be(_.options.style,v.style);}else if(r==="json"){be(_.options.script,v.script);}else if(r in _.options){_.options[r]=v[r];}}if(_.hooks.rules.length>0){for(const r of _.hooks.rules)r(_.options);}return _.options}function tt(v,u){_.source=v;_.mode="parse";if(typeof u==="object")_.options=je(u);const h=$e(_);return new Promise((r,g)=>{if(s.error.length)return g(s.error);return r(h)})}

export { Qe as default, we as definitions };
