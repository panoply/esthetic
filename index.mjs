var Et=Object.defineProperty;var gt=Object.getOwnPropertySymbols;var Wt=Object.prototype.hasOwnProperty;var _t=Object.prototype.propertyIsEnumerable;var kt=(e,n,c)=>n in e?Et(e,n,{enumerable:true,configurable:true,writable:true,value:c}):e[n]=c;var Ke=(e,n)=>{for(var c in n||(n={}))if(Wt.call(n,c))kt(e,c,n[c]);if(gt)for(var c of gt(n)){if(_t.call(n,c))kt(e,c,n[c]);}return e};var u="";var se=" ";var fe="\n";function et(...e){return e.join(fe)}function je(e,n=se){if(e===0)return n;let c=u;let f=1;do{c+=n;}while(f++<e);return c}function i(e,n){return e?e.charCodeAt(0)===n:false}function Ie(e,n){return i(e[e.length-1],n)}function T(e,n){return i(e,n)===false}function tt(e,n){return Ie(e,n)===false}function le(e){return /\s/.test(e)}function Be(e){return /\d/.test(e)}function rt(e){return `\\${e}`}var qe=Object.assign;var it=Object.defineProperties;var ve=Array.isArray;function Dt(e={embedded:{schema:[{language:"json"}],style:[{language:"css"}],stylesheet:[{language:"css"},{language:"scss",argument:/['"]scss['"]/}],javascript:[{language:"javascript"}]},tags:["form","paginate","capture","case","comment","for","if","raw","tablerow","unless","schema","style","script","stylesheet","javascript"],control:["if","unless","case"],else:["else","elsif"],singletons:["include","layout","section","assign","liquid","break","continue","cycle","decrement","echo","increment","render","when"]}){const n=new Set(e.else);const c=new Set(e.control);const f=new Set(e.tags);const _=new Set(e.singletons);const o={};g(e.embedded);return {get grammar(){return e},get tags(){return f},get control(){return c},get else(){return n},get singleton(){return _},get embed(){return o},extend(r){for(const y in r){if(ve(r[y])){for(const W of r[y]){if(y==="tags"&&f.has(W)===false){e.tags.push(W);f.add(W);}else if(y==="else"&&n.has(W)===false){e.else.push(W);n.add(W);}else if(y==="control"&&c.has(W)){e.control.push(W);c.add(W);}else if(y==="singletons"&&_.has(W)===false){e.singletons.push(W);_.add(W);}}}else if(y==="embed"){if(typeof r[y]==="object"){g(r[y]);}}}}};function g(r){for(const y in r){for(const{language:W,argument:t=null}of r[y]){if(!(y in o)){o[y]={tag:y,language:W,args:new Map([[new Set,{tag:y,language:W}]])};}if(t){for(const[d]of o[y].args){if(d===null)continue;if(ve(t)){for(const B of t)if(!d.has(B))d.add(B);}else {const B=new RegExp(t);if(d.size>0){for(const U of d){if(!(U instanceof RegExp))continue;if(U.source!==B.source)d.add(B);}}else {d.add(B);}}}}}}}}function Mt(e={embedded:{script:[{language:"javascript"},{language:"json",attribute:{type:["application/json","application/ld+json"]}},{language:"jsx",attribute:{type:["text/jsx","application/jsx"]}}],style:[{language:"css"}]},svg:["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],voids:["area","base","br","col","command","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],tags:["a","abbr","acronym","address","applet","article","aside","audio","b","basefont","bdi","bdo","big","blockquote","body","button","canvas","caption","center","cite","code","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","fieldset","figcaption","figure","figure","font","footer","form","frame","frameset","h1","h6","head","header","html","i","iframe","ins","isindex","kbd","label","legend","fieldset","li","main","map","mark","marquee","menu","meter","nav","noframes","frame","noscript","object","ol","optgroup","option","output","p","object","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","picture","video","audio","span","strike","strong","style","sub","summary","details","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","audio","video","tt","u","ul","var","video"]}){const n=new Set(e.svg);const c=new Set(e.tags);const f=new Set(e.voids);const _={};o(e.embedded);return {get grammar(){return e},get svg(){return n},get tags(){return c},get voids(){return f},get embed(){return _},extend(g){for(const r in g){if(ve(g[r])){for(const y of g[r]){if(r==="tags"&&c.has(y)===false){e.tags.push(y);c.add(y);}else if(r==="voids"&&f.has(y)===false){e.voids.push(y);f.add(y);}else if(r==="svg"&&n.has(y)===false){e.svg.push(y);n.add(y);}}}else if(r==="embedded"){if(typeof g[r]==="object"){o(g[r]);}}}}};function o(g){for(const r in g){if(!(r in _))_[r]={tag:r,attr:new Map};for(const{language:y,attribute:W}of g[r]){if(!("language"in _[r]))_[r].language=y;if(!_[r].attr.has(y)){_[r].attr.set(y,{tag:r,language:y,attr:new Map});}if(W){const t=_[r].attr.get(y);for(const d in W){if(!t.attr.has(d)){t.attr.set(d,{tag:r,language:y,attr:d,value:new Set});}const B=_[r].attr.get(y).attr.get(d);if(ve(W[d])){for(const U of W[d])if(!B.value.has(U))B.value.add(U);}else {const U=new RegExp(W[d]);if(B.value.size>0){for(const a of B.value){if(!(a instanceof RegExp))continue;if(a.source!==U.source)B.value.add(U);}}else {B.value.add(U);}}}}}}}}function $t(e={units:["%","cap","ch","cm","deg","dpcm","dpi","dppx","em","ex","fr","grad","Hz","ic","in","kHz","lh","mm","ms","mS","pc","pt","px","Q","rad","rem","rlh","s","turn","vb","vh","vi","vmax","vmin","vw"],atrules:["@charset","@color-profile","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@supports"],webkit:{classes:["webkit-any","webkit-any-link*","webkit-autofill"],elements:["webkit-file-upload-button","webkit-inner-spin-button","webkit-input-placeholder","webkit-meter-bar","webkit-meter-even-less-good-value","webkit-meter-inner-element","webkit-meter-optimum-value","webkit-meter-suboptimum-value","webkit-outer-spin-button","webkit-progress-bar","webkit-progress-inner-element","webkit-progress-value","webkit-search-cancel-button","webkit-search-results-button","webkit-slider-runnable-track","webkit-slider-thumb"]},pseudo:{classes:["active","any-link","checked","default","defined","disabled","empty","enabled","first","first-child","first-of-type","fullscreen","focus","focus-visible","focus-within","host","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","modal","not","nth-child","nth-col","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","picture-in-picture","placeholder-shown","paused","playing","read-only","read-write","required","right","root","scope","target","valid","visited","where"],elements:["after","backdrop","before","cue","cue-region","first-letter","first-line","file-selector-button","marker","part","placeholder","selection","slotted"],functions:["after","before","first-letter","first-line","host","host-context","part","slotted","lang","not","nth-child","nth-col","nth-last-child","nth-last-of-type","nth-of-type","where"]}}){const n=new Set(e.units);const c=new Set(e.atrules);const f=new Set(e.pseudo.classes);const _=new Set(e.pseudo.elements);const o=new Set(e.pseudo.functions);const g=new Set(e.webkit.elements);const r=new Set(e.webkit.classes);return {get grammar(){return e},get units(){return n},get atrules(){return c},get pseudoClasses(){return f},get pseudoElements(){return _},get pseudoFunctions(){return o},get webkitElements(){return g},get webkitClasses(){return r},extend(y){for(const W in y){if(ve(y[W])){for(const t of y[W]){if(W==="units"&&!n.has(t)){e[W].push(t);n.add(t);}else if(W==="atrules"&&!c.has(t)){e[W].push(t);c.add(t);}}}if(typeof y[W]==="object"){for(const t in y[W]){if(ve(y[W][t])){for(const d of y[W][t]){if(W==="webkit"){if(t==="elements"){e[W][t].push(d);g.add(d);}else if(t==="classes"){e[W][t].push(d);r.add(d);}}else if(W==="pseudo"){if(t==="elements"){e[W][t].push(d);_.add(d);}else if(t==="classes"){e[W][t].push(d);f.add(d);}else if(t==="functions"){e[W][t].push(d);o.add(d);}}}}}}}}}}function Tt(e={keywords:["ActiveXObject","ArrayBuffer","AudioContext","Canvas","CustomAnimation","DOMParser","DataView","Date","Error","EvalError","FadeAnimation","FileReader","Flash","Float32Array","Float64Array","FormField","Frame","Generator","HotKey","Image","Iterator","Intl","Int16Array","Int32Array","Int8Array","InternalError","Loader","Map","MenuItem","MoveAnimation","Notification","ParallelArray","Point","Promise","Proxy","RangeError","Rectangle","ReferenceError","Reflect","RegExp","ResizeAnimation","RotateAnimation","Set","SQLite","ScrollBar","Set","Shadow","StopIteration","Symbol","SyntaxError","Text","TextArea","Timer","TypeError","URL","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","URIError","WeakMap","WeakSet","Web","Window","XMLHttpRequest"]}){const n=new Set(e.keywords);return {get grammar(){return e},get keywords(){return n},extend(c){for(const f in c){if(ve(c[f])){for(const _ of c[f]){if(f==="keywords"&&!n.has(_)){e[f].push(_);n.add(_);}}}}}}}var pe=function(){const e=$t();const n=Dt();const c=Tt();const f=Mt();return {html:f,liquid:n,js:c,css:e,extend(_){if(typeof _==="object"){for(const o in _){if(o==="liquid"){n.extend(_.liquid);}else if(o==="html"){f.extend(_.html);}else if(o==="css"){e.extend(_.css);}else if(o==="js"){c.extend(_.js);}}}return {get html(){return f.grammar},get liquid(){return n.grammar},get js(){return c.grammar},get css(){return e.grammar}}}}}();function Re(e,n=NaN){if(typeof e!=="string")return u;if(T(e,60)&&T(e,123))return e;if(i(e,60)){const _=e.search(/[\s>]/);const o=e.slice(i(e[1],47)?2:1,_);return i(o,63)&&Ie(o,63)?"xml":isNaN(n)?o.toLowerCase():o.slice(n).toLowerCase()}const c=i(e[2],45)?e.slice(3).trimStart():e.slice(2).trimStart();const f=c.slice(0,c.search(/[\s=|!<>,.[]|-?[%}]}/)).toLowerCase();return isNaN(n)?f:f.slice(n)}function bt(e){const n=e.indexOf("{");if(i(e[n+1],37)){let c;c=e.slice(n+(i(e[n+2],45)?3:2)).trimStart();c=c.slice(0,c.search(/[\s=|!<>,.[]|-?[%}]}/));return c.startsWith("end")?false:pe.liquid.control.has(c)}return false}function ot(e){const n=e.indexOf("{");if(i(e[n+1],37)){let c;c=e.slice(n+(i(e[n+2],45)?3:2)).trimStart();c=c.slice(0,c.search(/[\s=|!<>,.[]|-?[%}]}/));return c.startsWith("end")?false:pe.liquid.else.has(c)}return false}function yt(e){const n=e.indexOf("=");if(n>-1){if(i(e[n+1],34)||i(e[n+1],39)){return /{%-?\s*end[a-z]+/.test(e.slice(n,e.lastIndexOf(e[n+1])))}}return false}function lt(e){if(Qe(e))return /{%-?\s*end\w+/.test(e);return false}function Qe(e,n=false){let c;if(n){if(i(e[0],123)&&i(e[1],37)&&i(e[e.length-2],37)&&i(e[e.length-1],125)){c=e.slice(i(e[2],45)?3:2).trimStart();if(i(c,34)||i(c,39))return false;c=c.slice(0,c.search(/[\s=|!<"'>,.[]|-?[%}]}/));return c.startsWith("end")?false:pe.liquid.tags.has(c)}return false}let f=e.indexOf("{");if(f===-1)return false;do{if(i(e[f+1],37)){c=e.slice(f+(i(e[f+2],45)?3:2)).trimStart();c=c.slice(0,c.search(/[\s=|!<>,.[]|-?[%}]}/));return c.startsWith("end")?false:pe.liquid.tags.has(c)}f=e.indexOf("{",f+1);}while(f>-1);return false}function Ge(e){let n=e;if(Array.isArray(e))n=e.join(u);const c=n.indexOf("{");if(i(n[c+1],37)){if(i(n[c+2],45))return n.slice(c+3).trimStart().startsWith("end");return n.slice(c+2).trimStart().startsWith("end")}return false}function De(e,n){if(n===1){return i(e[0],123)&&(i(e[1],37)||i(e[1],123))}else if(n===6){return i(e[0],123)&&i(e[1],37)}else if(n===7){return i(e[0],123)&&i(e[1],123)}else if(n===8){return i(e[e.length-2],37)&&i(e[e.length-1],125)}else if(n===9){return i(e[e.length-2],125)&&i(e[e.length-1],125)}else if(n===4){return /{[{%]/.test(e)}else if(n===5){return /{[{%]/.test(e)&&/[%}]}/.test(e)}else if(n===2){const c=e.length;return i(e[c-1],125)&&(i(e[c-2],37)||i(e[c-2],125))}else if(n===3){const c=e.length;return i(e[0],123)&&(i(e[1],37)||i(e[1],123))&&(i(e[c-1],125)&&(i(e[c-2],37)||i(e[c-2],125)))}}function Ve(e){let n=s.count;let c=s.stack.index;let f=0;let _=0;let o=0;let g=0;let r=0;let y=0;let W=0;let t=true;const{count:d}=s;const B=s.stack.token;const U=s.stack.index;const a=s.space;const p=e.lexer[d]==="style";const h=p&&B==="global";const $=p?[";","separator"]:[",","separator"];const X=[];const Y={begin:[],ender:[],lexer:[],lines:[],stack:[],token:[],types:[]};function l(w,H){let C=w[0];let x=H[0];if(e.types[C]==="comment"){do C=C+1;while(C<d&&e.types[C]==="comment");if(e.token[C]===void 0)return 1}if(e.types[x]==="comment"){do x=x+1;while(x<d&&e.types[x]==="comment");if(e.token[x]===void 0)return 1}if(p===true){if(e.token[C].indexOf("@import")===0||e.token[x].indexOf("@import")===0){return C<x?-1:1}if(e.types[C]!==e.types[x]){if(e.types[C]==="function")return 1;if(e.types[C]==="variable")return -1;if(e.types[C]==="selector")return 1;if(e.types[C]==="property"&&e.types[x]!=="variable")return -1;if(e.types[C]==="mixin"&&e.types[x]!=="property"&&e.types[x]!=="variable")return -1}}if(e.token[C].toLowerCase()>e.token[x].toLowerCase())return 1;return -1}g=n;do{if(e.begin[n]===c||h&&n<g&&i(e.token[n],125)&&e.begin[e.begin[n]]===-1){if(e.types[n].indexOf("liquid")>-1)return;if(e.token[n]===$[0]||p===true&&i(e.token[n],125)&&T(e.token[n+1],59)){t=true;r=n+1;}else if(p===true&&i(e.token[n-1],125)){t=true;r=n;}if(r===0&&e.types[0]==="comment"){do r=r+1;while(e.types[r]==="comment")}else if(e.types[r]==="comment"&&e.lines[r]<2){r=r+1;}if(t===true&&(e.token[n]===$[0]||p===true&&i(e.token[n-1],125))&&r<=g){if(p===true&&"};".indexOf(e.token[g])<0){g=g+1;}else if(p===false&&T(e.token[g],44)){g=g+1;}X.push([r,g]);if(p===true&&i(e.token[r],125)){g=r;}else {g=r-1;}}}n=n-1;}while(n>c);if(X.length>0&&X[X.length-1][0]>n+1){f=X[X.length-1][0]-1;if(e.types[f]==="comment"&&e.lines[f]>1){do f=f-1;while(f>0&&e.types[f]==="comment");X[X.length-1][0]=f+1;}if(e.types[n+1]==="comment"&&n===-1){do n=n+1;while(e.types[n+1]==="comment")}X.push([n+1,f]);}if(X.length>1){if(p===true||s.language==="json"||i(e.token[n-1],61)||i(e.token[n-1],58)||i(e.token[n-1],40)||i(e.token[n-1],91)||i(e.token[n-1],44)||e.types[n-1]==="word"||n===0){X.sort(l);W=X.length;t=false;c=0;do{y=X[c][1];if(p===true){o=y;if(e.types[o]==="comment")o=o-1;if(i(e.token[o],125)){y=y+1;$[0]="}";$[1]="end";}else {$[0]=";";$[1]="separator";}}f=X[c][0];if(p===true&&e.types[y-1]!=="end"&&e.types[y]==="comment"&&e.types[y+1]!=="comment"&&c<W-1){y=y+1;}if(f<y){do{if(p===false&&c===W-1&&f===y-2&&i(e.token[f],44)&&e.lexer[f]==="script"&&e.types[f+1]==="comment"){_=_+1;}else {s.push(Y,{begin:e.begin[f],ender:e.begin[f],lexer:e.lexer[f],lines:e.lines[f],stack:e.stack[f],token:e.token[f],types:e.types[f]},u);_=_+1;}if(e.token[f]===$[0]&&(p===true||e.begin[f]===e.begin[X[c][0]])){t=true;}else if(e.token[f]!==$[0]&&e.types[f]!=="comment"){t=false;}f=f+1;}while(f<y)}if(t===false&&Y.token[Y.token.length-1]!=="x;"&&(p===true||c<W-1)){f=Y.types.length-1;if(Y.types[f]==="comment"){do f=f-1;while(f>0&&Y.types[f]==="comment")}f=f+1;s.splice({data:Y,howmany:0,index:f,record:{begin:U,stack:h?"global":B,ender:s.count,lexer:Y.lexer[f-1],lines:0,token:$[0],types:$[1]}});_=_+1;}c=c+1;}while(c<W);s.splice({data:e,howmany:_,index:n+1});s.space=a;s.concat(e,Y);}}}function at(e,n,c){if(ve(e)===false)return e;if(n==="normal"){return St.call({array:e,recursive:c},e)}if(n==="descend")return wt.call({recursive:c},e);return xt.call({recursive:c},e)}function Xe(e,n){let c=e;let f=-1;const{data:_}=s;const o=[];const g=s.stack.length<2?[-1]:[s.stack[s.stack.length-2][1]];do{if(c>0&&_.types[c].indexOf("attribute")>-1&&_.types[c].indexOf("end")<0&&_.types[c-1].indexOf("start")<0&&_.types[c-1].indexOf("attribute")<0&&_.lexer[c]==="markup"){g.push(c-1);}if(c>0&&_.types[c-1].indexOf("attribute")>-1&&_.types[c].indexOf("attribute")<0&&_.lexer[g[g.length-1]]==="markup"&&_.types[g[g.length-1]].indexOf("start")<0){g.pop();}if(_.begin[c]!==g[g.length-1]){_.begin[c]=g.length>0?g[g.length-1]:-1;}if(_.types[c].indexOf("else")>-1){if(g.length>0){g[g.length-1]=c;}else {g.push(c);}}if(_.types[c].indexOf("end")>-1)g.pop();if(_.types[c].indexOf("start")>-1)g.push(c);c=c+1;}while(c<n);c=n;do{c=c-1;if(_.types[c].indexOf("end")>-1){o.push(c);f=f+1;}_.ender[c]=f>-1?o[f]:-1;if(_.types[c].indexOf("start")>-1){o.pop();f=f-1;}}while(c>e)}function xt(e){let n=0;const c=e.length;const f=e;const _=()=>{let g=0;const r=f.length;if(g<r){do{if(ve(f[g])===true)f[g]=xt.apply(this,f[g]);g=g+1;}while(g<r)}};const o=(g=u)=>{let r=n;let y=0;let W=0;let t=0;let d=[];let B=f[n];let U="";const a=typeof B;if(r<c){do{U=typeof f[r];if(f[r]<B||U<a){B=f[r];d=[r];}else if(f[r]===B){d.push(r);}r=r+1;}while(r<c)}W=d.length;r=n;y=W+n;if(r<y){do{f[d[t]]=f[r];f[r]=B;t=t+1;r=r+1;}while(r<y)}n=n+W;if(n<c){o();}else {if(this.recursive===true)_();e=f;}return g};o();return e}function wt(e){let n=0;const c=e.length;const f=e;const _=()=>{const g=f.length;let r=0;if(r<g){do{if(ve(f[r]))f[r]=wt.apply(this,f[r]);r=r+1;}while(r<g)}};const o=(g="")=>{let r=n;let y=0;let W=0;let t=0;let d=f[n];let B=[];let U=u;const a=typeof d;if(r<c){do{U=typeof f[r];if(f[r]>d||U>a){d=f[r];B=[r];}else if(f[r]===d){B.push(r);}r=r+1;}while(r<c)}W=B.length;r=n;y=W+n;if(r<y){do{f[B[t]]=f[r];f[r]=d;t=t+1;r=r+1;}while(r<y)}n=n+W;if(n<c){o();}else {if(this.recursive===true)_();e=f;}return g};o();return e}function St(e){let n=e;const c=[e[0]];const f=()=>{let o=0;const g=n.length;if(o<g){do{if(ve(n[o]))n[o]=St.apply(this,n[o]);o=o+1;}while(o<g)}};const _=o=>{let g=0;const r=[];const y=n.length;if(g<y){do{if(n[g]!==o)r.push(n[g]);g=g+1;}while(g<y)}n=r;if(r.length>0){c.push(r[0]);_(r[0]);}else {if(this.recursive===true)f();e=n;}};_(this.array[0]);return e}var Te=/^\s+/;var Ne=/\s+$/;var Ee=/^[\t\v\f\r \u00a0\u2000-\u200b\u2028-\u2029\u3000]+/;var We=/[\t\v\f \u00a0\u2000-\u200b\u2028-\u2029\u3000]+$/;var ut=/[\t\v\r \u00a0\u2000-\u200b\u2028-\u2029\u3000]+/g;var nt=/(\/[*/]|{%-?\s*(?:comment\s*-?%}|#)|<!-{2})\s*@prettify-ignore-start\b/;var Lt=/(\/[*/]|{%-?\s*(?:comment\s*-?%}|#)|<!-{2})\s*@prettify-ignore-next\b/;var Ct=/{%-?\s*|\s*-?%}/g;var ft=/(\/|\\|\||\*|\[|\]|\{|\})/g;function Je(e){const{rules:n}=s;const c=[];const f=[];const _=e.begin.replace(ft,rt);const o=i(e.begin[0],123)&&i(e.begin[1],37);const g=new RegExp(`^(${_}\\s*@prettify-ignore-start)`);const r=new RegExp(`(${_}\\s*)`);const y=o?new RegExp(`\\s*${e.ender.replace(Ct,R=>i(R,123)?"{%-?\\s*":"\\s*-?%}")}$`):new RegExp(e.ender.replace(ft,rt));let W=e.start;let t=0;let d=0;let B=0;let U=0;let a=[];let p=u;let h=u;let $=false;let X=false;let Y=false;let l=u;let w=e.ender.length-1;let H=e.ender.charAt(w);let C=0;function x(){if(/^\s+$/.test(a[t+1])||a[t+1]===u){do t=t+1;while(t<U&&(/^\s+$/.test(a[t+1])||a[t+1]===u))}if(t<U-1)f.push(u);}function L(){let R=fe;W=W+1;do{c.push(e.chars[W]);if(c.slice(c.length-20).join(u)==="@prettify-ignore-end"){if(o){const v=e.chars.indexOf("{",W);if(i(e.chars[v+1],37)){const M=e.chars.slice(v,e.chars.indexOf("}",v+1)+1).join(u);if(y.test(M))e.ender=M;}}W=W+1;break}W=W+1;}while(W<e.end);t=W;w=e.begin.length-1;H=e.begin.charAt(w);do{if(e.begin==="/*"&&i(e.chars[t-1],47)&&(i(e.chars[t],42)||i(e.chars[t],47))){break}if(e.begin!=="/*"&&e.chars[t]===H&&e.chars.slice(t-w,t+1).join(u)===e.begin){break}t=t-1;}while(t>e.start);if(e.begin==="/*"&&i(e.chars[t],42)){R="*/";}else if(e.begin!=="/*"){R=e.ender;}w=R.length-1;H=R.charAt(w);if(R!==fe||e.chars[W]!==fe){do{c.push(e.chars[W]);if(R===fe&&e.chars[W+1]===fe)break;if(e.chars[W]===H&&e.chars.slice(W-w,W+1).join(u)===R)break;W=W+1;}while(W<e.end)}if(e.chars[W]===fe)W=W-1;l=c.join(u).replace(We,u);return [l,W]}do{c.push(e.chars[W]);if(e.chars[W]===fe)s.line=s.line+1;if(e.chars[W]===H&&e.chars.slice(W-w,W+1).join(u)===e.ender)break;W=W+1;}while(W<e.end);l=c.join(u);if(g.test(l)===true)return L();if(o===true&&n.liquid.preserveComment===true||o===false&&n.markup.preserveComment===true||n.wrap<1||W===e.end||l.length<=n.wrap&&l.indexOf(fe)<0||e.begin==="/*"&&l.indexOf(fe)>0&&l.replace(fe,u).indexOf(fe)>0&&/\n(?!(\s*\*))/.test(l)===false){return [l,W]}t=e.start;if(t>0&&T(e.chars[t-1],10)&&le(e.chars[t-1])){do t=t-1;while(t>0&&T(e.chars[t-1],10)&&le(e.chars[t-1]))}p=e.chars.slice(t,e.start).join(u);const E=new RegExp(fe+p,"g");a=l.replace(/\r\n/g,fe).replace(E,fe).split(fe);U=a.length;a[0]=a[0].replace(r,u);a[U-1]=a[U-1].replace(y,u);if(U<2)a=a[0].split(se);if(a[0]===u){a[0]=e.begin;}else {a.splice(0,0,e.begin);}U=a.length;t=0;do{h=t<U-1?a[t+1].replace(Ee,u):u;if(/^\s+$/.test(a[t])===true||a[t]===u){x();}else if(a[t].replace(Ee,u).length>n.wrap&&a[t].replace(Ee,u).indexOf(se)>n.wrap){a[t]=a[t].replace(Ee,u);d=a[t].indexOf(se);f.push(a[t].slice(0,d));a[t]=a[t].slice(d+1);t=t-1;}else {a[t]=e.begin==="/*"&&a[t].indexOf("/*")!==0?`   ${a[t].replace(Ee,u).replace(We,u).replace(/\s+/g,se)}`:`${a[t].replace(Ee,u).replace(We,u).replace(/\s+/g,se)}`;C=t<1?n.wrap-(e.begin.length+1):n.wrap;d=a[t].length;B=a[t].replace(Ee,u).indexOf(se);if(d>C&&B>0&&B<C){d=C;do{d=d-1;if(le(a[t].charAt(d))&&d<=n.wrap)break}while(d>0);if(/^\s*\d+\.\s/.test(a[t])===true&&/^\s*\d+\.\s/.test(a[t+1])===false){a.splice(t+1,0,"1. ");}if(/^\s+$/.test(a[t+1])===true||a[t+1]===u){f.push(a[t].slice(0,d));a[t]=a[t].slice(d+1);$=true;t=t-1;}else if(/^\s*[*-]\s/.test(a[t+1])){f.push(a[t].slice(0,d));a[t]=a[t].slice(d+1);X=true;t=t-1;}else if(/^\s*\d+\.\s/.test(a[t+1])){f.push(a[t].slice(0,d));a[t]=a[t].slice(d+1);Y=true;t=t-1;}else if(a[t].replace(Ee,u).indexOf(se)<n.wrap){a[t+1]=a[t].length>n.wrap?a[t].slice(d+1)+s.crlf+a[t+1]:`${a[t].slice(d+1)} ${a[t+1]}`;}if($===false&&X===false&&Y===false){a[t]=a[t].slice(0,d);}}else if(a[t+1]!==void 0&&(a[t].length+h.indexOf(se)>n.wrap&&h.indexOf(se)>0||a[t].length+h.length>n.wrap&&h.indexOf(se)<0)){f.push(a[t]);t=t+1;}else if(a[t+1]!==void 0&&/^\s+$/.test(a[t+1])===false&&a[t+1]!==u&&/^\s*(?:[*-]|\d+\.)\s/.test(a[t+1])===false){f.push(a[t]);$=true;}else {f.push(a[t]);$=true;}X=false;Y=false;}t=t+1;}while(t<U);if(f.length>0){if(f[f.length-1].length>n.wrap-(e.ender.length+1)){f.push(e.ender);}else {f.push(e.ender);}l=f.join(s.crlf);}else {a[a.length-1]=a[a.length-1]+e.ender;l=a.join(s.crlf);}return [l,W]}function Ue(e){const{wrap:n}=s.rules;const{preserveComment:c}=s.rules[s.lexer];let f=e.start;let _=0;let o=u;let g=[];function r(){let W=u;do{_=_+1;if(i(e.chars[_+1],10))return}while(_<e.end&&le(e.chars[_]));if(e.chars[_]+e.chars[_+1]==="//"){g=[];do{g.push(e.chars[_]);_=_+1;}while(_<e.end&&T(e.chars[_],10));W=g.join(u);if(/^\/\/ (?:[*-]|\d+\.)/.test(W)===false&&/^\/\/\s*$/.test(W)===false){o=`${o} ${W.replace(/(^\/\/\s*)/,u).replace(We,u)}`;f=_-1;r();}}}function y(){const W=[];const t={ender:-1,types:"comment",lexer:e.lexer,lines:s.space};if(s.count>-1){t.begin=s.stack.index;t.stack=s.stack.token;t.token=s.data.token[s.count];}else {t.begin=-1;t.stack="global";t.token=u;}let d=0;let B=0;o=o.replace(/\s+/g,se).replace(We,u);B=o.length;if(n>B)return;do{d=n;if(T(o[d],32)){do d=d-1;while(d>0&&T(o[d],32));if(d<3){d=n;do d=d+1;while(d<B-1&&T(o[d],32))}}W.push(o.slice(0,d));o=`// ${o.slice(d).replace(Ee,u)}`;B=o.length;}while(n<B);d=0;B=W.length;do{t.token=W[d];s.push(s.data,t,u);t.lines=2;s.space=2;d=d+1;}while(d<B)}do{g.push(e.chars[f]);f=f+1;}while(f<e.end&&T(e.chars[f],10));if(f===e.end){e.chars.push(fe);}else {f=f-1;}o=g.join(u).replace(We,u);if(/^(\/\/\s*@prettify-ignore-start\b)/.test(o)===true){let W=fe;f=f+1;do{g.push(e.chars[f]);f=f+1;}while(f<e.end&&(T(e.chars[f-1],100)||i(e.chars[f-1],100)&&g.slice(g.length-20).join(u)!=="@prettify-ignore-end"));_=f;do;while(_>e.start&&i(e.chars[_-1],47)&&(i(e.chars[_],42)||i(e.chars[_],47)));if(i(e.chars[_],42))W="*/";if(W!==fe||T(e.chars[f],10)){do{g.push(e.chars[f]);if(W===fe&&i(e.chars[f+1],10))break;f=f+1;}while(f<e.end&&(W===fe||W==="*/"&&(i(e.chars[f-1],42)||i(e.chars[f],47))))}if(e.chars[f]===fe)f=f-1;o=g.join(u).replace(We,u);return [o,f]}if(o==="//"||c===true)return [o,f];o=o.replace(/(\/\/\s*)/,"// ");if(n<1||f===e.end-1&&s.data.begin[s.count]<1)return [o,f];_=f+1;r();y();return [o,f]}function st(e,n,c){if(n==="html"){if(!(e in pe.html.embed))return false;const f=pe.html.embed[e];if(f.attr.size>0){for(const _ of f.attr.values()){if(!c)return _;if(_.attr.has(c[0])&&_.attr.get(c[0]).value.has(c[1])){return _.attr.get(c[0])}}}return f.attr.has(c[0])?f.attr.get(c[0]).attr.has(c[1])?f.attr.get(c[0]).attr.get(c[1]):f.attr.get(c[0]):f}else if(n==="liquid"){if(!(e in pe.liquid.embed))return false;const f=pe.liquid.embed[e];if(f.args.size>0){for(const[_,o]of f.args){if(_ instanceof RegExp&&_.test(c))return o}}return f}}function Ot(e,n){if(typeof n!=="undefined")return e in pe[n].embed;return e in pe.html.embed||e in pe.liquid.embed}function Fe(e){const{data:n,rules:c}=s;const f=e||s.source;const _=c.language==="jsx"||c.language==="tsx";const o=new Set(c.liquid.ignoreTagList);const g=c.markup.attributeSortList.length;const r=ve(f)?f:f.split(u);const y=r.length;let W;let t=0;let d=false;let B=Fe?c.language:"html";let U=0;function p(x,L=u,E){if(L===u&&E===void 0){s.push(n,x,u);}else if(typeof L==="object"&&!L.length){qe(x,L);s.push(n,x,u);}else if(ve(L)){for(const R of L){qe(x,R);s.push(n,x,u);}}else if(E){qe(x,E);s.push(n,x,L);}else {console.log("isssue");}}function h(x){if(!((c.language==="html"||c.language==="liquid")&&_===false))return x;if(/(?:{[=#/]|%[>\]])|\}%[>\]]/.test(x))return x;if(!De(x,3))return x;const L=x.length-3;if(c.liquid.delimiterTrims==="force"){if(i(x[1],37)){if(T(x[2],45))x=x.replace(/^{%/,"{%-");if(T(x[L],45))x=x.replace(/%}$/,"-%}");}else {if(T(x[2],45))x=x.replace(/^{{/,"{{-");if(T(x[L],45))x=x.replace(/}}$/,"-}}");}}else if(c.liquid.delimiterTrims==="strip"){x=x.replace(/^{%-/,"{%").replace(/-%}$/,"%}").replace(/^{{-/,"{{").replace(/-}}$/,"}}");}else if(c.liquid.delimiterTrims==="tags"&&i(x[1],37)){if(T(x[2],45))x=x.replace(/^{%/,"{%-");if(T(x[L],45))x=x.replace(/%}$/,"-%}");}else if(c.liquid.delimiterTrims==="outputs"&&i(x[1],123)){if(T(x[2],45))x=x.replace(/^{{/,"{{-");if(T(x[L],45))x=x.replace(/}}$/,"-}}");}if(c.liquid.correct===false)return x;if(/^{%-?\s*#/.test(x)||/^{%-?\s*comment/.test(x))return x;if(/{%-?\s*(?:liquid)/.test(x))return x;let E;let R=0;return x.split(/(["']{1})/).map((v,M,oe)=>{const ce=i(v[0],34)||i(v[0],39);if(R>0||ce&&R===0&&T(oe[M-1],92)||ce){if(R===0)E=v.charCodeAt(0);if(R===1&&T(oe[M-1],92)){if(E===v.charCodeAt(0))R=2;return v}if(R!==2){R=R===0?1:R===1?i(oe[M-1],92)?1:2:0;return v}R=0;}return v.replace(ut,se).replace(/^({[{%]-?)/,"$1 ").replace(/([!=]=|[<>]=?)/g," $1 ").replace(new RegExp(" +(?=[|[\\],:.])|(?<=[[.]) +","g"),u).replace(new RegExp("(\\||(?<=[^=!<>])(?:(?<=assign[^=]+)=(?=[^=!<>])|=$))","g")," $1 ").replace(/([:,]$|[:,](?=\S))/g,"$1 ").replace(/(-?[%}]})$/," $1").replace(ut,se)}).join(u)}function $(x){let L=x;do L=L-1;while(i(r[L],92));L=x-L;return L%2===1}function l(x){if(typeof x==="object"){s.diagnostic.line=x.line;s.diagnostic.character=x.lineSpace||s.space;return et(`Parse Error (line ${x.line}):
`,typeof x.message==="string"?x.message:et(...x.message),...x.sample||[])}else if(typeof x==="string"){s.diagnostic.line=s.line;s.diagnostic.character=s.space;return et(`Parse Error (line ${s.line}):
`,x)}else {s.diagnostic.line=s.line;s.diagnostic.character=s.space;return "Parse Error:\n"+s.error}}function w(x){const L={lexer:"markup",lines:s.space,stack:s.stack.token!=="global"?s.stack.token:"global",begin:s.stack.index,token:u,types:u,ender:-1};let E=u;let R=u;let v=u;let M=u;let oe=u;let Ce=false;let be=false;let ne=0;let Pe=false;let N=false;let P=false;let K=false;let q=[];function te(A,D=true){const F=A.indexOf("=");if(F>0){const Q=A.indexOf('"');if(F<Q&&Q>0){return D?[A.slice(0,F),A.slice(F+1)]:[A.slice(0,F),A.slice(F+2,-1)]}const z=A.indexOf("'");if(F<z&&z>0){return D?[A.slice(0,F),A.slice(F+1)]:[A.slice(0,F),A.slice(F+2,-1)]}}return [A,u]}function xe(){if(v!=="cdata")return Z();return Z()}function ge(){if(L.types.indexOf("liquid")===-1)return xe();if(i(E[0],123)&&i(E[1],37)){if(pe.liquid.else.has(M)){L.types="liquid_else";}else if(pe.liquid.tags.has(M)){L.types="liquid_start";}else if(M.startsWith("end")){const A=M.slice(3);if(pe.liquid.tags.has(A)){L.types="liquid_end";}else {L.stack=A;L.types="liquid_end";let D=0;do{if(n.types[D]==="liquid"&&n.stack[D]===A){n.types[D]="liquid_start";break}D=n.stack.indexOf(A,D+1);}while(D>-1)}}else {L.stack=M;}}if(c.liquid.quoteConvert==="double"){L.token=L.token.replace(/'/g,'"');}else if(c.liquid.quoteConvert==="single"){L.token=L.token.replace(/"/g,"'");}return xe()}function I(){if(K&&be===false&&v!=="xml"){if(pe.html.voids.has(M)){L.types=v="singleton";if(c.markup.correct===true&&T(E[E.length-2],47)){L.token=E=/\/\s+>$/.test(E)?`${E.slice(0,E.lastIndexOf("/"))}${c.markup.selfCloseSpace?"/>":" />"}`:`${E.slice(0,-1)}${c.markup.selfCloseSpace?"/>":" />"}`;}}else if(i(E[E.length-2],47)&&i(E[E.length-1],62)){L.types=v="singleton";}else {L.types=v="start";}}return J()}function J(){let A=u;if(Lt.test(n.token[s.count])){be=true;P=false;if(v.indexOf("liquid")>0&&pe.liquid.tags.has(M)){A=`end${M}`;}else if(pe.html.voids.has(M)){A=null;}}else if(pe.html.voids.has(M)){A=null;}else if(Ot(M,"liquid")!==false&&o.has(M)===true){A=null;}if(A!==null&&P===false&&be===true&&(x===">"||x==="%}"||x==="}}")){const D=[];{P=true;if(v!=="json_preserve"&&v!=="script_preserve"&&v!=="style_preserve"&&v!=="liquid_json_preserve"&&v!=="liquid_script_preserve"&&v!=="liquid_style_preserve"){v="ignore";}t=t+1;if(t<y){let F=u;let Q=0;let z=0;let he=false;do{if(i(r[t],10))s.line=s.line+1;D.push(r[t]);if(F===u){F=i(r[t],34)?'"':i(r[t],39)?"'":u;if(T(D[0],123)&&i(r[t],123)&&(i(r[t+1],123)||i(r[t+1],37))){F=r[t+1]+"}";}else if(i(r[t],60)&&K===true){he=i(r[t+1],47);}else if(r[t]===R&&T(r[t-1],47)){if(he===true){ne=ne-1;if(ne<0)break}else {ne=ne+1;}}}else if(i(r[t],F.charCodeAt(F.length-1))){z=0;Q=F.length-1;if(i(F[Q],125)){if(r.slice(t+(i(r[t+2],45)?3:2),r.indexOf("%",t+2)).join(u).trim().startsWith(A))break}else if(Q>-1){do{if(T(r[t-z],F.charCodeAt(Q)))break;z=z+1;Q=Q-1;}while(Q>-1)}if(Q<0)F=u;}t=t+1;}while(t<y)}}if(v==="ignore"){E=E+D.join(u);E=E.replace(">",` ${q.map(([F])=>F).join(se)}>`);q=[];L.types="content_preserve";}else {if(v.startsWith("liquid_"));else {L.types="start";Z(true);const F=D.lastIndexOf("<");p(L,[{lexer:"markup",types:v,token:D.slice(0,F).join(u)},{lexer:"markup",types:"end",token:D.slice(F).join(u)}]);d=false;W=B;return j()}}}return ge()}function b(){if(i(E,60)&&i(E[1],47))return I();let A=q.length-1;if(i(E,60)){if(A>-1){do{const D=st(M,"html",te(q[A][0],false));if(D!==false){if(D.language==="json"&&c.markup.ignoreJSON){v="json_preserve";be=true;break}else if(D.language==="javascript"&&c.markup.ignoreJS){v="script_preserve";be=true;break}else if(D.language==="css"&&c.markup.ignoreCSS){v="style_preserve";be=true;break}else {W=D.language;v="start";d=true;break}}A=A-1;}while(A>-1)}else {const D=st(M,"html");if(D!==false){if(D.language==="json"&&c.markup.ignoreJSON){v="json_preserve";be=true;}else if(D.language==="javascript"&&c.markup.ignoreJS){v="script_preserve";be=true;}else if(D.language==="css"&&c.markup.ignoreCSS){v="style_preserve";be=true;}else {W=D.language;v="start";d=true;}}}}else if(Qe(E,true)){const D=st(M,"liquid",E);if(D!==false){if(o.has(M)){be=true;P=false;return J()}d=true;W=D.language;}}if(d===true){A=t+1;if(A<y){do{if(le(r[A])===false){if(r[A]==="<"){if(r.slice(A+1,A+4).join(u)==="!--"){A=A+4;if(A<y){do{if(le(r[A])===false){d=false;break}if(r[A]==="\n"||r[A]==="\r"){break}A=A+1;}while(A<y)}}else {d=false;}}break}A=A+1;}while(A<y)}}return I()}function Z(A=false){p(L);const D=s.count;const F=M.replace(/\/$/,u);const Q=c.markup.quoteConvert;let z=0;let he=0;let ee=0;let V=0;let ke=u;let ae=u;let Le=q.length;function me(){if(s.attributes.has(D)){if(z+1===Le&&tt(L.token,62)){L.token=L.token+">";}}let we=De(L.token,5);if(be===true||Q==="none"||L.types.indexOf("attribute")<0||we===false&&Q==="single"&&L.token.indexOf('"')<0||we===false&&Q==="double"&&L.token.indexOf("'")<0){p(L);}else {let Oe=0;let $e=false;const re=L.token.split(u);const Se=L.token.indexOf("=");const ze=re.length-1;if(T(re[Se+1],34)&&T(re[re.length-1],34)&&Q==="single"&&we===false){p(L,u);}else if(T(re[Se+1],39)&&T(re[re.length-1],39)&&Q==="double"&&we===false){p(L,u);}else {Oe=Se+2;if(we===false){if(Q==="double"){if(L.token.slice(Se+2,ze).indexOf('"')>-1)$e=true;re[Se+1]='"';re[re.length-1]='"';}else if(Q==="single"){if(L.token.slice(Se+2,ze).indexOf("'")>-1)$e=true;re[Se+1]="'";re[re.length-1]="'";}}if($e===true||we===true){we=false;do{if(i(re[Oe-1],123)&&(i(re[Oe],37)||i(re[Oe],123))){we=true;}else if(i(re[Oe],125)&&(i(re[Oe-1],37)||i(re[Oe-1],125))){we=false;}if(we===true){if(i(re[Oe],34)&&Q==="double"){re[Oe]="'";}else if(i(re[Oe],39)&&Q==="single"){re[Oe]='"';}}else {if(i(re[Oe],39)&&Q==="double"){re[Oe]='"';}else if(i(re[Oe],34)&&Q==="single"){re[Oe]="'";}}Oe=Oe+1;}while(Oe<ze)}p(L,{token:re.join(u)});}}}function ye(){if(!(!_&&!Pe&&!N))return;if(g===0){q=at(q,u,false);return}const we=[];ee=0;he=0;Le=q.length;do{he=0;do{ke=q[he][0].split("=")[0];if(c.markup.attributeSortList[ee]===ke){we.push(q[he]);q.splice(he,1);Le=Le-1;break}he=he+1;}while(he<Le);ee=ee+1;}while(ee<g);q=at(q,u,false);q=we.concat(q);Le=q.length;}function Ae(){p(L,"jsx_attribute",{token:`${ke}={`,types:"jsx_attribute_start"});s.external("jsx",ae.slice(1,ae.length-1));L.begin=s.count;if(/\s\}$/.test(ae)){ae=ae.slice(0,ae.length-1);ae=Ne.exec(ae)[0];L.lines=ae.indexOf("\n")<0?1:ae.split("\n").length;}else {L.lines=0;}L.begin=s.stack.index;L.stack=s.stack.token;L.token="}";L.types="jsx_attribute_end";me();}function ie(){if(lt(q[z][0])){L.types="attribute";L.token=q[z][0];}else if(Ge(q[z][0])){L.token=q[z][0];L.types="liquid_attribute_end";L.ender=L.begin;}else if(Qe(q[z][0])){L.types="liquid_attribute_start";L.begin=s.count;L.token=q[z][0];}else if(ot(q[z][0])){L.types="liquid_attribute_else";L.token=q[z][0];}else {L.types="attribute";L.token=q[z][0];}me();}if(q.length<1){if(A!==true)return;return j()}if(i(q[q.length-1][0],47)){q.pop();E=E.replace(/>$/,"/>");}he=q.length;ee=1;if(ee<he){do{ke=q[ee-1][0];if(i(ke[ke.length-1],61)&&q[ee][0].indexOf("=")<0){q[ee-1][0]=ke+q[ee][0];q.splice(ee,1);he=he-1;ee=ee-1;}ee=ee+1;}while(ee<he)}if(c.markup.attributeSort)ye();L.begin=D;L.stack=F;L.types="attribute";if(z<Le){do{if(q[z]===void 0)break;L.lines=q[z][1];q[z][0]=q[z][0].replace(Ne,u);if(_===true&&/^\/[/*]/.test(q[z][0])){L.types="comment_attribute";L.token=q[z][0];me();z=z+1;continue}if(q[z][1]<=1&&lt(q[z][0])){if(!yt(q[z][0])){L.types="attribute";L.token=q[z][0];me();z=z+1;continue}}he=q[z][0].indexOf("=");ee=q[z][0].indexOf('"');V=q[z][0].indexOf("'");if(he<0){if(Ge(q[z][0])){L.token=q[z][0];L.types="liquid_attribute_end";L.ender=L.begin;}else if(Qe(q[z][0])){L.types="liquid_attribute_start";L.begin=s.count;L.token=q[z][0];}else if(ot(q[z][0])){L.types="liquid_attribute_else";L.token=q[z][0];}else if(i(q[z][0],35)||i(q[z][0],91)||i(q[z][0],123)||i(q[z][0],40)||_===true){L.token=q[z][0];}else {L.token=c.markup.attributeCasing==="preserve"?q[z][0]:q[z][0].toLowerCase();}me();}else if(De(q[z][0],6)){ie();}else {ke=q[z][0].slice(0,he);ae=q[z][0].slice(he+1);if(c.markup.attributeCasing==="lowercase-name"){ke=ke.toLowerCase();q[z][0]=ke+"="+ae;}else if(c.markup.attributeCasing==="lowercase-value"){ae=ae.toLowerCase();q[z][0]=ke+"="+ae;}else if(c.markup.attributeCasing==="lowercase"){ke=ke.toLowerCase();ae=ae.toLowerCase();q[z][0]=ke+"="+ae;}if(c.markup.correct===true&&T(ae,60)&&T(ae,123)&&T(ae,61)&&T(ae,34)&&T(ae,39)){ae='"'+ae+'"';}if(_===true&&/^\s*{/.test(ae)){Ae();L.types="attribute";L.begin=D;L.stack=F;}else if(Qe(ae)&&(c.liquid.valueForce==="always"||(c.liquid.valueForce==="intent"||c.liquid.valueForce==="wrap")&&c.wrap>0&&Math.abs(t-s.character)>=c.wrap||ae.indexOf(fe)>0&&(c.liquid.valueForce==="newline"||c.liquid.valueForce==="intent"))&&(i(ae[0],34)||i(ae[0],39))){s.attributes.set(D,pe.html.voids.has(L.stack));p(L,{token:`${ke}=${V>-1?"'":'"'}`,types:"attribute"});if(z+1===Le){Fe(ae.slice(1,-1));n.token[s.count]=`${n.token[s.count]}${V>-1?"'":'"'}`;break}if(c.markup.forceIndent===true){const we=ae.lastIndexOf(ae[0]);if(i(ae[we],34)||i(ae[we],39)){Fe(ae.slice(1,we));n.token[s.count]=`${n.token[s.count]}${V>-1?"'":'"'}`;}else {Fe(ae.slice(1));}}else {Fe(ae.slice(1));}L.types="attribute";L.stack=F;L.begin=D;}else {if(De(ke,5)){ie();}else {L.types="attribute";L.token=q[z][0];me();}}}z=z+1;}while(z<Le)}if(!A)return j()}function m(A,D){A=A.trimStart().split(/\s/)[0];if(A==="comment"||o.has(A)){const F=f.indexOf("{%",D);let Q=F;if(r[F+1].charCodeAt(0)===45)Q=F+1;Q=f.indexOf(`end${A}`,Q);if(Q>0){Q=r.indexOf("}",Q);if(Q>0&&r[Q-1].charCodeAt(0)===37){if(A!=="comment"){v="ignore";be=true;oe=r.slice(t,D+1).join(u);x=r.slice(F,Q+1).join(u);}else {v="comment";oe=r.slice(t,D+1).join(u);x=r.slice(F,Q+1).join(u);}}}}}function k(A){const D=A===true?Ue({chars:r,end:y,lexer:"markup",begin:oe,start:t,ender:x}):Je({chars:r,end:y,lexer:"markup",begin:oe,start:t,ender:x});E=D[0];t=D[1];if(E.replace(oe,u).trimStart().startsWith("@prettify-ignore-start")){p(L,{token:E,types:"ignore"});}else {if(i(E[0],123)&&i(E[1],37)&&A===false){const F=E.indexOf("%}",2)+2;const Q=E.lastIndexOf("{%");E=h(E.slice(0,F))+E.slice(F,Q)+h(E.slice(Q));}L.token=E;L.types="comment";return b()}}function S(){if(x==="---"){oe="---";v="ignore";P=true;}else if(i(r[t],60)){if(i(r[t+1],47)){v="end";x=">";}else if(i(r[t+1],33)){if((i(r[t+2],100)||i(r[t+2],68))&&(i(r[t+3],111)||i(r[t+3],79))&&(i(r[t+4],99)||i(r[t+4],67))&&(i(r[t+5],116)||i(r[t+5],84))&&(i(r[t+6],121)||i(r[t+6],89))&&(i(r[t+7],112)||i(r[t+7],80))&&(i(r[t+8],101)||i(r[t+8],69))){x=">";v="doctype";P=true;}else if(i(r[t+2],45)&&i(r[t+3],45)){x="-->";oe="<!--";v="comment";}else if(i(r[t+2],91)&&r[t+3].charCodeAt(0)===67&&r[t+4].charCodeAt(0)===68&&r[t+5].charCodeAt(0)===65&&r[t+6].charCodeAt(0)===84&&r[t+7].charCodeAt(0)===65&&i(r[t+8],91)){x="]]>";v="cdata";P=true;}}else if(i(r[t+1],63)){x="?>";if(r[t+2].charCodeAt(0)===120&&r[t+3].charCodeAt(0)===109&&r[t+4].charCodeAt(0)===109){v="xml";K=true;}else {P=true;v="liquid";}}else if(i(r[t+1],112)&&i(r[t+2],114)&&i(r[t+3],101)&&(i(r[t+4],62)||le(r[t+4]))){x="</pre>";v="ignore";P=true;}else {K=true;x=">";}}else if(i(r[t],123)){if(_){d=true;Ce=true;s.stack.push(["script",s.count]);p(L,{token:"{",types:"script_start"});return}if(i(r[t+1],123)){P=true;x="}}";v="liquid";}else if(i(r[t+1],37)){P=true;x="%}";v="liquid";const A=r.indexOf("}",t+2);if(i(r[A-1],37)){let D=r.slice(t+2,A-1).join(u);if(i(D,45)){oe="{%-";D=D.slice(1).trimStart();}else {oe="{%";D=D.trimStart();}if(i(D[D.length-1],45)){x="-%}";D=D.slice(0,D.length-1).trimEnd();}else {x="%}";D=D.trimEnd();}m(D,A);if(i(D,35)){v="comment";x="%}";R=x.charAt(x.length-1);return k(true)}}else {P=true;x="%}";v="liquid";}}else {P=true;x=r[t+1]+"}";v="liquid";}}if(c.markup.preserveAttributes)P=true;if(Ce)return b();R=x.charAt(x.length-1);if(v==="comment"&&(i(r[t],60)||i(r[t],123)&&i(r[t+1],37))){return k()}else if(t<y){return de()}return b()}function j(){if(c.wrap>0&&_===true){let A=0;let D=s.count;let F=0;if(n.types[D].indexOf("attribute")>-1){do{A=A+n.token[D].length+1;D=D-1;}while(n.lexer[D]!=="markup"||n.types[D].indexOf("attribute")>-1);if(n.lines[D]===1)A=A+n.token[D].length+1;}else if(n.lines[D]===1){A=n.token[D].length+1;}F=D-1;if(A>0&&n.types[F]!=="script_end"){if(n.types[F].indexOf("attribute")>-1){do{A=A+n.token[F].length+1;F=F-1;}while(n.lexer[F]!=="markup"||n.types[F].indexOf("attribute")>-1);if(n.lines[F]===1)A=A+n.token[F].length+1;}else if(n.lines[F]===1){A=n.token[F].length+1;}}}s.space=0;}function de(){const A=[];let D=0;let F=0;let Q=0;let z=0;let he=0;let ee=0;let V=u;let ke=u;let ae=0;let Le=false;let me=false;let ye=false;let Ae=false;let ie=[];function we(Oe){let $e;let re=u;if(Oe===true){re=ie.join(u);$e=te(re);V=u;if($e[0]==="data-prettify-ignore")be=true;}else {re=ie.join(u);if(_===false||_&&!i(re[re.length-1],125))re=re.replace(/\s+/g,se);$e=te(re);if($e[0]==="data-prettify-ignore")be=true;if(_&&i(ie[0],123)&&i(ie[ie.length-1],125))ae=0;}if(i(re[0],123)&&i(re[1],37))N=true;if(Oe===false){if(Qe(re))U=U+1;if(Ge(re))U=U-1;}re=re.replace(/^\u0020/,u).replace(/\u0020$/,u);ie=re.replace(/\r\n/g,fe).split(fe);if(!ie.length)ie[0]=ie[0].replace(/\s+$/,u);re=c.crlf===true?h(ie.join("\r\n")):h(ie.join(fe));if(U>0||De(re,1)){if(De(re,5)===false){ee=0;if(i(r[t+1],10)||i(r[t],10))ee=2;if(i(r[t],32)&&T(r[t+1],32))ee=1;}else {if(i(r[t+1],10)){ee=2;}else if(i(r[t+1],32)){ee=1;}else if(ee>=1){ee=0;}}}else {if(i(r[t+1],10)){ee=2;}else if(i(r[t+1],32)){ee=1;}}if(q.length>0){const Se=q.length-1;if(i(re,61)||i(re,45)){q[Se][0]=q[Se][0]+re;q[Se][1]=ee;re=u;}else if(ee===0&&q[Se][1]===0){q[Se][0]=q[Se][0]+re;q[Se][1]=ee;re=u;}else if(ee>0&&q[Se][1]===0&&Ge(re)===true){q[Se][0]=q[Se][0]+re;q[Se][1]=ee;re=u;}else if(ee>0&&q[Se][1]===0&&De(q[Se][0],4)){q[Se][0]=q[Se][0]+re;re=u;}else if(q[Se][1]>0&&ee===0&&bt(re)===false){ee=q[Se][1];}else if(q[Se][1]>0&&ee>0&&Ge(re)&&!De(re,6)){const ze=re.indexOf("{%");q.push([re.slice(0,ze),ee]);re=re.slice(ze);}}if(re!==u&&re!==se)q.push([re,ee]);if(q.length>0){const[Se]=q[q.length-1];if(Se.indexOf("=\u201C")>0){s.error=l("Invalid quote character (\u201C, &#x201c) used.");}else if(Se.indexOf("=\u201D")>0){s.error=l("Invalid quote character (\u201D, &#x201d) used.");}}ie=[];ee=i(r[t],10)?2:1;}if(s.error)return;do{if(i(r[t],10)){ee=ee+1;s.line=s.line+1;}if(oe==="---"&&x==="---"&&v==="ignore"){A.push(r[t]);if(t>3&&i(r[t],45)&&i(r[t-1],45)&&i(r[t-2],45))break;t=t+1;continue}if(P===true||(le(r[t])===false&&T(V,125)||i(V,125))){A.push(r[t]);if(Le===false&&i(r[t-1],123)&&(i(r[t],123)||i(r[t],37))){Le=true;}else if(Le===true&&i(r[t],125)&&(i(r[t-1],125)||i(r[t-1],37))){Le=false;}if(v==="end"&&A.length>2&&i(A[0],60)&&i(A[1],47)&&(i(A[A.length-1],47)||i(A[A.length-1],60))){if(c.markup.correct){A.pop();A.push(">");}else {s.error=l({lineNumber:s.line,message:[`Missing closing delimiter character: ${A.join(u)}`,"\nTIP","Prettify can autofix these issues when the correct rule is enabled"]});return}break}if(i(A[0],60)&&i(A[1],62)&&i(x,62)){return p(L,"(empty)",{token:"<>",types:"start"})}if(i(A[0],60)&&i(A[1],47)&&i(A[2],62)&&i(x,62)){return p(L,{token:"</>",types:"end"})}}if(v==="cdata"&&i(r[t],62)&&i(r[t-1],93)&&T(r[t-2],93)){s.error=l(`CDATA tag (${A.join(u)}) not properly terminated with "]]>`);break}if(v==="comment"){V=u;if(r[t]===R&&A.length>x.length+1){F=A.length;D=x.length-1;if(D>-1){do{F=F-1;if(T(A[F],x.charCodeAt(D)))break;D=D-1;}while(D>-1)}if(D<0)break}}else {if(V===u){if(i(A[0],60)&&i(A[1],33)&&v!=="cdata"){if(v==="doctype"&&i(r[t],62))break;if(i(r[t],91)){if(i(r[t+1],60)){v="start";break}if(le(r[t+1])){do{t=t+1;if(i(r[t],10))ee=ee+1;}while(t<y-1&&le(r[t+1]))}if(i(r[t+1],60)){v="start";break}}}if(_){if(i(r[t],123)){ae=ae+1;}else if(i(r[t],125)){ae=ae-1;}}if(i(r[t],60)&&K===true&&P===false&&A.length>1&&/>{2,3}/.test(x)===false){s.error=l(`Invalid structure detected ${r.slice(t,t+8).join(u)}`);break}if(le(r[t])===false&&me===true&&r[t]!==R){me=false;ne=0;V=ke;A.pop();if(t<y){do{if(i(r[t],10))s.line=s.line+1;if(c.markup.preserveAttributes===true){A.push(r[t]);}else {ie.push(r[t]);}if(T(V,34)||T(V,39)){if(i(r[t-1],123)&&(i(r[t],37)||i(r[t],123))){Le=true;}else if((i(r[t-1],125)||i(r[t-1],37))&&i(r[t],125)){Le=false;}}if(_===false&&ye===false&&Le===true&&c.markup.preserveAttributes===false){while(t<y){t=t+1;if(i(r[t],10)){s.line=s.line+1;if(i(ie[0],61)){Le=false;V=u;we(false);break}}ie.push(r[t]);if(i(ie[0],61)&&i(r[t+1],62)){Le=false;q[q.length-1][0]+=ie.join(u);ie=[];V=u;break}if(i(ie[0],61)===false&&i(r[t],125)&&(i(r[t-1],125)||i(r[t-1],37))){Le=false;V=u;we(false);break}}}if(_===false&&(i(r[t],60)||i(r[t],62))&&(V===u||i(V,62))){if(V===u&&i(r[t],60)){V=">";Q=1;}else if(i(V,62)){if(i(r[t],60)){Q=Q+1;}else if(i(r[t],62)){Q=Q-1;if(Q===0){V=u;ne=0;we(false);break}}}}else if(V===u){if(r[t+1]===R){if(i(ie[ie.length-1],47)||i(ie[ie.length-1],63)&&v==="xml"){ie.pop();if(P===true)A.pop();t=t-1;}if(ie.length>0)we(false);break}if(_===false&&i(r[t],123)&&i(r[t-1],61)){V="}";}else if(i(r[t],34)||i(r[t],39)){V=r[t];if(ye===false&&Le===false)ye=true;if(i(r[t-1],61)&&(i(r[t+1],60)||i(r[t+1],123)&&i(r[t+2],37)||le(r[t+1])&&T(r[t-1],61))){ne=t;}}else if(i(r[t],40)){V=")";he=1;}else if(_){if((i(r[t-1],61)||le(r[t-1]))&&i(r[t],123)){V="}";z=1;}else if(i(r[t],47)){if(i(r[t+1],42)){V="*/";}else if(i(r[t+1],47)){V=fe;}}}else if(i(A[0],123)&&i(r[t],123)&&(i(r[t+1],123)||i(r[t+1],37))){V=i(r[t+1],123)?"}}":r[t+1]+"}";}if(le(r[t])&&V===u){if(i(ie[ie.length-2],61)){D=t+1;if(D<y){do{if(le(r[D])===false){if(i(r[D],34)||i(r[D],39)){t=D-1;Ae=true;ie.pop();}break}D=D+1;}while(D<y)}}if(Ae===true){Ae=false;}else if(ae===0||ae===1&&i(ie[0],123)){ie.pop();if(ie.length>0)we(false);me=true;break}}}else if(i(r[t],40)&&i(V,41)){he=he+1;}else if(i(r[t],41)&&i(V,41)){he=he-1;if(he===0){V=u;if(i(r[t+1],x.charCodeAt(0))){we(false);break}}}else if(_===true&&(i(V,125)||i(V,10)&&i(r[t],10)||V==="*/"&&i(r[t-1],42)&&i(r[t],47))){if(i(r[t],96)){t=t+1;do{ie.push(r[t]);if(i(r[t],96))break;t=t+1;}while(t<r.length)}if(i(V,125)){if(i(r[t],125)&&r[t]!==V){z=z+1;}else if(r[t]===V){z=z-1;if(z===0){ae=0;V=u;E=ie.join(u);if(c.markup.preserveAttributes===false){if(_){if(!/^\s*$/.test(E))q.push([E,ee]);}else {E=E.replace(/\s+/g,se);if(E!==se)q.push([E,ee]);}}ie=[];ee=1;break}}}else {ke=u;Pe=true;E=ie.join(u);if(E!==se)q.push([E,ee]);ie=[];ee=i(V,10)?2:1;V=u;break}}else if(i(r[t],123)&&i(r[t+1],37)&&i(r[ne-1],61)&&(i(V,34)||i(V,39))){V=V+"{%";ne=0;}else if(i(r[t-1],37)&&i(r[t],125)&&(V==='"{%'||V==="'{%")){V=V[0];ne=0;}else if(i(r[t],60)&&i(x,62)&&i(r[ne-1],61)&&(i(V,34)||i(V,39))){V=V+"<";ne=0;}else if(i(r[t],62)&&(V==='"<'||V==="'<")){V=V.charAt(0);ne=0;}else if(ne===0&&T(V,62)&&(V.length<2||T(V,34)&&T(V,39))){F=0;D=V.length-1;if(D>-1){do{if(T(r[t-F],V.charCodeAt(D)))break;F=F+1;D=D-1;}while(D>-1)}if(D<0&&Le===false&&ye===true){ye=false;we(true);if(r[t+1]===R)break}if(D===0&&i(r[t],62)&&ye===true&&Le===false){s.error="missing quotataion";break}}else if(ne>0&&le(r[t])===false){ne=0;}t=t+1;}while(t<y)}}else if(i(x,10)===false&&(i(r[t],34)||i(r[t],39))){V=r[t];}else if(v!=="comment"&&T(x,10)&&i(r[t],60)&&i(r[t+1],33)&&i(r[t+2],45)&&i(r[t+3],45)&&n.types[s.count]!=="conditional"){V="-->";}else if(i(r[t],123)&&T(A[0],123)&&T(x,10)&&(i(r[t+1],123)||i(r[t+1],37))){if(i(r[t+1],123)){V="}}";}else {V=r[t+1]+"}";if(ie.length<1&&(q.length<1||le(r[t-1]))){A.pop();do{if(i(r[t],10))ee=ee+1;ie.push(r[t]);t=t+1;}while(t<y&&r[t-1]+r[t]!==V);ie.push("}");q.push([ie.join(u),ee]);ie=[];ee=1;V=u;}}if(V===x)V=u;}else if(K&&T(x,10)&&le(r[t])&&T(r[t-1],60)){me=true;}else if(K&&_&&i(r[t],47)&&(i(r[t+1],42)||i(r[t+1],47))){me=true;A[A.length-1]=se;ke=i(r[t+1],42)?"*/":fe;ie.push(r[t]);}else if(Le===false&&(r[t]===R||i(x,10)&&i(r[t+1],60))&&(A.length>x.length+1||i(A[0],93))&&(_===false||ae===0)){if(i(x,10)){if(le(A[A.length-1])){do{A.pop();t=t-1;}while(le(A[A.length-1]))}break}F=A.length;D=x.length-1;if(D>-1){do{F=F-1;if(A[F]!==x.charAt(D))break;D=D-1;}while(D>-1)}if(D<0){if(i(A[F],62)&&i(r[t],62)&&q.length>0){if(q[q.length-1][1]===0&&i(r[t-1],125)&&le(r[t+1])){q[q.length-1][1]=i(r[t+1],32)?1:2;}}break}}}else if(i(r[t],V.charCodeAt(V.length-1))&&(_===true&&i(x,125)&&(T(r[t-1],92)||$(t)===false)||(_===false||T(x,125)))){F=0;D=V.length-1;if(D>-1){do{if(r[t-F]!==V.charAt(D))break;F=F+1;D=D-1;}while(D>-1)}if(D<0)V=u;}}t=t+1;}while(t<y);ne=0;E=A.join(u);M=Re(E);if(be===false)E=h(E);if(M==="xml"){B="xml";}else if(B===u&&M==="html"){B="html";}L.token=E;L.types=v;if(P===false&&_===false){E=E.replace(/\s+/g,se);}return b()}return S()}function H(){const x=t;const L=_===true&&i(n.token[s.count],123);const E="([{!=,;.?:&<>";let R=[];let v=u;let M=s.space;let oe=u;if(d===true){if(L===true){oe="script";}else if(s.stack.index>-1){oe=Re(n.token[s.stack.index]);}else {oe=Re(n.token[n.begin[s.count]]);}}const ce={begin:s.stack.index,ender:-1,lexer:"markup",lines:M,stack:Re(s.stack.token)||"global",token:u,types:"content"};function Ce(){return n.types[s.count]==="liquid_start"&&n.token[s.count].indexOf("<!")===0&&n.token[s.count].indexOf("<![")<0&&n.token[s.count].charCodeAt(n.token[s.count].length-1)===91}function be(){let N=t-1;let P=0;if(T(r[t-1],92))return false;if(N>-1){do{if(T(r[N],92))break;P=P+1;N=N-1;}while(N>-1)}return P%2===1}if(t<y){let N=u;let P=u;let K=-1;let q=u;let te=0;do{if(i(r[t],10))s.line=s.line+1;if(d===true){if(P===u){if(i(r[t],47)){if(i(r[t+1],42)){P="*";}else if(i(r[t+1],47)){P="/";}else if(!_&&oe==="script"&&T(r[t-1],60)&&E.indexOf(r[t-1])>-1){P="r";}}else if(be()===false&&(i(r[t],34)||i(r[t],39)||i(r[t],96))){P=r[t];}else if(i(r[t],123)&&L===true){te=te+1;}else if(i(r[t],125)&&L===true){if(te===0){q=R.join(u).replace(Te,u).replace(Ne,u);s.external(W,q);s.stack.update(s.stack.index+1);if(n.types[s.count]==="end"&&n.lexer[n.begin[s.count]-1]==="script"){p(ce,{lexer:"script",types:"separator",token:c.markup.correct===true?";":"x;"});ce.lexer="markup";}p(ce,{token:"}",types:"script_end"});s.stack.pop();break}te=te-1;}if(n.types[s.count]==="liquid_start"){K=r.indexOf("%",t);if(i(r[K-1],123)){N=i(r[K+1],45)?r.slice(K+2,r.indexOf("%",K+3)).join(u).trimStart():r.slice(K+1,r.indexOf("%",K+2)).join(u).trimStart();if(N.startsWith(`end${oe}`)){R=r.slice(t,K-2);q=R.join(u).replace(Te,u).replace(Ne,u);s.external(W,q);t=t+R.length;N=r.slice(t,r.indexOf("}",t)+1).join(u).replace(Te,u).replace(Ne,u);t=t+N.length;p(ce,{types:"liquid_end",token:h(N)});break}}}else {N=r.slice(t,t+10).join(u).toLowerCase();if(oe==="script"){N=t===y-9?N.slice(0,N.length-1):N.slice(0,N.length-2);if(N==="<\/script"){q=R.join(u).replace(Te,u).replace(Ne,u);t=t-1;if(R.length<1)break;if(/^<!--+/.test(q)&&/--+>$/.test(q)){p(ce,{token:"<!--",types:"comment"});q=q.replace(/^<!--+/,u).replace(/--+>$/,u);s.external("javascript",q);p(ce,{token:"-->"});}else {s.external(W,q);}break}}else if(oe==="style"){if(t===y-8){N=N.slice(0,N.length-1);}else if(t===y-9){N=N.slice(0,N.length-2);}else {N=N.slice(0,N.length-3);}if(N==="</style"){let G=R.join(u).replace(Te,u).replace(Ne,u);t=t-1;if(R.length<1)break;if(/^<!--+/.test(G)&&/--+>$/.test(G)){p(ce,{token:"<!--",types:"comment"});G=G.replace(/^<!--+/,u).replace(/--+>$/,u);s.external("css",G);p(ce,{token:"-->"});}else {s.external(W,G);}break}}}}else if(P===r[t]&&be()===false&&(i(P,34)||i(P,39)||i(P,96)||i(P,42)&&i(r[t+1],47))){P=u;}else if(i(P,96)&&i(r[t],36)&&i(r[t+1],123)&&be()===false){P="}";}else if(i(P,125)&&i(r[t],125)&&be()===false){P="`";}else if(i(P,47)&&(i(r[t],10)||i(r[t],13))){P=u;}else if(P==="r"&&i(r[t],47)&&be()===false){P=u;}else if(i(P,47)&&i(r[t],62)&&i(r[t-1],45)&&i(r[t-2],45)){N=r.slice(t+1,t+11).join(u).toLowerCase();N=N.slice(0,N.length-2);if(oe==="script"&&N==="<\/script")P=u;N=N.slice(0,N.length-1);if(oe==="style"&&N==="</style")P=u;}}if(Ce()===true&&i(r[t],93)){t=t-1;M=0;v=R.join(u).replace(Ne,u);p(ce,{token:v});break}if(d===false&&R.length>0&&(i(r[t],60)&&T(r[t+1],61)&&Be(r[t+1])===false&&le(r[t+1])===false||i(r[t],91)&&i(r[t+1],37)||i(r[t],123)&&(_===true||i(r[t+1],123)||i(r[t+1],37)))){t=t-1;M=0;v=s.stack.token==="comment"?R.join(u):R.join(u).replace(Ne,u);ce.token=v;if(c.wrap>0&&c.markup.preserveText===false){let ge=function(){if(i(v[G],32)){xe.push(v.slice(0,G));v=v.slice(G+1);ue=v.length;G=c.wrap;return}do G=G-1;while(G>0&&T(v[G],32));if(G>0){xe.push(v.slice(0,G));v=v.slice(G+1);ue=v.length;G=c.wrap;}else {G=c.wrap;do G=G+1;while(G<ue&&T(v[G],32));xe.push(v.slice(0,G));v=v.slice(G+1);ue=v.length;G=c.wrap;}};let G=c.wrap;let ue=v.length;const xe=[];if(n.token[n.begin[s.count]]==="<a>"&&n.token[n.begin[n.begin[s.count]]]==="<li>"&&n.lines[n.begin[s.count]]===0&&s.space===0&&v.length<c.wrap){p(ce);break}if(ue<c.wrap){p(ce);break}if(s.space<1&&s.count>-1){let I=s.count;do{G=G-n.token[I].length;if(n.types[I].indexOf("attribute")>-1)G=G-1;if(n.lines[I]>0&&n.types[I].indexOf("attribute")<0)break;I=I-1;}while(I>0&&G>0);if(G<1)G=v.indexOf(se);}v=R.join(u).replace(Te,u).replace(Ne,u).replace(/\s+/g,se);do ge();while(G<ue);if(v!==u&&T(v,32))xe.push(v);v=xe.join(s.crlf);v=u+v+u;}else {const G=v.indexOf(fe);if(G>-1){p(ce,{token:v.slice(0,G)});v=v.slice(G);if(/^\n+/.test(v)){ce.lines=1;}else {ce.lines=2;v=v.replace(Te,u);}}}M=0;p(ce,{token:v});break}R.push(r[t]);t=t+1;}while(t<y)}if(t>x&&t<y){if(le(r[t])){let N=t;s.space=s.space+1;do{if(i(r[N],10))s.line=s.line+1;N=N-1;}while(N>x&&le(r[N]))}else {s.space=0;}}else if(t!==x||t===x&&d===false){v=R.join(u).replace(Ne,u);M=0;if(ce.token!==v){p(ce,{token:v});s.space=0;}}d=false;}function C(){s.space=1;do{if(i(r[t],10)){s.character=t;s.space=s.space+1;s.line=s.line+1;}if(le(r[t+1])===false)break;t=t+1;}while(t<y)}if(c.language==="html"||c.language==="liquid")B="html";do{if(s.error)return n;if(le(r[t])){C();}else if(i(r[t],60)){w(u);}else if(i(r[t],123)&&(_||i(r[t+1],123)||i(r[t+1],37))){w(u);}else if(i(r[t],45)&&i(r[t+1],45)&&i(r[t+2],45)){w("---");}else {H();}t=t+1;}while(t<y);return n}function Rt(){const{data:e,references:n,rules:c,source:f}=s;const _=Ke({},c.script);c.script=qe(c.script,c.json);const o=ve(f)?f:f.split(u);const g=o.length;const r=[];const y=[];const W=[];const t=[0,u];const d=[false];const B={count:[],index:[],word:[]};let U=-1;let a=0;let p=u;let h=u;let $=[];let X=0;let Y=-1;let l=-1;let w=[];let H;let C;let x;const L=["autoescape","block","capture","case","comment","embed","filter","for","form","if","macro","paginate","raw","sandbox","spaceless","tablerow","unless","verbatim"];function E(){B.count.pop();B.index.pop();B.word.pop();U=U-1;}function R(m=u){const k={begin:s.stack.index,ender:-1,lexer:"script",lines:s.space,stack:s.stack.token,token:p,types:h};s.push(e,k,m);}function v(m,k){let O=k===true?a:a+1;let S=u;if(typeof m!=="number"||m<1)m=1;if(i(o[a],47)){if(i(o[a+1],47)){S=fe;}else if(i(o[a+1],42)){S="/";}}if(O<g){do{if(le(o[O])===false){if(i(o[O],47)){if(S===u){if(i(o[O+1],47)){S=fe;}else if(i(o[O+1],42)){S="/";}}else if(i(S,47)&&i(o[O-1],42)){S=u;}}if(S===u&&o[O-1]+o[O]!=="*/")return o.slice(O,O+m).join(u)}else if(i(S,10)&&i(o[O],10)){S=u;}O=O+1;}while(O<g)}return u}function M(m){const k=m;do m=m-1;while(i(o[m],92)&&m>0);return (k-m)%2===1}function oe(m){const k=v(1,false);const O=s.stack.length===0?u:s.stack.token;const S={begin:e.begin[s.count],ender:e.begin[s.count],lexer:e.lexer[s.count],lines:e.lines[s.count],stack:e.stack[s.count],token:e.token[s.count],types:e.types[s.count]};if(nt.test(p)){return}if(h==="start"||h==="type_start"){return}if(c.language==="json"){return}if(i(k,123)||i(S.token,59)||i(S.token,44)||S.stack==="class"||S.stack==="map"||S.stack==="attribute"||e.types[S.begin-1]==="generic"||O==="initializer"){return}if(i(S.token,125)&&e.stack[S.begin-1]==="global"&&e.types[S.begin-1]!=="operator"&&S.stack===e.stack[s.count-1]){return}if(S.stack==="array"&&T(S.token,93)){return}if(i(e.token[e.begin[s.count]],123)&&S.stack==="data_type"){return}if(S.types!==void 0&&S.types.indexOf("liquid")>-1&&S.types.indexOf("liquid_string")<0){return}if(i(k,59)&&m===false){return}if(e.lexer[s.count-1]!=="script"&&(a<g&&g===f.length-1||g<f.length-1)){return}let j=0;if(i(S.token,125)&&(S.stack==="function"||S.stack==="if"||S.stack==="else"||S.stack==="for"||S.stack==="do"||S.stack==="while"||S.stack==="switch"||S.stack==="class"||S.stack==="try"||S.stack==="catch"||S.stack==="finally"||S.stack==="block")){if(S.stack==="function"&&(e.stack[S.begin-1]==="data_type"||e.types[S.begin-1]==="type")){j=S.begin;do j=j-1;while(j>0&&T(e.token[j],41)&&e.stack[j]!=="arguments");j=e.begin[j];}else {j=e.begin[S.begin-1];}if(i(e.token[j],40)){j=j-1;if(e.token[j-1]==="function")j=j-1;if(e.stack[j-1]==="object"||e.stack[j-1]==="switch")return;if(T(e.token[j-1],61)&&T(e.token[j-1],58)&&e.token[j-1]!=="return")return}else {return}}if(S.types==="comment"||O==="method"||O==="paren"||O==="expression"||O==="array"||O==="object"||O==="switch"&&S.stack!=="method"&&e.token[e.begin[s.count]]==="("&&e.token[e.begin[s.count]-1]!=="return"&&e.types[e.begin[s.count]-1]!=="operator"){return}if(e.stack[s.count]==="expression"&&(e.token[e.begin[s.count]-1]!=="while"||e.token[e.begin[s.count]-1]==="while"&&e.stack[e.begin[s.count]-2]!=="do")){return}if(k!==u&&"=<>+*?|^:&%~,.()]".indexOf(k)>-1&&m===false)return;if(S.types==="comment"){j=s.count;do j=j-1;while(j>0&&e.types[j]==="comment");if(j<1)return;S.token=e.token[j];S.types=e.types[j];S.stack=e.stack[j];}if(S.token===void 0||S.types==="start"||S.types==="separator"||S.types==="operator"&&S.token!=="++"&&S.token!=="--"||S.token==="x}"||S.token==="var"||S.token==="let"||S.token==="const"||S.token==="else"||S.token.indexOf("#!/")===0||S.token==="instanceof"){return}if(S.stack==="method"&&(e.token[S.begin-1]==="function"||e.token[S.begin-2]==="function")){return}if(c.script.variableList==="list")B.index[U]=s.count;p=c.script.correct===true?";":"x;";h="separator";j=s.space;s.space=0;R();s.space=j;ue();}function ce(){let m=s.count;if(e.types[m]==="comment"){do m=m-1;while(m>0&&e.types[m]==="comment")}if(e.token[m]==="from")m=m-2;if(e.token[m]==="x;")s.splice({data:e,howmany:1,index:m});}function Ce(){let m=s.count;do m=m-1;while(m>-1&&e.token[m]==="x}");if(e.stack[m]==="else")return R();m=m+1;s.splice({data:e,howmany:0,index:m,record:{begin:e.begin[m],ender:-1,lexer:"script",lines:s.space,stack:e.stack[m],token:p,types:h}});R();}function be(){oe(false);if(Y>-1)b();x=Je({chars:o,end:g,lexer:"script",begin:"/*",start:a,ender:"*/"});a=x[1];if(e.token[s.count]==="var"||e.token[s.count]==="let"||e.token[s.count]==="const"){H=s.pop(e);R();s.push(e,H,u);if(e.lines[s.count-2]===0)e.lines[s.count-2]=e.lines[s.count];e.lines[s.count]=0;}else if(x[0]!==u){p=x[0];h=nt.test(p)?"ignore":"comment";if(p.indexOf("# sourceMappingURL=")===2){t[0]=s.count+1;t[1]=p;}s.push(e,{begin:s.stack.index,ender:-1,lexer:"script",lines:s.space,stack:s.stack.token,token:p,types:h},u);}if(/\/\*\s*global\s+/.test(e.token[s.count])&&e.types.indexOf("word")<0){n[0]=e.token[s.count].replace(/\/\*\s*global\s+/,u).replace("*/",u).replace(/,\s+/g,",").split(",");}}function ne(){oe(false);ue();if(Y>-1)b();x=Ue({chars:o,end:g,lexer:"script",begin:"//",start:a,ender:fe});a=x[1];if(x[0]!==u){p=x[0];h=nt.test(p)?"ignore":"comment";if(p.indexOf("# sourceMappingURL=")===2){t[0]=s.count+1;t[1]=p;}s.push(e,{begin:s.stack.index,ender:-1,lexer:"script",lines:s.space,stack:s.stack.token,token:p,types:h},u);}}function Pe(){let m=0;let k=0;let O=a+1;let S=false;const j=g;const de=["/"];if(O<j){do{de.push(o[O]);if(T(o[O-1],92)||i(o[O-2],92)){if(i(o[O],91))S=true;if(i(o[O],93))S=false;}if(i(o[O],47)&&S===false){if(i(o[O-1],92)){k=0;m=O-1;if(m>0){do{if(i(o[m],92))k=k+1;else break;m=m-1;}while(m>0)}if(k%2===0)break}else {break}}O=O+1;}while(O<j)}if(o[O+1]==="g"||o[O+1]==="i"||o[O+1]==="m"||o[O+1]==="y"||o[O+1]==="u"){de.push(o[O+1]);if(o[O+2]!==o[O+1]&&(o[O+2]==="g"||o[O+2]==="i"||o[O+2]==="m"||o[O+2]==="y"||o[O+2]==="u")){de.push(o[O+2]);if(o[O+3]!==o[O+1]&&o[O+3]!==o[O+2]&&(o[O+3]==="g"||o[O+3]==="i"||o[O+3]==="m"||o[O+3]==="y"||o[O+3]==="u")){de.push(o[O+3]);if(o[O+4]!==o[O+1]&&o[O+4]!==o[O+2]&&o[O+4]!==o[O+3]&&(o[O+4]==="g"||o[O+4]==="i"||o[O+4]==="m"||o[O+4]==="y"||o[O+4]==="u")){de.push(o[O+4]);if(o[O+5]!==o[O+1]&&o[O+5]!==o[O+2]&&o[O+5]!==o[O+3]&&o[O+5]!==o[O+4]&&(o[O+5]==="g"||o[O+5]==="i"||o[O+5]==="m"||o[O+5]==="y"||o[O+5]==="u")){de.push(o[O+4]);a=O+5;}else {a=O+4;}}else {a=O+3;}}else {a=O+2;}}else {a=O+1;}}else {a=O;}return de.join(u)}function N(){const m=[o[a]];let k=0;let O=i(m[0],46);let S=/zz/;if(a<g-2&&o[a]==="0"){if(o[a+1]==="x"){S=/[0-9a-fA-F]/;}else if(o[a+1]==="o"){S=/[0-9]/;}else if(o[a+1]==="b"){S=/0|1/;}if(S.test(o[a+2])){m.push(o[a+1]);k=a+1;do{k=k+1;m.push(o[k]);}while(S.test(o[k+1]));a=k;return m.join(u)}}k=a+1;if(k<g){do{if(Be(o[k])||i(o[k],46)&&O===false){m.push(o[k]);if(i(o[k],46))O=true;}else {break}k=k+1;}while(k<g)}if(k<g-1&&(Be(o[k-1])||Be(o[k-2])&&(i(o[k-1],45)||i(o[k-1],43)))&&(o[k]==="e"||o[k]==="E")){m.push(o[k]);if(i(o[k+1],45)||i(o[k+1],43)){m.push(o[k+1]);k=k+1;}O=false;k=k+1;if(k<g){do{if(Be(o[k])||i(o[k],46)&&O===false){m.push(o[k]);if(i(o[k],46))O=true;}else {break}k=k+1;}while(k<g)}}a=k-1;return m.join(u)}function P(){let m=0;let k=0;let O=g;let S=u;const j=["=","<",">","+","*","?","|","^",":","&","%","~"];const de=j.length;if(Y>-1)b();if(i(o[a],47)&&(s.count>-1&&(h!=="word"&&h!=="reference"||p==="typeof"||p==="return"||p==="else")&&h!=="number"&&h!=="string"&&h!=="end")){if(p==="return"||p==="typeof"||p==="else"||h!=="word"){p=Pe();h="regex";}else {p="/";h="operator";}R();return "regex"}if(i(o[a],63)&&("+-*/.?".indexOf(o[a+1])>-1||i(o[a+1],58)&&j.join(u).indexOf(o[a+2])<0)){if(i(o[a+1],46)&&Be(o[a+2])===false){S="?.";}else if(i(o[a+1],63)){S="??";}if(S===u)return "?"}if(i(o[a],58)&&"+-*/".indexOf(o[a+1])>-1)return ":";if(a<g-1){if(T(o[a],60)&&i(o[a+1],60))return o[a];if(i(o[a],33)&&i(o[a+1],47))return "!";if(i(o[a],45)){d[d.length-1]=false;if(i(o[a+1],45)){S="--";}else if(i(o[a+1],61)){S="-=";}else if(i(o[a+1],62)){S="->";}if(S===u)return "-"}if(i(o[a],43)){d[d.length-1]=false;if(i(o[a+1],43)){S="++";}else if(i(o[a+1],61)){S="+=";}if(S===u)return "+"}if(i(o[a],61)&&T(o[a+1],61)&&T(o[a+1],33)&&T(o[a+1],62)){d[d.length-1]=false;return "="}}if(i(o[a],59)){if(c.language==="typescript"){if(e.stack[s.count]==="arguments"){if(e.token[s.count]==="?"){s.pop(e);S="?:";a=a-1;}d[d.length-1]=true;}else if(i(p,41)&&(e.token[e.begin[s.count]-1]==="function"||e.token[e.begin[s.count]-2]==="function")){d[d.length-1]=true;}else if(h==="reference"){m=s.count;let A=false;do{if(e.begin[m]===e.begin[s.count]){if(m<s.count&&e.token[m]===":"&&e.types[m+1]!=="type")A=true;if(e.token[m]==="?"&&A===false)break;if(e.token[m]===";"||e.token[m]==="x;")break;if(e.token[m]==="var"||e.token[m]==="let"||e.token[m]==="const"||e.types[m]==="type"){d[d.length-1]=true;break}}else {if(e.types[m]==="type_end"){d[d.length-1]=true;break}m=e.begin[m];}m=m-1;}while(m>e.begin[s.count])}}else if(e.token[s.count-1]==="["&&(e.types[s.count]==="word"||e.types[s.count]==="reference")){s.stack.update("attribute");e.stack[s.count]="attribute";}}if(S===u){if(i(o[a+1],43)&&i(o[a+2],43)||i(o[a+1],45)&&i(o[a+2],45)){S=o[a];}else {const A=[o[a]];m=a+1;if(m<O){do{if(i(o[m],43)&&i(o[m+1],43)||i(o[m],45)&&i(o[m+1],45))break;k=0;if(k<de){do{if(o[m]===j[k]){A.push(j[k]);break}k=k+1;}while(k<de)}if(k===de)break;m=m+1;}while(m<O)}S=A.join(u);}}a=a+(S.length-1);if(S==="=>"&&i(p,41)){m=s.count;O=e.begin[m];do{if(e.begin[m]===O)e.stack[m]="method";m=m-1;}while(m>O-1)}return S}function K(){const m=[o[a]];a=a+1;if(a<g){do{m.push(o[a]);if(i(o[a],96)&&(T(o[a-1],92)||!M(a-1)))break;if(i(o[a-1],36)&&i(o[a],123)&&(T(o[a-2],92)||!M(a-2)))break;a=a+1;}while(a<g)}return m.join(u)}function q(){let m=0;let k=false;let O=false;let S=0;let j=0;let de=0;let A=u;let D=u;let F=u;const Q=[];const z=d[d.length-1];const he="0123456789=<>+-*?|^:&.,;%(){}[]~";function ee(){if(i(p,40))s.stack.update("paren",s.count);s.external("html",Q.join(u));}if(Y>-1)b();D=s.count>0?e.token[s.count-1]:u;F=s.count>0?e.types[s.count-1]:u;A=v(1,false);if(c.language!=="jsx"&&c.language!=="tsx"&&Be(A)===false&&(p==="function"||D==="=>"||D==="void"||D==="."||p==="return"||h==="operator"||e.stack[s.count]==="arguments"||h==="type"&&D==="type"||h==="reference"&&(F==="operator"||D==="function"||D==="class"||D==="new")||h==="type"&&F==="operator")){const V=[];let ke=0;let ae=0;m=a;do{V.push(o[m]);if(i(o[m],60)){ke=ke+1;}else if(i(o[m],62)){ke=ke-1;if(ke<1)break}m=m+1;}while(m<g);ae=a;a=m;A=v(1,false);if(i(o[m],62)&&(z===true||D==="=>"||D==="."||F!=="operator"||F==="operator"&&(i(A,40)||i(A,61)))){h="generic";p=V.join(u).replace(/^<\s+/,"<").replace(/\s+>$/,">").replace(/,\s*/g,", ");R();return}a=ae;}m=s.count;if(e.types[m]==="comment"){do{m=m-1;}while(m>0&&e.types[m]==="comment")}if(z===false&&v(1,false)!==">"&&(T(o[a],60)&&he.indexOf(o[a+1])>-1||e.token[m]==="++"||e.token[m]==="--"||le(o[a+1])===true||Be(o[a+1])===true&&(h==="operator"||h==="string"||h==="number"||h==="reference"||h==="word"&&p!=="return"))){h="operator";p=P();return R()}if(c.language!=="typescript"&&(e.token[m]==="return"||e.types[m]==="operator"||e.types[m]==="start"||e.types[m]==="separator"||e.types[m]==="jsx_attribute_start"||i(e.token[m],125)&&s.stack.token==="global")){h="markup";c.language="jsx";do{Q.push(o[a]);if(i(o[a],123)){j=j+1;k=true;}else if(i(o[a],125)){j=j-1;if(j===0)k=false;}else if(i(o[a],60)&&k===false){if(i(o[a+1],60)){do{Q.push(o[a]);a=a+1;}while(a<g&&i(o[a+1],60))}S=S+1;if(v(1,false)==="/")O=true;}else if(i(o[a],62)&&k===false){if(i(o[a+1],62)){do{Q.push(o[a]);a=a+1;}while(i(o[a+1],62))}S=S-1;if(O===true){de=de-1;}else if(T(o[a-1],47)){de=de+1;}if(S===0&&j===0&&de<1){A=v(2,false);if(T(A,60))return ee();if(i(A,60)&&he.indexOf(A.charAt(1))<0&&le(A.charAt(1))===false){m=a+1;do{m=m+1;if(i(o[m],62)||le(o[m-1])&&he.indexOf(o[m])<0)break;if(he.indexOf(o[m])>-1)return ee()}while(m<g)}else {return ee()}}O=false;}a=a+1;}while(a<g);return ee()}h="operator";p=P();R();}function te(){let m=true;let k="+";let O=u;let S=u;let j=u;let de=u;let A=0;let D=0;let F=0;const Q=[];function z(){D=e.begin[D]-1;if(e.types[D]==="end"){z();}else if(i(e.token[D-1],46)){he();}}function he(){D=D-2;if(e.types[D]==="end"){z();}else if(i(e.token[D-1],46)){he();}}function ee(){let ke=0;if(ke<Q.length){do{s.push(e,Q[ke],u);ke=ke+1;}while(ke<Q.length)}}function V(ke){return {begin:e.begin[ke],ender:e.ender[ke],lexer:e.lexer[ke],lines:e.lines[ke],stack:e.stack[ke],token:e.token[ke],types:e.types[ke]}}O=e.token[s.count];S=e.token[s.count-1];j=e.token[s.count-2];if(O!=="++"&&O!=="--"&&S!=="++"&&S!=="--"){D=s.count;if(e.types[D]==="end"){z();}else if(i(e.token[D-1],46)){he();}}if(e.token[D-1]==="++"||e.token[D-1]==="--"){if("startendoperator".indexOf(e.types[D-2])>-1)return;F=D;if(F<s.count+1){do{Q.push(V(F));F=F+1;}while(F<s.count+1);s.splice({data:e,howmany:s.count-D,index:D});}}else {if(c.script.correct===false||O!=="++"&&O!=="--"&&S!=="++"&&S!=="--"){return}de=v(1,false);if((O==="++"||O==="--")&&(i(o[a],59)||i(de,59)||i(o[a],125)||i(de,125)||i(o[a],41)||i(de,41))){k=e.stack[s.count];if(k==="array"||k==="method"||k==="object"||k==="paren"||k==="notation"||e.token[e.begin[s.count]-1]==="while"&&k!=="while"){return}F=s.count;do{F=F-1;if(e.token[F]==="return")return;if(e.types[F]==="end"){do F=e.begin[F]-1;while(e.types[F]==="end"&&F>0)}}while(F>0&&(i(e.token[F],46)||e.types[F]==="word"||e.types[F]==="reference"||e.types[F]==="end"));if(i(e.token[F],44)&&T(o[a],59)&&T(de,59)&&T(o[a],125)&&T(de,125)&&T(o[a],41)&&T(de,41)){return}if(e.types[F]==="operator"){if(e.stack[F]==="switch"&&i(e.token[F],58)){do{F=F-1;if(e.types[F]==="start"){A=A-1;if(A<0)break}else if(e.types[F]==="end"){A=A+1;}if(i(e.token[F],63)&&A===0)return}while(F>0)}else {return}}m=false;k=O==="--"?"-":"+";}else if(i(j,91)||i(j,59)||i(j,123)||i(j,125)||i(j,40)||i(j,41)||i(j,44)||j==="return"||j==="x;"){if(O==="++"||O==="--"){if(i(j,91)||i(j,40)||i(j,44)||j==="return")return;if(O==="--")k="-";m=false;}else if(S==="--"||O==="--"){k="-";}}else {return}if(m===false)H=s.pop(e);D=s.count;if(e.types[D]==="end"){z();}else if(i(e.token[D-1],46)){he();}F=D;if(F<s.count+1){do{Q.push(V(F));F=F+1;}while(F<s.count+1)}}if(m===true){s.splice({data:e,howmany:1,index:D-1});p="=";h="operator";R();ee();p=k;h="operator";R();p="1";h="number";R();}else {p="=";h="operator";R();ee();p=k;h="operator";R();p="1";h="number";R();}p=e.token[s.count];h=e.types[s.count];if(i(de,125)&&T(o[a],59))oe(false);}function G(m,k,O){let S=0;let j=false;let de=false;let A=[m];let D;const F=k.split(u);const Q=F.length;const z=a;const he=a+m.length;const ee=c.script.quoteConvert;function V(){let ae=0;A=[];h=O;S=a;if(O==="string"&&le(o[S+1])){ae=1;do{S=S+1;if(o[S]===fe)ae=ae+1;}while(S<g&&le(o[S+1]));s.space=ae;}}function ke(){let ae=u;function Le(me){if(c.language!=="javascript"&&c.language!=="typescript"&&c.language!=="jsx"&&c.language!=="tsx"){const ye=ie=>ie.replace(/\s*$/," ");const Ae=ie=>ie.replace(/^\s*/," ");if(/\{(#|\/|(%>)|(%\]))/.test(me)||/\}%(>|\])/.test(me))return me;me=me.replace(/\{((\{+)|%-?)\s*/g,ye);me=me.replace(/\s*((\}\}+)|(-?%\}))/g,Ae);return me}return me}if(i(m,34)&&ee==="single"){A[0]="'";A[A.length-1]="'";}else if(i(m,39)&&ee==="double"){A[0]='"';A[A.length-1]='"';}else if(j===true){ae=A[A.length-1];A.pop();A.pop();A.push(ae);}a=S;if(k===fe){a=a-1;A.pop();}p=A.join(u);if(i(m,34)||i(m,39)||m==="{{"||m==="{%"){p=Le(p);}if(m==="{%"||m==="{{"){D=J(p);h=D[0];R(D[1]);return}if(O==="string"){h="string";if(c.language==="json"){p=p.replace(/\u0000/g,"\\u0000").replace(/\u0001/g,"\\u0001").replace(/\u0002/g,"\\u0002").replace(/\u0003/g,"\\u0003").replace(/\u0004/g,"\\u0004").replace(/\u0005/g,"\\u0005").replace(/\u0006/g,"\\u0006").replace(/\u0007/g,"\\u0007").replace(/\u0008/g,"\\u0008").replace(/\u0009/g,"\\u0009").replace(/\u000a/g,"\\u000a").replace(/\u000b/g,"\\u000b").replace(/\u000c/g,"\\u000c").replace(/\u000d/g,"\\u000d").replace(/\u000e/g,"\\u000e").replace(/\u000f/g,"\\u000f").replace(/\u0010/g,"\\u0010").replace(/\u0011/g,"\\u0011").replace(/\u0012/g,"\\u0012").replace(/\u0013/g,"\\u0013").replace(/\u0014/g,"\\u0014").replace(/\u0015/g,"\\u0015").replace(/\u0016/g,"\\u0016").replace(/\u0017/g,"\\u0017").replace(/\u0018/g,"\\u0018").replace(/\u0019/g,"\\u0019").replace(/\u001a/g,"\\u001a").replace(/\u001b/g,"\\u001b").replace(/\u001c/g,"\\u001c").replace(/\u001d/g,"\\u001d").replace(/\u001e/g,"\\u001e").replace(/\u001f/g,"\\u001f");}else if(m.indexOf("#!")===0){p=p.slice(0,p.length-1);s.space=2;}else if(s.stack.token!=="object"||s.stack.token==="object"&&T(v(1,false),58)&&T(e.token[s.count],44)&&T(e.token[s.count],123)){if(p.length>c.wrap&&c.wrap>0||c.wrap!==0&&i(e.token[s.count],43)&&(i(e.token[s.count-1],46)||i(e.token[s.count-1],39))){let me=p;let ye=u;let Ae=ee==="double"?'"':ee==="single"?"'":me.charAt(0);const ie=c.wrap;const we=/u[0-9a-fA-F]{4}/;const Oe=/x[0-9a-fA-F]{2}/;me=me.slice(1,me.length-1);if(i(e.token[s.count],43)&&(i(e.token[s.count-1],46)||i(e.token[s.count-1],39))){s.pop(e);Ae=e.token[s.count].charAt(0);me=e.token[s.count].slice(1,e.token[s.count].length-1)+me;s.pop(e);}if(me.length>ie&&ie>0){do{ye=me.slice(0,ie);if(i(ye[ie-5],92)&&we.test(me.slice(ie-4,ie+1))){ye=ye.slice(0,ie-5);}else if(i(ye[ie-4],92)&&we.test(me.slice(ie-3,ie+2))){ye=ye.slice(0,ie-4);}else if(i(ye[ie-3],92)&&(we.test(me.slice(ie-2,ie+3))||Oe.test(me.slice(ie-2,ie+1)))){ye=ye.slice(0,ie-3);}else if(i(ye[ie-2],92)&&(we.test(me.slice(ie-1,ie+4))||Oe.test(me.slice(ie-1,ie+2)))){ye=ye.slice(0,ie-2);}else if(i(ye[ie-1],92)){ye=ye.slice(0,ie-1);}ye=Ae+ye+Ae;me=me.slice(ye.length-2);p=ye;h="string";R(u);s.space=0;p="+";h="operator";R(u);}while(me.length>ie)}p=me===u?Ae+Ae:Ae+me+Ae;h="string";}}}else if(/\{\s*\?>$/.test(p)){h="liquid_start";}else {h=O;}if(p.length>0)R(u);}if(Y>-1)b();if(i(o[a-1],92)&&M(a-1)===true&&(i(o[a],34)||i(o[a],39))){s.pop(e);if(i(e.token[0],123)){if(i(o[a],34)){m='"';k='\\"';A=['"'];}else {m="'";k="\\'";A=["'"];}j=true;}else {if(i(o[a],34)){A=['\\"'];ke();return}A=["\\'"];ke();return}}S=he;if(S<g){do{if(T(e.token[0],123)&&T(e.token[0],91)&&ee!=="none"&&(i(o[S],34)||i(o[S],39))){if(i(o[S-1],92)){if(M(S-1)===true){if(ee==="double"&&i(o[S],39)){A.pop();}else if(ee==="single"&&i(o[S],34)){A.pop();}}}else if(ee==="double"&&i(o[S],34)&&i(o[a],39)){o[S]='\\"';}else if(ee==="single"&&i(o[S],39)&&i(o[a],34)){o[S]="\\'";}A.push(o[S]);}else if(S>z){de=true;if(i(o[S],123)&&i(o[S+1],37)&&o[S+2]!==m){ke();G("{%","%}","liquid");V();}else if(i(o[S],123)&&i(o[S+1],123)&&o[S+2]!==m){ke();G("{{","}}","liquid");V();}else {de=false;A.push(o[S]);}}else {A.push(o[S]);}if(c.language!=="json"&&c.language!=="javascript"&&(i(m,34)||i(m,39))&&(de===true||S>z)&&T(o[S-1],92)&&T(o[S],34)&&T(o[S],39)&&(i(o[S],10)||S===g-1===true)){s.error="Unterminated string in script on line number "+s.line;break}if(o[S]===F[Q-1]&&(T(o[S-1],92)||M(S-1)===false)){if(Q===1)break;if(A[S-he]===F[0]&&A.slice(S-he-Q+2).join(u)===k)break}S=S+1;}while(S<g)}ke();}function ue(){let m=u;const k=v(5,false);const O=s.count;const S=s.space;if(c.language==="json"||y.length<1||y[y.length-1].charAt(0)!=="x"||/^x?(;|\}|\))$/.test(p)===false){return}if(e.stack[s.count]==="do"&&k==="while"&&i(e.token[s.count],125)){return}if(i(p,59)&&e.token[O-1]==="x{"){m=e.token[e.begin[O-2]-1];if(e.token[O-2]==="do"||i(e.token[O-2],41)&&"ifforwhilecatch".indexOf(m)>-1){H=s.pop(e);p=c.script.correct===true?"}":"x}";h="end";C=s.stack.entry;R();y.pop();s.space=S;return}H=s.pop(e);p=c.script.correct===true?"}":"x}";h="end";C=s.stack.entry;R();y.pop();p=";";h="end";s.push(e,H,u);s.space=S;return}p=c.script.correct===true?"}":"x}";h="end";if(e.token[s.count]==="x}")return;if(k==="else"&&e.stack[s.count]==="if"&&(i(e.token[s.count],59)||e.token[s.count]==="x;")){C=s.stack.entry;R();y.pop();s.space=S;return}do{C=s.stack.entry;R();y.pop();if(e.stack[s.count]==="do")break}while(y[y.length-1]==="x{");s.space=S;}function xe(){let m=s.count;if(e.stack[m]==="object"&&c.script.objectSort===true){p=",";h="separator";ce();R();}else {do{m=m-1;}while(m>0&&e.types[m-1]==="comment");s.splice({data:e,howmany:0,index:m,record:{begin:e.begin[m],ender:-1,lexer:"script",lines:s.space,stack:e.stack[m],token:",",types:"separator"}});R();}}function ge(m){let k=false;let O=false;const S=v(1,false);const j=i(e.token[s.count],40)?s.count:e.begin[s.count];function de(){let A=0;const D=e.token[j-1]==="Array";const F=D===true?"[":"{";const Q=D===true?"]":"}";const z=D===true?"array":"object";if(D===true&&e.types[s.count]==="number"){A=Number(e.token[s.count]);H=s.pop(e);}H=s.pop(e);H=s.pop(e);H=s.pop(e);s.stack.pop();p=F;h="start";R(z);if(A>0){p=",";h="separator";do{R();A=A-1;}while(A>0)}p=Q;h="end";R();}if(Y>-1)b();if(W.length>0){if(W[W.length-1]===0){W.pop();}else {W[W.length-1]=W[W.length-1]-1;}}if(i(m,41)||m==="x)"||i(m,93)){if(c.script.correct===true)te();ce();}if(i(m,41)||m==="x)")oe(false);if(U>-1){if(i(m,125)&&(c.script.variableList==="list"&&B.count[U]===0||e.token[s.count]==="x;"&&c.script.variableList==="each")){E();}B.count[U]=B.count[U]-1;if(B.count[U]<0)E();}if(i(p,44)&&e.stack[s.count]!=="initializer"&&(i(m,93)&&i(e.token[s.count-1],91)||i(m,125))){H=s.pop(e);}if(i(m,41)||m==="x)"){p=m;if(r.length>0){$=r[r.length-1];if($.length>1&&T(S,123)&&($[0]==="if"||$[0]==="for"||$[0]==="with"||$[0]==="while"&&e.stack[$[1]-2]!==void 0&&e.stack[$[1]-2]!=="do")){k=true;}}}else if(i(m,93)){p="]";}else if(i(m,125)){if(T(p,44)&&c.script.correct===true){te();}if(s.stack.length>0&&s.stack.token!=="object"){oe(true);}if(c.script.objectSort===true&&s.stack.token==="object"){Ve(e);}if(h==="comment"){p=e.token[s.count];h=e.types[s.count];}p="}";}if(s.stack.token==="data_type"){h="type_end";}else {h="end";}r.pop();C=s.stack.entry;if(i(m,41)&&c.script.correct===true&&j-s.count<2&&(i(e.token[s.count],40)||e.types[s.count]==="number")&&(e.token[j-1]==="Array"||e.token[j-1]==="Object")&&e.token[j-2]==="new"){de();O=true;}if(y[y.length-1]==="x{"&&i(m,125)){ue();y.pop();if(e.stack[s.count]!=="try"){if(T(S,58)&&T(S,59)&&e.token[e.begin[a]-1]!=="?")ue();}p="}";}else {y.pop();}if(c.script.endComma!==void 0&&c.script.endComma!=="none"&&s.stack.token==="array"||s.stack.token==="object"||s.stack.token==="data_type"){if(c.script.endComma==="always"&&T(e.token[s.count],44)){const A=s.stack.index;let D=s.count;do{if(e.begin[D]===A){if(i(e.token[D],44))break}else {D=e.begin[D];}D=D-1;}while(D>A);if(D>A){const F=h;const Q=p;p=",";h="separator";R();p=Q;h=F;}}else if(c.script.endComma==="never"&&i(e.token[s.count],44)){s.pop(e);}}if(O===false){R();if(i(p,125)&&e.stack[s.count]!=="object"&&e.stack[s.count]!=="class"&&e.stack[s.count]!=="data_type"){n.pop();ue();}}if(k===true){p=c.script.correct===true?"{":"x{";h="start";R($[0]);y.push("x{");$[1]=s.count;}d.pop();if(s.stack.token!=="data_type")d[d.length-1]=false;}function I(m){let k=s.count;let O=u;let S=u;let j=u;let de=false;y.push(m);if(i(m,123)&&(e.types[s.count]==="type"||e.types[s.count]==="type_end"||e.types[s.count]==="generic")){let A=0;if(e.types[s.count]==="type_end")k=e.begin[s.count];A=k;do{k=k-1;if(e.begin[k]!==A&&e.begin[k]!==-1)break;if(i(e.token[k],58))break}while(k>e.begin[k]);if(i(e.token[k],58)&&e.stack[k-1]==="arguments"){d.push(false);de=true;}else {d.push(d[d.length-1]);}k=s.count;}else if(i(m,91)&&e.types[s.count]==="type_end"){d.push(true);}else {d.push(d[d.length-1]);}if(Y>-1){b();k=s.count;}if(U>-1)B.count[U]=B.count[U]+1;if(e.token[k-1]==="function"){r.push(["function",k+1]);}else {r.push([p,k+1]);}p=m;if(d[d.length-1]===true){h="type_start";}else {h="start";}if(i(m,40)||m==="x("){ce();}else if(i(m,91)){if(l>-1){if(e.begin[l-1]===e.begin[e.begin[k]-1]||e.token[e.begin[k]]==="x("){l=-1;if(c.script.correct===true){ge(")");}else {ge("x)");}ce();p="{";h="start";}}else if(i(p,41)){ce();}if(h==="comment"&&i(e.token[k-1],41)){p=e.token[k];e.token[k]="{";h=e.types[k];e.types[k]="start";}}O=(()=>{let A=s.count;if(e.types[A]==="comment"){do{A=A-1;}while(A>0&&e.types[A]==="comment")}return e.token[A]})();S=e.stack[k]===void 0?u:(()=>{let A=s.count;if(e.types[A]==="comment"){do A=A-1;while(A>0&&e.types[A]==="comment")}return e.token[e.begin[A]-1]})();if(i(p,123)&&(e.types[k]==="word"||i(e.token[k],93))){let A=k;if(i(e.token[A],93)){do A=e.begin[A]-1;while(i(e.token[A],93))}do{if(e.types[A]==="start"||e.types[A]==="end"||e.types[A]==="operator")break;A=A-1;}while(A>0);if(i(e.token[A],58)&&e.stack[A-1]==="arguments"){j="function";n.push(w);w=[];}}if(h==="type_start"){j="data_type";}else if(j===u&&(i(p,123)||p==="x{")){if(O==="else"||O==="do"||O==="try"||O==="finally"||O==="switch"){j=O;}else if(W[W.length-1]===0&&O!=="return"){W.pop();j="class";}else if(e.token[k-1]==="class"){j="class";}else if(i(e.token[k],93)&&i(e.token[k-1],91)){j="array";}else if((e.types[k]==="word"||e.types[k]==="reference")&&(e.types[k-1]==="word"||e.types[k-1]==="reference"||e.token[k-1]==="?"&&(e.types[k-2]==="word"||e.types[k-2]==="reference"))&&e.token[k]!=="in"&&e.token[k-1]!=="export"&&e.token[k-1]!=="import"){j="map";}else if(e.stack[k]==="method"&&e.types[k]==="end"&&(e.types[e.begin[k]-1]==="word"||e.types[e.begin[k]-1]==="reference")&&e.token[e.begin[k]-2]==="new"){j="initializer";}else if(i(p,123)&&(i(O,41)||O==="x)")&&(e.types[e.begin[k]-1]==="word"||e.types[e.begin[k]-1]==="reference"||e.token[e.begin[k]-1]==="]")){if(S==="if"){j="if";}else if(S==="for"){j="for";}else if(S==="while"){j="while";}else if(S==="class"){j="class";}else if(S==="switch"||e.token[e.begin[k]-1]==="switch"){j="switch";}else if(S==="catch"){j="catch";}else {j="function";}}else if(i(p,123)&&(i(O,59)||O==="x;")){j="block";}else if(i(p,123)&&i(e.token[k],58)&&e.stack[k]==="switch"){j="block";}else if(e.token[k-1]==="import"||e.token[k-2]==="import"||e.token[k-1]==="export"||e.token[k-2]==="export"){j="object";}else if(i(O,41)&&($[0]==="function"||$[0]==="if"||$[0]==="for"||$[0]==="class"||$[0]==="while"||$[0]==="switch"||$[0]==="catch")){j=$[0];}else if(e.stack[k]==="notation"){j="function";}else if((e.types[k]==="number"||e.types[k]==="string"||e.types[k]==="word"||e.types[k]==="reference")&&(e.types[k-1]==="word"||e.types[k-1]==="reference")&&e.token[e.begin[k]-1]!=="for"){j="function";}else if(s.stack.length>0&&T(e.token[k],58)&&s.stack.token==="object"&&(i(e.token[e.begin[k]-2],123)||i(e.token[e.begin[k]-2],44))){j="function";}else if(e.types[$[1]-1]==="markup"&&e.token[$[1]-3]==="function"){j="function";}else if(O==="=>"){j="function";}else if(de===true||e.types[s.count]==="type_end"&&e.stack[e.begin[s.count]-2]==="arguments"){j="function";}else if(i(O,41)&&e.stack[k]==="method"&&(e.types[e.begin[k]-1]==="word"||e.types[e.begin[k]-1]==="property"||e.types[e.begin[k]-1]==="reference")){j="function";}else if(i(p,123)&&e.types[k]==="word"&&e.token[k]!=="return"&&e.token[k]!=="in"&&e.token[k]!=="import"&&e.token[k]!=="const"&&e.token[k]!=="let"&&e.token[k]!==u){j="block";}else if(i(p,123)&&"if|else|for|while|function|class|switch|catch|finally".indexOf(e.stack[k])>-1&&(e.token[k]==="x}"||i(e.token[k],125))){j="block";}else if(e.stack[k]==="arguments"){j="function";}else if(e.types[k]==="generic"){do{k=k-1;if(e.token[k]==="function"||e.stack[k]==="arguments"){j="function";break}if(e.token[k]==="interface"){j="map";break}if(i(e.token[k],59)){j="object";break}}while(k>e.begin[s.count])}else {j="object";}if(j!=="object"&&j!=="class"){if(j==="function"){n.push(w);w=[];}else {n.push([]);}}}else if(i(p,91)){j="array";}else if(i(p,40)||p==="x("){if(O==="function"||e.token[k-1]==="function"||e.token[k-1]==="function*"||e.token[k-2]==="function"){j="arguments";}else if(i(e.token[k-1],46)||i(e.token[e.begin[k]-2],46)){j="method";}else if(e.types[k]==="generic"){j="method";}else if(i(e.token[k],125)&&e.stack[k]==="function"){j="method";}else if(O==="if"||O==="for"||O==="class"||O==="while"||O==="catch"||O==="finally"||O==="switch"||O==="with"){j="expression";}else if(e.types[k]==="word"||e.types[k]==="property"||e.types[k]==="reference"){j="method";}else {j="paren";}}R(j);if(W.length>0)W[W.length-1]=W[W.length-1]+1;}function J(m){let k=2;let O=0;let S=u;const j=m.slice(0,2);const de=m.length;if(i(m[2],45))k=k+1;if(le(m.charAt(k))===true){do{k=k+1;}while(le(m.charAt(k))===true&&k<de)}O=k;do{O=O+1;}while(le(m.charAt(O))===false&&m.charAt(O)!=="("&&O<de);if(O===de)O=m.length-2;S=m.slice(k,O);if(S==="else"||j==="{%"&&(S==="elseif"||S==="when"||S==="elif"||S==="elsif")){return ["liquid_else",`liquid_${S}`]}if(j==="{{"){if(S==="end")return ["liquid_end",u];if(S==="define"||S==="form"||S==="if"||S==="unless"||S==="range"||S==="with"){return ["liquid_start",`liquid_${S}`]}return ["liquid",u]}O=L.length-1;if(O>-1){do{if(S===L[O]&&S!=="block"){return ["liquid_start",`liquid_${S}`]}if(S==="end"+L[O]){return ["liquid_end",u]}O=O-1;}while(O>-1)}return ["liquid",u]}function b(){let m=Y;let k=1;let O=u;let S=u;let j=p;let de=h;const A=[];function D(){y.push("x{");s.splice({data:e,howmany:1,index:s.count-3});}function F(Q,z,he){const ee=e.begin[Q];let V=0;do{if(e.token[Q]===z&&e.types[Q]==="word"){if(he===true){e.types[Q]="reference";}else if(e.begin[Q]>ee&&e.token[e.begin[Q]]==="{"&&e.stack[Q]!=="object"&&e.stack[Q]!=="class"&&e.stack[Q]!=="data_type"){if(e.stack[Q]==="function"){e.types[Q]="reference";}else {V=e.begin[Q];do{if(e.stack[V]==="function"){e.types[Q]="reference";break}V=e.begin[V];}while(V>ee)}}}Q=Q-1;}while(Q>ee)}do{A.push(o[m]);if(i(o[m],92));m=m+1;}while(m<a);if(p.charAt(0)==="\u201C"){s.error=`Quote looking character (\u201C, \\u201c) used instead of actual quotes on line number ${s.line}`;}else if(p.charAt(0)==="\u201D"){s.error=`Quote looking character (\u201D, \\u201d) used instead of actual quotes on line number ${s.line}`;}O=A.join(u);Y=-1;if(s.count>0&&O==="function"&&i(e.token[s.count],40)&&(i(e.token[s.count-1],123)||e.token[s.count-1]==="x{")){e.types[s.count]="start";}if(s.count>1&&O==="function"&&i(p,40)&&(i(e.token[s.count-1],125)||e.token[s.count-1]==="x}")){if(i(e.token[s.count-1],125)){m=s.count-2;if(m>-1){do{if(e.types[m]==="end"){k=k+1;}else if(e.types[m]==="start"||e.types[m]==="end"){k=k-1;}if(k===0)break;m=m-1;}while(m>-1)}if(i(e.token[m],123)&&i(e.token[m-1],41)){k=1;m=m-2;if(m>-1){do{if(e.types[m]==="end"){k=k+1;}else if(e.types[m]==="start"||e.types[m]==="end"){k=k-1;}if(k===0)break;m=m-1;}while(m>-1)}if(e.token[m-1]!=="function"&&e.token[m-2]!=="function"){e.types[s.count]="start";}}}else {e.types[s.count]="start";}}if(c.script.correct===true&&(O==="Object"||O==="Array")&&i(o[a+1],40)&&i(o[a+2],41)&&i(e.token[s.count-1],61)&&e.token[s.count]==="new"){if(O==="Object"){e.token[s.count]="{";p="}";e.stack[s.count]="object";s.stack.update("object");}else {e.token[s.count]="[";p="]";e.stack[s.count]="array";s.stack.update("array");}e.types[s.count]="start";h="end";o[a+1]=u;o[a+2]=u;a=a+2;}else {k=s.count;m=k;if(c.script.variableList!=="none"&&(O==="var"||O==="let"||O==="const")){if(e.types[k]==="comment"){do{k=k-1;}while(k>0&&e.types[k]==="comment")}if(c.script.variableList==="list"&&U>-1&&B.index[U]===k&&O===B.word[U]){p=",";h="separator";e.token[k]=p;e.types[k]=h;B.count[U]=0;B.index[U]=k;B.word[U]=O;return}U=U+1;B.count.push(0);B.index.push(k);B.word.push(O);k=m;}else if(U>-1&&O!==B.word[U]&&s.count===B.index[U]&&i(e.token[B.index[U]],59)&&p!==B.word[U]&&c.script.variableList==="list"){E();}if(O==="from"&&e.token[s.count]==="x;"&&i(e.token[s.count-1],125)){ce();}if(O==="while"&&e.token[s.count]==="x;"&&i(e.token[s.count-1],125)){let Q=0;let z=s.count-2;if(z>-1){do{if(e.types[z]==="end"){Q=Q+1;}else if(e.types[z]==="start"){Q=Q-1;}if(Q<0){if(i(e.token[z],123)&&e.token[z-1]==="do")ce();return}z=z-1;}while(z>-1)}}if(de==="comment"){let Q=s.count;do Q=Q-1;while(Q>0&&e.types[Q]==="comment");de=e.types[Q];j=e.token[Q];}S=v(2,false);if(O==="void"){if(j===":"&&e.stack[s.count-1]==="arguments"){h="type";}else {h="word";}}else if((s.stack.token==="object"||s.stack.token==="class"||s.stack.token==="data_type")&&(i(e.token[s.count],123)||(i(e.token[e.begin[s.count]],123)&&i(e.token[s.count],44)||e.types[s.count]==="liquid_end"&&(i(e.token[e.begin[s.count]-1],123)||i(e.token[e.begin[s.count]-1],44))))){if(O==="return"||O==="break"){h="word";}else {h="property";}}else if(d[d.length-1]===true||(c.language==="typescript"||c.language==="flow")&&j==="type"){h="type";}else if(n.length>0&&(j==="function"||j==="class"||j==="const"||j==="let"||j==="var"||j==="new"||j==="void")){h="reference";n[n.length-1].push(O);if(c.language==="javascript"||c.language==="jsx"||c.language==="typescript"||c.language==="tsx"){if(j==="var"||j==="function"&&e.types[s.count-1]!=="operator"&&e.types[s.count-1]!=="start"&&e.types[s.count-1]!=="end"){F(s.count,O,true);}else {F(s.count,O,false);}}else {F(s.count,O,false);}}else if(s.stack.token==="arguments"&&h!=="operator"){h="reference";w.push(O);}else if(i(j,44)&&e.stack[s.count]!=="method"&&(e.stack[s.count]!=="expression"||e.token[e.begin[s.count]-1]==="for")){let Q=s.count;const z=s.stack.index;do{if(e.begin[Q]===z){if(e.token[Q]===";")break;if(e.token[Q]==="var"||e.token[Q]==="let"||e.token[Q]==="const"||e.token[Q]==="type"){break}}else if(e.types[Q]==="end"){Q=e.begin[Q];}Q=Q-1;}while(Q>z);if(n.length>0&&e.token[Q]==="var"){h="reference";n[n.length-1].push(O);if(c.language==="javascript"||c.language==="jsx"||c.language==="typescript"||c.language==="tsx"){F(Q,O,true);}else {F(Q,O,false);}}else if(n.length>0&&(e.token[Q]==="let"||e.token[Q]==="const"||e.token[Q]==="type"&&(c.language==="typescript"||c.language==="tsx"))){h="reference";n[n.length-1].push(O);F(Q,O,false);}else {h="word";}}else if(s.stack.token!=="object"||s.stack.token==="object"&&p!==","&&p!=="{"){let Q=n.length;let z=0;if(Q>0){do{Q=Q-1;z=n[Q].length;if(z>0){do{z=z-1;if(O===n[Q][z])break}while(z>0);if(O===n[Q][z])break}}while(Q>0);if(n[Q][z]===O&&j!=="."){h="reference";}else {h="word";}}else {h="word";}}else {h="word";}p=O;if(O==="from"&&e.token[s.count]==="}")ce();}R();if(O==="class")W.push(0);if(O==="do"){S=v(1,true);if(S!=="{"){p=c.script.correct===true?"{":"x{";h="start";y.push("x{");R("do");}}if(O==="else"){S=v(2,true);let Q=s.count-1;if(e.types[Q]==="comment"){do{Q=Q-1;}while(Q>0&&e.types[Q]==="comment")}if(e.token[Q]==="x}"){if(e.token[s.count]==="else"){if(e.stack[s.count-1]!=="if"&&e.types[s.count-1]!=="comment"&&e.stack[s.count-1]!=="else"){y.pop();s.splice({data:e,howmany:0,index:s.count-1,record:{begin:e.begin[e.begin[e.begin[s.count-1]-1]-1],ender:-1,lexer:"script",lines:0,stack:"if",token:c.script.correct===true?"}":"x}",types:"end"}});if(s.stack.length>1){s.stack.splice(s.stack.length-2,1);s.stack.update(s.count);}}else if(e.token[s.count-2]==="x}"&&C[0]!=="if"&&e.stack[s.count]==="else"){D();}else if(e.token[s.count-2]==="}"&&e.stack[s.count-2]==="if"&&C[0]==="if"&&e.token[C[1]-1]!=="if"&&e.token[e.begin[s.count-1]]==="x{"){D();}}else if(e.token[s.count]==="x}"&&e.stack[s.count]==="if"){D();}}if(S!=="if"&&T(S,123)){p=c.script.correct===true?"{":"x{";h="start";y.push("x{");R("else");}}if((O==="for"||O==="if"||O==="switch"||O==="catch")&&e.token[s.count-1]!=="."){S=v(1,true);if(S!=="("){l=s.count;if(c.script.correct===true){I("(");}else {I("x(");}}}}function Z(){s.space=1;do{if(i(o[a],10)){s.lineOffset=a;s.space=s.space+1;s.line=s.line+1;}if(le(o[a+1])===false)break;a=a+1;}while(a<g)}do{if(le(o[a])){if(Y>-1)b();Z();if(s.space>1&&X<s.count&&T(o[a+1],59)&&T(o[a+1],125)){oe(false);X=s.count;}}else if(i(o[a],123)&&i(o[a+1],37)){G("{%","%}","liquid");}else if(i(o[a],123)&&i(o[a+1],123)){G("{{","}}","liquid");}else if(i(o[a],60)&&i(o[a+1],33)&&i(o[a+2],45)&&i(o[a+3],45)){G("<!--","-->","comment");}else if(i(o[a],60)){q();}else if(i(o[a],47)&&(a===g-1||i(o[a+1],42))){be();}else if((s.count<0||e.lines[s.count]>0)&&i(o[a],35)&&i(o[a+1],33)&&(i(o[a+2],47)||i(o[a+3],91))){G("#!"+o[a+2],fe,"string");}else if(i(o[a],47)&&(a===g-1||i(o[a+1],47))){ne();}else if(i(o[a],96)||i(o[a],125)&&s.stack.token==="liquid_string"){if(Y>-1)b();p=K();if(i(p,125)&&p.slice(p.length-2)==="${"){h="liquid_string_else";R("liquid_string");}else if(p.slice(p.length-2)==="${"){h="liquid_string_start";R("liquid_string");}else if(i(p[0],125)){h="liquid_string_end";R();}else {h="string";R();}}else if(i(o[a],34)||i(o[a+1],39)){G(o[a],o[a],"string");}else if(i(o[a],45)&&(a<g-1&&T(o[a+1],61)&&T(o[a+1],45))&&(h==="number"||h==="word"||h==="reference")&&p!=="return"&&(h==="word"||h==="reference"||h==="number"||i(p,41)||i(p,93))){if(Y>-1)b();p="-";h="operator";R();}else if(Y===-1&&(o[a]!=="0"||o[a]==="0"&&o[a+1]!=="b")&&(Be(o[a])||a!==g-2&&i(o[a],45)&&i(o[a+1],46)&&Be(o[a+2])||a!==g-1&&(i(o[a],45)||i(o[a],46))&&Be(o[a+1]))){if(Y>-1)b();if(h==="end"&&i(o[a],45)){p="-";h="operator";}else {p=N();h="number";}R();}else if(i(o[a],58)&&i(o[a+1],58)){if(Y>-1)b();if(c.script.correct===true)te();ce();a=a+1;p="::";h="separator";R();}else if(i(o[a],44)){if(Y>-1)b();if(c.script.correct===true)te();if(d[d.length-1]===true&&e.stack[s.count].indexOf("type")<0){d[d.length-1]=false;}if(h==="comment"){xe();}else if(U>-1&&B.count[U]===0&&c.script.variableList==="each"){ce();p=";";h="separator";R();p=B.word[U];h="word";R();B.index[U]=s.count;}else {p=",";h="separator";ce();R();}}else if(i(o[a],46)){if(Y>-1)b();d[d.length-1]=false;if(i(o[a+1],46)&&i(o[a+2],46)){p="...";h="operator";a=a+2;}else {ce();p=".";h="separator";}if(le(o[a-1]))s.space=1;R();}else if(i(o[a],59)){if(Y>-1)b();if(d[d.length-1]===true&&e.stack[s.count].indexOf("type")<0){d[d.length-1]=false;}if(W[W.length-1]===0)W.pop();if(U>-1&&B.count[U]===0){if(c.script.variableList==="each"){E();}else {B.index[U]=s.count+1;}}if(c.script.correct===true)te();p=";";h="separator";if(e.token[s.count]==="x}"){Ce();}else {R();}ue();}else if(i(o[a],40)||i(o[a],91)||i(o[a],123)){I(o[a]);}else if(i(o[a],41)||i(o[a],93)||i(o[a],125)){ge(o[a]);}else if(Y<0&&e.stack[s.count]==="object"&&i(o[a],42)&&T(o[a+1],61)&&Be(o[a+1])===false&&le(o[a+1])===false){Y=a;}else if(i(o[a],61)||i(o[a],38)||i(o[a],60)||i(o[a],62)||i(o[a],43)||i(o[a],45)||i(o[a],42)||i(o[a],47)||i(o[a],33)||i(o[a],63)||i(o[a],124)||i(o[a],94)||i(o[a],58)||i(o[a],37)||i(o[a],94)){p=P();if(p==="regex"){p=e.token[s.count];}else if(i(p,42)&&e.token[s.count]==="function"){e.token[s.count]="function*";}else {h="operator";if(T(p,33)&&p!=="++"&&p!=="--")ce();R();}}else if(Y<0&&o[a]!==u){Y=a;}if(U>-1&&s.count===B.index[U]+1&&i(e.token[B.index[U]],59)&&p!==B.word[U]&&h!=="comment"&&c.script.variableList==="list"){E();}a=a+1;}while(a<g);if(Y>-1)b();if((T(e.token[s.count],125)&&i(e.token[0],123)||T(e.token[0],123))&&(T(e.token[s.count],93)&&i(e.token[0],91)||T(e.token[0],91))){oe(false);}if(t[0]===s.count){p=fe+t[1];h="string";R();}if(e.token[s.count]==="x;"&&(i(e.token[s.count-1],125)||i(e.token[s.count-1],93))&&e.begin[s.count-1]===0){s.pop(e);}if(c.script.objectSort&&e.begin.length>0){Xe(0,s.count+1);}qe(c.script,_);return e}function At(){const{data:e,rules:n,source:c}=s;const f=c.split(u);const _=c.length;const o=[];const g=[];let r=0;let y=u;let W=u;function t(l){s.push(e,{begin:s.stack.index,ender:-1,lexer:"style",lines:s.space,stack:s.stack.token,token:W,types:y},l);}function d(l){const w=l;do{l=l-1;}while(f[l]==="\\"&&l>0);return (w-l)%2===1}function B(l){const w=l.replace(/\s*!important/," !important").split(u);const H=/-?transition$/.test(e.token[s.count-2]);const C=[];const x=/(\s|\(|,)-?0+\.?\d+([a-z]|\)|,|\s)/g;const L=/(\s|\(|,)-?\.?\d+([a-z]|\)|,|\s)/g;let E=0;let R=0;let v=u;let M=w.length;let oe=[];const ce=P=>{return P};function Ce(P){P=P.replace(/\s*/g,u);return /\/\d/.test(P)&&l.indexOf("url(")===0?P:` ${P.charAt(0)} ${P.charAt(1)}`}function be(P){if(n.style.noLeadZero===true){return P.replace(/^-?\D0+(\.|\d)/,K=>K.replace(/0+/,u))}else if(/0*\./.test(P)){return P.replace(/0*\./,"0.")}else if(/0+/.test(/\d+/.exec(P)[0])){return /^\D*0+\D*$/.test(P)?P.replace(/0+/,"0"):P.replace(/\d+/.exec(P)[0],/\d+/.exec(P)[0].replace(/^0+/,u))}return P}function ne(P){return P.replace(",",", ")}function Pe(P){return `${P} `}function N(){const P=E-1;let K=P;if(P<1)return true;do{K=K-1;}while(K>0&&w[K]==="\\");return (P-K)%2===1}if(E<M){do{oe.push(w[E]);if(w[E-1]!=="\\"||N()===false){if(v===u){if(i(w[E],34)){v='"';R=R+1;}else if(i(w[E],39)){v="'";R=R+1;}else if(i(w[E],40)){v=")";R=R+1;}else if(i(w[E],91)){v="]";R=R+1;}}else if(i(w[E],40)&&i(v,41)||i(w[E],91)&&i(v,93)){R=R+1;}else if(w[E]===v){R=R-1;if(R===0)v=u;}}if(v===u&&i(w[E],32)){oe.pop();C.push(ce(oe.join(u)));oe=[];}E=E+1;}while(E<M)}C.push(ce(oe.join(u)));M=C.length;E=0;if(E<M){do{if(n.style.noLeadZero===true&&/^-?0+\.\d+[a-z]/.test(C[E])===true){C[E]=C[E].replace(/0+\./,".");}else if(n.style.noLeadZero===false&&/^-?\.\d+[a-z]/.test(C[E])){C[E]=C[E].replace(".","0.");}else if(x.test(C[E])||L.test(C[E])){C[E]=C[E].replace(x,be).replace(L,be);}else if(/^(0+([a-z]{2,3}|%))$/.test(C[E])&&H===false){C[E]="0";}else if(/^(0+)/.test(C[E])){C[E]=C[E].replace(/0+/,"0");if(/\d/.test(C[E].charAt(1)))C[E]=C[E].substr(1);}else if(/^url\((?!('|"))/.test(C[E])&&C[E].charCodeAt(C[E].length-1)===41){v=C[E].charAt(C[E].indexOf("url(")+4);if(v!=="@"&&T(v,40)&&T(v,60)){if(n.style.quoteConvert==="double"){C[E]=C[E].replace(/url\(/,'url("').replace(/\)$/,'")');}else {C[E]=C[E].replace(/url\(/,"url('").replace(/\)$/,"')");}}}if(/^(\+|-)?\d+(\.\d+)?(e-?\d+)?\D+$/.test(C[E])){if(!pe.css.units.has(C[E].replace(/(\+|-)?\d+(\.\d+)?(e-?\d+)?/,u))){C[E]=C[E].replace(/(\+|-)?\d+(\.\d+)?(e-?\d+)?/,Pe);}}if(/^\w+\(/.test(C[E])&&C[E].charAt(C[E].length-1)===")"&&(C[E].indexOf("url(")!==0||C[E].indexOf("url(")===0&&C[E].indexOf(se)>0)){C[E]=C[E].replace(/,\S/g,ne);}E=E+1;}while(E<M)}v=C.join(se);return v.charAt(0)+v.slice(1).replace(/\s*(\/|\+|\*)\s*(\d|\$)/,Ce)}function U(){const l=[];const w=[];const H=n.style.quoteConvert;let C=r;let x=0;let L=u;let E=null;let R=false;function v(){w.push(f[C]);if(le(f[C+1]))do{C=C+1;}while(C<_&&le(f[C+1]))}if(C<_){do{if(i(f[C],34)||i(f[C],39)){if(E===null)E=false;if(l[l.length-1]===f[C]&&(f[C-1]!=="\\"||d(C-1)===false)){l.pop();if(H==="double"){f[C]='"';}else if(H==="single"){f[C]="'";}}else if(T(l[l.length-1],34)&&T(l[l.length-1],39)&&(T(f[C-1],92)||d(C-1)===false)){l.push(f[C]);if(H==="double"){f[C]='"';}else if(H==="single"){f[C]="'";}}else if(f[C-1]==="\\"&&H!=="none"){if(d(C-1)===true){if(H==="double"&&i(f[C],39)){w.pop();}else if(H==="single"&&i(f[C],34)){w.pop();}}}else if(H==="double"&&i(f[C],34)){f[C]='\\"';}else if(H==="single"&&i(f[C],39)){f[C]="\\'";}w.push(f[C]);}else if(f[C-1]!=="\\"||d(C-1)===false){if(i(f[C],40)){if(E===null)E=true;l.push(")");v();}else if(i(f[C],91)){E=false;l.push("]");v();}else if((i(f[C],35)||i(f[C],64))&&i(f[C+1],123)){E=false;w.push(f[C]);C=C+1;l.push("}");v();}else if(f[C]===l[l.length-1]){w.push(f[C]);l.pop();}else {w.push(f[C]);}}else {w.push(f[C]);}if(s.stack.token==="map"&&l.length===0&&(i(f[C+1],44)||i(f[C+1],41))){if(i(f[C+1],41)&&i(e.token[s.count],40)){s.pop(e);s.stack.pop();w.splice(0,0,"(");}else {break}}if(i(f[C+1],58)){x=C;if(le(f[x])){do x=x-1;while(le(f[x]))}L=f.slice(x-6,x+1).join(u);if(L.indexOf("filter")===L.length-6||L.indexOf("progid")===L.length-6){L="filter";}}if(l.length===0){if(i(f[C+1],59)&&d(C+1)===true||i(f[C+1],58)&&T(f[C],58)&&T(f[C+2],58)&&L!=="filter"&&L!=="progid"||(i(f[C+1],123)||i(f[C+1],125))||i(f[C+1],47)&&(i(f[C+2],42)||i(f[C+2],47))){x=w.length-1;if(le(w[x])){do{x=x-1;C=C-1;w.pop();}while(le(w[x]))}break}if(i(f[C+1],44))break}C=C+1;}while(C<_)}r=C;if(s.stack.token==="map"&&i(w[0],40)){o[o.length-1]=o[o.length-1]-1;}W=w.join(u).replace(/\s+/g,se).replace(/^\s/,u).replace(/\s$/,u);if(E===true){if(pe.css.atrules.has(W)&&n.style.atRuleSpace===true){e.token[s.count]=e.token[s.count].replace(/\s*\(/g," (").replace(/\s*\)\s*/g,") ").replace(/,\(/g,", (");}else {W=W.replace(/\s+\(/g,"(").replace(/\s+\)/g,")").replace(/,\(/g,", (");}}if(y==="colon"&&e.types[s.count-1]==="start"){if(pe.css.pseudoClasses.has(W)){e.token[s.count]=W=":"+W;y="pseudo";R=true;}}else if(s.count>-1&&e.token[s.count].indexOf("extend(")===0){y="pseudo";}else if(E===true&&/\d/.test(W.charAt(0))===false&&/^rgba?\(/.test(W)===false&&W.indexOf("url(")!==0&&(W.indexOf(se)<0||W.indexOf(se)>W.indexOf("("))&&W.charAt(W.length-1)===")"){if(i(e.token[s.count],58)){y="value";}else {W=W.replace(/,\u0020?/g,", ");y="function";}W=B(W);}else if(s.count>-1&&`"'`.indexOf(e.token[s.count].charAt(0))>-1&&e.types[s.count]==="variable"){y="item";}else if(i(w[0],64)||w[0]==="$"){if(e.types[s.count]==="colon"&&n.language==="css"&&(e.types[s.count-1]==="property"||e.types[s.count-1]==="variable")){y="value";}else if(s.count>-1){y="item";L=e.token[s.count];C=L.indexOf("(");if(i(L[L.length-1],41)&&C>0){L=L.slice(C+1,L.length-1);e.token[s.count]=e.token[s.count].slice(0,C+1)+B(L)+")";}}W=B(W);}else {y="item";}if(R===false){t(u);}else {R=false;}}function a(l){let w=s.count;let H=0;let C=u;const x=[];function L(){if(s.count<0)return;if(w>0&&(e.types[w]==="comment"||e.types[w]==="ignore")){do{w=w-1;x.push(e.token[w]);}while(w>0&&e.lexer[w]==="style"&&(e.types[w]==="comment"||e.types[w]==="ignore"))}H=w-1;if(H>0&&(e.types[H]==="comment"||e.types[H]==="ignore")){do H=H-1;while(H>0&&e.lexer[w]==="style"&&(e.types[H]==="comment"||e.types[H]==="ignore"))}if(H<0)H=0;if(w<0)w=0;C=e.token[w][0];}function E(v){return v.replace(/\s*&/," &").replace(/\s*&\s*{/," & {").replace(/\s*>\s*/g," > ").replace(/\s*\+\s*/g," + ")}function R(v){let M=v;const oe=e.begin[M];e.token[v]=e.token[v].replace(/\s*&/," &").replace(/\s*&\s*{/," & {").replace(/\s*>\s*/g," > ").replace(/\s*\+\s*/g," + ").replace(/:\s+/g,": ").replace(/^\s+/,u).replace(/\s+$/,u).replace(/\s+::\s+/,"::");if(T(e.token[M],44)&&e.types[M]!=="comment"){e.types[M]="selector";}if(i(e.token[M-1],44)||i(e.token[M-1],58)||e.types[M-1]==="comment"||e.types[M-1]==="pseudo"){if(e.types[M-1]==="colon"&&(e.types[M]==="selector"||e.types[M]==="at_rule")&&(e.types[M-2]==="template"||e.types[M-2]==="template_start"||e.types[M-2]==="template_else"||e.types[M-2]==="template_end")){e.token[M-1]=":"+e.token[M]+se;e.types[M-1]="selector";s.splice({data:e,howmany:1,index:M});}else if(e.types[M-1]==="pseudo"){e.token[M-1]=`${e.token[M-1]}${e.token[M]}`;e.types[M-1]="selector";s.splice({data:e,howmany:1,index:M});}else if(e.types[M-2]==="comment"){e.token[M-1]=E(`${e.token[M-1]}${e.token[M]}`);e.types[M-1]="selector";s.splice({data:e,howmany:1,index:M});}else {do{M=M-1;if(e.begin[M]===oe){if(i(e.token[M],59))break;if(T(e.token[M],44)&&e.types[M]!=="comment"){e.types[M]="selector";}if(e.token[M]===":"&&T(e.token[M-1],59)){e.token[M-1]=E(`${e.token[M-1]}:${e.token[M+1]}`);s.splice({data:e,howmany:2,index:M});}}else {break}}while(M>0)}}M=s.count;if(n.style.sortSelectors===true&&i(e.token[M-1],44)){const ce=[e.token[M]];do{M=M-1;if(e.types[M]==="comment"||e.types[M]==="ignore"){do M=M-1;while(M>0&&(e.types[M]==="comment"||e.types[M]==="ignore"))}if(i(e.token[M],44))M=M-1;ce.push(e.token[M]);}while(M>0&&(i(e.token[M-1],44)||e.types[M-1]==="selector"||e.types[M-1]==="comment"||e.types[M-1]==="ignore"));ce.sort();M=s.count;e.token[M]=ce.pop();do{M=M-1;if(e.types[M]==="comment"||e.types[M]==="ignore"){do M=M-1;while(M>0&&(e.types[M]==="comment"||e.types[M]==="ignore"))}if(i(e.token[M],44))M=M-1;e.token[M]=ce.pop();}while(M>0&&(i(e.token[M-1],44)||e.types[M-1]==="selector"||e.types[M-1]==="comment"||e.types[M-1]==="ignore"))}w=s.count;L();}L();if(l==="start"&&(e.types[w]==="value"||e.types[w]==="variable")){e.types[w]="item";}if(e.lexer[s.count-1]!=="style"||H<0){if(l==="colon"){if(i(C,36)||i(C,64)){e.types[w]="variable";}else if(e.stack[w]!=="global"&&(e.types[w]!=="comment"||e.types[w]!=="ignore")){e.types[w]="property";}}else if(e.lexer[w]==="style"){e.types[w]="selector";R(w);}}else if(l==="start"&&e.types[w]==="function"&&e.lexer[w]==="style"){e.types[w]="selector";R(w);}else if(e.types[w]==="item"&&e.lexer[w]==="style"){if(l==="start"){R(w);e.types[w]="selector";if(e.token[w]===":")e.types[H]="selector";if(e.token[w].indexOf("=\u201C")>0){s.error=`Invalid Quote (\u201C, \\201c) used on line number ${s.line}`;}else if(e.token[w].indexOf("=\u201D")>0){s.error=`Invalid Quote (\u201D, \\201d) used on line number ${s.line}`;}}else if(l==="end"){if(i(C,36)||i(C,64)){e.types[w]="variable";}else {e.types[w]="value";}e.token[w]=B(e.token[w]);}else if(l==="separator"){if(e.types[H]==="colon"||i(e.token[H],44)||i(e.token[H],123)){if(T(f[r],59)&&(e.types[H]==="selector"||e.types[H]==="at_rule"||i(e.token[H],123))){e.types[w]="selector";R(w);}else if(i(e.token[w],36)||i(e.token[w],64)){e.types[w]="variable";}else {e.types[w]="value";}e.token[w]=B(e.token[w]);if(e.token[w].charAt(0)==="\u201C"){s.error=`Invalid Quote (\u201C, \\201c) used on line number ${s.line}`;}else if(e.token[w].charAt(0)==="\u201D"){s.error=`Invalid (\u201D, \\201d) used on line number ${s.line}`;}}else {if(i(C,36)||i(C,64)){e.types[w]="variable";}else if(e.types[H]==="value"||e.types[H]==="variable"){e.token[H]=e.token[H]+e.token[w];s.pop(e);}else {e.types[w]="value";}}}else if(l==="colon"){if(i(C,36)||i(C,64)){e.types[w]="variable";}else {e.types[w]="property";}}else if(i(e.token[H],64)&&(e.types[H-2]!=="variable"&&e.types[H-2]!=="property"||e.types[H-1]==="separator")){e.types[H]="variable";y="variable";e.token[H]=B(e.token[H]);}else if(l==="comment"){if(i(C,46)||i(C,35)){e.types[w]="selector";}}}}function p(){let l=s.count;do l=l-1;while(l>0&&e.types[l]==="comment");if(e.token[l]===";")return;s.splice({data:e,howmany:0,index:l+1,record:{begin:s.stack.index,ender:-1,lexer:"style",lines:s.space,stack:s.stack.token,token:";",types:"separator"}});}function h(l,w){const H=[];let C=u;let x=u;let L=0;let E=l.length;function R(v){const M=s.count>0?e.types[s.count-1]:e.types[s.count];if(y==="item"){if(M==="colon"){e.types[s.count]="value";}else {a(M);}}if(i(f[r+1],32)){e.lines[s.count]=1;}y=v;if(y.indexOf("start")>-1||y.indexOf("else")>-1){t(W);}else {t(u);}}g[g.length-1]=true;if(r<_){do{H.push(f[r]);if(C===u){if(i(f[r],34)){C='"';}else if(i(f[r],39)){C="'";}else if(i(f[r],47)){if(i(f[r+1],47)){C="/";}else if(i(f[r+1],42)){C="*";}}else if(f[r+1]===w.charAt(0)){do{L=L+1;r=r+1;H.push(f[r]);}while(r<_&&L<w.length&&f[r+1]===w.charAt(L));if(L===w.length){C=H.join(u);if(le(C.charAt(E))){do{E=E+1;}while(le(C.charAt(E)))}L=E;do{L=L+1;}while(L<w.length&&!le(C.charAt(L)));if(L===C.length)L=L-w.length;if(l==="{%"){if(i(C[2],45)){C=C.replace(/^{%-\s*/,"{%- ");C=C.endsWith("-%}")?C.replace(/\s*-%}$/," -%}"):C.replace(/\s*%}$/," %}");x=C.slice(4);}else {C=C.replace(/^{%\s*/,"{% ");C=C.endsWith("-%}")?C.replace(/\s*-%}$/," -%}"):C.replace(/\s*%}$/," %}");x=C.slice(3);}}if(l==="{{"){if(i(C[2],45)){C=C.replace(/^{{-\s*/,"{{- ");C=C.endsWith("-}}")?C.replace(/\s*-}}$/," -}}"):C.replace(/\s*}}$/," }}");}else {C=C.replace(/^{{\s*/,"{{ ");C=C.endsWith("-}}")?C.replace(/\s*-}}$/," -}}"):C.replace(/\s*%}}$/," }}");}}if(y==="item"&&e.types[s.count-1]==="colon"&&(e.types[s.count-2]==="property"||e.types[s.count-2]==="variable")){y="value";e.types[s.count]="value";if(Number.isNaN(Number(e.token[s.count]))===true&&e.token[s.count].charAt(e.token[s.count].length-1)!==")"){e.token[s.count]=e.token[s.count]+C;}else {e.token[s.count]=e.token[s.count]+se+C;}return}W=C;if(l==="{%"){const v=Array.from(pe.liquid.tags);let M=v.length-1;x=x.slice(0,x.indexOf(se));if(x.indexOf("(")>0){x=x.slice(0,x.indexOf("("));}if(pe.liquid.else.has(x)){R("template_else");return}M=v.length-1;if(M>-1){do{if(x===v[M]){R("template_start");return}if(x==="end"+v[M]){R("template_end");return}M=M-1;}while(M>-1)}}else if(l==="{{"){let v=C.slice(2);const M=v.length;let oe=0;do{oe=oe+1;}while(oe<M&&le(v.charAt(oe))===false&&v.charCodeAt(E)!==40);v=v.slice(0,oe);if(i(v[v.length-2],125))v=v.slice(0,v.length-2);if(v==="end"){R("template_end");return}}R("template");return}L=0;}}else if(C===f[r]){if(i(C,34)||i(C,39)){C=u;}else if(i(C,47)&&(f[r]==="\r"||i(f[r],10))){C=u;}else if(i(C,42)&&i(f[r+1],47)){C=u;}}r=r+1;}while(r<_)}}function $(l){let w;if(l){w=Ue({chars:f,start:r,end:_,lexer:"style",begin:"//",ender:"\n"});W=w[0];y=/^(\/\/\s*@prettify-ignore-start)/.test(W)?"ignore":"comment";}else {w=Je({chars:f,start:r,end:_,lexer:"style",begin:"/*",ender:"*/"});W=w[0];y=/^(\/\*\s*@prettify-ignore-start)/.test(W)?"ignore":"comment";}t(u);r=w[1];}function X(){const l=s.space;const w={data:{margin:[u,u,u,u,false],padding:[u,u,u,u,false]},last:{margin:0,padding:0},removes:[]};const H=s.stack.index;function C(R){if(e.token[L-2]===R){const v=e.token[L].replace(/\s*!important\s*/g,u).split(se);const M=v.length;if(e.token[L].indexOf("!important")>-1)w.data[R[4]]=true;if(M>3){if(w.data[R][0]===u)w.data[R][0]=v[0];if(w.data[R][1]===u)w.data[R][1]=v[1];if(w.data[R][2]===u)w.data[R][2]=v[2];if(w.data[R][3]===u)w.data[R][3]=v[3];}else if(M>2){if(w.data[R][0]===u)w.data[R][0]=v[0];if(w.data[R][1]===u)w.data[R][1]=v[1];if(w.data[R][2]===u)w.data[R][2]=v[2];if(w.data[R][3]===u)w.data[R][3]=v[1];}else if(M>1){if(w.data[R][0]===u)w.data[R][0]=v[0];if(w.data[R][1]===u)w.data[R][1]=v[1];if(w.data[R][2]===u)w.data[R][2]=v[0];if(w.data[R][3]===u)w.data[R][3]=v[1];}else {if(w.data[R][0]===u)w.data[R][0]=v[0];if(w.data[R][1]===u)w.data[R][1]=v[0];if(w.data[R][2]===u)w.data[R][2]=v[0];if(w.data[R][3]===u)w.data[R][3]=v[0];}}else if(e.token[L-2]===`${R}-bottom`){if(w.data[R][2]===u)w.data[R][2]=e.token[L];}else if(e.token[L-2]===`${R}-left`){if(w.data[R][3]===u)w.data[R][3]=e.token[L];}else if(e.token[L-2]===`${R}-right`){if(w.data[R][1]===u)w.data[R][1]=e.token[L];}else if(e.token[L-2]===`${R}-top`){if(w.data[R][0]===u)w.data[R][0]=e.token[L];}else {return}w.removes.push([L,R]);w.last[R]=L;}function x(){let R=0;let v=u;const M=/^(0+([a-z]+|%))/;const oe=w.removes.length;const ce=w.data.margin[0]!==u&&w.data.margin[1]!==u&&w.data.margin[2]!==u&&w.data.margin[3]!==u;const Ce=w.data.padding[0]!==u&&w.data.padding[1]!==u&&w.data.padding[2]!==u&&w.data.padding[3]!==u;function be(ne){if(M.test(w.data[ne][0])===true)w.data[ne][0]="0";if(M.test(w.data[ne][1])===true)w.data[ne][1]="0";if(M.test(w.data[ne][2])===true)w.data[ne][2]="0";if(M.test(w.data[ne][3])===true)w.data[ne][3]="0";if(w.data[ne][0]===w.data[ne][1]&&w.data[ne][0]===w.data[ne][2]&&w.data[ne][0]===w.data[ne][3]){v=w.data[ne][0];}else if(w.data[ne][0]===w.data[ne][2]&&w.data[ne][1]===w.data[ne][3]&&w.data[ne][0]!==w.data[ne][1]){v=`${w.data[ne][0]} ${w.data[ne][1]}`;}else if(w.data[ne][1]===w.data[ne][3]&&w.data[ne][0]!==w.data[ne][2]){v=`${w.data[ne][0]} ${w.data[ne][1]} ${w.data[ne][2]}`;}else {v=`${w.data[ne][0]} ${w.data[ne][1]} ${w.data[ne][2]} ${w.data[ne][3]}`;}if(w.data[ne[4]]===true)v=`${v.replace(" !important",u)} !important`;if(w.last[ne]>s.count){R=H<1?1:H+1;do{if(e.begin[R]===H&&e.types[R]==="value"&&e.token[R-2].indexOf(ne)===0){w.last[ne]=R;break}R=R+1;}while(R<s.count)}e.token[w.last[ne]]=v;e.token[w.last[ne]-2]=ne;}if(oe>1&&(ce===true||Ce===true)){do{if(w.removes[R][0]!==w.last.margin&&w.removes[R][0]!==w.last.padding&&(ce===true&&w.removes[R][1]==="margin"||Ce===true&&w.removes[R][1]==="padding")){s.splice({data:e,howmany:e.types[w.removes[R][0]+1]==="separator"?4:3,index:w.removes[R][0]-2});}R=R+1;}while(R<oe-1)}if(ce===true)be("margin");if(Ce===true)be("padding");if(E===true){if(H<0){s.error="Brace mismatch. There appears to be more closing braces than starting braces.";}else {Xe(H,s.count+1);}}}let L=s.count;let E=false;do{L=L-1;if(e.begin[L]===H){if(e.types[L]==="value"&&e.types[L-2]==="property"){if(e.token[L-2].indexOf("margin")===0){C("margin");}else if(e.token[L-2].indexOf("padding")===0){C("padding");}}}else {E=true;L=e.begin[L];}}while(L>H);x();s.space=l;}function Y(){s.space=1;do{if(i(f[r],10)){s.lineOffset=r;s.space=s.space+1;s.line=s.line+1;}if(le(f[r+1])===false)break;r=r+1;}while(r<_)}do{if(le(f[r])){Y();}else if(i(f[r],47)&&i(f[r+1],42)){$(false);}else if(i(f[r],47)&&i(f[r+1],47)){$(true);}else if(i(f[r],123)&&i(f[r+1],37)){h("{%","%}");}else if(i(f[r],123)&&i(f[r+1],123)){h("{{","}}");}else if(i(f[r],123)||i(f[r],40)&&i(e.token[s.count],58)&&e.types[s.count-1]==="variable"){a("start");y="start";W=f[r];if(i(f[r],40)){t("map");o.push(0);}else if(e.types[s.count]==="at_rule"||e.types[s.count]==="selector"||e.types[s.count]==="variable"){if(i(e.token[s.count],64)){e.types[s.count]="at_rule";t(e.token[s.count]);}else {t(e.token[s.count]);}}else if(e.types[s.count]==="colon"){t(e.token[s.count-1]);}else {t("block");}g.push(false);}else if(i(f[r],125)||f[r]===")"&&s.stack.token==="map"&&o[o.length-1]===0){if(i(f[r],125)&&i(e.token[s.count-1],123)&&e.types[s.count]==="item"&&e.token[s.count-2]!==void 0&&e.token[s.count-2].charCodeAt(e.token[s.count-2].length-1)===64){e.token[s.count-2]=e.token[s.count-2]+"{"+e.token[s.count]+"}";s.pop(e);s.pop(e);s.stack.pop();}else {if(i(f[r],41))o.pop();a("end");if(i(f[r],125)&&T(e.token[s.count],59)){if(e.types[s.count]==="value"||e.types[s.count]==="function"||e.types[s.count]==="variable"&&(i(e.token[s.count-1],58)||i(e.token[s.count-1],59))){if(n.style.correct===true){W=";";}else {W="x;";}y="separator";t(u);}else if(e.types[s.count]==="comment"){p();}}g.pop();W=f[r];y="end";if(i(f[r],125))X();if(n.style.sortProperties===true&&i(f[r],125))Ve(e);t(u);}}else if(i(f[r],59)||i(f[r],44)){if(e.types[s.count-1]==="selector"||e.types[s.count-1]==="at_rule"||e.types[s.count]!=="function"&&i(e.token[s.count-1],125)){a("start");}else {a("separator");}if(e.types[s.count]!=="separator"&&d(r)===true){W=f[r];y="separator";t(u);}}else if(s.count>-1&&i(f[r],58)&&e.types[s.count]!=="end"){a("colon");W=":";y="colon";t(u);}else {if(s.stack.token==="map"&&i(f[r],40)){o[o.length-1]=o[o.length-1]+1;}U();}r=r+1;}while(r<_);if(n.style.sortProperties===true){Ve(e);if(s.mode===2)Xe(0,s.count+1);}return e}function ct(e){if(e===1)return Fe();if(e===3)return At();if(e===2)return Rt()}function qt(){const{rules:e}=s;let n=s.start;let c=-1;let f=0;let _=0;let o=isNaN(e.indentLevel)?0:Number(e.indentLevel);const g=s.data;const r=s.ender<1||s.ender>g.token.length?g.token.length:s.ender+1;const y={};const W=e.language==="jsx"||e.language==="tsx";const t=e.markup.forceAttribute;const d=new Map;const B=s.start>0?Array(s.start).fill(0,0,s.start):[];const U=ne();const a=w();const p=[];function h(N,P){return g.types[N]===P}function $(N,P){return g.token[N]===P}function X(N,P){return N>-1&&(g.types[N]||u).indexOf(P)}function Y(N){const P=[];const K=e.preserveLine+1;const q=Math.min(g.lines[n+1]-1,K);let te=0;if(N<0)N=0;do{P.push(s.crlf);te=te+1;}while(te<q);if(N>0){te=0;do{P.push(a);te=te+1;}while(te<N)}return P.join(u)}function l(){let N=g.token[n].split(s.crlf);const P=g.lines[n+1];if(h(n,"comment")&&(i(g.token[n][1],37)&&e.liquid.preserveComment===false||i(g.token[n][1],37)===false&&e.markup.preserveComment===false)){N=N.map(G=>G.trimStart());}const K=U[n-1]>-1?h(n,"attribute")?U[n-1]+1:U[n-1]:(()=>{let G=n-1;let ue=G>-1&&X(G,"start")>-1;if(U[n]>-1&&h(n,"attribute"))return U[n]+1;do{G=G-1;if(U[G]>-1)return h(n,"content")&&ue===false?U[G]:U[G]+1;if(X(G,"start")>-1)ue=true;}while(G>0);return G===-2?0:1})();let q=0;g.lines[n+1]=0;const te=N.length-1;do{if(h(n,"comment")){if(q===0&&(i(g.token[n][1],37)&&e.liquid.commentNewline===true||i(g.token[n][1],37)===false&&e.markup.commentNewline===true)){if(e.preserveLine===0){p.push(Y(K));}else {if(p.length>0&&p[p.length-1].lastIndexOf(fe)+1<2){p.push(Y(K));}}}if(N[q]!==u){if(q>0&&(i(g.token[n][1],37)&&e.liquid.commentIndent===true||i(g.token[n][1],37)===false&&e.markup.commentIndent===true)){p.push(a);}if(N[q+1].trimStart()!==u){p.push(N[q],Y(K));}else {p.push(N[q],fe);}}else {if(N[q+1].trimStart()===u){p.push(fe);}else {p.push(Y(K));}}}else {p.push(N[q]);p.push(Y(K));}q=q+1;}while(q<te);g.lines[n+1]=P;p.push(N[te]);if(h(n,"comment")&&(h(n+1,"liquid_end")||h(n-1,"liquid_end"))){p.push(Y(U[n]));}else if(U[n]===-10){p.push(se);}else if(U[n]>1){p.push(Y(U[n]));}else if(U[n]===0&&n===0&&h(n,"comment")){p.push(Y(U[n]));}else if(h(n,"comment")&&U[n]===0&&(h(n+1,"liquid_start")||h(n+1,"ignore"))){p.push(Y(U[n]));}}function w(){const N=[e.indentChar];const P=e.indentSize-1;let K=0;if(K<P){do{N.push(e.indentChar);K=K+1;}while(K<P)}return N.join(u)}function H(){let N=n+1;let P=0;if(h(N,void 0))return N-1;if(h(N,"comment")||n<r-1&&X(N,"attribute")>-1){do{if(h(N,"jsx_attribute_start")){P=N;do{if(h(N,"jsx_attribute_end")&&g.begin[N]===P)break;N=N+1;}while(N<r)}else if(h(N,"comment")===false&&X(N,"attribute")<0)return N;N=N+1;}while(N<r)}return N}function C(){const N=/(?!=)\/?>$/;const P=g.token[n];const K=N.exec(P);if(K===null)return;let q=n+1;let te=false;let G=e.markup.selfCloseSpace===true&&K!==null&&K[0]==="/>"?se:u;g.token[n]=P.replace(N,u);do{if(h(q,"jsx_attribute_end")&&g.begin[g.begin[q]]===n){te=false;}else if(g.begin[q]===n){if(h(q,"jsx_attribute_start")){te=true;}else if(X(q,"attribute")<0&&te===false){break}}else if(te===false&&(g.begin[q]<n||X(q,"attribute")<0)){break}q=q+1;}while(q<r);if(h(q-1,"comment_attribute"))G=Y(U[q-2]-1);if(!s.attributes.has(n)){g.token[q-1]=`${g.token[q-1]}${G}${K[0]}`;}if(h(q,"comment")&&g.lines[n+1]<2)U[n]=-10;}function x(){if(s.attributes.has(n)&&i(g.token[n],60)&&tt(g.token[n],62)){d.set(n,2);}else if(h(n,"end")===false&&T(g.token[n],60)&&d.get(g.begin[n])>=2&&Ie(g.token[n],62)){d.delete(g.begin[n]);const N=Y(U[n-1]-1).replace(/\n+/,fe);const P=`${g.token[n].slice(0,-1)}${N}>`;if(h(g.begin[n],"singleton")){if(i(g.token[n][g.token[n].length-2],47)){g.token[n]=`${g.token[n].slice(0,-2)}${N}/>`;}else {g.token[n]=P;}}else {g.token[n]=P;}}}function L(){const N=g.begin[n];let P=n;do{P=P-1;if($(P,"</li>")&&$(P-1,"</a>")&&g.begin[g.begin[P]]===N&&g.begin[P-1]===g.begin[P]+1){P=g.begin[P];}else {return}}while(P>N+1);P=n;do{P=P-1;if(h(P+1,"attribute")){B[P]=-10;}else if($(P,"</li>")===false){B[P]=-20;}}while(P>N+1)}function E(){let N=n;let P=false;if(g.lines[n+1]===0&&e.markup.forceIndent===false){do{if(g.lines[N]>0){P=true;break}N=N-1;}while(N>c);N=n;}else {P=true;}if(P===true){if(h(g.begin[N]-1,"liquid")){B[g.begin[N]-1]=o;}const K=h(f,"end")||h(f,"liquid_end")?o+1:o;do{B.push(K);N=N-1;}while(N>c);if(K===o+1)B[n]=o;if(h(N,"attribute")||h(N,"liquid_attribute")||h(N,"jsx_attribute_start")){B[g.begin[N]]=K;}else {B[N]=K;}}else {do{B.push(-20);N=N-1;}while(N>c);B[N]=-20;}c=-1;}function R(){let N=o;if(e.markup.forceIndent===true||e.markup.forceAttribute===true){B.push(o);return}if(f<r&&(X(f,"end")>-1||X(f,"start")>-1)&&g.lines[f]>0){B.push(o);N=N+1;if(n>0&&h(n,"singleton")&&X(n-1,"attribute")>-1&&h(g.begin[n-1],"singleton")){if(g.begin[n]<0||h(g.begin[n-1],"singleton")&&g.begin[g.ender[n]-1]!==n){B[n-1]=o;}else {B[n-1]=o+1;}}}else if(n>0&&h(n,"singleton")&&X(n-1,"attribute")>-1){B[n-1]=o;_=g.token[n].length;B.push(-10);}else if(g.lines[f]===0){B.push(-20);}else if((e.wrap===0||n<r-2&&g.token[n]!==void 0&&g.token[n+1]!==void 0&&g.token[n+2]!==void 0&&g.token[n].length+g.token[n+1].length+g.token[n+2].length+1>e.wrap&&X(n+2,"attribute")>-1||g.token[n]!==void 0&&g.token[n+1]!==void 0&&g.token[n].length+g.token[n+1].length>e.wrap)&&(h(n+1,"singleton")||h(n+1,"liquid"))){B.push(o);}else {_=_+1;B.push(-10);}if(n>0&&X(n-1,"attribute")>-1&&g.lines[n]<1){B[n-1]=-20;}if(_>e.wrap){let P=n;let K=Math.max(g.begin[n],0);if(h(n,"content")&&e.markup.preserveText===false){let q=0;const te=g.token[n].replace(/\s+/g,se).split(se);do{P=P-1;if(B[P]<0){q=q+g.token[P].length;if(B[P]===-10)q=q+1;}else {break}}while(P>0);P=0;K=te.length;do{if(te[P].length+q>e.wrap){te[P]=s.crlf+te[P];q=te[P].length;}else {te[P]=` ${te[P]}`;q=q+te[P].length;}P=P+1;}while(P<K);if(i(te[0],32)){g.token[n]=te.join(u).slice(1);}else {B[n-1]=N;g.token[n]=te.join(u).replace(s.crlf,u);}if(g.token[n].indexOf(s.crlf)>0){_=g.token[n].length-g.token[n].lastIndexOf(s.crlf);}}else {do{P=P-1;if(B[P]>-1){_=g.token[n].length;if(g.lines[n+1]>0)_=_+1;return}if(X(P,"start")>-1){_=0;return}if(g.lines[P+1]>0&&(h(P,"attribute")===false||h(P,"attribute")&&h(P+1,"attribute"))){if(h(P,"singleton")===false||h(P,"attribute")&&h(P+1,"attribute")){_=g.token[n].length;if(g.lines[n+1]>0)_=_+1;break}}}while(P>K);B[P]=N;}}}function v(){const N=n;if(g.types[N-1]==="script_start"&&i(g.token[N-1],123)){B[N-1]=-20;}do{if(g.lexer[n+1]==="markup"&&g.begin[n+1]<N&&h(n+1,"start")===false&&h(n+1,"singleton")===false)break;B.push(0);n=n+1;}while(n<r);y[N]=n;if(g.types[n+1]==="script_end"&&g.token[n+1]==="}"){B.push(-20);}else {if(g.types[n+1]==="liquid_end"){B.push(o-1);}else {B.push(o-1);}}f=H();if(g.lexer[f]==="markup"&&g.stack[n].indexOf("attribute")<0&&(g.types[f]==="end"||g.types[f]==="liquid_end")){o=o-1;}}function M(N){const P=g.token[N].replace(/\s+/g,se).split(se);const K=P.length;let q=1;let te=P[0].length;do{if(te+P[q].length>e.wrap){te=P[q].length;P[q]=s.crlf+P[q];}else {P[q]=` ${P[q]}`;te=te+P[q].length;}q=q+1;}while(q<K);g.token[N]=P.join(u);}function oe(){const N=n-1;let P=n;let K=false;let q=false;let te=g.types.indexOf("end",N+1);let G=g.token[N].length+1;let ue=(()=>{if(X(n,"start")>0){let ge=n;do{if(h(ge,"end")&&g.begin[ge]===n){if(ge<r-1&&X(ge+1,"attribute")>-1){K=true;break}}ge=ge+1;}while(ge<r)}else if(n<r-1&&X(n+1,"attribute")>-1){K=true;}if(h(f,"end")||h(f,"liquid_end")){return o+(h(N,"singleton")?2:1)}if(h(N,"singleton"))return o+1;return o})();if(K===false&&h(n,"comment_attribute")){B.push(o);B[N]=g.types[N]==="singleton"?o+1:o;return}if(ue<1)ue=1;te=0;do te=te+1;while(X(n+te,"attribute")>-1&&(h(n+te,"end")===false||h(n+te,"singleton")===false||h(n+te,"start")===false||h(n+te,"comment")===false));let xe=0;do{_=_+g.token[n].length+1;if(g.types[n].indexOf("attribute")>0){if(h(n,"comment_attribute")){B.push(ue);}else if(X(n,"start")>0&&X(n,"liquid")<0){q=true;if(n<r-2&&g.types[n+2].indexOf("attribute")>0){B.push(-20);n=n+1;y[n]=n;}else {if(N===n-1&&K===false){if(W){B.push(-20);}else {B.push(ue);}}else {if(W){B.push(-20);}else {B.push(ue+1);}}if(g.lexer[n+1]!=="markup"){n=n+1;v();}}}else if(h(n,"liquid_attribute_start")){xe=xe+1;B.push(ue+xe);}else if(h(n,"liquid_attribute_else")){B[n-1]=ue+xe-1;}else if(h(n,"liquid_attribute_end")){xe=xe-1;B[n-1]=ue+xe;}else if(X(n,"end")>0){if(B[n-1]!==-20)B[n-1]=B[g.begin[n]]-1;if(g.lexer[n+1]!=="markup"){B.push(-20);}else {B.push(ue);}}else {B.push(ue);}}else if(h(n,"attribute")){G=G+g.token[n].length+1;if(e.markup.preserveAttributes===true){B.push(-10);}else if(e.markup.forceAttribute===true||e.markup.forceAttribute>=1||q===true||n<r-1&&X(n+1,"attribute")>0){if(e.markup.forceAttribute===false&&g.lines[n]===1){B.push(-10);}else {if(e.markup.forceAttribute===true){B.push(ue+xe);}else {if(xe!==0){B.push(ue+xe);}else {B.push(-10);}}}}else {B.push(-10);}}else if(g.begin[n]<N+1){break}n=n+1;}while(n<r);n=n-1;if(X(n,"liquid")<0&&X(n,"end")>0&&X(n,"attribute")>0&&h(N,"singleton")===false&&B[n-1]>0&&K===true){B[n-1]=B[n-1]-1;}if(B[n]!==-20){if(W===true&&X(N,"start")>-1&&h(n+1,"script_start")){B[n]=ue;}else {if($(n,"/")&&B[n-1]!==10){B[n-1]=-10;}else {B[n]=B[N];}}}if(e.markup.forceAttribute===true){_=0;B[N]=ue;if(te>=2&&e.markup.delimiterForce===true){d.set(N,te);}}else if(e.markup.forceAttribute>=1){if(te>=e.markup.forceAttribute){B[N]=ue;let ge=n-1;do{if(h(ge,"liquid")&&B[ge]===-10){B[ge]=ue;}else if(h(ge,"attribute")&&B[ge]===-10){B[ge]=ue;}ge=ge-1;}while(ge>N);if(e.markup.delimiterForce===true&&te>=2){d.set(N,te);}}else {B[N]=-10;}}else {B[N]=-10;}if(e.markup.preserveAttributes===true||$(N,"<%xml%>")||$(N,"<?xml?>")){_=0;return}P=n;if(P>N+1){if(e.markup.selfCloseSpace===false)G=G-1;if(G>e.wrap&&e.wrap>0&&e.markup.forceAttribute===false){if(e.markup.forceLeadAttribute===true){B[N]=ue;P=P-1;}_=g.token[n].length;do{if(g.token[P].length>e.wrap&&le(g.token[P]))M(P);if(X(P,"liquid")>-1&&B[P]===-10){B[P]=ue;}else if(h(P,"attribute")&&B[P]===-10){B[P]=ue;}P=P-1;}while(P>N)}}else if(e.wrap>0&&h(n,"attribute")&&g.token[n].length>e.wrap&&le(g.token[n])){M(n);}}function ce(N,P){let K=1;let q=u;let te=u;let G=N;do{te=P[K].trimStart();JSON.stringify(P[K]);if(K===P.length-1){P[K]=G.slice(1)+te;break}if(te.indexOf(se)>-1){q=te.slice(0,te.indexOf(se));}else {q=te.trimEnd();}if(pe.liquid.tags.has(q)){P[K]=G+te;G+=je(e.indentSize);}else if(pe.liquid.else.has(q)){P[K]=G.slice(e.indentSize)+te;}else if(te.startsWith("end")){G=G.slice(e.indentSize);P[K]=G+te;}else {P[K]=G+te;}K=K+1;}while(K<P.length);g.token[n]=P.join(fe);}function Ce(){const N=g.token[n].split(fe);const P=i(g.token[n][2],45);let K=0;let q=0;let te=0;let G=u;let ue=u;let xe=false;if(B.length>=2){if(B[B.length-2]<0){K=B[B.length-1]+1;console.log(K);}else {K=B[B.length-2]+1;}}else if(B.length===1){K=B[B.length-1]+1;}let ge=P?je(K*e.indentSize):je(K*e.indentSize-1);if(Re(g.token[n])==="liquid")return ce(ge,N);do{if(q===0){G=N[q].trimEnd();if(G.endsWith(",")){ue=","+se;N[q]=G.slice(0,-1);}else if(G.endsWith("|")){ue="|"+se;N[q]=G.slice(0,-1);}else if(/^{[{%]-?$/.test(G)){N[q]=G;q=q+1;do{G=N[q].trim();if(G.length>0)break;N.splice(q,1);if(q>N.length)break}while(q<N.length);const I=N[N.length-1].trim();if(/^-?[%}]}$/.test(I)){te=1;if(P){N[q]=ge+G;N[N.length-1]=ge.slice(2)+I;ge=ge.slice(2)+je(e.indentSize);}else {N[q]=ge+je(e.indentSize)+G;N[N.length-1]=ge.slice(1)+I;ge=ge+je(e.indentSize);}}else {N[q]=ge+je(e.indentSize)+G;}}else if(G.endsWith(",")===false&&i(N[q+1].trimStart(),44)&&e.liquid.lineBreakSeparator==="after"){N[q]=G+",";}q=q+1;continue}G=N[q].trim();if(i(G,44)&&e.liquid.lineBreakSeparator==="after"){if(G.endsWith("%}")){G=se+G.slice(1);}else {G=se+G.slice(1)+",";}}if(G.length===0){N.splice(q,1);continue}if(q===N.length-1&&te===1)break;if(G.endsWith(",")&&e.liquid.lineBreakSeparator==="before"){if(xe&&i(N[q-1].trimStart(),124)){N[q]=ge+se+se+G.slice(0,-1);ue=se+se+","+se;}else {if(xe){N[q]=ge+ue+G.slice(0,-1);ue=se+se+","+se;if(N[q+1].trim().startsWith("|"))xe=false;}else {N[q]=ge+ue+G.slice(0,-1);ue=","+se;}}}else if(G.endsWith("|")){N[q]=ge+ue+G.slice(0,-1);ue=ge+"|"+se;}else if(G.endsWith(":")){if(N[q+1].endsWith(","))xe=true;N[q]=ge+ue+G;ue=u;}else {if(xe){N[q]=ge+ue+G;ue=u;if(N[q+1].trim().startsWith("|"))xe=false;}else {N[q]=ge+ue+G;ue=u;}}q=q+1;}while(q<N.length);if(e.liquid.normalizeSpacing===true){g.token[n]=N.join(fe).replace(/\s*-?[%}]}$/,I=>I.replace(/\s*/,se));}else {const I=je(g.lines[n]-1===-1?e.indentSize:g.lines[n]-1);g.token[n]=N.join(fe).replace(/\s*-?[%}]}$/,J=>J.replace(We,I));}}function be(N){return h(N,"liquid")&&g.token[N].indexOf(s.crlf)>0}function ne(){do{if(g.lexer[n]==="markup"){if(h(n,"doctype"))B[n-1]=o;if(X(n,"attribute")>-1){if(s.attributes.has(g.begin[n])&&t!==true){e.markup.forceAttribute=true;}else if(t!==e.markup.forceAttribute){e.markup.forceAttribute=t;}oe();}else if(h(n,"comment")){if(c<0)c=n;if(h(n+1,"comment")===false||n>0&&X(n-1,"end")>-1){E();}}else if(h(n,"comment")===false){f=H();if(h(f,"end")||h(f,"liquid_end")){o=o-1;if(h(f,"liquid_end")&&h(g.begin[f]+1,"liquid_else")){o=o-1;}if($(n,"</ol>")||$(n,"</ul>")||$(n,"</dl>")){L();}}if(h(n,"script_end")&&h(f,"end")){if(g.lines[f]<1){B.push(-20);}else if(g.lines[f]>1){B.push(o);}else {B.push(-10);}}else if((e.markup.forceIndent===false||e.markup.forceIndent===true&&h(f,"script_start"))&&(h(n,"content")||h(n,"singleton")||h(n,"liquid"))){_=_+g.token[n].length;if(g.lines[f]>0&&h(f,"script_start")){B.push(-10);}else if(e.wrap>0&&(X(n,"liquid")<0||f<r&&X(n,"liquid")>-1&&X(f,"liquid")<0)){R();}else if(f<r&&(X(f,"end")>-1||X(f,"start")>-1)&&(g.lines[f]>0||X(n,"liquid_")>-1)){B.push(o);if(be(n))Ce();}else if(g.lines[f]===0){B.push(-20);if(be(n))Ce();}else if(g.lines[f]===1){B.push(-10);}else {B.push(o);if(be(n))Ce();}}else if(h(n,"start")||h(n,"liquid_start")){o=o+1;if(h(n,"liquid_start")&&h(f,"liquid_else")){o=o+1;}if(W===true&&$(n+1,"{")){if(g.lines[f]===0){B.push(-20);}else if(g.lines[f]>1){B.push(o);}else {B.push(-10);}}else if(h(n,"start")&&h(f,"end")||h(n,"liquid_start")&&h(f,"liquid_end")){B.push(-20);}else if(h(n,"start")&&h(f,"script_start")){B.push(-10);}else if(e.markup.forceIndent===true){B.push(o);}else if(g.lines[f]===0&&(h(f,"content")||h(f,"singleton")||h(n,"start")&&h(f,"liquid"))){B.push(-20);}else {B.push(o);}}else if(e.markup.forceIndent===false&&g.lines[f]===0&&(h(f,"content")||h(f,"singleton"))){B.push(-20);}else if(h(n+2,"script_end")){B.push(-20);}else if(h(n,"liquid_else")){B[n-1]=o-1;if(h(f,"liquid_end")){B[n-1]=o-1;}B.push(o);}else if(e.markup.forceIndent===true&&(h(n,"content")&&(h(f,"liquid")||h(f,"content"))||h(n,"liquid")&&(h(f,"content")||h(f,"liquid")))){if(g.lines[f]<1){B.push(-20);}else if(g.lines[f]>1){B.push(o);}else {B.push(-10);}}else {if(h(n,"liquid")&&be(n))Ce();B.push(o);}}if(h(n,"content")===false&&h(n,"singleton")===false&&h(n,"liquid")===false&&h(n,"attribute")===false){_=0;}}else {_=0;v();}n=n+1;}while(n<r);return B}function Pe(){n=s.start;let N=e.indentLevel;do{if(g.lexer[n]==="markup"){if((h(n,"start")||h(n,"singleton")||h(n,"xml"))&&X(n,"attribute")<0&&n<r-1&&g.types[n+1]!==void 0&&X(n+1,"attribute")>-1){C();}if($(n,void 0)===false&&g.token[n].indexOf(s.crlf)>0&&(h(n,"content")&&e.markup.preserveText===false||h(n,"comment")||h(n,"attribute"))){l();}else if(h(n,"comment")&&(i(g.token[n][1],37)&&e.liquid.preserveComment===false&&e.liquid.commentNewline===true||i(g.token[n][1],37)===false&&e.markup.preserveComment===false&&e.markup.commentNewline===true)&&(e.preserveLine===0||p.length>0&&p[p.length-1].lastIndexOf(fe)+1<2)){p.push(Y(U[n]),g.token[n],Y(U[n]));}else {if(e.markup.delimiterForce===true)x();p.push(g.token[n]);if(U[n]===-10&&n<r-1){p.push(se);}else if(U[n]>-1){N=U[n];p.push(Y(U[n]));}}}else {s.start=n;s.ender=y[n];const P=s.external(N);if(e.language==="jsx"&&(g.types[n-1]==="liquid_string_end"||g.types[n-1]==="jsx_attribute_start"||g.types[n-1]==="script_start")){p.push(P);}else {p.push(P);if(e.markup.forceIndent===true||U[s.iterator]>-1&&n in y&&y[n]>n){p.push(Y(U[s.iterator]));}}n=s.iterator;}n=n+1;}while(n<r);s.iterator=r-1;if(p[0]===s.crlf||i(p[0],32))p[0]=u;return e.endNewline===true?p.join(u).replace(/\s*$/,s.crlf):p.join(u).replace(/\s+$/,u)}return Pe()}function pt(){const{data:e,rules:n}=s;const c=Ke({},n.script);n.script=qe(n.script,n.json);const o={};const g="script";const r=s.ender<1||s.ender>e.token.length?e.token.length:s.ender+1;const y=(()=>{let t=s.start;let d=n.indentLevel;let B=false;let U=false;let a=u;let p=u;let h=e.types[0];let $=e.token[0];const X=[-1];const Y=[];const l=s.start>0?Array(s.start).fill(0,0,s.start):[];const w=[];const H=[[]];const C=[];const x=[];const L=[];const E=[false];const R=[];const v=[];function M(){oe(false,false);const I=n.script.commentIndent===true?d:0;if(B===false&&/\/\u002a\s*global\s/.test(e.token[t])){const J=e.token[t].replace(/\/\u002a\s*global\s+/,u).replace(/\s*\u002a\/$/,u).split(",");let b=J.length;do{b=b-1;J[b]=J[b].replace(/\s+/g,u);if(J[b]!==u)s.scopes.push([J[b],-1]);}while(b>0)}if(e.types[t-1]==="comment"||e.types[t+1]==="comment"){l[t-1]=I;}else if(e.lines[t]<2){let J=t+1;if(e.types[J]==="comment"){do J=J+1;while(J<r&&e.types[J]==="comment")}if(t<r-1&&e.stack[J]!=="block"&&(i(e.token[J],123)||e.token[J]==="x{")){let b=s.scopes.length;e.begin.splice(t,0,e.begin[J]);e.ender.splice(t,0,e.ender[J]);e.lexer.splice(t,0,e.lexer[J]);e.lines.splice(t,0,e.lines[J]);e.stack.splice(t,0,e.stack[J]);e.token.splice(t,0,e.token[J]);e.types.splice(t,0,e.types[J]);if(b>0){do{b=b-1;if(s.scopes[b][1]===J){s.scopes[b][1]=t;}else if(s.scopes[b][1]<t){break}}while(b>0)}J=J+1;e.begin.splice(J,1);e.ender.splice(J,1);e.lexer.splice(J,1);e.lines.splice(J,1);e.stack.splice(J,1);e.token.splice(J,1);e.types.splice(J,1);b=t+1;do{e.begin[b]=t;e.stack[b]=e.stack[J];b=b+1;}while(b<J);b=b+1;do{if(e.begin[b]===e.begin[J]){e.begin[b]=t;if(e.types[b]==="end")break}b=b+1;}while(b<r-1);e.begin[J]=t;t=t-1;}else {l[t-1]=-10;if(e.stack[t]==="paren"||e.stack[t]==="method"){l.push(d+2);}else {l.push(d);}if(n.script.commentIndent===true&&l[t]>-1&&e.lines[t]<3){e.lines[t]=3;}}if(e.types[t+1]!=="comment")B=true;return}else if(i(e.token[t-1],44)){l[t-1]=I;}else if(i($,61)&&e.types[t-1]!=="comment"&&/^\/\*{2}\s*@[A-Za-z_]+/.test(p)===true){l[t-1]=-10;}else if(i($,123)&&e.types[t-1]!=="comment"&&e.lines[0]<2){if(e.stack[t]==="function"){l[t-1]=I;}else {l[t-1]=/\n/.test(p)?I:-10;}}else {l[t-1]=I;}if(e.types[t+1]!=="comment")B=true;if(i(e.token[e.begin[t]],40)){l.push(d+1);}else {l.push(d);}if(l[t]>-1&&e.lines[t]<3){if(e.types[t-1]==="comment"&&p.startsWith("//")){e.lines[t]=2;}else {e.lines[t]=3;}}if(n.script.commentNewline===true&&p.startsWith("//")===false&&e.lines[t]>=3){e.lines[t]=2;}}function oe(I,J){let b=t-1;let Z=I===true?0:1;const m=H[H.length-1]===void 0?[]:H[H.length-1];const k=J===false&&e.stack[t]==="array"&&I===true&&T(p,91);if(x[x.length-1]===false||e.stack[t]==="array"&&n.script.arrayFormat==="inline"||e.stack[t]==="object"&&n.script.objectIndent==="inline"){return}x[x.length-1]=false;do{if(e.types[b]==="end"){Z=Z+1;}else if(e.types[b]==="start"){Z=Z-1;}if(e.stack[b]==="global")break;if(Z===0){if(e.stack[t]==="class"||e.stack[t]==="map"||k===false&&(I===false&&e.token[b]!=="("&&e.token[b]!=="x("||I===true&&i(e.token[b],44))){if(e.types[b+1]==="liquid_start"){if(e.lines[b]<1){l[b]=-20;}else {l[b]=d-1;}}else if(m.length>0&&m[m.length-1]>-1){l[b]=d-1;}else {l[b]=d;}}else if(e.stack[t]==="array"&&e.types[t]==="operator"){if(i(e.token[b],44))l[b]=d;if(b===e.begin[t])break}if(I===false)break}if(Z<0){if(e.types[b+1]==="liquid_start"||e.types[b+1]==="template_string_start"){if(e.lines[b]<1){l[b]=-20;}else {l[b]=d-1;}}else if(m.length>0&&m[m.length-1]>-1){l[b]=d-1;}else {l[b]=d;}break}b=b-1;}while(b>-1)}function ce(){const I=H[H.length-1]===void 0?[]:H[H.length-1];const J=()=>{let b=t;let Z=false;const m=e.begin[b];do{b=b-1;if(e.lexer[b]==="markup"){Z=true;break}if(e.begin[b]!==m)b=e.begin[b];}while(b>m);if(Z===true){b=t;do{b=b-1;if(e.begin[b]!==m){b=e.begin[b];}else if(i(e.token[b],44)){l[b]=d+1;}}while(b>m);l[m]=d+1;l[t-1]=d;}else {l[t-1]=-20;}};if(i(p,41)&&i(e.token[t+1],46)&&T(e.token[I[0]],58)&&I[I.length-1]>-1){let b=e.begin[t];let Z=false;let m=false;do b=b-1;while(b>0&&l[b]<-9);Z=l[b]===d;b=t+1;do{b=b+1;if(i(e.token[b],123)){m=true;break}if(e.begin[b]===e.begin[t+1]&&(e.types[b]==="separator"||e.types[b]==="end")){break}}while(b<r);if(Z===false&&m===true&&H.length>1){H[H.length-2].push(e.begin[t]);d=d+1;}}if(h!=="separator")ne();if(i(e.token[t+1],58)&&(e.stack[t]==="object"||e.stack[t]==="array")){oe(true,false);}if(i(e.token[e.begin[t]-1],44)&&(i(e.token[t+1],125)||i(e.token[t+1],93))&&(e.stack[t]==="object"||e.stack[t]==="array")){oe(true,false);}if(e.stack[t]!=="attribute"){if(T(p,41)&&p!=="x)"&&(e.lexer[t-1]!=="markup"||e.lexer[t-1]==="markup"&&e.token[t-2]!=="return")){d=d-1;}if(i(p,125)&&e.stack[t]==="switch"&&n.script.noCaseIndent===false){d=d-1;}}if(i(p,125)||p==="x}"){if(e.types[t-1]!=="comment"&&$!=="{"&&$!=="x{"&&h!=="end"&&h!=="string"&&h!=="number"&&h!=="separator"&&$!=="++"&&$!=="--"&&(t<2||e.token[t-2]!==";"||e.token[t-2]!=="x;"||$==="break"||$==="return")){let b=t-1;let Z=false;const m=e.begin[t];const k=Y.length;do{if(e.begin[b]===m){if(i(e.token[b],61)||i(e.token[b],59)||e.token[b]==="x;"){Z=true;}if(i(e.token[b],46)&&l[b-1]>-1){x[x.length-1]=false;l[m]=d+1;l[t-1]=d;break}if(b>0&&e.token[b]==="return"&&(e.token[b-1]===")"||e.token[b-1]==="x)"||e.token[b-1]==="{"||e.token[b-1]==="x{"||e.token[b-1]==="}"||e.token[b-1]==="x}"||e.token[b-1]===";"||e.token[b-1]==="x;")){d=d-1;l[t-1]=d;break}if(i(e.token[b],58)&&w.length===0||i(e.token[b],44)&&Z===false){break}if(b===0||e.token[b-1]==="{"||e.token[b-1]==="x{"||e.token[b]==="for"||e.token[b]==="if"||e.token[b]==="do"||e.token[b]==="function"||e.token[b]==="while"||e.token[b]==="var"||e.token[b]==="let"||e.token[b]==="const"||e.token[b]==="with"){if(Y[k-1]===false&&k>1&&(t===r-1||e.token[t+1]!==")"&&e.token[t+1]!=="x)")&&e.stack[t]!=="object"){d=d-1;}break}}else {b=e.begin[b];}b=b-1;}while(b>m)}X.pop();}if(n.script.bracePadding===false&&p!=="}"&&h!=="markup"){l[t-1]=-20;}if(n.script.bracePadding===true&&h!=="start"&&$!==";"&&(l[e.begin[t]]<-9||x[x.length-1]===true)){l[e.begin[t]]=-10;l[t-1]=-10;l.push(-20);}else if(e.stack[t]==="attribute"){l[t-1]=-20;l.push(d);}else if(e.stack[t]==="array"&&(I.length>0||C[C.length-1]===true)){Ce();x[x.length-1]=false;l[e.begin[t]]=d+1;l[t-1]=d;l.push(-20);}else if((e.stack[t]==="object"||e.begin[t]===0&&i(p,125))&&I.length>0){Ce();x[x.length-1]=false;l[e.begin[t]]=d+1;l[t-1]=d;l.push(-20);}else if(p===")"||p==="x)"){const b=p===")"&&T($,40)&&v.length>0?v.pop()+1:0;const Z=e.token[e.begin[t]-1]==="if"?(()=>{let m=t;do{m=m-1;if(e.token[m]===")"&&l[m-1]>-1)return b}while(m>e.begin[t]);return b+5})():b;if(b>0&&(n.language!=="jsx"||n.language==="jsx"&&e.token[e.begin[t]-1]!=="render")){const m=n.wrap;const k=e.begin[t];const O=v.length;let S=t-2;if(Z>m){l[e.begin[t]]=d+1;l[t-1]=d;do{if(e.begin[S]===k){if(e.token[S]==="&&"||e.token[S]==="||"){l[S]=d+1;}else if(l[S]>-1&&e.types[S]!=="comment"&&e.token[S+1]!=="."){l[S]=l[S]+1;}}else if(l[S]>-1&&e.token[S+1]!=="."){l[S]=l[S]+1;}S=S-1;}while(S>k)}else if(O>0){v[O-1]=v[O-1]+b;}}else if(p===")"&&t>e.begin[t]+2&&e.lexer[e.begin[t]+1]===g&&e.token[e.begin[t]+1]!=="function"){const m=e.begin[t]<0?0:e.begin[t];const k=n.wrap;const O=I.length;let S=0;let j=0;let de=0;let A=0;let D=0;let F=false;let Q=false;let z=d+1;let he=false;let ee=false;let V=false;if(l[m]<-9){j=m;do{j=j+1;}while(j<t&&l[j]<-9);A=j;do{S=S+e.token[j].length;if(l[j]===-10)S=S+1;if(e.token[j]==="("&&de>0&&de<k-1&&A===t){de=-1;}if(e.token[j]===")"){D=D-1;}else if(e.token[j]==="("){D=D+1;}if(j===m&&D>0)de=S;j=j-1;}while(j>m&&l[j]<-9);if(e.token[j+1]===".")z=l[j]+1;if(S>k-1&&k>0&&T($,40)&&de!==-1&&x[x.length-2]===false){if(e.token[m-1]==="if"&&Y[Y.length-1]===true||e.token[m-1]!=="if"){l[m]=z;if(e.token[m-1]==="for"){j=m;do{j=j+1;if(i(e.token[j],59)&&e.begin[j]===m){l[j]=z;}}while(j<t)}}}}j=t;S=0;do{j=j-1;if(e.stack[j]==="function"){j=e.begin[j];}else if(e.begin[j]===m){if(e.token[j]==="?"){V=true;}else if(i(e.token[j],44)&&F===false){F=true;if(S>=k&&k>0)he=true;}else if(e.types[j]==="markup"&&ee===false){ee=true;}if(l[j]>-9&&e.token[j]!==","&&e.types[j]!=="markup"){S=0;}else {if(l[j]===-10)S=S+1;S=S+e.token[j].length;if(S>=k&&k>0&&(F===true||ee===true)){he=true;}}}else {if(l[j]>-9){S=0;}else {S=S+e.token[j].length;if(S>=k&&k>0&&(F===true||ee===true)){he=true;}}}}while(j>m&&he===false);if(F===false&&e.token[e.begin[t]+1].charAt(0)==="`"){l[e.begin[t]]=-20;l[t-1]=-20;}else if((F===true||ee===true)&&S>=k&&k>0||l[m]>-9){if(V===true){z=l[m];if(e.token[m-1]==="["){j=t;do{j=j+1;if(e.types[j]==="end"||i(e.token[j],44)||i(e.token[j],59)){break}}while(j<r);if(e.token[j]==="]"){z=z-1;Q=true;}}}else if(O>0&&I[O-1]>j){z=z-O;}x[x.length-1]=false;j=t;do{j=j-1;if(e.begin[j]===m){if(e.token[j].indexOf("=")>-1&&e.types[j]==="operator"&&e.token[j].indexOf("!")<0&&e.token[j].indexOf("==")<0&&e.token[j]!=="<="&&e.token[j].indexOf(">")<0){S=j;do{S=S-1;if(e.begin[S]===m&&(e.token[S]===";"||e.token[S]===","||S===m)){break}}while(S>m)}else if(i(e.token[j],44)){l[j]=z;}else if(l[j]>-9&&Q===false&&(e.token[m-1]!=="for"||e.token[j+1]==="?"||e.token[j+1]===":")&&(e.token[e.begin[t]]!=="("||e.token[j]!=="+")){l[j]=l[j]+1;}}else if(l[j]>-9&&Q===false){l[j]=l[j]+1;}}while(j>m);l[m]=z;l[t-1]=z-1;}else {l[t-1]=-20;}if(e.token[e.begin[t]-1]==="+"&&l[e.begin[t]]>-9){l[e.begin[t]-1]=-10;}}else if(n.language==="jsx"){J();}else {l[t-1]=-20;}l.push(-20);}else if(x[x.length-1]===true){if(p==="]"&&e.begin[t]-1>0&&e.token[e.begin[e.begin[t]-1]]==="["){x[x.length-2]=false;}if(e.begin[t]<l.length)l[e.begin[t]]=-20;if(n.language==="jsx"){J();}else if(p==="]"&&l[e.begin[t]]>-1){l[t-1]=l[e.begin[t]]-1;}else {l[t-1]=-20;}l.push(-20);}else if(e.types[t-1]==="comment"&&e.token[t-1].substring(0,2)==="//"){if(e.token[t-2]==="x}")l[t-3]=d+1;l[t-1]=d;l.push(-20);}else if(e.types[t-1]!=="comment"&&(i($,123)&&i(p,125)||i($,91)&&p==="]")){l[t-1]=-20;l.push(-20);}else if(p==="]"){if(Y[Y.length-1]===true&&x[x.length-1]===false&&n.script.arrayFormat!=="inline"||i($,93)&&l[t-2]===d+1){l[t-1]=d;l[e.begin[t]]=d+1;}else if(l[t-1]===-10){l[t-1]=-20;}if(e.token[e.begin[t]+1]==="function"){l[t-1]=d;}else if(Y[Y.length-1]===false){if(i($,125)||$==="x}")l[t-1]=d;let b=t-1;let Z=1;do{if(e.token[b]==="]")Z=Z+1;if(e.token[b]==="["){Z=Z-1;if(Z===0){if(b>0&&(e.token[b+1]==="{"||e.token[b+1]==="x{"||e.token[b+1]==="[")){l[b]=d+1;break}if(e.token[b+1]!=="["||U===false){l[b]=-20;break}break}}if(Z===1&&e.token[b]==="+"&&l[b]>1){l[b]=l[b]-1;}b=b-1;}while(b>-1)}else if(n.language==="jsx"){J();}if(n.script.arrayFormat==="inline"){let b=t;const Z=e.begin[t];do{b=b-1;if(e.types[b]==="end")break}while(b>Z);if(b>Z){l[e.begin[t]]=d+1;l[t-1]=d;}else {l[e.begin[t]]=-20;l[t-1]=-20;}}else if(l[e.begin[t]]>-1){l[t-1]=l[e.begin[t]]-1;}l.push(-20);}else if(i(p,125)||p==="x}"||Y[Y.length-1]===true){if(i(p,125)&&$==="x}"&&e.token[t+1]==="else"){l[t-2]=d+2;l.push(-20);}else {l.push(d);}l[t-1]=d;}else {l.push(-20);}if(e.types[t-1]==="comment")l[t-1]=d;Ce();U=Y[Y.length-1];Y.pop();H.pop();C.pop();L.pop();R.pop();x.pop();E.pop();}function Ce(){let I=0;const J=H[H.length-1];if(J===void 0)return;I=J.length-1;if(I<1&&J[I]<0&&(i(p,59)||p==="x;"||p===")"||p==="x)"||i(p,125)||p==="x}")){J.pop();return}if(I<0||J[I]<0)return;if(p===":"){if(e.token[J[I]]!=="?"){do{J.pop();I=I-1;d=d-1;}while(I>-1&&J[I]>-1&&e.token[J[I]]!=="?")}J[I]=t;l[t-1]=d;}else {do{J.pop();I=I-1;d=d-1;}while(I>-1&&J[I]>-1)}if((e.stack[t]==="array"||p===",")&&J.length<1)J.push(-1);}function be(){const I=t;do{if(e.lexer[t+1]===g&&e.begin[t+1]<I)break;if(e.token[I-1]==="return"&&e.types[t]==="end"&&e.begin[t]===I)break;l.push(0);t=t+1;}while(t<r);o[I]=t;l.push(d-1);}function ne(){let I=t-1;const J=e.begin[t];if(d<1)return;do{if(J!==e.begin[I]){I=e.begin[I];}else {if(e.types[I]==="separator"||e.types[I]==="operator"){if(e.token[I]==="."&&l[I-1]>0){if(e.token[J-1]==="if"){d=d-2;}else {d=d-1;}}break}}I=I-1;}while(I>0&&I>J)}function Pe(){if(e.token[t+1]!==","&&p.indexOf("/>")!==p.length-2||e.token[t+1]===","&&e.token[e.begin[t]-3]!=="React"){oe(false,false);}if($==="return"||$==="?"||$===":"){l[t-1]=-10;l.push(-20);}else if(h==="start"||e.token[t-2]==="return"&&e.stack[t-1]==="method"){l.push(d);}else {l.push(-20);}}function N(){const I=H[H.length-1]===void 0?[]:H[H.length-1];function J(){const b=e.token[t+1];let Z=0;let m=0;let k=t;let O=p==="+"?d+2:d;let S=0;if(n.wrap<1){l.push(-10);return}do{k=k-1;if(i(e.token[e.begin[t]],40)){if(k===e.begin[t]){S=Z;}if(i(e.token[k],44)&&e.begin[k]===e.begin[t]&&Y[Y.length-1]===true){break}}if(Z>n.wrap-1)break;if(l[k]>-9)break;if(e.types[k]==="operator"&&e.token[k]!=="="&&e.token[k]!=="+"&&e.begin[k]===e.begin[t]){break}Z=Z+e.token[k].length;if(k===e.begin[t]&&e.token[k]==="["&&Z<n.wrap-1){break}if(e.token[k]==="."&&l[k]>-9)break;if(l[k]===-10)Z=Z+1;}while(k>0);if(S>0)S=S+b.length;Z=Z+b.length;m=k;if(Z>n.wrap-1&&l[k]<-9){do{m=m-1;}while(m>0&&l[m]<-9)}if(e.token[m+1]==="."&&e.begin[t]<=e.begin[m]){O=O+1;}else if(e.types[m]==="operator"){O=l[m];}m=b.length;if(Z+m<n.wrap){l.push(-10);return}if(i(e.token[e.begin[t]],40)&&(e.token[I[0]]===":"||e.token[I[0]]==="?")){O=d+3;}else if(e.stack[t]==="method"){l[e.begin[t]]=d;if(Y[Y.length-1]===true){O=d+3;}else {O=d+1;}}else if(e.stack[t]==="object"||e.stack[t]==="array"){oe(true,false);}if(e.token[k]==="var"||e.token[k]==="let"||e.token[k]==="const"){Z=Z-n.indentSize*n.indentChar.length*2;}if(S>0){k=n.wrap-S;}else {k=n.wrap-Z;}if(k>0&&k<5){l.push(O);if(e.token[t].charAt(0)==='"'||e.token[t].charAt(0)==="'"){t=t+1;l.push(-10);}return}if(e.token[e.begin[t]]!=="("||S>n.wrap-1||S===0){if(S>0)Z=S;if(Z-b.length<n.wrap-1&&(b.charAt(0)==='"'||b.charAt(0)==="'")){t=t+1;Z=Z+3;if(Z-b.length>n.wrap-4){l.push(O);return}l.push(-10);return}l.push(O);return}l.push(-10);}ne();if(I.length>0&&I[I.length-1]>-1&&e.stack[t]==="array"){C[C.length-1]=true;}if(p!==":"){if(e.token[e.begin[t]]!=="("&&e.token[e.begin[t]]!=="x("&&x.length>0){oe(true,false);}if(p!=="?"&&e.token[I[I.length-1]]==="."){let b=0;let Z=t;const m=e.begin[Z];do{if(e.begin[Z]===m){if(e.token[Z+1]==="{"||e.token[Z+1]==="["||e.token[Z]==="function"){break}if(i(e.token[Z],44)||i(e.token[Z],59)||e.types[Z]==="end"||i(e.token[Z],58)){I.pop();d=d-1;break}if(e.token[Z]==="?"||i(e.token[Z],58)){if(e.token[I[I.length-1]]==="."&&b<2)I[I.length-1]=m+1;break}if(e.token[Z]===".")b=b+1;}Z=Z+1;}while(Z<r)}}if(p==="!"||p==="..."){if(i($,125)||$==="x}")l[t-1]=d;l.push(-20);return}if($===";"||$==="x;"){if(e.token[e.begin[t]-1]!=="for")l[t-1]=d;l.push(-20);return}if(p==="*"){if($==="function"||$==="yield"){l[t-1]=-20;}else {l[t-1]=-10;}l.push(-10);return}if(p==="?"){if(e.lines[t]===0&&e.types[t-2]==="word"&&e.token[t-2]!=="return"&&e.token[t-2]!=="in"&&e.token[t-2]!=="instanceof"&&e.token[t-2]!=="typeof"&&(h==="reference"||h==="word")){if(e.types[t+1]==="word"||e.types[t+1]==="reference"||(i(e.token[t+1],40)||e.token[t+1]==="x(")&&e.token[t-2]==="new"){l[t-1]=-20;if(e.types[t+1]==="word"||e.types[t+1]==="reference"){l.push(-10);return}l.push(-20);return}}if(e.token[t+1]===":"){l[t-1]=-20;l.push(-20);return}w.push(t);if(n.script.ternaryLine===true){l[t-1]=-10;}else {let b=t-1;do{b=b-1;}while(b>-1&&l[b]<-9);I.push(t);d=d+1;if(l[b]===d&&e.token[b+1]!==":"){d=d+1;I.push(t);}l[t-1]=d;if(i(e.token[e.begin[t]],40)&&(I.length<2||I[0]===I[1])){x[x.length-1]=false;if(t-2===e.begin[t]){l[e.begin[t]]=d-1;}else {l[e.begin[t]]=d;}b=t-2;do{if(e.types[b]==="end"&&l[b-1]>-1)break;if(l[b]>-1)l[b]=l[b]+1;b=b-1;}while(b>e.begin[t])}}l.push(-10);return}if(p===":"){if(e.stack[t]==="map"||e.types[t+1]==="type"||e.types[t+1]==="type_start"){l[t-1]=-20;l.push(-10);return}if(w.length>0&&e.begin[w[w.length-1]]===e.begin[t]){let b=t;const Z=e.begin[t];do{b=b-1;if(e.begin[b]===Z){if(i(e.token[b],44)||i(e.token[b],59)){l[t-1]=-20;break}if(e.token[b]==="?"){w.pop();Ce();if(n.script.ternaryLine===true)l[t-1]=-10;l.push(-10);return}}else if(e.types[b]==="end"){b=e.begin[b];}}while(b>Z)}if(e.token[t-2]==="where"&&e.stack[t-2]===e.stack[t]){l[t-1]=-10;l.push(-10);return}if(h==="reference"&&e.token[e.begin[t]]!=="("&&e.token[e.begin[t]]!=="x("){l[t-1]=-20;l.push(-10);return}if((i($,41)||$==="x)")&&e.token[e.begin[t-1]-2]==="function"){l[t-1]=-20;l.push(-10);return}if(e.stack[t]==="attribute"){l[t-1]=-20;l.push(-10);return}if(e.token[e.begin[t]]!=="("&&e.token[e.begin[t]]!=="x("&&(h==="reference"||i($,41)||i($,93)||$==="?")&&(e.stack[t]==="map"||e.stack[t]==="class"||e.types[t+1]==="reference")&&(w.length===0||w[w.length-1]<e.begin[t])&&("mapclassexpressionmethodglobalparen".indexOf(e.stack[t])>-1||e.types[t-2]==="word"&&e.stack[t]!=="switch")){l[t-1]=-20;l.push(-10);return}if(e.stack[t]==="switch"&&(w.length<1||w[w.length-1]<e.begin[t])){l[t-1]=-20;if(n.script.caseSpace===true){l.push(-10);}else {l.push(d);}return}if(e.stack[t]==="object"){l[t-1]=-20;}else if(w.length>0){l[t-1]=d;}else {l[t-1]=-10;}l.push(-10);return}if(p==="++"||p==="--"){if(h==="number"||h==="reference"){l[t-1]=-20;l.push(-10);}else if(t<r-1&&(e.types[t+1]==="number"||e.types[t+1]==="reference")){l.push(-20);}else {l.push(-10);}return}if(p==="+"){if(h==="start"){l[t-1]=-20;}else {l[t-1]=-10;}if(n.wrap<1||e.token[e.begin[t]]==="x("){l.push(-10);return}const b=e.token[t+1];if(b===void 0){l.push(-10);return}if(e.types[t-1]==="operator"||e.types[t-1]==="start"){if(e.types[t+1]==="reference"||b==="("||b==="["){l.push(-20);return}if(Number(b.slice(1,-1))>-1&&(/\d/.test(b.charAt(1))===true||b.charAt(1)==="."||b.charAt(1)==="-"||b.charAt(1)==="+")){l.push(-20);return}}return J()}if(e.types[t-1]!=="comment"){if(i($,40)){l[t-1]=-20;}else if(p==="*"&&e.stack[t]==="object"&&e.types[t+1]==="reference"&&(i($,123)||i($,44))){l[t-1]=d;}else if(p!=="?"||w.length===0){l[t-1]=-10;}}if(p.indexOf("=")>-1&&p!=="=="&&p!=="==="&&p!=="!="&&p!=="!=="&&p!==">="&&p!=="<="&&p!=="=>"&&e.stack[t]!=="method"&&e.stack[t]!=="object"){let b=t+1;let Z=0;let m=false;let k=u;if((i(e.token[e.begin[t]],40)||e.token[e.begin[t]]==="x(")&&e.token[t+1]!=="function"){return}do{if(e.types[b]==="start"){if(m===true&&e.token[b]!=="["){if(E[E.length-1]===true){E[E.length-1]=false;}break}Z=Z+1;}if(e.types[b]==="end")Z=Z-1;if(Z<0){if(E[E.length-1]===true){E[E.length-1]=false;}break}if(Z===0){k=e.token[b];if(m===true){if(e.types[b]==="operator"||i(e.token[b],59)||e.token[b]==="x;"||e.token[b]==="?"||e.token[b]==="var"||e.token[b]==="let"||e.token[b]==="const"){if(k!==void 0&&(k==="?"||k.indexOf("=")>-1&&k!=="=="&&k!=="==="&&k!=="!="&&k!=="!=="&&k!==">="&&k!=="<=")){if(E[E.length-1]===false){E[E.length-1]=true;}}if((k===";"||k==="x;"||k==="var"||k==="let"||k==="const")&&E[E.length-1]===true){E[E.length-1]=false;}break}if(E[E.length-1]===true&&(k==="return"||k==="break"||k==="continue"||k==="throw")){E[E.length-1]=false;}}if(k===";"||k==="x;"||k===",")m=true;}b=b+1;}while(b<r);l.push(-10);return}if(p==="-"&&$==="return"||i($,61)){l.push(-20);return}if(h==="operator"&&e.types[t+1]==="reference"&&$!=="--"&&$!=="++"&&p!=="&&"&&p!=="||"){l.push(-20);return}return J()}function P(){const I=()=>{let J=e.begin[t];if(J<0){s.scopes.push([e.token[t],-1]);}else {if(e.stack[J+1]!=="function"){do{J=e.begin[J];}while(J>-1&&e.stack[J+1]!=="function")}s.scopes.push([e.token[t],J]);}};if(e.types[t-1]==="comment"){l[t-1]=d;}else if(h==="end"&&$!==")"&&e.token[e.begin[t-1]-1]!==")"){l[t-1]=-10;}else if(h!=="separator"&&h!=="start"&&h!=="end"&&h.indexOf("template_string")<0){if(h==="word"||h==="operator"||h==="property"||h==="type"||h==="reference"){l[t-1]=-10;}else {l[t-1]=-20;}}if($==="var"&&e.lexer[t-1]===g){I();}else if($==="function"){s.scopes.push([e.token[t],t]);}else if($==="let"||$==="const"){s.scopes.push([e.token[t],t]);}else if(e.stack[t]==="arguments"){s.scopes.push([e.token[t],t]);}else if(i($,44)){let J=t;do{J=J-1;}while(J>e.begin[t]&&e.token[J]!=="var"&&e.token[J]!=="let"&&e.token[J]!=="const");if(e.token[J]==="var"){I();}else if(e.token[J]==="let"||e.token[J]==="const"){s.scopes.push([e.token[t],t]);}}l.push(-10);}function K(){const I=H[H.length-1]===void 0?[]:H[H.length-1];const J=()=>{if(n.script.methodChain>0){let b=t;let Z=e.begin[t];const m=[t];const k=e.token[Z-1]==="if";do{b=b-1;if(e.types[b]==="end")b=e.begin[b];if(e.begin[b]===Z){if(e.types[b]==="string"&&e.token[b].indexOf("${")===e.token[b].length-2){break}if(e.token[b]==="."){if(l[b-1]>0){l[t-1]=k===true?d+1:d;return}m.push(b);}else if(e.token[b]===";"||e.token[b]===","||e.types[b]==="operator"||(e.types[b]==="word"||e.types[b]==="reference")&&(e.types[b-1]==="word"||e.types[b-1]==="reference")){break}}}while(b>Z);if(m.length<n.script.methodChain){l[t-1]=-20;return}b=0;Z=m.length;do{l[m[b]-1]=k===true?d+1:d;b=b+1;}while(b<Z);b=m[m.length-1]-1;do{if(l[b]>-1)l[b]=l[b]+1;b=b+1;}while(b<t);d=k===true?d+2:d+1;}l[t-1]=d;};if(p==="::"){l[t-1]=-20;l.push(-20);return}if(p==="."){if(e.token[e.begin[t]]!=="("&&e.token[e.begin[t]]!=="x("&&I.length>0){if(e.stack[t]==="object"||e.stack[t]==="array"){oe(true,false);}else {oe(false,false);}}if(n.script.methodChain===0){l[t-1]=-20;}else if(n.script.methodChain<0){if(e.lines[t]>0){J();}else {l[t-1]=-20;}}else {J();}l.push(-20);return}if(p===","){ne();if(Y[Y.length-1]===false&&(e.stack[t]==="object"||e.stack[t]==="array"||e.stack[t]==="paren"||e.stack[t]==="expression"||e.stack[t]==="method")){Y[Y.length-1]=true;if(i(e.token[e.begin[t]],40)){let b=t;do{b=b-1;if(e.begin[b]===e.begin[t]&&e.token[b]==="+"&&l[b]>-9){l[b]=l[b]+2;}}while(b>e.begin[t])}}if(e.stack[t]==="array"&&n.script.arrayFormat==="indent"){l[t-1]=-20;l.push(d);return}if(e.stack[t]==="array"&&n.script.arrayFormat==="inline"){l[t-1]=-20;l.push(-10);return}if(e.stack[t]==="object"&&n.script.objectIndent==="indent"){l[t-1]=-20;l.push(d);return}if(e.stack[t]==="object"&&n.script.objectIndent==="inline"){l[t-1]=-20;l.push(-10);return}if(I.length>0){if(I[I.length-1]>-1)Ce();l[t-1]=-20;l.push(d);return}if(e.token[t-2]===":"&&e.token[t-4]==="where"){l[t-1]=-20;l.push(-10);return}l[t-1]=-20;if(e.types[t+1]!=="end"){L[L.length-1]=L[L.length-1]+1;}if((i(e.token[e.begin[t]],40)||e.token[e.begin[t]]==="x(")&&n.language!=="jsx"&&e.stack[t]!=="global"&&(e.types[t-1]!=="string"&&e.types[t-1]!=="number"||e.token[t-2]!=="+"||e.types[t-1]==="string"&&e.types[t-1]!=="number"&&i(e.token[t-2],43)&&e.types[t-3]!=="string"&&e.types[t-3]!=="number")){l.push(-10);return}if(h==="reference"&&e.types[t-2]==="word"&&"var-let-const-from".indexOf(e.token[t-2])<0&&(e.types[t-3]==="end"||e.token[t-3]===";")){R[R.length-1]=true;l.push(-10);return}if(R[R.length-1]===true||e.stack[t]==="notation"){l.push(-10);return}if(L[L.length-1]>3&&(e.stack[t]==="array"||e.stack[t]==="object")){if(x[x.length-1]===true)oe(true,true);l[t-1]=-20;if(C[C.length-1]===true){l.push(d);return}const b=e.begin[t];let Z=t;do{if(e.types[Z]==="end"){Z=e.begin[Z];}else {if(i(e.token[Z],44)&&e.types[Z+1]!=="comment"){l[Z]=d;}}Z=Z-1;}while(Z>b);l[b]=d;C[C.length-1]=true;return}if(e.stack[t]==="object"){if(x[x.length-1]===true&&e.types[e.begin[t]-1]!=="word"&&e.types[e.begin[t]-1]!=="reference"&&e.token[e.begin[t]-1]!=="("&&e.token[e.begin[t]-1]!=="x("){const b=e.begin[t];let Z=t-1;do{if(e.begin[Z]===b){if(i(e.token[Z],44))break;if(i(e.token[Z],58)){oe(true,false);break}}Z=Z-1;}while(Z>b)}}if(x[x.length-1]===false||i(e.token[t-2],43)&&(h==="string"||h==="number")&&l[t-2]>0&&(i($,34)||i($,39))){if(e.stack[t]==="method"){if(i(e.token[t-2],43)&&(i($,34)||i($,39))&&(e.token[t-3].charAt(0)==='"'||e.token[t-3].charAt(0)==="'")){l.push(d+2);return}if(e.token[t-2]!=="+"){l.push(-10);return}}l.push(d);return}if(x[x.length-1]===true&&e.stack[t]!=="object"){l.push(-10);return}if(L[L.length-1]<4&&(e.stack[t]==="array"||e.stack[t]==="object")){l.push(-10);return}l.push(d);return}if(i(p,59)||p==="x;"){ne();if(e.token[t+1]!==void 0&&e.types[t+1].indexOf("attribute")>0&&e.types[t+1].indexOf("end")>0){l[t-1]=-20;l.push(d-1);return}if(X[X.length-1]>-1&&e.stack[X[X.length-1]]!=="expression"){let b=t;do{b=b-1;if(i(e.token[b],59))break;if(i(e.token[b],44)){d=d-1;break}if(e.types[b]==="end")b=e.begin[b];}while(b>0&&b>e.begin[t])}X[X.length-1]=-1;Ce();if(e.token[e.begin[t]-1]!=="for")oe(false,false);R[R.length-1]=false;l[t-1]=-20;if(e.begin[t]>0&&e.token[e.begin[t]-1]==="for"&&e.stack[t]!=="for"){l.push(-10);return}l.push(d);return}l.push(-20);}function q(){const I=e.stack[t+1];const J=t===0?e.stack[t]:e.stack[t-1];if(i($,41)||T($,93)&&(J==="object"||J==="array")){if(I!=="method"||I==="method"&&T(e.token[t+1],41)&&T(e.token[t+2],41)){if(i($,41)&&(I!=="function"||i(e.token[e.begin[e.begin[t-1]-1]],40)||e.token[e.begin[e.begin[t-1]-1]]==="x(")){oe(false,false);}else if(e.types[t+1]!=="end"&&e.types[t+2]!=="end"){oe(true,false);}}}Y.push(false);H.push([]);E.push(false);C.push(false);R.push(false);L.push(0);if(n.script.neverFlatten===true||I==="attribute"||h==="generic"||n.script.arrayFormat==="indent"&&I==="array"||I==="class"&&T($,40)&&$!=="x("||i(p,91)&&e.token[t+1]==="function"){x.push(false);}else {if(I==="expression"||I==="method"){x.push(true);}else if((I==="object"||I==="class")&&(i($,40)||$==="x("||h==="word"||h==="reference")){x.push(true);}else if(I==="array"||i(p,40)||p==="x("){x.push(true);}else if(i(p,123)&&I==="object"&&h!=="operator"&&h!=="start"&&h!=="string"&&h!=="number"&&J!=="object"&&J!=="array"&&t>0){x.push(true);}else {x.push(false);}}if(T(p,40)&&p!=="x("&&e.stack[t+1]!=="attribute"){d=d+1;}if(i(p,123)||p==="x{"){X.push(-1);if(e.types[t-1]!=="comment"){if(h==="markup"){l[t-1]=d;}else if(n.script.braceAllman===true&&h!=="operator"&&$!=="return"){l[t-1]=d-1;}else if(e.stack[t+1]!=="block"&&(I==="function"||i($,41)||$==="x)"||i($,44)||i($,125)||h==="markup")){l[t-1]=-10;}else if(i($,123)||$==="x{"||i($,91)||i($,125)||$==="x}"){l[t-1]=d-1;}}if(I==="object"){if(n.script.objectIndent==="indent"){x[x.length-1]=false;l.push(d);return}if(n.script.objectIndent==="inline"){x[x.length-1]=true;l.push(-20);return}}if(I==="switch"){if(n.script.noCaseIndent===true){l.push(d-1);return}d=d+1;l.push(d);return}if(x[x.length-1]===true){if(h!=="word"&&h!=="reference"){l.push(-20);return}}l.push(d);return}if(i(p,40)||p==="x("){if(n.wrap>0&&i(p,40)&&e.token[t+1]!==")"){v.push(1);}if(i($,45)&&(i(e.token[t-2],40)||e.token[t-2]==="x(")){l[t-2]=-20;}if(h==="end"&&J!=="if"&&J!=="for"&&J!=="catch"&&J!=="else"&&J!=="do"&&J!=="try"&&J!=="finally"&&J!=="catch"){if(e.types[t-1]==="comment"){l[t-1]=d;}else {l[t-1]=-20;}}if($==="async"){l[t-1]=-10;}else if(I==="method"||e.token[t-2]==="function"&&h==="reference"){if($==="import"||$==="in"||n.script.functionNameSpace===true){l[t-1]=-10;}else if(i($,125)&&e.stack[t-1]==="function"||h==="word"||h==="reference"||h==="property"){l[t-1]=-20;}else if(J!=="method"&&I!=="method"){l[t-1]=d;}}if(i($,43)&&(i(e.token[t-2],34)||i(e.token[t-2],39))){l.push(d);return}if(i($,125)||$==="x}"){l.push(-20);return}if(i($,45)&&(t<2||T(e.token[t-2],41)&&T(e.token[t-2],93)&&e.token[t-2]!=="x)"&&e.types[t-2]!=="reference"&&e.types[t-2]!=="string"&&e.types[t-2]!=="number")||n.script.functionSpace===false&&$==="function"){l[t-1]=-20;}l.push(-20);return}if(i(p,91)){if(i($,91))Y[Y.length-2]=true;if($==="return"||$==="var"||$==="let"||$==="const"){l[t-1]=-10;}else if(e.types[t-1]!=="comment"&&e.stack[t-1]!=="attribute"&&(h==="end"||h==="word"||h==="reference")){l[t-1]=-20;}else if(i($,91)||i($,123)||$==="x{"){l[t-1]=d-1;}if(e.stack[t]==="attribute"){l.push(-20);return}if(n.script.arrayFormat==="indent"){x[x.length-1]=false;l.push(d);return}if(n.script.arrayFormat==="inline"){x[x.length-1]=true;l.push(-20);return}if(I==="method"||x[x.length-1]===true){l.push(-20);return}let b=t+1;do{if(i(e.token[b],93)){l.push(-20);return}if(i(e.token[b],44)){l.push(d);return}b=b+1;}while(b<r);l.push(-20);}}function te(){if(p.length===1){l.push(-20);if(e.lines[t]===0)l[t-1]=-20;}else if(p.indexOf("#!/")===0){l.push(d);}else if(h!=="liquid"&&e.types[t+1]!=="liquid"){l.push(-10);}if((i($,44)||h==="start")&&(e.stack[t]==="object"||e.stack[t]==="array")&&x[x.length-1]===false&&t>0){l[t-1]=d;}}function G(){if(n.language!=="json"&&e.types[t-1]!=="string"){if(a==="liquid_else"){l[t-1]=d-1;l.push(d);}else if(a==="liquid_start"){d=d+1;if(e.lines[t-1]<1)l[t-1]=-20;if(e.lines[t]>0||$.length===1&&h==="string"){l.push(d);}else {l.push(-20);}}else if(a==="liquid_end"){d=d-1;if(h==="liquid_start"||e.lines[t-1]<1){l[t-1]=-20;}else {l[t-1]=d;}if(e.lines[t]>0){l.push(d);}else {l.push(-20);}}else if(a==="liquid"){if(e.lines[t]>0){l.push(d);}else {l.push(-20);}}}}function ue(){if(a==="template_string_start"){d=d+1;l.push(d);}else if(a==="template_string_else"){ne();l[t-1]=d-1;l.push(d);}else {ne();d=d-1;l[t-1]=d;l.push(-10);}if(t>2&&(e.types[t-2]==="template_string_else"||e.types[t-2]==="template_string_start")){if(n.script.bracePadding===true){l[t-2]=-10;l[t-1]=-10;}else {l[t-2]=-20;l[t-1]=-20;}}}function xe(){if(i(e.token[t-1],44)||i(e.token[t-1],58)&&e.stack[t-1]!=="data_type"){l[t-1]=-10;}else {l[t-1]=-20;}if(e.types[t]==="type"||e.types[t]==="type_end"){l.push(-10);}if(e.types[t]==="type_start"){l.push(-20);}}function ge(){if((i($,41)||$==="x)")&&e.stack[t]==="class"&&(e.token[e.begin[t-1]-1]==="static"||e.token[e.begin[t-1]-1]==="final"||e.token[e.begin[t-1]-1]==="void")){l[t-1]=-10;l[e.begin[t-1]-1]=-10;}if(i($,93))l[t-1]=-10;if(p==="else"&&i($,125)){if(e.token[t-2]==="x}")l[t-3]=l[t-3]-1;if(n.script.braceAllman===true||n.script.elseNewline===true){l[t-1]=d;}}if(p==="new"&&pe.js.keywords.has(e.token[t+1]));if(p==="from"&&h==="end"&&t>0&&(e.token[e.begin[t-1]-1]==="import"||i(e.token[e.begin[t-1]-1],44))){l[t-1]=-10;}if(p==="function"){if(n.script.functionSpace===false&&t<r-1&&(i(e.token[t+1],40)||e.token[t+1]==="x(")){l.push(-20);return}l.push(-10);return}if(i($,45)&&t>1){if(e.types[t-2]==="operator"||i(e.token[t-2],44)){l[t-1]=-20;}else if(e.types[t-2]==="start"){l[t-2]=-20;l[t-1]=-20;}}else if(p==="while"&&(i($,125)||$==="x}")){let I=t-1;let J=0;do{if(i(e.token[I],125)||e.token[I]==="x}")J=J+1;if(i(e.token[I],123)||e.token[I]==="x{")J=J-1;if(J===0){if(e.token[I-1]==="do"){l[t-1]=-10;break}l[t-1]=d;break}I=I-1;}while(I>-1)}else if(p==="in"||(i($,125)||$==="x}")&&(p==="catch"||p==="else"&&n.script.elseNewline===false&&n.script.braceAllman===false)){l[t-1]=-10;}else if(p==="var"||p==="let"||p==="const"){X[X.length-1]=t;if(h==="end")l[t-1]=d;if(e.token[e.begin[t]-1]!=="for"){let I=t+1;let J=0;do{if(e.types[I]==="end")J=J-1;if(e.types[I]==="start")J=J+1;if(J<0||J===0&&(i(e.token[I],59)||i(e.token[I],44)))break;I=I+1;}while(I<r);if(i(e.token[I],44))d=d+1;}l.push(-10);return}if(h!=="word"&&e.stack[t]==="switch"&&(p==="default"||p==="case")){l[t-1]=d-1;l.push(-10);return}if(p==="catch"&&$==="."){l[t-1]=-20;l.push(-20);return}if(p==="catch"||p==="finally"){l[t-1]=-10;l.push(-10);return}if(n.script.bracePadding===false&&t<r-1&&i(e.token[t+1],125)){l.push(-20);return}if(e.stack[t]==="object"&&(i($,123)||i($,44))&&(i(e.token[t+1],40)||e.token[t+1]==="x(")){l.push(-20);return}if(e.types[t-1]==="comment"&&i(e.token[e.begin[t]],40)){l[t-1]=d+1;}l.push(-10);}do{if(e.lexer[t]===g){a=e.types[t];p=e.token[t];if(a==="comment"){M();}else if(a==="regex"){l.push(-20);}else if(a==="string"){te();}else if(a.indexOf("template_string")===0){ue();}else if(a==="separator"){K();}else if(a==="start"){q();}else if(a==="end"){ce();}else if(a==="type"||a==="type_start"||a==="type_end"){xe();}else if(a==="operator"){N();}else if(a==="word"){ge();}else if(a==="reference"){P();}else if(a==="markup"){Pe();}else if(a.indexOf("liquid")===0){G();}else if(a==="generic"){if(T($,35)&&$!=="return"&&h!=="operator"&&$!=="public"&&$!=="private"&&$!=="static"&&$!=="final"&&$!=="implements"&&$!=="class"&&$!=="void"){l[t-1]=-20;}if(i(e.token[t+1],40)||e.token[t+1]==="x("){l.push(-20);}else {l.push(-10);}}else {l.push(-10);}if(a!=="comment"){h=a;$=p;}if(v.length>0&&e.token[t]!==")"){if(e.types[t]==="comment"&&v[v.length-1]>-1){v[v.length-1]=n.wrap+1;}else if(l[t]>-1||e.token[t].charAt(0)==="`"&&e.token[t].indexOf(fe)>0){v[v.length-1]=-1;}else if(v[v.length-1]>-1){v[v.length-1]=v[v.length-1]+e.token[t].length;if(l[t]===-10)v[v.length-1]=v[v.length-1]+1;}}}else {be();}t=t+1;}while(t<r);return l})();const W=(()=>{const t=[];const d=(()=>{const X=[];const Y=n.indentChar;let l=n.indentSize;if(typeof l!=="number"||l<1)return u;do{X.push(Y);l=l-1;}while(l>0);return X.join(u)})();const B=n.preserveLine+1;const U=["x;","x}","x{","x(","x)"];let a=s.start;let p=n.indentLevel;function h(X){const Y=[];const l=(()=>{if(a===r-1)return 1;if(e.lines[a+1]-1>B)return B;if(e.lines[a+1]>1)return e.lines[a+1]-1;return 1})();let w=0;if(X<0)X=0;do{Y.push(s.crlf);w=w+1;}while(w<l);if(X>0){w=0;do{Y.push(d);w=w+1;}while(w<X)}return Y.join(u)}if(n.script.vertical===true){let X=function(Y){let l=0;let w=0;let H=Y-1;let C=0;let x=0;const L=e.begin[a];const E=[];do{if((e.begin[H]===L||i(e.token[H],93)||i(e.token[H],41))&&(i(e.token[H+1],61)||i(e.token[H+1],59)&&e.stack[H]==="object")){C=H;w=0;do{if(e.begin[C]===L){if(i(e.token[C],58)||i(e.token[C],59)||e.token[C]==="x;"||y[C]>-1&&e.types[C]!=="comment"){if(i(e.token[C+1],46)){w=w+n.indentSize*n.indentChar.length;}break}}else if(y[C]>-1){break}if(e.types[C]!=="comment"){if(y[C-1]===-10)w=w+1;w=e.token[C].length+w;}C=C-1;}while(C>L);x=C;if(i(e.token[x],44)&&i(e.token[H+1],61)){do{if(e.types[x]==="end")x=e.begin[x];if(e.begin[x]===L){if(i(e.token[x],59)||e.token[x]==="x;")break;if(e.token[x]==="var"||e.token[x]==="const"||e.token[x]==="let"){w=w+n.indentSize*n.indentChar.length;break}}x=x-1;}while(x>L)}if(w>l)l=w;E.push([H,w]);H=C;}else if(e.types[H]==="end"){H=e.begin[H];}H=H-1;}while(H>L);H=E.length;if(H>0){do{H=H-1;C=E[H][1];if(C<l){do{e.token[E[H][0]]=e.token[E[H][0]]+se;C=C+1;}while(C<l)}}while(H>0)}};a=r;do{a=a-1;if(e.lexer[a]==="script"&&i(e.token[a],125)&&T(e.token[a-1],123)&&y[e.begin[a]]>0){X(a);}else {a=e.begin[a];}}while(a>0)}a=s.start;do{if(e.lexer[a]===g){if(e.types[a]==="comment"&&n.script.commentIndent===true){if(/\n/.test(e.token[a])){const X=e.begin[a]>-1?i(e.token[a][2],42)?je(y[a],d)+n.indentChar:je(y[a],d):n.indentChar;const Y=e.token[a].split(/\n/);let l=1;do{Y[l]=X+Y[l].trimStart();l=l+1;}while(l<Y.length);e.token.splice(a,1,Y.join(fe));}}if(U.indexOf(e.token[a])<0){if(T(e.token[a],59)||n.script.noSemicolon===false){t.push(e.token[a]);}else if(y[a]<0&&e.types[a+1]!=="comment"){t.push(";");}}if(a<r-1&&e.lexer[a+1]!==g&&e.begin[a]===e.begin[a+1]&&e.types[a+1].indexOf("end")<0&&T(e.token[a],44)){t.push(se);}else if(y[a]>-1){if((y[a]>-1&&i(e.token[a],123)||y[a]>-1&&i(e.token[a+1],125))&&e.lines[a]<3&&n.script.braceNewline===true){if(e.lines[a+1]<3)t.push(h(0));}t.push(h(y[a]));p=y[a];}else if(y[a]===-10){t.push(se);if(e.lexer[a+1]!==g)p=p+1;}}else {if(o[a]===a){t.push(e.token[a]);}else {s.ender=o[a];s.start=a;if(s.regions.has(s.start)){const X=s.external(p);t.push(X);}else {s.rules.indentLevel=p;const X=pt();t.push(X);}a=s.iterator;if(y[a]===-10){t.push(se);}else if(y[a]>-1){t.push(h(y[a]));}}}a=a+1;}while(a<r);s.iterator=r-1;return t.join(u)})();qe(n.script,c);return W}function jt(){const e=[];const{data:n,rules:c,crlf:f}=s;const _=s.ender>0?s.ender+1:n.token.length;const o=c.preserveLine+1;const g=(()=>{let B=0;const U=[];do{U.push(c.indentChar);B=B+1;}while(B<c.indentSize);return U.join(u)})();let r=c.indentLevel;let y=s.start;let W=[u,u];function t(B,U){return n.types[B]===U}function d(B){const U=[];const a=(()=>{if(y===_-1)return 1;if(n.lines[y+1]-1>o)return o;if(n.lines[y+1]>1)return n.lines[y+1]-1;return 1})();let p=0;if(B<0)B=0;do{U.push(f);p=p+1;}while(p<a);if(B>0){p=0;do{U.push(g);p=p+1;}while(p<B)}e.push(U.join(u));}do{if(t(y+1,"end")||t(y+1,"liquid_end")||t(y+1,"liquid_else")){r=r-1;}if(t(y,"liquid")&&n.lines[y]>0){e.push(n.token[y]);if(T(n.token[y+1],59)&&pe.css.units.has(n.token[y+1])===false){d(r);}}else if(t(y-1,"selector")&&t(y,"liquid")&&t(y+1,"selector")){e.push(n.token[y]);if(Ie(n.token[y-1],45)&&(i(n.token[y+1],46)||i(n.token[y+1],35)||i(n.token[y+1],38))){e.push(se);}}else if(t(y,"liquid_else")){e.push(n.token[y]);r=r+1;d(r);}else if(t(y,"start")||t(y,"liquid_start")){r=r+1;e.push(n.token[y]);if(t(y+1,"end")===false&&t(y+1,"liquid_end")===false){d(r);}}else if(i(n.token[y],59)||(t(y,"end")||t(y,"liquid_end")||t(y,"comment"))){e.push(n.token[y]);if(t(y+1,"value")){if(n.lines[y+1]===1){e.push(se);}else if(n.lines[y+1]>1){d(r);}}else if(t(y+1,"separator")===false){if(t(y+1,"comment")===false||t(y+1,"comment")&&n.lines[y+1]>1){d(r);}else {e.push(se);}}}else if(i(n.token[y],58)){e.push(n.token[y]);if(t(y+1,"selector")===false&&T(n.token[y+1],44)){e.push(se);}}else if(t(y,"selector")||t(y,"at_rule")){if(c.style.classPadding===true&&t(y-1,"end")&&n.lines[y]<3){d(r);}if(n.token[y].indexOf("and(")>0){n.token[y]=n.token[y].replace(/and\(/,"and (");e.push(n.token[y]);}else if(n.token[y].indexOf("when(")>0){W=n.token[y].split("when(");e.push(W[0].replace(/\s+$/,u));d(r+1);e.push(`when (${W[1]}`);}else {e.push(n.token[y]);}if(t(y+1,"start")){e.push(se);}}else if(i(n.token[y],44)){if(t(y+1,"value")){d(r);e.push(n.token[y]);}else {e.push(n.token[y]);}if(t(y+1,"selector")||t(y+1,"property")){d(r);}else {e.push(se);}}else if(n.stack[y]==="map"&&i(n.token[y+1],41)&&y-n.begin[y]>5){e.push(n.token[y]);d(r);}else if(n.token[y]==="x;"){d(r);}else if((t(y,"variable")||t(y,"function"))&&c.style.classPadding===true&&t(y-1,"end")&&n.lines[y]<3){e.push(f);e.push(n.token[y]);}else if(T(n.token[y],59)){e.push(n.token[y]);}y=y+1;}while(y<_);s.iterator=_-1;return e.join(u)}function dt(e){if(e===1)return qt();if(e===3)return jt();if(e===2)return pt()}function He(e){if(typeof e==="string"){return {text:"ignore",auto:"ignore",markup:"markup",html:"markup",liquid:"markup",xml:"markup",javascript:"script",typescript:"script",jsx:"script",tsx:"script",json:"script",less:"style",scss:"style",sass:"style",css:"style"}[e]}}function Ye(e){if(typeof e==="string"){return {text:4,auto:4,markup:1,html:1,liquid:1,xml:1,javascript:2,typescript:2,jsx:2,tsx:2,json:2,less:3,scss:3,sass:3,css:3}[e]}}var ht=class extends Array{get entry(){return this[this.length-1]}get token(){return this[this.length-1][0]}get index(){return this[this.length-1][1]}update(n,c){const f=this.length-1;if(f>0){if(c===void 0){if(typeof n==="string"){this[f][0]=n;}else {this[f][1]=n;}}else {this[f][0]=n;this[f][1]=c;}return this[f]}else {this.push([n,c]);return this[f+1]}}pop(){const n=this.length-1;const c=this[n];if(n>0)this.splice(n,1);return c}};var Me=class{constructor(){this.env=typeof process!=="undefined"&&process.versions!=null?"node":"browser";this.start=0;this.ender=0;this.iterator=0;this.scopes=[];this.attributes=new Map;this.regions=new Map;this.pairs=new Map;this.error=u;this.crlf="\n";this.references=[[]];this.count=-1;this.character=0;this.space=-1;this.line=1;this.lineOffset=0;this.rules={crlf:false,language:"auto",endNewline:false,indentChar:" ",indentLevel:0,indentSize:2,preserveLine:2,wrap:0,liquid:{commentNewline:false,commentIndent:true,delimiterTrims:"preserve",ignoreTagList:[],lineBreakSeparator:"default",normalizeSpacing:true,preserveComment:false,quoteConvert:"none",valueForce:"intent"},markup:{attributeCasing:"preserve",attributeSort:false,attributeSortList:[],correct:false,commentNewline:false,commentIndent:true,delimiterForce:false,forceAttribute:3,forceLeadAttribute:true,forceIndent:false,ignoreCSS:false,ignoreJS:true,ignoreJSON:false,preserveComment:false,preserveText:false,preserveAttributes:false,selfCloseSpace:true,quoteConvert:"none"},json:{correct:false,arrayFormat:"default",braceAllman:false,bracePadding:false,objectIndent:"default",objectSort:false,quoteConvert:"double",endComma:"never",noSemicolon:true,vertical:false},style:{correct:false,atRuleSpace:true,classPadding:false,noLeadZero:false,sortSelectors:false,sortProperties:false,quoteConvert:"none"},script:{arrayFormat:"default",braceNewline:false,bracePadding:false,braceStyle:"none",braceAllman:false,caseSpace:false,commentIndent:false,commentNewline:false,correct:false,elseNewline:false,endComma:"never",functionNameSpace:false,functionSpace:false,methodChain:4,neverFlatten:false,noCaseIndent:false,noSemicolon:false,objectSort:false,objectIndent:"default",preserveComment:false,quoteConvert:"none",styleGuide:"none",ternaryLine:false,variableList:"none",vertical:false}};this.data={begin:[],ender:[],lexer:[],lines:[],stack:[],token:[],types:[]};}get stats(){return Me.stats}get source(){if(this.mode===2)return Me.region;return this.env==="node"&&Buffer.isBuffer(Me.source)?Me.source.toString():Me.source}set source(n){Me.source=this.env==="node"?Buffer.isBuffer(n)?n:Buffer.from(n):n;}reset(){this.error=u;this.count=-1;this.mode=1;this.data.begin=[];this.data.ender=[];this.data.lexer=[];this.data.lines=[];this.data.stack=[];this.data.token=[];this.data.types=[];this.references=[[]];this.stack=new ht(["global",-1]);if(this.pairs.size>0)this.pairs.clear();if(this.attributes.size>0)this.attributes.clear();if(this.regions.size>0)this.regions.clear();}full(n,c=3){this.reset();ct(n);if(c===1)return this.data;this.mode=3;return dt(n)}external(n,c){if(this.mode===1){this.mode=2;const f=Ye(n);Me.region=c;this.language=n;this.lexer=He(this.language);this.regions.set(this.count+1,{lexer:f,id:this.language});ct(f);this.mode=1;this.lexer=He(this.rules.language);this.language=this.rules.language;}else {const{id:f,lexer:_}=this.regions.get(this.start);this.language=f;this.rules.indentLevel=n;const o=dt(_);this.rules.indentLevel=0;this.language=this.rules.language;this.lexer=He(this.language);return o}}final(n){let c=this.count;const f=n.begin[c];if(n.lexer[c]==="style"&&this.rules.style.sortProperties||n.lexer[c]==="script"&&(this.rules.script.objectSort||this.rules.json.objectSort)){return}do{if(n.begin[c]===f||n.begin[n.begin[c]]===f&&n.types[c].indexOf("attribute")>-1&&n.types[c].indexOf("attribute_end")<0){n.ender[c]=this.count;}else {c=n.begin[c];}c=c-1;}while(c>f);if(c>-1)n.ender[c]=this.count;}push(n,c,f=u){n.begin.push(c.begin);n.ender.push(c.ender);n.lexer.push(c.lexer);n.stack.push(c.stack);n.token.push(c.token);n.types.push(c.types);n.lines.push(c.lines);if(n!==this.data)return;this.space=0;this.count=this.count+1;if(c.lexer!=="style"&&f.replace(/[{}@<>%#]/g,u)===u){f=c.types==="else"?"else":Re(c.token);}if(c.types==="start"||c.types.indexOf("_start")>0){this.stack.push([f,this.count]);}else if(c.types==="end"||c.types.indexOf("_end")>0){let _=0;const o=this.stack.length;if(o>2&&(n.types[this.stack[o-1][1]]==="else"||n.types[this.stack[o-1][1]].indexOf("_else")>0)&&(n.types[this.stack[o-2][1]]==="start"||n.types[this.stack[o-2][1]].indexOf("_start")>0)&&(n.types[this.stack[o-2][1]+1]==="else"||n.types[this.stack[o-2][1]+1].indexOf("_else")>0)){this.stack.pop();n.begin[this.count]=this.stack.index;n.stack[this.count]=this.stack.token;n.ender[this.count-1]=this.count;_=n.ender[n.begin[this.count]+1];}this.final(n);if(_>0)n.ender[n.begin[this.count]+1]=_;this.stack.pop();}else if(c.types==="else"||c.types.indexOf("_else")>0){if(f===u)f="else";if(this.count>0&&(n.types[this.count-1]==="start"||n.types[this.count-1].indexOf("_start")>0)){this.stack.push([f,this.count]);}else {this.final(n);this.stack.update(f===u?"else":f,this.count);}}}pop(n){if(n===this.data)this.count=this.count-1;return {begin:n.begin.pop(),ender:n.ender.pop(),lexer:n.lexer.pop(),lines:n.lines.pop(),stack:n.stack.pop(),token:n.token.pop(),types:n.types.pop()}}concat(n,c){n.begin=n.begin.concat(c.begin);n.ender=n.ender.concat(c.ender);n.lexer=n.lexer.concat(c.lexer);n.stack=n.stack.concat(c.stack);n.token=n.token.concat(c.token);n.types=n.types.concat(c.types);n.lines=n.lines.concat(c.lines);if(n===this.data)this.count=n.token.length-1;}splice(n){const c=this.data.begin[this.count];const f=this.data.token[this.count];if(n.record!==void 0&&n.record.token!==u){n.data.begin.splice(n.index,n.howmany,n.record.begin);n.data.ender.splice(n.index,n.howmany,n.record.ender);n.data.token.splice(n.index,n.howmany,n.record.token);n.data.lexer.splice(n.index,n.howmany,n.record.lexer);n.data.stack.splice(n.index,n.howmany,n.record.stack);n.data.types.splice(n.index,n.howmany,n.record.types);n.data.lines.splice(n.index,n.howmany,n.record.lines);if(n.data===this.data){this.count=this.count-n.howmany+1;if(c!==this.data.begin[this.count]||f!==this.data.token[this.count]){this.space=0;}}}else {n.data.begin.splice(n.index,n.howmany);n.data.ender.splice(n.index,n.howmany);n.data.token.splice(n.index,n.howmany);n.data.lexer.splice(n.index,n.howmany);n.data.stack.splice(n.index,n.howmany);n.data.types.splice(n.index,n.howmany);n.data.lines.splice(n.index,n.howmany);if(n.data===this.data){this.count=this.count-n.howmany;this.space=0;}}}spacer(n){this.space=1;do{if(n.array[n.index]===fe){this.space=this.space+1;this.line=this.line+1;}if(le(n.array[n.index+1])===false)break;n.index=n.index+1;}while(n.index<n.end);return n.index}};var Ze=Me;Ze.source=u;Ze.region=u;Ze.stats={chars:-1,time:"",size:"",language:""};var s=new Ze;var Nt={global:{crlf:{default:false,description:"If line termination should be Windows (CRLF) format. Unix (LF) format is the default.",lexer:"all",type:"boolean"},endNewline:{default:false,description:"Insert an empty line at the end of output.",lexer:"all",type:"boolean"},indentSize:{default:2,description:'The number of "indentChar" values to comprise a single indentation.',lexer:"all",type:"number"},indentChar:{default:" ",description:"The string characters to comprise a single indentation. Any string combination is accepted.",lexer:"all",type:"string"},language:{description:"The language name",lexer:"all",type:"select",default:"auto",values:[{rule:"auto",description:"Prettify will automatically detect the language"},{rule:"text",description:"Plain Text"},{rule:"html",description:"HTML"},{rule:"liquid",description:"HTML + Liquid"},{rule:"javascript",description:"JavaScript"},{rule:"jsx",description:"JSX"},{rule:"typescript",description:"TypeScript"},{rule:"tsx",description:"TSX"},{rule:"json",description:"JSON"},{rule:"css",description:"CSS"},{rule:"scss",description:"SCSS"},{rule:"less",description:"LESS"},{rule:"xml",description:"XML"}]},preserveLine:{default:2,description:"The maximum number of consecutive empty lines to retain.",lexer:"all",type:"number"},wrap:{default:0,description:"Character width limit before applying word wrap. A 0 value disables this option. A negative value concatenates script strings.",lexer:"all",type:"number"}},liquid:{commentNewline:{default:false,description:"If a blank new line should be forced above comments.",lexer:"all",type:"boolean"},commentIndent:{default:false,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",lexer:"all",type:"boolean"},correct:{default:false,description:"Automatically correct some sloppiness in code.",lexer:"markup",type:"boolean"},delimiterTrims:{default:"preserve",description:"How delimiter whitespace trim dashes should handled on Liquid tokens. You should avoid setting this to force in order to avoid stripping whitespace between text content.",lexer:"markup",type:"select",values:[{rule:"preserve",description:"All trim dash occurances of trims intact"},{rule:"strip",description:"Removes all trim dash occurances for tags and output tokens"},{rule:"force",description:"Applies trime dashes to all tags and output tokens"},{rule:"tags",description:"Applies trim dashes to tags tokens only"},{rule:"output",description:"Applies trim dashes to output object tokens only"}]},ignoreTagList:{default:[],description:"A list of liquid tag to ignore",lexer:"liquid",type:"array"},indentAttributes:{default:false,description:"Whether or not markup tags with Liquid contained attributes should apply indentation",lexer:"liquid",type:"boolean"},preserveComment:{default:false,description:"Prevent comment reformatting due to option wrap.",lexer:"markup",type:"boolean"},normalizeSpacing:{default:true,description:"Whether or not to normalize the distributed spacing contained in Liquid tokens.",lexer:"markup",type:"boolean"},lineBreakSeparator:{default:"default",description:"Controls the placement of Liquid tag separator type characters in newline structures.",lexer:"markup",type:"select",values:[{rule:"default",description:"Leave line break character intace"},{rule:"before",description:"Place line break character at the start of expressions"},{rule:"after",description:"Place line break character at the end of expressions"}]},quoteConvert:{lexer:"all",description:"If the quotes should be converted to single quotes or double quotes.",type:"select",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}]},valueForce:{default:"intent",description:"Controls force indentation applied in accordance with the attribute value expressions. This rule is Liquid specific.",lexer:"markup",type:"select",values:[{rule:"wrap",description:"Apply by wrap"},{rule:"newline",description:"Apply when newlines"},{rule:"intent",description:"Apply on either newline or wrap"},{rule:"always",description:"Always apply"},{rule:"never",description:"Never apply"}]}},markup:{attributeSort:{default:false,description:"Alphanumerically sort markup attributes. Attribute sorting is ignored on tags that contain attributes template attributes.",lexer:"markup",type:"boolean"},attributeSortList:{default:[],description:"A comma separated list of attribute names. Attributes will be sorted according to this list and then alphanumerically. This option requires 'attributeSort' have a value of true.",lexer:"markup",type:"array"},attributeCasing:{default:"preserve",description:"Controls the casing of attribute values and keys.",type:"select",lexer:"markup",values:[{rule:"preserve",description:"All tag attribute keys/values are preserved and left intact."},{rule:"lowercase",description:"All tag attribute keys/values are converted to lowercase"},{rule:"lowercase-name",description:"Only attribute keys are converted to lowercase"},{rule:"lowercase-value",description:"Only attribute values are converted to lowercase"}]},commentNewline:{default:false,description:"If a blank new line should be forced above comments.",lexer:"all",type:"boolean"},commentIndent:{default:false,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",lexer:"all",type:"boolean"},correct:{default:false,description:"Automatically correct some sloppiness in code.",lexer:"markup",type:"boolean"},delimiterForce:{description:"Whether or not ending HTML tag delimiters should be forced onto a newline. This will emulate the style of Prettier's singleAttributePerLine formatting option, wherein the last > delimiter character breaks itself onto a new line",default:false,lexer:"markup",type:"boolean"},forceAttribute:{default:false,description:"If all markup attributes should be indented each onto their own line. This option accepts either a boolean or number value, depending on your preferences you can either force attributes based a count limit, disable forcing or always enable enforcing.",lexer:"markup",type:["number","boolean"],multi:{number:{default:1,description:"Optionally define an attribute force threshold. When the number of attributes exceeds this limit then they will be forced, otherwise they will be left intact."},boolean:{default:false,description:"Whether or not to enforce the rule. A value of true will always force attributes, whereas a value of false will never force attributes."}}},forceLeadAttribute:{default:false,description:"Forces leading attribute onto a newline when using wrap based indentation.",lexer:"markup",type:"boolean"},forceIndent:{default:false,description:"Will force indentation upon all content and tags without regard for the creation of new text nodes.",lexer:"markup",type:"boolean"},ignoreJS:{default:false,description:"Whether to ignore embedded regions of tags identified to contain JavaScript",lexer:"markup",type:"boolean"},ignoreCSS:{default:false,description:"Whether to ignore embedded regions of tags identified to contain CSS",lexer:"markup",type:"boolean"},ignoreJSON:{default:false,description:"Whether HTML <script> tags annotated with a JSON identifiable attribute should be ignored from beautification.",lexer:"markup",type:"boolean"},preserveAttributes:{default:false,description:"If markup tags should have their insides preserved. This option is only available to markup and does not support child tokens that require a different lexer.",lexer:"markup",type:"boolean"},preserveComment:{default:false,description:"Prevent comment reformatting due to option wrap.",lexer:"markup",type:"boolean"},preserveText:{default:false,description:"If text in the provided markup code should be preserved exactly as provided. This option eliminates beautification and wrapping of text content.",lexer:"markup",type:"boolean"},selfCloseSpace:{default:false,description:'Markup self-closing tags end will end with " />" instead of "/>".',lexer:"markup",type:"boolean"},quoteConvert:{lexer:"all",description:"If the quotes should be converted to single quotes or double quotes.",type:"select",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}]}},style:{correct:{default:false,description:"Automatically correct some sloppiness in code.",lexer:"style",type:"boolean"},classPadding:{description:"Inserts new line characters between every CSS code block.",default:false,type:"boolean",lexer:"style"},sortSelectors:{default:false,type:"boolean",description:"If comma separated CSS selectors should present on a single line of code.",lexer:"style"},sortProperties:{lexer:"style",description:"This option will alphabetically sort CSS properties contained within classes.",default:false,type:"boolean"},noLeadZero:{lexer:"style",description:"This will eliminate leading zeros from numbers expressed within values.",default:false,type:"boolean"},atRuleSpace:{default:true,description:"Insert a single whitespace character betwen @ rules.",type:"boolean",lexer:"style"},quoteConvert:{lexer:"style",description:"If the quotes should be converted to single quotes or double quotes.",type:"select",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}]}},script:{arrayFormat:{lexer:"script",description:"Determines if all array indexes should be indented, never indented, or left to the default",type:"select",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},braceAllman:{lexer:"script",default:false,description:'Determines if opening curly braces will exist on the same line as their condition or be forced onto a new line, otherwise known as "Allman Style" indentation.',type:"boolean"},bracePadding:{default:false,description:"This will create a newline before and after objects values",type:"boolean",lexer:"script"},braceNewline:{default:false,description:"If true an empty line will be inserted after opening curly braces and before closing curly braces.",type:"boolean",lexer:"script"},braceStyle:{default:"none",description:"Emulates JSBeautify's brace_style option using existing Prettify options",type:"select",lexer:"script",values:[{rule:"none",description:"Ignores this option"},{rule:"collapse",description:"Sets formatObject to indent and neverflatten to true."},{rule:"collapse-preserve-inline",description:"Sets formatObject to inline and bracePadding to true"},{rule:"expand",description:"Sets objectIndent to indent and braceNewline + neverflatten to true."}]},caseSpace:{default:false,type:"boolean",description:"If the colon separating a case's expression (of a switch/case block) from its statement should be followed by a space instead of indentation thereby keeping the case on a single line of code.",lexer:"script"},commentNewline:{default:false,description:"If a blank new line should be forced above comments.",lexer:"all",type:"boolean"},commentIndent:{default:false,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",lexer:"all",type:"boolean"},correct:{default:false,description:"Automatically correct some sloppiness in code.",lexer:"markup",type:"boolean"},elseNewline:{lexer:"script",default:false,type:"boolean",description:'If keyword "else" is forced onto a new line.'},endComma:{description:"If there should be a trailing comma in arrays and objects.",type:"select",lexer:"script",default:"none",values:[{rule:"none",description:"Ignore this option"},{rule:"always",description:"Always ensure there is a tailing comma"},{rule:"never",description:"Remove trailing commas"}]},objectSort:{default:false,description:"This option will alphabetically sort object properties in JSON objects",type:"boolean",lexer:"script"},objectIndent:{description:"This option will alphabetically sort object properties in JSON objects",type:"select",lexer:"script",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},functionSpace:{lexer:"script",default:true,type:"boolean",description:"Inserts a space following the function keyword for anonymous functions."},functionNameSpace:{lexer:"script",default:true,type:"boolean",description:"If a space should follow a JavaScript function name."},methodChain:{lexer:"script",default:-1,description:"When to break consecutively chained methods and properties onto separate lines. A negative value disables this option. A value of 0 ensures method chainsare never broken.",type:"number"},preserveComment:{default:false,description:"Prevent comment reformatting due to option wrap.",lexer:"markup",type:"boolean"},ternaryLine:{lexer:"script",description:"If ternary operators in JavaScript `?` and `:` should remain on the same line.",type:"boolean",default:false},neverFlatten:{lexer:"script",default:true,description:"If destructured lists in script should never be flattend.",type:"boolean"},noCaseIndent:{lexer:"script",description:"If the colon separating a case's expression (of a switch/case block) from its statement should be followed by a space instead of indentation, thereby keeping the case on a single line of code.",default:false,type:"boolean"},noSemicolon:{lexer:"script",description:"Removes semicolons that would be inserted by ASI. This option is in conflict with option `attemptCorrection` and takes precedence over conflicting features. Use of this option is a possible security/stability risk.",default:false,type:"boolean"},quoteConvert:{lexer:"style",description:"If the quotes should be converted to single quotes or double quotes.",type:"select",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}]},variableList:{lexer:"script",description:"If consecutive JavaScript variables should be merged into a comma separated list or if variables in a list should be separated. each \u2014 Ensure each reference is a single declaration statement.",type:"select",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"each",description:"Ensure each reference is a single declaration statement"},{rule:"list",description:"Ensure consecutive declarations are a comma separated list"}]},vertical:{lexer:"script",description:"If lists of assignments and properties should be vertically aligned",type:"boolean",default:false}}};function Pt(e){let n=[];let c=0;const f=/(((var)|(let)|(const)|(function)|(import))\s+(\w|\$)+[a-zA-Z0-9]*)/.test(e)&&/@import/.test(e)===false;const _=/((((final)|(public)|(private))\s+static)|(static\s+void))/.test(e);function o(){if(/\n\s*#+\s+/.test(e)||/^#+\s+/.test(e)){return {language:"markdown",lexer:"markup"}}if(/\$[a-zA-Z]/.test(e)||/\{\s*(\w|\.|\$|#)+\s*\{/.test(e)||/^[.#]?[\w][\w-]+\s+\{(?:\s+[a-z][a-z-]+:\s*\S+;)+\s+[&>+]?\s+[.#:]?[\w][\w-]\s+\{/.test(e)&&/:\s*@[a-zA-Z];/.test(e)===false){return {language:"scss",lexer:"style"}}if(/@[a-zA-Z]:/.test(e)||/\.[a-zA-Z]\(\);/.test(e)){return {language:"less",lexer:"style"}}return {language:"css",lexer:"style"}}function g(){let y=1;let W=u;let t=false;let d=false;const B=/((public)|(private))\s+(static\s+)?(((v|V)oid)|(class)|(final))/.test(e);function U(){if(e.indexOf("(")>-1||e.indexOf("=")>-1||e.indexOf(";")>-1&&e.indexOf("{")>-1){if(_===true||/\w<\w+(,\s+\w+)*>/.test(e)||/(?:var|let|const)\s+\w+\s*:/.test(e)||/=\s*<\w+/.test(e)){return {language:"typescript",lexer:"script"}}return {language:"javascript",lexer:"script"}}return {language:"unknown",lexer:"text"}}function a(){if(/:\s*(?:number|string|boolean|any|unknown)(?:\[\])?/.test(e)||/(?:public|private)\s+/.test(e)||/(?:export|declare)\s+type\s+\w+\s*=/.test(e)||/(?:namespace|interface|enum|implements|declare)\s+\w+/.test(e)||/(?:typeof|keyof|as)\s+\w+/.test(e)||/\w+\s+as\s+\w+/.test(e)||/\[\w+(?:(?::\s*\w+)|(?:\s+in\s+\w+))\]:/.test(e)||/\):\s*\w+(?:\[\])?\s*(?:=>|\{)\s+/.test(e)||/(var|const|let)\s+\w+:\s*(string|number|boolean|string|any)(\[\])?/.test(e)){return {language:"typescript",lexer:"script"}}if(/\s(class|var|const|let)\s+\w/.test(e)===false&&/<[a-zA-Z](?:-[a-zA-Z])?/.test(e)&&/<\/[a-zA-Z-](?:-[a-zA-Z])?/.test(e)&&(/\s?\{%/.test(e)||/{{/.test(e))){return {language:"liquid",lexer:"markup"}}if(/^(\s*[$@])/.test(e)===false&&/([}\]];?\s*)$/.test(e)&&(/^\s*import\s+\*\s+as\s+\w+\s+from\s+['"]/.test(e)||/module\.export\s+=\s+/.test(e)||/export\s+default\s+\{/.test(e)||/[?:]\s*[{[]/.test(e)||/^(?:\s*return;?(?:\s+[{[])?)/.test(e))){return {language:"javascript",lexer:"script"}}if(/{%/.test(e)&&/{{/.test(e)&&/<\w/.test(e)){return {language:"liquid",lexer:"markup"}}if(/{\s*(?:\w|\.|@|#)+\s*\{/.test(e)){return {language:"less",lexer:"style"}}if(/\$(\w|-)/.test(e)){return {language:"scss",lexer:"style"}}if(/[;{:]\s*@\w/.test(e)===true){return {language:"less",lexer:"style"}}return {language:"css",lexer:"style"}}if(y<c){do{if(t===false){if(i(n[y],42)&&i(n[y-1],47)){n[y-1]=u;t=true;}else if(d===false&&y<c-6&&n[y].charCodeAt(0)===102&&n[y+1].charCodeAt(0)===105&&n[y+2].charCodeAt(0)===108&&n[y+3].charCodeAt(0)===116&&n[y+4].charCodeAt(0)===101&&n[y+5].charCodeAt(0)===114&&i(n[y+6],58)){d=true;}}else if(t===true&&i(n[y],42)&&y!==c-1&&i(n[y+1],47)){t=false;n[y]=u;n[y+1]=u;}else if(d===true&&i(n[y],59)){d=false;n[y]=u;}if(t===true||d===true)n[y]=u;y=y+1;}while(y<c)}W=n.join(u);if(/\s\/\//.test(e)===false&&/\/\/\s/.test(e)===false&&/^(\s*(\{|\[)(?!%))/.test(e)===true&&/((\]|\})\s*)$/.test(e)&&e.indexOf(",")!==-1){return {language:"json",lexer:"script"}}if(/((\}?(\(\))?\)*;?\s*)|([a-z0-9]("|')?\)*);?(\s*\})*)$/i.test(e)===true&&(f===true||B===true||/console\.log\(/.test(e)===true||/export\s+default\s+class\s+/.test(e)===true||/export\s+(const|var|let|class)s+/.test(e)===true||/document\.get/.test(e)===true||/((=|(\$\())\s*function)|(\s*function\s+(\w*\s+)?\()/.test(e)===true||e.indexOf("{")===-1||/^(\s*if\s+\()/.test(e)===true))return U();if(e.indexOf("{")>-1&&(/^(\s*[\u007b\u0024\u002e#@a-z0-9])/i.test(e)||/^(\s*\/(\*|\/))/.test(e)||/^(\s*\*\s*\{)/.test(e))&&/^(\s*if\s*\()/.test(e)===false&&/=\s*(\{|\[|\()/.test(W)===false&&(/(\+|-|=|\?)=/.test(W)===false||/\/\/\s*=+/.test(W)||/=+('|")?\)/.test(e)&&/;\s*base64/.test(e))&&/function(\s+\w+)*\s*\(/.test(W)===false)return a();return e.indexOf("{%")>-1?{language:"liquid",lexer:"markup"}:{language:"unknown",lexer:"text"}}function r(){function y(){return /{%-?\s*(schema|for|if|unless|render|include)/.test(e)||/{%-?\s*end\w+/.test(e)||/{{-?\s*content_for/.test(e)||/{{-?\s*[a-zA-Z0-9_'".[\]]+\s*-?}}/.test(e)||/{%/.test(e)&&/%}/.test(e)&&/{{/.test(e)&&/}}/.test(e)?{language:"liquid",lexer:"markup"}:{language:"html",lexer:"markup"}}return /^(\s*<!doctype\s+html>)/i.test(e)||/^(\s*<html)/i.test(e)||/<form\s/i.test(e)&&/<label\s/i.test(e)&&/<input\s/i.test(e)||(/<img(\s+\w+=['"]?\S+['"]?)*\s+src\s*=/.test(e)||/<a(\s+\w+=['"]?\S+['"]?)*\s+href\s*=/.test(e))||/<ul\s/i.test(e)&&/<li\s/i.test(e)&&/<\/li>/i.test(e)&&/<\/ul>/i.test(e)||/<head\s*>/.test(e)&&/<\/head>/.test(e)||/^(\s*<!DOCTYPE\s+((html)|(HTML))\s+PUBLIC\s+)/.test(e)&&/XHTML\s+1\.1/.test(e)===false&&/XHTML\s+1\.0\s+(S|s)((trict)|(TRICT))/.test(e)===false?y():/\s?{[{%]-?/.test(e)?{language:"liquid",lexer:"markup"}:{language:"xml",lexer:"markup"}}if(e===null||e.replace(/\s+/g,u)===u){return {language:"unknown",lexer:"text"}}if((/\n\s*#{1,6}\s+/.test(e)||/\n\s*(?:\*|-|(?:\d+\.))\s/.test(e))&&(/\[( |x|X)\]/.test(e)||/\s[*_~]{1,2}\w+[*_~]{1,2}/.test(e)||/\n\s*```[a-zA-Z]*?\s+/.test(e)||/-+\|(-+\|)+/.test(e))){return {language:"markdown",lexer:"text"}}if(/^(\s*<!DOCTYPE\s+html>)/i.test(e))return r();if(/^\s*@(?:charset|import|include|keyframes|media|namespace|page)\b/.test(e))return o();if(_===false&&/=(>|=|-|\+|\*)/.test(e)===false&&/^(?:\s*((if)|(for)|(function))\s*\()/.test(e)===false&&/(?:\s|;|\})((if)|(for)|(function\s*\w*))\s*\(/.test(e)===false&&f===false&&/return\s*\w*\s*(;|\})/.test(e)===false&&(e===void 0||/^(?:\s*#(?!(!\/)))/.test(e)||/\n\s*(\.|@)\w+(\(|(\s*:))/.test(e)&&/>\s*<\w/.test(e)===false||(/^\s*:root\s*\{/.test(e)||/-{2}\w+\s*\{/.test(e)||/^\s*(?:body|button|hr|section|h[1-6]|p|strong|\*)\s+\{\s+/.test(e))))return o();n=e.replace(/\[[a-zA-Z][\w-]*=['"]?[a-zA-Z][\w-]*['"]?\]/g,u).split(u);c=n.length;if(/^(\s*({{|{%|<))/.test(e))return r();if(_===true||/^(?:[\s\w-]*<)/.test(e)===false&&/(?:>[\s\w-]*)$/.test(e)===false)return g();return (/^(?:\s*<\?xml)/.test(e)||/(?:>[\w\s:]*)?<(?:\/|!|#)?[\w\s:\-[]+/.test(e)||/^\s*</.test(e)&&/<\/\w+(\w|\d)+>\s*$/.test(e))&&(/^(?:[\s\w]*<)/.test(e)||/(?:>[\s\w]*)$/.test(e))||/^(?:\s*<s((cript)|(tyle)))/i.test(e)&&/(?:<\/s((cript)|(tyle))>\s*)$/i.test(e)?/^(?:[\s\w]*<)/.test(e)===false||/(?:>[\s\w]*)$/.test(e)===false?g():r():{language:"unknown",lexer:"text"}}var Qt=function(){const e={before:[],language:[],rules:[],after:[]};it(n,{sync:{value:n.bind({sync:true})}});it(c,{listen:{value(_){e.rules.push(_);}}});it(s,{stats:{get(){return s.stats}},sync:{value:f.bind({sync:true})}});function n(_,o){console.time("time");s.source=_;if(typeof this.language==="string"&&this.language!==s.language){s.language=this.language;s.lexer=He(s.language);}if(typeof o==="object")c(o);const g=s.full(Ye(s.language));console.timeEnd("time");if(this.sync===true){if(s.error.length)throw new Error(s.error);return g}return new Promise((r,y)=>{var W,t;if((t=(W=s)==null?void 0:W.error)==null?void 0:t.length)return y(s.error);return r(g)})}function c(_){if(typeof _==="undefined")return s.rules;let o;if(e.rules.length>0){o=qe({},s.rules);}for(const g in _){if(g in s.rules){if(typeof s.rules[g]==="object"){qe(s.rules[g],_[g]);}else {if(g==="crlf"){s.rules[g]=_[g];s.crlf=s.rules[g]?"\r\n":"\n";}else if(g==="language"){s.rules[g]=_[g];if(s.language!==s.rules[g]){s.language=_[g];s.lexer=He(s.language);}}else {s.rules[g]=_[g];}}}if(o){const r={};for(const y in _){if(y!=="liquid"&&y!=="markup"&&y!=="script"&&y!=="style"&&y!=="json"){if(o[y]!==_[y]){r[y]={from:o[y],to:_[y]};}}else {for(const W in _[y]){if(o[y][W]!==_[y][W]){if(!(y in r))r[y]={};r[y][W]={from:o[y][W],to:_[y][W]};}}}}}}return c}function f(_,o){s.source=_;if(typeof o==="object")c(o);const g=Ye(s.language);const r=s.full(g,1);if(this.sync===true){if(s.error.length)throw new Error(s.error);return r}return new Promise((y,W)=>{if(s.error.length)return W(s.error);return y(r)})}return {format:n,rules:c,parse:f,liquid:n.bind({language:"liquid"}),html:n.bind({language:"html"}),css:n.bind({language:"css"}),json:n.bind({language:"json"}),get data(){return s.data},get grammar(){return pe.extend},get definitions(){return Nt},get language(){return Pt}}}();

export { Qt as default };
