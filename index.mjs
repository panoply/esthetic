var Ge=Object.defineProperty;var Ve=(s,c)=>{for(var f in c)Ge(s,f,{get:c[f],enumerable:true});};var Oe=Object.assign;var ie=Object.create;var je=Object.keys;var He=Object.defineProperty;var $e=Array.isArray;var Se={language:{description:"The language name",lexer:"all",type:"select",default:"auto",values:[{rule:"auto",description:"Prettify will automatically detect the language"},{rule:"text",description:"Plain Text"},{rule:"html",description:"HTML"},{rule:"liquid",description:"HTML + Liquid"},{rule:"javascript",description:"JavaScript"},{rule:"jsx",description:"JSX"},{rule:"typescript",description:"TypeScript"},{rule:"tsx",description:"TSX"},{rule:"json",description:"JSON"},{rule:"css",description:"CSS"},{rule:"scss",description:"SCSS"},{rule:"less",description:"LESS"},{rule:"xml",description:"XML"}]},wrap:{default:0,description:"Character width limit before applying word wrap. A 0 value disables this option. A negative value concatenates script strings.",lexer:"all",type:"number"},indentSize:{default:2,description:'The number of "indentChar" values to comprise a single indentation.',lexer:"all",type:"number"},indentChar:{default:" ",description:"The string characters to comprise a single indentation. Any string combination is accepted.",lexer:"all",type:"string"},crlf:{default:false,description:"If line termination should be Windows (CRLF) format. Unix (LF) format is the default.",lexer:"all",type:"boolean"},endNewline:{default:false,description:"Insert an empty line at the end of output.",lexer:"all",type:"boolean"},preserveLine:{default:2,description:"The maximum number of consecutive empty lines to retain.",lexer:"all",type:"number"},preserveComment:{default:false,description:"Prevent comment reformatting due to option wrap.",lexer:"all",type:"boolean"},commentNewline:{default:false,description:"If a blank new line should be forced above comments.",lexer:"all",type:"boolean"},commentIndent:{default:false,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",lexer:"all",type:"boolean"},correct:{default:false,description:"Automatically correct some sloppiness in code.",lexer:"all",type:"boolean"},quoteConvert:{lexer:"all",description:"If the quotes should be converted to single quotes or double quotes.",type:"select",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}]},attributeSort:{default:false,description:"Alphanumerically sort markup attributes. Attribute sorting is ignored on tags that contain attributes template attributes.",lexer:"markup",type:"boolean"},attributeSortList:{default:[],description:"A comma separated list of attribute names. Attributes will be sorted according to this list and then alphanumerically. This option requires 'attributeSort' have a value of true.",lexer:"markup",type:"array"},attributeChain:{default:"inline",description:"Controls how Liquid tags contained within HTML attributed should be formatted.",type:"select",lexer:"markup",values:[{rule:"inline",description:"Liquid tag block contents are chained together"},{rule:"collapse",description:"Liquid tag block contents are split onto newlines"},{rule:"preserve",description:"Liquid tag block contents are preserved"}]},attributeValues:{default:false,description:"Controls how attribute values should be formatter",type:"select",lexer:"markup",values:[{rule:"preserve",description:"Preserves attribute values, leaving them intact."},{rule:"collapse",description:"Collapsed all space separated attributes values onto newlines"},{rule:"wrap",description:"Collapase attribute values when then exceed wrap limit"},{rule:"strip",description:"Strips newlines and extraneous whitespaces from attribute values"}]},delimiterSpacing:{default:true,description:"Whether or not delimiter characters should apply a single space at the start and end point",lexer:"markup",type:"boolean"},forceAttribute:{default:false,description:"If all markup attributes should be indented each onto their own line.",lexer:"markup",type:["boolean"]},forceLeadingAttribute:{default:false,description:"Forces leading attribute onto a newline when using wrap based indentation.",lexer:"markup",type:"boolean"},forceIndent:{default:false,description:"Will force indentation upon all content and tags without regard for the creation of new text nodes.",lexer:"markup",type:["boolean","number"]},preserveAttributes:{default:false,description:"If markup tags should have their insides preserved. This option is only available to markup and does not support child tokens that require a different lexer.",lexer:"markup",type:"boolean"},preserveText:{default:false,description:"If text in the provided markup code should be preserved exactly as provided. This option eliminates beautification and wrapping of text content.",lexer:"markup",type:"boolean"},selfCloseSpace:{default:false,description:'Markup self-closing tags end will end with " />" instead of "/>".',lexer:"markup",type:"boolean"},classPadding:{description:"Inserts new line characters between every CSS code block.",default:false,type:"boolean",lexer:"style"},sortSelectors:{default:false,type:"boolean",description:"If comma separated CSS selectors should present on a single line of code.",lexer:"style"},sortProperties:{lexer:"style",description:"This option will alphabetically sort CSS properties contained within classes.",default:false,type:"boolean"},noLeadZero:{lexer:"style",description:"This will eliminate leading zeros from numbers expressed within values.",default:false,type:"boolean"},compressCSS:{lexer:"style",description:"If CSS should be beautified in a style where the properties and values are minifed for faster reading of selectors.",default:false,type:"boolean"},braceAllman:{lexer:"script",default:false,description:'Determines if opening curly braces will exist on the same line as their condition or be forced onto a new line, otherwise known as "Allman Style" indentation.',type:"boolean"},bracePadding:{default:false,description:"This will create a newline before and after objects values",type:"boolean",lexer:"script"},braceNewline:{default:false,description:"If true an empty line will be inserted after opening curly braces and before closing curly braces.",type:"boolean",lexer:"script"},braceStyle:{default:"none",description:"Emulates JSBeautify's brace_style option using existing Prettify options",type:"select",lexer:"script",values:[{rule:"none",description:"Ignores this option"},{rule:"collapse",description:"Sets formatObject to indent and neverflatten to true."},{rule:"collapse-preserve-inline",description:"Sets formatObject to inline and bracePadding to true"},{rule:"expand",description:"Sets objectIndent to indent and braceNewline + neverflatten to true."}]},arrayFormat:{lexer:"script",description:"Determines if all array indexes should be indented, never indented, or left to the default",type:"select",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},objectSort:{default:false,description:"This option will alphabetically sort object properties in JSON objects",type:"boolean",lexer:"script"},objectIndent:{description:"This option will alphabetically sort object properties in JSON objects",type:"select",lexer:"script",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},functionSpace:{lexer:"script",default:true,type:"boolean",description:"Inserts a space following the function keyword for anonymous functions."},functionNameSpace:{lexer:"script",default:true,type:"boolean",description:"If a space should follow a JavaScript function name."},methodChain:{lexer:"script",default:-1,description:"When to break consecutively chained methods and properties onto separate lines. A negative value disables this option. A value of 0 ensures method chainsare never broken.",type:"number"},caseSpace:{default:false,type:"boolean",description:"If the colon separating a case's expression (of a switch/case block) from its statement should be followed by a space instead of indentation thereby keeping the case on a single line of code.",lexer:"script"},inlineReturn:{lexer:"script",default:true,type:"boolean",description:"Inlines return statements contained within `if` and `else` conditions. This rules also augments code and will reason about your structure to output the best and most readable results."},elseNewline:{lexer:"script",default:false,type:"boolean",description:'If keyword "else" is forced onto a new line.'},ternaryLine:{lexer:"script",description:"If ternary operators in JavaScript `?` and `:` should remain on the same line.",type:"boolean",default:false},neverFlatten:{lexer:"script",default:true,description:"If destructured lists in script should never be flattend.",type:"boolean"},variableList:{lexer:"script",description:"If consecutive JavaScript variables should be merged into a comma separated list or if variables in a list should be separated. each \u2014 Ensure each reference is a single declaration statement.",type:"select",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"each",description:"Ensure each reference is a single declaration statement"},{rule:"list",description:"Ensure consecutive declarations are a comma separated list"}]},vertical:{lexer:"script",description:"If lists of assignments and properties should be vertically aligned",type:"boolean",default:false},noCaseIndent:{lexer:"script",description:"If the colon separating a case's expression (of a switch/case block) from its statement should be followed by a space instead of indentation, thereby keeping the case on a single line of code.",default:false,type:"boolean"},noSemicolon:{lexer:"script",description:"Removes semicolons that would be inserted by ASI. This option is in conflict with option `attemptCorrection` and takes precedence over conflicting features. Use of this option is a possible security/stability risk.",default:false,type:"boolean"},endComma:{description:"If there should be a trailing comma in arrays and objects.",type:"select",lexer:"script",default:"none",values:[{rule:"none",description:"Ignore this option"},{rule:"always",description:"Always ensure there is a tailing comma"},{rule:"never",description:"Remove trailing commas"}]}};var ge=function(){const s=ie(null);s.html=ie(null);s.script=ie(null);s.liquid=ie(null);s.html.tags=new Set(["body","colgroup","dd","dt","head","html","li","option","p","tbody","td","tfoot","th","thead","tr"]);s.html.voids=new Set(["area","base","basefont","br","col","embed","eventsource","frame","hr","image","img","input","isindex","keygen","link","meta","path","param","progress","source","wbr","use"]);s.liquid.tags=new Set(["case","capture","comment","embed","filter","for","form","if","macro","paginate","raw","switch","tablerow","unless","verbatim","schema","style","javascript","highlight","stylesheet"]);s.liquid.else=new Set(["case","default","else","when","elsif"]);s.liquid.singletons=new Set(["assign","increment","decrement","render","include"]);s.script.keywords=new Set(["ActiveXObject","ArrayBuffer","AudioContext","Canvas","CustomAnimation","DOMParser","DataView","Date","Error","EvalError","FadeAnimation","FileReader","Flash","Float32Array","Float64Array","FormField","Frame","Generator","HotKey","Image","Iterator","Intl","Int16Array","Int32Array","Int8Array","InternalError","Loader","Map","MenuItem","MoveAnimation","Notification","ParallelArray","Point","Promise","Proxy","RangeError","Rectangle","ReferenceError","Reflect","RegExp","ResizeAnimation","RotateAnimation","Set","SQLite","ScrollBar","Set","Shadow","StopIteration","Symbol","SyntaxError","Text","TextArea","Timer","TypeError","URL","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","URIError","WeakMap","WeakSet","Web","Window","XMLHttpRequest"]);return s}();var F=function(){const s=ie(null);s.parsed=ie(null);s.options=ie(null);s.beautify=ie(null);s.lexers=ie(null);s.stats=ie(null);s.hooks=ie(null);let c="";He(s,"source",{get(){return s.env==="node"&&Buffer.isBuffer(c)?c.toString():c},set(f){c=s.env==="node"?Buffer.isBuffer(f)?f:Buffer.from(f):f;}});s.mode="beautify";s.end=0;s.iterator=0;s.start=0;s.scopes=[];s.env=typeof process!=="undefined"&&process.versions!=null&&process.versions.node!=null?"node":"browser";s.parsed.begin=[];s.parsed.ender=[];s.parsed.lexer=[];s.parsed.lines=[];s.parsed.stack=[];s.parsed.token=[];s.parsed.types=[];s.stats.chars=-1;s.stats.time=-1;s.stats.size="";s.stats.language="";s.hooks.before=[];s.hooks.language=[];s.hooks.rules=[];s.hooks.after=[];s.options.mode="beautify";s.options.indentLevel=0;s.options.grammar=ie(null);s.options.grammar.html=ie(null);s.options.grammar.liquid=ie(null);s.options.lexer="auto";s.options.language="text";s.options.languageName="Plain Text";s.options.crlf=false;s.options.commentIndent=true;s.options.endNewline=false;s.options.indentChar=" ";s.options.indentSize=2;s.options.preserveComment=false;s.options.preserveLine=2;s.options.wrap=0;s.options.markup=ie(null);s.options.markup.correct=false;s.options.markup.commentNewline=false;s.options.markup.attributeChain="inline";s.options.markup.attributeValues="preserve";s.options.markup.attributeSort=false;s.options.markup.attributeSortList=[];s.options.markup.forceAttribute=false;s.options.markup.forceLeadingAttribute=false;s.options.markup.preserveText=false;s.options.markup.preserveAttributes=false;s.options.markup.selfCloseSpace=false;s.options.markup.forceIndent=false;s.options.markup.quoteConvert="none";s.options.style=ie(null);s.options.style.correct=false;s.options.style.compressCSS=false;s.options.style.classPadding=false;s.options.style.noLeadZero=false;s.options.style.sortSelectors=false;s.options.style.sortProperties=false;s.options.style.quoteConvert="none";s.options.script=ie(null);s.options.script.correct=false;s.options.script.braceNewline=false;s.options.script.bracePadding=false;s.options.script.braceStyle="none";s.options.script.braceAllman=false;s.options.script.commentNewline=false;s.options.script.caseSpace=false;s.options.script.inlineReturn=true;s.options.script.elseNewline=false;s.options.script.endComma="never";s.options.script.arrayFormat="default";s.options.script.objectSort=false;s.options.script.objectIndent="default";s.options.script.functionNameSpace=false;s.options.script.functionSpace=false;s.options.script.styleGuide="none";s.options.script.ternaryLine=false;s.options.script.methodChain=4;s.options.script.neverFlatten=false;s.options.script.noCaseIndent=false;s.options.script.noSemicolon=false;s.options.script.quoteConvert="none";s.options.script.variableList="none";s.options.script.vertical=false;s.options.json=ie(null);s.options.json.arrayFormat="default";s.options.json.braceAllman=false;s.options.json.bracePadding=false;s.options.json.objectIndent="default";s.options.json.objectSort=false;return s}();function Ie(s,c=" "){if(s===0)return c;let f="";let i=1;do{f+=c;}while(i++<s);return f}function L(s,c){if(!s)return false;return s.charCodeAt(0)===c}function ae(s,c){return L(s,c)===false}function me(s){return /\s/.test(s)}function Ne(s){const c=1024;const f=1048576;const i=1073741824;if(s<c)return s+" B";else if(s<f)return (s/c).toFixed(1)+" KB";else if(s<i)return (s/f).toFixed(1)+" MB";else return (s/i).toFixed(1)+" GB"}function Be(s){let c=0;const f=s.length;const i=s;const b=()=>{let a=0;const g=i.length;if(a<g){do{if($e(i[a])===true)i[a]=Be.apply(this,i[a]);a=a+1;}while(a<g)}};const e=a=>{let g=c;let t=0;let X=0;let $=0;let n=[];let m=i[c];let W="";const l=typeof m;if(g<f){do{W=typeof i[g];if(i[g]<m||W<l){m=i[g];n=[g];}else if(i[g]===m){n.push(g);}g=g+1;}while(g<f)}X=n.length;g=c;t=X+c;if(g<t){do{i[n[$]]=i[g];i[g]=m;$=$+1;g=g+1;}while(g<t)}c=c+X;if(c<f){e("");}else {if(this.recursive===true)b();s=i;}return a};e("");return s}function ze(s){let c=0;const f=s.length;const i=s;const b=()=>{let a=0;const g=i.length;if(a<g){do{if($e(i[a]))i[a]=ze.apply(this,i[a]);a=a+1;}while(a<g)}};const e=a=>{let g=c;let t=0;let X=0;let $=0;let n=i[c];let m=[];let W="";const l=typeof n;if(g<f){do{W=typeof i[g];if(i[g]>n||W>l){n=i[g];m=[g];}else if(i[g]===n){m.push(g);}g=g+1;}while(g<f)}X=m.length;g=c;t=X+c;if(g<t){do{i[m[$]]=i[g];i[g]=n;$=$+1;g=g+1;}while(g<t)}c=c+X;if(c<f){e("");}else {if(this.recursive===true)b();s=i;}return a};e("");return s}function De(s){let c=s;const f=[s[0]];const i=()=>{let e=0;const a=c.length;if(e<a){do{if($e(c[e]))c[e]=De.apply(this,c[e]);e=e+1;}while(e<a)}};const b=e=>{let a=0;const g=[];const t=c.length;if(a<t){do{if(c[a]!==e)g.push(c[a]);a=a+1;}while(a<t)}c=g;if(g.length>0){f.push(g[0]);b(g[0]);}else {if(this.recursive===true)i();s=c;}};b(this.array[0]);return s}var r=new class mt{constructor(){this.data=ie(null);this.references=[[]];this.structure=[["global",-1]];this.datanames=["begin","ender","lexer","lines","stack","token","types"];this.count=-1;this.lineNumber=1;this.linesSpace=0;this.error="";this.data.begin=[];this.data.ender=[];this.data.lexer=[];this.data.lines=[];this.data.stack=[];this.data.token=[];this.data.types=[];}get current(){const{begin:c,ender:f,lexer:i,lines:b,stack:e,token:a,types:g}=this.data;return {begin:c[c.length-1],ender:f[f.length-1],lexer:i[i.length-1],lines:b[b.length-1],stack:e[e.length-1],token:a[c.length-1],types:g[c.length-1]}}concat(c,f){for(const i of this.datanames)c[i]=c[i].concat(f[i]);if(c===this.data)this.count=c.token.length-1;}objectSort(c){let f=this.count;let i=this.structure[this.structure.length-1][1];let b=0;let e=0;let a=0;let g=0;let t=true;let X=0;let $=0;let n=0;const m=[];const W=i;const l=F.options.language==="json";const J=c.lexer[f]==="style"&&this.structure[this.structure.length-1][0]==="global";const v=c.lexer[f]==="style";const p=v===true?[";","separator"]:[",","separator"];const N=this.linesSpace;const V=this.count;const D=J===true?"global":this.structure[this.structure.length-1][0];function o(j,O){let x=j[0];let y=O[0];if(c.types[x]==="comment"){do{x=x+1;}while(x<V&&c.types[x]==="comment");if(c.token[x]===void 0){return 1}}if(c.types[y]==="comment"){do{y=y+1;}while(y<V&&c.types[y]==="comment");if(c.token[y]===void 0)return 1}if(v===true){if(c.token[x].indexOf("@import")===0||c.token[y].indexOf("@import")===0){return x<y?-1:1}if(c.types[x]!==c.types[y]){if(c.types[x]==="function")return 1;if(c.types[x]==="variable")return -1;if(c.types[x]==="selector")return 1;if(c.types[x]==="property"&&c.types[y]!=="variable")return -1;if(c.types[x]==="mixin"&&c.types[y]!=="property"&&c.types[y]!=="variable")return -1}}if(c.token[x].toLowerCase()>c.token[y].toLowerCase())return 1;return -1}const h=ie(null);h.begin=[];h.ender=[];h.lexer=[];h.lines=[];h.stack=[];h.token=[];h.types=[];g=f;do{if(c.begin[f]===i||J===true&&f<g&&c.token[f]==="}"&&c.begin[c.begin[f]]===-1){if(c.types[f].indexOf("template")>-1)return;if(c.token[f]===p[0]||v===true&&c.token[f]==="}"&&c.token[f+1]!==";"){t=true;X=f+1;}else if(v===true&&c.token[f-1]==="}"){t=true;X=f;}if(X===0&&c.types[0]==="comment"){do{X=X+1;}while(c.types[X]==="comment")}else if(c.types[X]==="comment"&&c.lines[X]<2){X=X+1;}if(t===true&&(c.token[f]===p[0]||v===true&&c.token[f-1]==="}")&&X<=g){if(v===true&&"};".indexOf(c.token[g])<0){g=g+1;}else if(v===false&&c.token[g]!==","){g=g+1;}m.push([X,g]);if(v===true&&c.token[X]==="}"){g=X;}else {g=X-1;}}}f=f-1;}while(f>i);if(m.length>0&&m[m.length-1][0]>f+1){b=m[m.length-1][0]-1;if(c.types[b]==="comment"&&c.lines[b]>1){do{b=b-1;}while(b>0&&c.types[b]==="comment");m[m.length-1][0]=b+1;}if(c.types[f+1]==="comment"&&f===-1){do{f=f+1;}while(c.types[f+1]==="comment")}m.push([f+1,b]);}if(m.length>1){if(l===true||v===true||c.token[f-1]==="="||c.token[f-1]===":"||c.token[f-1]==="("||c.token[f-1]==="["||c.token[f-1]===","||c.types[f-1]==="word"||f===0){m.sort(o);n=m.length;t=false;i=0;do{$=m[i][1];if(v===true){a=$;if(c.types[a]==="comment")a=a-1;if(c.token[a]==="}"){$=$+1;p[0]="}";p[1]="end";}else {p[0]=";";p[1]="separator";}}b=m[i][0];if(v===true&&c.types[$-1]!=="end"&&c.types[$]==="comment"&&c.types[$+1]!=="comment"&&i<n-1){$=$+1;}if(b<$){do{if(v===false&&i===n-1&&b===$-2&&c.token[b]===","&&c.lexer[b]==="script"&&c.types[b+1]==="comment"){e=e+1;}else {const j=ie(null);j.begin=c.begin[b];j.ender=c.ender[b];j.lexer=c.lexer[b];j.lines=c.lines[b];j.stack=c.stack[b];j.token=c.token[b];j.types=c.types[b];this.push(h,j,"");e=e+1;}if(c.token[b]===p[0]&&(v===true||c.begin[b]===c.begin[m[i][0]])){t=true;}else if(c.token[b]!==p[0]&&c.types[b]!=="comment"){t=false;}b=b+1;}while(b<$)}if(t===false&&h.token[h.token.length-1]!=="x;"&&(v===true||i<n-1)){b=h.types.length-1;if(h.types[b]==="comment"){do{b=b-1;}while(b>0&&h.types[b]==="comment")}b=b+1;this.splice({data:h,howmany:0,index:b,record:{begin:W,ender:this.count,lexer:h.lexer[b-1],lines:0,stack:D,token:p[0],types:p[1]}});e=e+1;}i=i+1;}while(i<n);this.splice({data:c,howmany:e,index:f+1});this.linesSpace=N;this.concat(c,h);}}}pop(c){const f=ie(null);f.begin=c.begin.pop();f.ender=c.ender.pop();f.lexer=c.lexer.pop();f.lines=c.lines.pop();f.stack=c.stack.pop();f.token=c.token.pop();f.types=c.types.pop();if(c===this.data)this.count=this.count-1;return f}push(c,f,i){const b=()=>{let e=this.count;const a=c.begin[e];if(c.lexer[e]==="style"&&F.options.style.sortProperties===true||c.lexer[e]==="script"&&(F.options.script.objectSort===true||F.options.json.objectSort===true)){return}do{if(c.begin[e]===a||c.begin[c.begin[e]]===a&&c.types[e].indexOf("attribute")>-1&&c.types[e].indexOf("attribute_end")<0){c.ender[e]=this.count;}else {e=c.begin[e];}e=e-1;}while(e>a);if(e>-1)c.ender[e]=this.count;};this.datanames.forEach(e=>c[e].push(f[e]));if(c===this.data){this.count=this.count+1;this.linesSpace=0;if(f.lexer!=="style"){if(i.replace(/(\{|\}|@|<|>|%|#|)/g,"")===""){i=f.types==="else"?"else":i=f.token;}}if(f.types==="start"||f.types.indexOf("_start")>0){this.structure.push([i,this.count]);}else if(f.types==="end"||f.types.indexOf("_end")>0){let e=0;if(this.structure.length>2&&(c.types[this.structure[this.structure.length-1][1]]==="else"||c.types[this.structure[this.structure.length-1][1]].indexOf("_else")>0)&&(c.types[this.structure[this.structure.length-2][1]]==="start"||c.types[this.structure[this.structure.length-2][1]].indexOf("_start")>0)&&(c.types[this.structure[this.structure.length-2][1]+1]==="else"||c.types[this.structure[this.structure.length-2][1]+1].indexOf("_else")>0)){this.structure.pop();c.begin[this.count]=this.structure[this.structure.length-1][1];c.stack[this.count]=this.structure[this.structure.length-1][0];c.ender[this.count-1]=this.count;e=c.ender[c.begin[this.count]+1];}b();if(e>0)c.ender[c.begin[this.count]+1]=e;this.structure.pop();}else if(f.types==="else"||f.types.indexOf("_else")>0){if(i==="")i="else";if(this.count>0&&(c.types[this.count-1]==="start"||c.types[this.count-1].indexOf("_start")>0)){this.structure.push([i,this.count]);}else {b();if(i===""){this.structure[this.structure.length-1]=["else",this.count];}else {this.structure[this.structure.length-1]=[i,this.count];}}}}}safeSort(c,f,i){if($e(c)===false)return c;if(f==="normal"){return De.call({array:c,recursive:i},c)}else if(f==="descend"){return ze.call({recursive:i},c)}return Be.call({recursive:i},c)}sortCorrection(c,f){let i=c;let b=-1;const e=this.data;const a=[];const g=this.structure.length<2?[-1]:[this.structure[this.structure.length-2][1]];do{if(i>0&&e.types[i].indexOf("attribute")>-1&&e.types[i].indexOf("end")<0&&e.types[i-1].indexOf("start")<0&&e.types[i-1].indexOf("attribute")<0&&e.lexer[i]==="markup"){g.push(i-1);}if(i>0&&e.types[i-1].indexOf("attribute")>-1&&e.types[i].indexOf("attribute")<0&&e.lexer[g[g.length-1]]==="markup"&&e.types[g[g.length-1]].indexOf("start")<0){g.pop();}if(e.begin[i]!==g[g.length-1]){if(g.length>0){e.begin[i]=g[g.length-1];}else {e.begin[i]=-1;}}if(e.types[i].indexOf("else")>-1){if(g.length>0){g[g.length-1]=i;}else {g.push(i);}}if(e.types[i].indexOf("end")>-1)g.pop();if(e.types[i].indexOf("start")>-1)g.push(i);i=i+1;}while(i<f);i=f;do{i=i-1;if(e.types[i].indexOf("end")>-1){a.push(i);b=b+1;}e.ender[i]=b>-1?a[b]:-1;if(e.types[i].indexOf("start")>-1){a.pop();b=b-1;}}while(i>c)}spacer(c){this.linesSpace=1;do{if(c.array[c.index]==="\n"){this.linesSpace=this.linesSpace+1;this.lineNumber=this.lineNumber+1;}if(/\s/.test(c.array[c.index+1])===false)break;c.index=c.index+1;}while(c.index<c.end);return c.index}splice(c){const f=[this.data.begin[this.count],this.data.token[this.count]];if(c.record!==void 0&&c.record.token!==""){for(const i of this.datanames){c.data[i].splice(c.index,c.howmany,c.record[i]);}if(c.data===this.data){this.count=this.count-c.howmany+1;if(f[0]!==this.data.begin[this.count]||f[1]!==this.data.token[this.count]){this.linesSpace=0;}}return}for(const i of this.datanames){c.data[i].splice(c.index,c.howmany);}if(c.data===this.data){this.count=this.count-c.howmany;this.linesSpace=0;}}wrapCommentBlock(c){let f=c.start;let i=0;let b=0;let e=0;let a=0;let g=[];let t="";let X="";let $=false;let n=false;let m=false;let W=false;let l="";let J=c.terminator.length-1;let v=c.terminator.charAt(J);let p=0;const{wrap:N,crlf:V,preserveComment:D}=F.options;const o=[];const h=[];const j=V===true?"\r\n":"\n";const O=fe=>`\\${fe}`;const x=/(\/|\\|\||\*|\[|\]|\{|\})/g;const y=/{%-?\s*|\s*-?%}/g;const I=new RegExp(`\\s*${c.terminator.replace(y,fe=>{if(fe.charCodeAt(0)===123)return "{%-?\\s*";return "\\s*-?%}"})}$`);const q=c.opening.replace(x,O);const P=new RegExp(`^(${q}\\s*@prettify-ignore-start)`);const E=new RegExp(`(${q}\\s*)`);const Q=L(c.opening[0],123)&&L(c.opening[1],37);function T(){if(/^\s+$/.test(g[i+1])||g[i+1]===""){do{i=i+1;}while(i<a&&(/^\s+$/.test(g[i+1])||g[i+1]===""))}if(i<a-1)h.push("");}do{o.push(c.chars[f]);if(c.chars[f]==="\n")this.lineNumber=this.lineNumber+1;if(c.chars[f]===v&&c.chars.slice(f-J,f+1).join("")===c.terminator)break;f=f+1;}while(f<c.end);l=o.join("");if(P.test(l)===true){let fe="\n";f=f+1;do{o.push(c.chars[f]);if(o.slice(o.length-20).join("")==="@prettify-ignore-end"){if(Q){const C=c.chars.indexOf("{",f);if(L(c.chars[C+1],37)){const ne=c.chars.slice(C,c.chars.indexOf("}",C+1)+1).join("");if(I.test(ne))c.terminator=ne;}}f=f+1;break}f=f+1;}while(f<c.end);i=f;J=c.opening.length-1;v=c.opening.charAt(J);do{if(c.opening==="/*"&&c.chars[i-1]==="/"&&(c.chars[i]==="*"||c.chars[i]==="/"))break;if(c.opening!=="/*"&&c.chars[i]===v&&c.chars.slice(i-J,i+1).join("")===c.opening)break;i=i-1;}while(i>c.start);if(c.opening==="/*"&&c.chars[i]==="*"){fe="*/";}else if(c.opening!=="/*"){fe=c.terminator;}J=fe.length-1;v=fe.charAt(J);if(fe!=="\n"||c.chars[f]!=="\n"){do{o.push(c.chars[f]);if(fe==="\n"&&c.chars[f+1]==="\n")break;if(c.chars[f]===v&&c.chars.slice(f-J,f+1).join("")===fe)break;f=f+1;}while(f<c.end)}if(c.chars[f]==="\n")f=f-1;l=o.join("").replace(/\s+$/,"");return [l,f]}if(D===true||N<1||f===c.end||l.length<=N&&l.indexOf("\n")<0||c.opening==="/*"&&l.indexOf("\n")>0&&l.replace("\n","").indexOf("\n")>0&&/\n(?!(\s*\*))/.test(l)===false){return [l,f]}i=c.start;if(i>0&&c.chars[i-1]!=="\n"&&/\s/.test(c.chars[i-1])){do{i=i-1;}while(i>0&&c.chars[i-1]!=="\n"&&/\s/.test(c.chars[i-1]))}t=c.chars.slice(i,c.start).join("");const se=new RegExp("\n"+t,"g");g=l.replace(/\r\n/g,"\n").replace(se,"\n").split("\n");a=g.length;g[0]=g[0].replace(E,"");g[a-1]=g[a-1].replace(I,"");if(a<2)g=g[0].split(" ");if(g[0]===""){g[0]=c.opening;}else {g.splice(0,0,c.opening);}a=g.length;i=0;do{X=i<a-1?g[i+1].replace(/^\s+/,""):"";if(/^\s+$/.test(g[i])===true||g[i]===""){T();}else if(g[i].slice(0,4)==="    "){h.push(g[i]);}else if(g[i].replace(/^\s+/,"").length>N&&g[i].replace(/^\s+/,"").indexOf(" ")>N){g[i]=g[i].replace(/^\s+/,"");b=g[i].indexOf(" ");h.push(g[i].slice(0,b));g[i]=g[i].slice(b+1);i=i-1;}else {g[i]=c.opening==="/*"&&g[i].indexOf("/*")!==0?`   ${g[i].replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}`:`${g[i].replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}`;p=i<1?N-(c.opening.length+1):N;b=g[i].length;e=g[i].replace(/^\s+/,"").indexOf(" ");if(b>p&&e>0&&e<p){b=p;do{b=b-1;if(/\s/.test(g[i].charAt(b))&&b<=N)break}while(b>0);if(g[i].slice(0,4)!=="    "&&/^\s*(\*|-)\s/.test(g[i])===true&&/^\s*(\*|-)\s/.test(g[i+1])===false){g.splice(i+1,0,"* ");}if(g[i].slice(0,4)!=="    "&&/^\s*\d+\.\s/.test(g[i])===true&&/^\s*\d+\.\s/.test(g[i+1])===false){g.splice(i+1,0,"1. ");}if(b<4){h.push(g[i]);W=true;}else if(i===a-1){h.push(g[i].slice(0,b));g[i]=g[i].slice(b+1);W=true;i=i-1;}else if(/^\s+$/.test(g[i+1])===true||g[i+1]===""){h.push(g[i].slice(0,b));g[i]=g[i].slice(b+1);$=true;i=i-1;}else if(g[i+1].slice(0,4)!=="    "&&/^\s*(\*|-)\s/.test(g[i+1])){h.push(g[i].slice(0,b));g[i]=g[i].slice(b+1);n=true;i=i-1;}else if(g[i+1].slice(0,4)!=="    "&&/^\s*\d+\.\s/.test(g[i+1])){h.push(g[i].slice(0,b));g[i]=g[i].slice(b+1);m=true;i=i-1;}else if(g[i+1].slice(0,4)==="    "){h.push(g[i].slice(0,b));g[i]=g[i].slice(b+1);W=true;i=i-1;}else if(b+X.length>N&&X.indexOf(" ")<0){h.push(g[i].slice(0,b));g[i]=g[i].slice(b+1);W=true;i=i-1;}else if(g[i].replace(/^\s+/,"").indexOf(" ")<N){g[i+1]=g[i].length>N?g[i].slice(b+1)+j+g[i+1]:`${g[i].slice(b+1)} ${g[i+1]}`;}if($===false&&n===false&&m===false&&W===false){g[i]=g[i].slice(0,b);}}else if(g[i+1]!==void 0&&(g[i].length+X.indexOf(" ")>N&&X.indexOf(" ")>0||g[i].length+X.length>N&&X.indexOf(" ")<0)){h.push(g[i]);i=i+1;}else if(g[i+1]!==void 0&&/^\s+$/.test(g[i+1])===false&&g[i+1]!==""&&g[i+1].slice(0,4)!=="    "&&/^\s*(\*|-|(\d+\.))\s/.test(g[i+1])===false){g[i+1]=`${g[i]} ${g[i+1]}`;$=true;}if(W===false&&n===false&&m===false){if($===true){$=false;}else if(/^\s*(\*|-|(\d+\.))\s*$/.test(g[i])===false){if(i<a-1&&g[i+1]!==""&&/^\s+$/.test(g[i])===false&&g[i+1].slice(0,4)!=="    "&&/^\s*(\*|-|(\d+\.))\s/.test(g[i+1])===false){g[i]=`${g[i]} ${g[i+1]}`;g.splice(i+1,1);a=a-1;i=i-1;}else {if(c.opening==="/*"&&g[i].indexOf("/*")!==0){h.push(`   ${g[i].replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}`);}else {h.push(`${g[i].replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}`);}}}}W=false;n=false;m=false;}i=i+1;}while(i<a);if(h.length>0){if(h[h.length-1].length>N-(c.terminator.length+1)){h.push(c.terminator);}else {h[h.length-1]=`${h[h.length-1]} ${c.terminator}`;}l=h.join(j);}else {g[g.length-1]=g[g.length-1]+c.terminator;l=g.join(j);}return [l,f]}wrapCommentLine(c){let f=c.start;let i=0;let b="";let e=[];const{wrap:a,preserveComment:g}=F.options;function t(){let $="";do{i=i+1;if(c.chars[i+1]==="\n")return}while(i<c.end&&/\s/.test(c.chars[i])===true);if(c.chars[i]+c.chars[i+1]==="//"){e=[];do{e.push(c.chars[i]);i=i+1;}while(i<c.end&&c.chars[i]!=="\n");$=e.join("");if(/^\/\/ (\*|-|(\d+\.))/.test($)===false&&$.slice(0,6)!=="//    "&&/^\/\/\s*$/.test($)===false){b=`${b} ${$.replace(/(^\/\/\s*)/,"").replace(/\s+$/,"")}`;f=i-1;t();}}}const X=()=>{const $=[];const n=ie(null);n.ender=-1;n.types="comment";n.lexer=c.lexer;n.lines=this.linesSpace;if(this.count>-1){n.begin=this.structure[this.structure.length-1][1];n.stack=this.structure[this.structure.length-1][0];n.token=this.data.token[this.count];}else {n.begin=-1;n.stack="global";n.token="";}let m=0;let W=0;b=b.replace(/\s+/g," ").replace(/\s+$/,"");W=b.length;if(a>W)return;do{m=a;if(b.charAt(m)!==" "){do{m=m-1;}while(m>0&&b.charAt(m)!==" ");if(m<3){m=a;do{m=m+1;}while(m<W-1&&b.charAt(m)!==" ")}}$.push(b.slice(0,m));b=`// ${b.slice(m).replace(/^\s+/,"")}`;W=b.length;}while(a<W);m=0;W=$.length;do{n.token=$[m];this.push(this.data,n,"");n.lines=2;this.linesSpace=2;m=m+1;}while(m<W)};do{e.push(c.chars[f]);f=f+1;}while(f<c.end&&c.chars[f]!=="\n");if(f===c.end){c.chars.push("\n");}else {f=f-1;}b=e.join("").replace(/\s+$/,"");if(/^(\/\/\s*@prettify-ignore-start\b)/.test(b)===true){let $="\n";f=f+1;do{e.push(c.chars[f]);f=f+1;}while(f<c.end&&(c.chars[f-1]!=="d"||c.chars[f-1]==="d"&&e.slice(e.length-20).join("")!=="@prettify-ignore-end"));i=f;do{}while(i>c.start&&c.chars[i-1]==="/"&&(c.chars[i]==="*"||c.chars[i]==="/"));if(c.chars[i]==="*")$="*/";if($!=="\n"||c.chars[f]!=="\n"){do{e.push(c.chars[f]);if($==="\n"&&c.chars[f+1]==="\n")break;f=f+1;}while(f<c.end&&($==="\n"||$==="*/"&&(c.chars[f-1]!=="*"||c.chars[f]!=="/")))}if(c.chars[f]==="\n")f=f-1;b=e.join("").replace(/\s+$/,"");return [b,f]}if(b==="//"||b.slice(0,6)==="//    "||g===true){return [b,f]}b=b.replace(/(\/\/\s*)/,"// ");if(a<1||f===c.end-1&&this.data.begin[this.count]<1)return [b,f];i=f+1;t();X();return [b,f]}};F.lexers.style=function s(c){const{options:f}=F;let i=0;let b="";let e="";const a=r.data;const g=c.split("");const t=c.length;const X=[];const $=[];function n(D){const o=ie(null);o.begin=r.structure[r.structure.length-1][1];o.ender=-1;o.lexer="style";o.lines=r.linesSpace;o.stack=r.structure[r.structure.length-1][0];o.token=e;o.types=b;r.push(a,o,D);}const m=function D(o){const h=o;do{o=o-1;}while(g[o]==="\\"&&o>0);if((h-o)%2===1){return true}return false};function W(D){const o=D.replace(/\s*!important/," !important").split("");const h=[];const j=/-?transition$/.test(a.token[r.count-2]);const O=function ye(B){return B};const x=function ye(B){B=B.replace(/\s*/g,"");if(/\/\d/.test(B)===true&&D.indexOf("url(")===0)return B;return ` ${B.charAt(0)} ${B.charAt(1)}`};const y=function ye(B){if(f.style.noLeadZero===true){const he=function xe(Ae){return Ae.replace(/0+/,"")};return B.replace(/^-?\D0+(\.|\d)/,he)}if(/0*\./.test(B)===true)return B.replace(/0*\./,"0.");if(/0+/.test(/\d+/.exec(B)[0])===true){if(/^\D*0+\D*$/.test(B)===true)return B.replace(/0+/,"0");return B.replace(/\d+/.exec(B)[0],/\d+/.exec(B)[0].replace(/^0+/,""))}return B};const I=function ye(B){return B.replace(",",", ")};const q=function ye(B){return `${B} `};const P=function ye(){const B=C-1;let he=B;if(B<1){return true}do{he=he-1;}while(he>0&&o[he]==="\\");if((B-he)%2===1){return true}return false};const E=/^-?0+\.\d+[a-z]/;const Q=/^-?\.\d+[a-z]/;const T=/(\s|\(|,)-?0+\.?\d+([a-z]|\)|,|\s)/g;const se=/(\s|\(|,)-?\.?\d+([a-z]|\)|,|\s)/g;const fe="%|cap|ch|cm|deg|dpcm|dpi|dppx|em|ex|fr|grad|Hz|ic|in|kHz|lh|mm|ms|mS|pc|pt|px|Q|rad|rem|rlh|s|turn|vb|vh|vi|vmax|vmin|vw";let C=0;let ne=0;let G="";let M=o.length;let Y=[];if(C<M){do{Y.push(o[C]);if(o[C-1]!=="\\"||P()===false){if(G===""){if(o[C]==='"'){G='"';ne=ne+1;}else if(o[C]==="'"){G="'";ne=ne+1;}else if(o[C]==="("){G=")";ne=ne+1;}else if(o[C]==="["){G="]";ne=ne+1;}}else if(o[C]==="("&&G===")"||o[C]==="["&&G==="]"){ne=ne+1;}else if(o[C]===G){ne=ne-1;if(ne===0){G="";}}}if(G===""&&o[C]===" "){Y.pop();h.push(O(Y.join("")));Y=[];}C=C+1;}while(C<M)}h.push(O(Y.join("")));M=h.length;C=0;if(C<M){do{if(f.style.noLeadZero===true&&E.test(h[C])===true){h[C]=h[C].replace(/0+\./,".");}else if((f.style.noLeadZero===false||f.style.noLeadZero===void 0)&&Q.test(h[C])===true){h[C]=h[C].replace(".","0.");}else if(T.test(h[C])===true||se.test(h[C])===true){h[C]=h[C].replace(T,y).replace(se,y);}else if(/^(0+([a-z]{2,3}|%))$/.test(h[C])===true&&j===false){h[C]="0";}else if(/^(0+)/.test(h[C])===true){h[C]=h[C].replace(/0+/,"0");if(/\d/.test(h[C].charAt(1))===true){h[C]=h[C].substr(1);}}else if(/^url\((?!('|"))/.test(h[C])===true&&h[C].charAt(h[C].length-1)===")"){G=h[C].charAt(h[C].indexOf("url(")+4);if(G!=="@"&&G!=="{"&&G!=="<"){if(f.style.quoteConvert==="double"){h[C]=h[C].replace(/url\(/,'url("').replace(/\)$/,'")');}else {h[C]=h[C].replace(/url\(/,"url('").replace(/\)$/,"')");}}}if(/^(\+|-)?\d+(\.\d+)?(e-?\d+)?\D+$/.test(h[C])===true){if(fe.indexOf(h[C].replace(/(\+|-)?\d+(\.\d+)?(e-?\d+)?/,""))<0){h[C]=h[C].replace(/(\+|-)?\d+(\.\d+)?(e-?\d+)?/,q);}}if(/^\w+\(/.test(h[C])===true&&h[C].charAt(h[C].length-1)===")"&&(h[C].indexOf("url(")!==0||h[C].indexOf("url(")===0&&h[C].indexOf(" ")>0)){h[C]=h[C].replace(/,\S/g,I);}C=C+1;}while(C<M)}G=h.join(" ");return G.charAt(0)+G.slice(1).replace(/\s*(\/|\+|\*)\s*(\d|\$)/,x)}const l=function D(){let o=i;let h=0;const j=[];let O="";let x=null;const y=[];const I=f.style.quoteConvert===void 0?"none":f.style.quoteConvert;const q=function P(){j.push(g[o]);if(/\s/.test(g[o+1])===true){do{o=o+1;}while(o<t&&/\s/.test(g[o+1])===true)}};if(o<t){do{if(g[o]==='"'||g[o]==="'"){if(x===null){x=false;}if(y[y.length-1]===g[o]&&(g[o-1]!=="\\"||m(o-1)===false)){y.pop();if(I==="double"){g[o]='"';}else if(I==="single"){g[o]="'";}}else if(y[y.length-1]!=='"'&&y[y.length-1]!=="'"&&(g[o-1]!=="\\"||m(o-1)===false)){y.push(g[o]);if(I==="double"){g[o]='"';}else if(I==="single"){g[o]="'";}}else if(g[o-1]==="\\"&&I!=="none"){if(m(o-1)===true){if(I==="double"&&g[o]==="'"){j.pop();}else if(I==="single"&&g[o]==='"'){j.pop();}}}else if(I==="double"&&g[o]==='"'){g[o]='\\"';}else if(I==="single"&&g[o]==="'"){g[o]="\\'";}j.push(g[o]);}else if(g[o-1]!=="\\"||m(o-1)===false){if(g[o]==="("){if(x===null){x=true;}y.push(")");q();}else if(g[o]==="["){x=false;y.push("]");q();}else if((g[o]==="#"||g[o]==="@")&&g[o+1]==="{"){x=false;j.push(g[o]);o=o+1;y.push("}");q();}else if(g[o]===y[y.length-1]){j.push(g[o]);y.pop();}else {j.push(g[o]);}}else {j.push(g[o]);}if(r.structure[r.structure.length-1][0]==="map"&&y.length===0&&(g[o+1]===","||g[o+1]===")")){if(g[o+1]===")"&&a.token[r.count]==="("){r.pop(a);r.structure.pop();j.splice(0,0,"(");}else {break}}if(g[o+1]===":"){h=o;if(/\s/.test(g[h])===true){do{h=h-1;}while(/\s/.test(g[h])===true)}O=g.slice(h-6,h+1).join("");if(O.indexOf("filter")===O.length-6||O.indexOf("progid")===O.length-6){O="filter";}}if(y.length===0){if(g[o+1]===";"&&m(o+1)===true||g[o+1]===":"&&g[o]!==":"&&g[o+2]!==":"&&O!=="filter"&&O!=="progid"||g[o+1]==="}"||g[o+1]==="{"||g[o+1]==="/"&&(g[o+2]==="*"||g[o+2]==="/")){h=j.length-1;if(/\s/.test(j[h])===true){do{h=h-1;o=o-1;j.pop();}while(/\s/.test(j[h])===true)}break}if(g[o+1]===","){break}}o=o+1;}while(o<t)}i=o;if(r.structure[r.structure.length-1][0]==="map"&&j[0]==="("){X[X.length-1]=X[X.length-1]-1;}e=j.join("").replace(/\s+/g," ").replace(/^\s/,"").replace(/\s$/,"");if(x===true){e=e.replace(/\s+\(/g,"(").replace(/\s+\)/g,")").replace(/,\(/g,", (");}if(r.count>-1&&a.token[r.count].indexOf("extend(")===0){b="pseudo";}else if(x===true&&/\d/.test(e.charAt(0))===false&&/^rgba?\(/.test(e)===false&&e.indexOf("url(")!==0&&(e.indexOf(" ")<0||e.indexOf(" ")>e.indexOf("("))&&e.charAt(e.length-1)===")"){if(a.token[r.count]===":"){b="value";}else {e=e.replace(/,\u0020?/g,", ");b="function";}e=W(e);}else if(r.count>-1&&`"'`.indexOf(a.token[r.count].charAt(0))>-1&&a.types[r.count]==="variable"){b="item";}else if(j[0]==="@"||j[0]==="$"){if(a.types[r.count]==="colon"&&f.language==="css"&&(a.types[r.count-1]==="property"||a.types[r.count-1]==="variable")){b="value";}else if(r.count>-1){b="item";O=a.token[r.count];o=O.indexOf("(");if(O.charAt(O.length-1)===")"&&o>0){O=O.slice(o+1,O.length-1);a.token[r.count]=a.token[r.count].slice(0,o+1)+W(O)+")";}}e=W(e);}else {b="item";}n("");};const J=function D(o){let h=r.count;let j=0;let O="";const x=[];const y=function q(){if(a.types[h]==="comment"||a.types[h]==="ignore"){do{h=h-1;x.push(a.token[h]);}while(h>0&&a.lexer[h]==="style"&&(a.types[h]==="comment"||a.types[h]==="ignore"))}j=h-1;if(a.types[j]==="comment"||a.types[j]==="ignore"){do{j=j-1;}while(j>0&&a.lexer[h]==="style"&&(a.types[j]==="comment"||a.types[j]==="ignore"))}O=a.token[h].charAt(0);};const I=function q(P){let E=P;const Q=a.begin[E];a.token[P]=a.token[P].replace(/\s*&/," &").replace(/(\s*>\s*)/g," > ").replace(/:\s+/g,": ").replace(/^(\s+)/,"").replace(/(\s+)$/,"").replace(/\s+::\s+/,"::");if(a.token[E-1]===","||a.token[E-1]===":"||a.types[E-1]==="comment"){do{E=E-1;if(a.begin[E]===Q){if(a.token[E]===";"){break}if(a.token[E]!==","&&a.types[E]!=="comment"){a.types[E]="selector";}if(a.token[E]===":"){a.token[E-1]=`${a.token[E-1]}:${a.token[E+1]}`;r.splice({data:a,howmany:2,index:E});}}else {break}}while(E>0)}E=r.count;if(f.style.sortSelectors===true&&a.token[E-1]===","){const T=[a.token[E]];do{E=E-1;if(a.types[E]==="comment"||a.types[E]==="ignore"){do{E=E-1;}while(E>0&&(a.types[E]==="comment"||a.types[E]==="ignore"))}if(a.token[E]===","){E=E-1;}T.push(a.token[E]);}while(E>0&&(a.token[E-1]===","||a.types[E-1]==="selector"||a.types[E-1]==="comment"||a.types[E-1]==="ignore"));T.sort();E=r.count;a.token[E]=T.pop();do{E=E-1;if(a.types[E]==="comment"||a.types[E]==="ignore"){do{E=E-1;}while(E>0&&(a.types[E]==="comment"||a.types[E]==="ignore"))}if(a.token[E]===","){E=E-1;}a.token[E]=T.pop();}while(E>0&&(a.token[E-1]===","||a.token[E-1]==="selector"||a.types[E-1]==="comment"||a.types[E-1]==="ignore"))}h=r.count;y();};y();if(o==="start"&&(a.types[h]==="value"||a.types[h]==="variable")){a.types[h]="item";}if(a.lexer[r.count-1]!=="style"||j<0){if(o==="colon"){if(O==="$"||O==="@"){a.types[h]="variable";}else {a.types[h]="property";}}else if(a.lexer[h]==="style"){a.types[h]="selector";I(h);}}else if(o==="start"&&a.types[h]==="function"&&a.lexer[h]==="style"){a.types[h]="selector";I(h);}else if(a.types[h]==="item"&&a.lexer[h]==="style"){if(o==="start"){I(h);a.types[h]="selector";if(a.token[h]===":"){a.types[j]="selector";}if(a.token[h].indexOf("=\u201C")>0){r.error=`Quote looking character (\u201C, \\201c) used instead of actual quotes on line number ${r.lineNumber}`;}else if(a.token[h].indexOf("=\u201D")>0){r.error=`Quote looking character (\u201D, \\201d) used instead of actual quotes on line number ${r.lineNumber}`;}}else if(o==="end"){if(O==="$"||O==="@"){a.types[h]="variable";}else {a.types[h]="value";}a.token[h]=W(a.token[h]);}else if(o==="separator"){if(a.types[j]==="colon"||a.token[j]===","||a.token[j]==="{"){if(g[i]!==";"&&(a.types[j]==="selector"||a.token[j]==="{")){a.types[h]="selector";I(h);}else if(a.token[h].charAt(0)==="$"||a.token[h].charAt(0)==="@"){a.types[h]="variable";}else {a.types[h]="value";}a.token[h]=W(a.token[h]);if(a.token[h].charAt(0)==="\u201C"){r.error=`Quote looking character (\u201C, \\201c) used instead of actual quotes on line number ${r.lineNumber}`;}else if(a.token[h].charAt(0)==="\u201D"){r.error=`Quote looking character (\u201D, \\201d) used instead of actual quotes on line number ${r.lineNumber}`;}}else {if(O==="$"||O==="@"){a.types[h]="variable";}else if(a.types[j]==="value"||a.types[j]==="variable"){a.token[j]=a.token[j]+a.token[h];r.pop(a);}else {a.types[h]="value";}}}else if(o==="colon"){if(O==="$"||O==="@"){a.types[h]="variable";}else {a.types[h]="property";}}else if(a.token[j].charAt(0)==="@"&&(a.types[j-2]!=="variable"&&a.types[j-2]!=="property"||a.types[j-1]==="separator")){a.types[j]="variable";b="variable";a.token[j]=W(a.token[j]);}}};const v=function D(){let o=r.count;do{o=o-1;}while(o>0&&a.types[o]==="comment");if(a.token[o]===";"){return}r.splice({data:a,howmany:0,index:o+1,record:{begin:r.structure[r.structure.length-1][1],ender:-1,lexer:"style",lines:r.linesSpace,stack:r.structure[r.structure.length-1][0],token:";",types:"separator"}});};const p=function D(o,h){let j="";let O="";let x=o.length;let y=0;const I=[];const q=function P(E){const Q=a.types[r.count-1];if(b==="item"){if(Q==="colon"){a.types[r.count]="value";}else {J(Q);}}b=E;if(b.indexOf("start")>-1||b.indexOf("else")>-1){n(e);}else {n("");}};$[$.length-1]=true;if(i<t){do{I.push(g[i]);if(j===""){if(g[i]==='"'){j='"';}else if(g[i]==="'"){j="'";}else if(g[i]==="/"){if(g[i+1]==="/"){j="/";}else if(g[i+1]==="*"){j="*";}}else if(g[i+1]===h.charAt(0)){do{y=y+1;i=i+1;I.push(g[i]);}while(i<t&&y<h.length&&g[i+1]===h.charAt(y));if(y===h.length){j=I.join("");if(/\s/.test(j.charAt(x))===true){do{x=x+1;}while(/\s/.test(j.charAt(x))===true)}y=x;do{y=y+1;}while(y<h.length&&/\s/.test(j.charAt(y))===false);if(y===j.length){y=y-h.length;}if(o==="{%"){if(j.indexOf("{%-")===0){j=j.replace(/^(\{%-\s*)/,"{%- ").replace(/(\s*-%\})$/," -%}").replace(/(\s*%\})$/," %}");O=j.slice(4);}else {j=j.replace(/^(\{%\s*)/,"{% ").replace(/(\s*%\})$/," %}").replace(/(\s*-%\})$/," -%}");O=j.slice(3);}}if(o==="{{"){j=j.replace(/^(\{\{\s*)/,"{{ ").replace(/^(\{\{-\s*)/,"{{- ").replace(/(\s*-\}\})$/," -}}").replace(/(\s*\}\})$/," }}");}if(b==="item"&&a.types[r.count-1]==="colon"&&(a.types[r.count-2]==="property"||a.types[r.count-2]==="variable")){b="value";a.types[r.count]="value";if(Number.isNaN(Number(a.token[r.count]))===true&&a.token[r.count].charAt(a.token[r.count].length-1)!==")"){a.token[r.count]=a.token[r.count]+j;}else {a.token[r.count]=a.token[r.count]+" "+j;}return}e=j;if(o==="{%"){const P=["autoescape","block","capture","case","comment","embed","filter","for","form","if","macro","paginate","raw","sandbox","spaceless","tablerow","unless","verbatim"];let E=P.length-1;O=O.slice(0,O.indexOf(" "));if(O.indexOf("(")>0){O=O.slice(0,O.indexOf("("));}if(O==="else"||O==="elseif"||O==="when"||O==="elsif"){q("template_else");return}E=P.length-1;if(E>-1){do{if(O===P[E]){q("template_start");return}if(O==="end"+P[E]){q("template_end");return}E=E-1;}while(E>-1)}}else if(o==="{{"){let P=j.slice(2);const E=P.length;let Q=0;do{Q=Q+1;}while(Q<E&&/\s/.test(P.charAt(Q))===false&&P.charAt(x)!=="(");P=P.slice(0,Q);if(P.charAt(P.length-2)==="}"){P=P.slice(0,P.length-2);}if(P==="end"){q("template_end");return}if(P==="block"||P==="define"||P==="form"||P==="if"||P==="range"||P==="with"){q("template_start");return}}q("template");return}y=0;}}else if(j===g[i]){if(j==='"'||j==="'"){j="";}else if(j==="/"&&(g[i]==="\r"||g[i]==="\n")){j="";}else if(j==="*"&&g[i+1]==="/"){j="";}}i=i+1;}while(i<t)}};const N=function D(o){const h=o===true?r.wrapCommentLine({chars:g,end:t,lexer:"style",opening:"//",start:i,terminator:"\n"}):r.wrapCommentBlock({chars:g,end:t,lexer:"style",opening:"/*",start:i,terminator:"*/"});e=h[0];b=/^(\/\*\s*parse-ignore-start)/.test(e)===true?"ignore":"comment";n("");i=h[1];};const V=function D(){const o=r.linesSpace;const h={data:{margin:["","","","",false],padding:["","","","",false]},last:{margin:0,padding:0},removes:[]};const j=r.structure[r.structure.length-1][1];const O=function q(P){if(a.token[y-2]===P){const E=a.token[y].replace(/\s*!important\s*/g,"").split(" ");const Q=E.length;if(a.token[y].indexOf("!important")>-1){h.data[P[4]]=true;}if(Q>3){if(h.data[P][0]===""){h.data[P][0]=E[0];}if(h.data[P][1]===""){h.data[P][1]=E[1];}if(h.data[P][2]===""){h.data[P][2]=E[2];}if(h.data[P][3]===""){h.data[P][3]=E[3];}}else if(Q>2){if(h.data[P][0]===""){h.data[P][0]=E[0];}if(h.data[P][1]===""){h.data[P][1]=E[1];}if(h.data[P][2]===""){h.data[P][2]=E[2];}if(h.data[P][3]===""){h.data[P][3]=E[1];}}else if(Q>1){if(h.data[P][0]===""){h.data[P][0]=E[0];}if(h.data[P][1]===""){h.data[P][1]=E[1];}if(h.data[P][2]===""){h.data[P][2]=E[0];}if(h.data[P][3]===""){h.data[P][3]=E[1];}}else {if(h.data[P][0]===""){h.data[P][0]=E[0];}if(h.data[P][1]===""){h.data[P][1]=E[0];}if(h.data[P][2]===""){h.data[P][2]=E[0];}if(h.data[P][3]===""){h.data[P][3]=E[0];}}}else if(a.token[y-2]===`${P}-bottom`){if(h.data[P][2]==="")h.data[P][2]=a.token[y];}else if(a.token[y-2]===`${P}-left`){if(h.data[P][3]==="")h.data[P][3]=a.token[y];}else if(a.token[y-2]===`${P}-right`){if(h.data[P][1]==="")h.data[P][1]=a.token[y];}else if(a.token[y-2]===`${P}-top`){if(h.data[P][0]==="")h.data[P][0]=a.token[y];}else {return}h.removes.push([y,P]);h.last[P]=y;};const x=function q(){let P=0;let E="";const Q=/^(0+([a-z]+|%))/;const T=h.removes.length;const se=h.data.margin[0]!==""&&h.data.margin[1]!==""&&h.data.margin[2]!==""&&h.data.margin[3]!=="";const fe=h.data.padding[0]!==""&&h.data.padding[1]!==""&&h.data.padding[2]!==""&&h.data.padding[3]!=="";const C=function ne(G){if(Q.test(h.data[G][0])===true)h.data[G][0]="0";if(Q.test(h.data[G][1])===true)h.data[G][1]="0";if(Q.test(h.data[G][2])===true)h.data[G][2]="0";if(Q.test(h.data[G][3])===true)h.data[G][3]="0";if(h.data[G][0]===h.data[G][1]&&h.data[G][0]===h.data[G][2]&&h.data[G][0]===h.data[G][3]){E=h.data[G][0];}else if(h.data[G][0]===h.data[G][2]&&h.data[G][1]===h.data[G][3]&&h.data[G][0]!==h.data[G][1]){E=`${h.data[G][0]} ${h.data[G][1]}`;}else if(h.data[G][1]===h.data[G][3]&&h.data[G][0]!==h.data[G][2]){E=`${h.data[G][0]} ${h.data[G][1]} ${h.data[G][2]}`;}else {E=`${h.data[G][0]} ${h.data[G][1]} ${h.data[G][2]} ${h.data[G][3]}`;}if(h.data[G[4]]===true)E=`${E.replace(" !important","")} !important`;if(h.last[G]>r.count){P=j<1?1:j+1;do{if(a.begin[P]===j&&a.types[P]==="value"&&a.token[P-2].indexOf(G)===0){h.last[G]=P;break}P=P+1;}while(P<r.count)}a.token[h.last[G]]=E;a.token[h.last[G]-2]=G;};if(T>1&&(se===true||fe===true)){do{if(h.removes[P][0]!==h.last.margin&&h.removes[P][0]!==h.last.padding&&(se===true&&h.removes[P][1]==="margin"||fe===true&&h.removes[P][1]==="padding")){r.splice({data:a,howmany:a.types[h.removes[P][0]+1]==="separator"?4:3,index:h.removes[P][0]-2});}P=P+1;}while(P<T-1)}if(se===true)C("margin");if(fe===true)C("padding");if(I===true){if(j<0){r.error="Brace mismatch. There appears to be more closing braces than starting braces.";}else {r.sortCorrection(j,r.count+1);}}};let y=r.count;let I=false;do{y=y-1;if(a.begin[y]===j){if(a.types[y]==="value"&&a.types[y-2]==="property"){if(a.token[y-2].indexOf("margin")===0){O("margin");}else if(a.token[y-2].indexOf("padding")===0){O("padding");}}}else {I=true;y=a.begin[y];}}while(y>j);x();r.linesSpace=o;};do{if(/\s/.test(g[i])===true){i=r.spacer({array:g,end:t,index:i});}else if(g[i]==="/"&&g[i+1]==="*"){N(false);}else if(g[i]==="/"&&g[i+1]==="/"){N(true);}else if(g[i]==="{"&&g[i+1]==="%"){p("{%","%}");}else if(g[i]==="{"&&g[i+1]==="{"){p("{{","}}");}else if(g[i]==="{"||g[i]==="("&&a.token[r.count]===":"&&a.types[r.count-1]==="variable"){J("start");b="start";e=g[i];if(g[i]==="("){n("map");X.push(0);}else if(a.types[r.count]==="selector"||a.types[r.count]==="variable"){n(a.token[r.count]);}else if(a.types[r.count]==="colon"){n(a.token[r.count-1]);}else {n("block");}$.push(false);}else if(g[i]==="}"||g[i]===")"&&r.structure[r.structure.length-1][0]==="map"&&X[X.length-1]===0){if(g[i]==="}"&&a.types[r.count]==="item"&&a.token[r.count-1]==="{"&&a.token[r.count-2]!==void 0&&a.token[r.count-2].charAt(a.token[r.count-2].length-1)==="@"){a.token[r.count-2]=a.token[r.count-2]+"{"+a.token[r.count]+"}";r.pop(a);r.pop(a);r.structure.pop();}else {if(g[i]===")")X.pop();J("end");if(g[i]==="}"&&a.token[r.count]!==";"){if(a.types[r.count]==="value"||a.types[r.count]==="function"||a.types[r.count]==="variable"&&(a.token[r.count-1]===":"||a.token[r.count-1]===";")){if(f.style.correct===true){e=";";}else {e="x;";}b="separator";n("");}else if(a.types[r.count]==="comment"){v();}}b="end";$.pop();e=g[i];b="end";if(g[i]==="}")V();if(f.style.sortProperties===true&&g[i]==="}")r.objectSort(a);n("");}}else if(g[i]===";"||g[i]===","){if(a.types[r.count-1]==="selector"||a.token[r.count-1]==="}"&&a.types[r.count]!=="function"){J("start");}else {J("separator");}if(a.types[r.count]!=="separator"&&m(i)===true){e=g[i];b="separator";n("");}}else if(g[i]===":"&&a.types[r.count]!=="end"){J("colon");e=":";b="colon";n("");}else {if(r.structure[r.structure.length-1][0]==="map"&&g[i]==="("){X[X.length-1]=X[X.length-1]+1;}l();}i=i+1;}while(i<t);if(f.style.sortProperties===true)r.objectSort(a);return a};F.lexers.script=function s(c){const{options:f}=F;if(f.language==="json")f.script.quoteConvert="double";let i=0;let b="";let e="";let a=[];let g=0;let t=-1;let X=-1;let $=[];let n;let m;let W;const l=r.data;const J=r.references;const v=c.length;const p=c.split("");const N=[];const V=[];const D=[];const o=[0,""];const h=[false];const j=["autoescape","block","capture","case","comment","embed","filter","for","form","if","macro","paginate","raw","sandbox","spaceless","tablerow","unless","verbatim"];const O=ie(null);O.count=[];O.index=[];O.len=-1;O.word=[];function x(d){let u=0;const S=C(1,false);const w=r.structure.length===0?"":r.structure[r.structure.length-1][0];const k=ie(null);k.begin=l.begin[r.count];k.ender=l.begin[r.count];k.lexer=l.lexer[r.count];k.lines=l.lines[r.count];k.stack=l.stack[r.count];k.token=l.token[r.count];k.types=l.types[r.count];if(/^(\/(\/|\*)\s*@prettify-ignore-start)/.test(b))return;if(e==="start"||e==="type_start")return;if(f.language==="json")return;if(k.token===";"||k.token===","||k.stack==="class"||k.stack==="map"||k.stack==="attribute"||l.types[k.begin-1]==="generic"||S==="{"||w==="initializer"){return}if(k.token==="}"&&l.stack[k.begin-1]==="global"&&l.types[k.begin-1]!=="operator"&&k.stack===l.stack[r.count-1]){return}if(k.stack==="array"&&k.token!=="]")return;if(l.token[l.begin[r.count]]==="{"&&k.stack==="data_type")return;if(k.types!==void 0&&k.types.indexOf("template")>-1&&k.types.indexOf("template_string")<0){return}if(S===";"&&d===false)return;if(l.lexer[r.count-1]!=="script"&&(i<v&&v===F.source.length-1||v<F.source.length-1)){return}if(k.token==="}"&&(k.stack==="function"||k.stack==="if"||k.stack==="else"||k.stack==="for"||k.stack==="do"||k.stack==="while"||k.stack==="switch"||k.stack==="class"||k.stack==="try"||k.stack==="catch"||k.stack==="finally"||k.stack==="block")){if(k.stack==="function"&&(l.stack[k.begin-1]==="data_type"||l.types[k.begin-1]==="type")){u=k.begin;do{u=u-1;}while(u>0&&l.token[u]!==")"&&l.stack[u]!=="arguments");u=l.begin[u];}else {u=l.begin[k.begin-1];}if(l.token[u]==="("){u=u-1;if(l.token[u-1]==="function")u=u-1;if(l.stack[u-1]==="object"||l.stack[u-1]==="switch")return;if(l.token[u-1]!=="="&&l.token[u-1]!=="return"&&l.token[u-1]!==":"){return}}else {return}}if(k.types==="comment"||w==="method"||w==="paren"||w==="expression"||w==="array"||w==="object"||w==="switch"&&k.stack!=="method"&&l.token[l.begin[r.count]]==="("&&l.token[l.begin[r.count]-1]!=="return"&&l.types[l.begin[r.count]-1]!=="operator"){return}if(l.stack[r.count]==="expression"&&(l.token[l.begin[r.count]-1]!=="while"||l.token[l.begin[r.count]-1]==="while"&&l.stack[l.begin[r.count]-2]!=="do")){return}if(S!==""&&"=<>+*?|^:&%~,.()]".indexOf(S)>-1&&d===false)return;if(k.types==="comment"){u=r.count;do{u=u-1;}while(u>0&&l.types[u]==="comment");if(u<1)return;k.token=l.token[u];k.types=l.types[u];k.stack=l.stack[u];}if(k.token===void 0||k.types==="start"||k.types==="separator"||k.types==="operator"&&k.token!=="++"&&k.token!=="--"||k.token==="x}"||k.token==="var"||k.token==="let"||k.token==="const"||k.token==="else"||k.token.indexOf("#!/")===0||k.token==="instanceof"){return}if(k.stack==="method"&&(l.token[k.begin-1]==="function"||l.token[k.begin-2]==="function")){return}if(f.script.variableList==="list")O.index[O.len]=r.count;b=f.script.correct===true?";":"x;";e="separator";u=r.linesSpace;r.linesSpace=0;Y("");r.linesSpace=u;P();}function y(){let d=r.count;do{d=d-1;}while(d>-1&&l.token[d]==="x}");if(l.stack[d]==="else")return Y("");d=d+1;r.splice({data:l,howmany:0,index:d,record:{begin:l.begin[d],ender:-1,lexer:"script",lines:r.linesSpace,stack:l.stack[d],token:b,types:e}});Y("");}function I(){let d=r.count;if(l.types[d]==="comment"){do{d=d-1;}while(d>0&&l.types[d]==="comment")}if(l.token[d]==="from")d=d-2;if(l.token[d]==="x;"){r.splice({data:l,howmany:1,index:d});}}function q(){x(false);if(t>-1)z();W=r.wrapCommentBlock({chars:p,end:v,lexer:"script",opening:"/*",start:i,terminator:"*/"});i=W[1];if(l.token[r.count]==="var"||l.token[r.count]==="let"||l.token[r.count]==="const"){n=r.pop(l);Y("");r.push(l,n,"");if(l.lines[r.count-2]===0)l.lines[r.count-2]=l.lines[r.count];l.lines[r.count]=0;}else if(W[0]!==""){b=W[0];e=/^\/\*\s*@ignore\s*\bstart\b/.test(b)?"ignore":"comment";if(b.indexOf("# sourceMappingURL=")===2){o[0]=r.count+1;o[1]=b;}r.push(l,{begin:r.structure[r.structure.length-1][1],ender:-1,lexer:"script",lines:r.linesSpace,stack:r.structure[r.structure.length-1][0],token:b,types:e},"");}if(/\/\*\s*global\s+/.test(l.token[r.count])===true&&l.types.indexOf("word")<0){J[0]=l.token[r.count].replace(/\/\*\s*global\s+/,"").replace("*/","").replace(/,\s+/g,",").split(",");}}function P(){let d="";const u=C(5,false);const S=r.count;const w=r.linesSpace;if(f.language==="json"||V.length<1||V[V.length-1].charAt(0)!=="x"||/^x?(;|\}|\))$/.test(b)===false){return}if(l.stack[r.count]==="do"&&u==="while"&&l.token[r.count]==="}"){return}if(b===";"&&l.token[S-1]==="x{"){d=l.token[l.begin[S-2]-1];if(l.token[S-2]==="do"||l.token[S-2]===")"&&"ifforwhilecatch".indexOf(d)>-1){n=r.pop(l);b=f.script.correct===true?"}":"x}";e="end";m=r.structure[r.structure.length-1];Y("");V.pop();r.linesSpace=w;return}n=r.pop(l);b=f.script.correct===true?"}":"x}";e="end";m=r.structure[r.structure.length-1];Y("");V.pop();b=";";e="end";r.push(l,n,"");r.linesSpace=w;return}b=f.script.correct===true?"}":"x}";e="end";if(l.token[r.count]==="x}")return;if(l.stack[r.count]==="if"&&(l.token[r.count]===";"||l.token[r.count]==="x;")&&u==="else"){m=r.structure[r.structure.length-1];Y("");V.pop();r.linesSpace=w;return}do{m=r.structure[r.structure.length-1];Y("");V.pop();if(l.stack[r.count]==="do")break}while(V[V.length-1]==="x{");r.linesSpace=w;}function E(){let d=r.count;if(l.stack[d]==="object"&&f.script.objectSort===true){b=",";e="separator";I();Y("");}else {do{d=d-1;}while(d>0&&l.types[d-1]==="comment");r.splice({data:l,howmany:0,index:d,record:{begin:l.begin[d],ender:-1,lexer:"script",lines:r.linesSpace,stack:l.stack[d],token:",",types:"separator"}});Y("");}}function Q(d){let u=false;let S=false;const w=C(1,false);const k=l.token[r.count]==="("?r.count:l.begin[r.count];function R(){let A=0;const _=l.token[k-1]==="Array";const U=_===true?"[":"{";const H=_===true?"]":"}";const ee=_===true?"array":"object";if(_===true&&l.types[r.count]==="number"){A=Number(l.token[r.count]);n=r.pop(l);}n=r.pop(l);n=r.pop(l);n=r.pop(l);r.structure.pop();b=U;e="start";Y(ee);if(A>0){b=",";e="separator";do{Y("");A=A-1;}while(A>0)}b=H;e="end";Y("");}if(t>-1)z();if(D.length>0){if(D[D.length-1]===0){D.pop();}else {D[D.length-1]=D[D.length-1]-1;}}if(d===")"||d==="x)"||d==="]"){if(f.script.correct===true)M();I();}if(d===")"||d==="x)")x(false);if(O.len>-1){if(d==="}"&&(f.script.variableList==="list"&&O.count[O.len]===0||l.token[r.count]==="x;"&&f.script.variableList==="each")){we();}O.count[O.len]=O.count[O.len]-1;if(O.count[O.len]<0)we();}if(b===","&&l.stack[r.count]!=="initializer"&&(d==="]"&&l.token[r.count-1]==="["||d==="}")){n=r.pop(l);}if(d===")"||d==="x)"){b=d;if(N.length>0){a=N[N.length-1];if(a.length>1&&w!=="{"&&(a[0]==="if"||a[0]==="for"||a[0]==="with"||a[0]==="while"&&l.stack[a[1]-2]!==void 0&&l.stack[a[1]-2]!=="do")){u=true;}}}else if(d==="]"){b="]";}else if(d==="}"){if(b!==","&&f.script.correct===true)M();if(r.structure.length>0&&r.structure[r.structure.length-1][0]!=="object")x(true);if((f.script.objectSort===true||f.language==="json"&&f.json.objectSort===true)&&r.structure[r.structure.length-1][0]==="object"){r.objectSort(l);}if(e==="comment"){b=l.token[r.count];e=l.types[r.count];}b="}";}if(r.structure[r.structure.length-1][0]==="data_type"){e="type_end";}else {e="end";}N.pop();m=r.structure[r.structure.length-1];if(d===")"&&f.script.correct===true&&k-r.count<2&&(l.token[r.count]==="("||l.types[r.count]==="number")&&(l.token[k-1]==="Array"||l.token[k-1]==="Object")&&l.token[k-2]==="new"){R();S=true;}if(V[V.length-1]==="x{"&&d==="}"){P();V.pop();if(l.stack[r.count]!=="try"){if(w!==":"&&w!==";"&&l.token[l.begin[i]-1]!=="?")P();}b="}";}else {V.pop();}if(f.script.endComma!==void 0&&f.script.endComma!=="none"&&r.structure[r.structure.length-1][0]==="array"||r.structure[r.structure.length-1][0]==="object"||r.structure[r.structure.length-1][0]==="data_type"){if(f.script.endComma==="always"&&l.token[r.count]!==","){const A=r.structure[r.structure.length-1][1];let _=r.count;do{if(l.begin[_]===A){if(l.token[_]===",")break}else {_=l.begin[_];}_=_-1;}while(_>A);if(_>A){const U=e;const H=b;b=",";e="separator";Y("");b=H;e=U;}}else if(f.script.endComma==="never"&&l.token[r.count]===","){r.pop(l);}}if(S===false){Y("");if(b==="}"&&l.stack[r.count]!=="object"&&l.stack[r.count]!=="class"&&l.stack[r.count]!=="data_type"){J.pop();P();}}if(u===true){b=f.script.correct===true?"{":"x{";e="start";Y(a[0]);V.push("x{");a[1]=r.count;}h.pop();if(r.structure[r.structure.length-1][0]!=="data_type")h[h.length-1]=false;}function T(d,u,S){let w=0;let k=false;let R=false;let A=[d];let _;const U=u.split("");const H=U.length;const ee=i;const te=i+d.length;const Z=f.script.quoteConvert===void 0?"none":f.script.quoteConvert;function ue(){let ce=0;A=[];e=S;w=i;if(S==="string"&&/\s/.test(p[w+1])===true){ce=1;do{w=w+1;if(p[w]==="\n")ce=ce+1;}while(w<v&&/\s/.test(p[w+1])===true);r.linesSpace=ce;}}function le(){let ce="";function pe(K){if(f.language!=="javascript"&&f.language!=="typescript"&&f.language!=="jsx"&&f.language!=="tsx"){const re=oe=>oe.replace(/\s*$/," ");const be=oe=>oe.replace(/^\s*/," ");if(/\{(#|\/|(%>)|(%\]))/.test(K)||/\}%(>|\])/.test(K))return K;K=K.replace(/\{((\{+)|%-?)\s*/g,re);K=K.replace(/\s*((\}\}+)|(-?%\}))/g,be);return K}return K}if(d==='"'&&Z==="single"){A[0]="'";A[A.length-1]="'";}else if(d==="'"&&Z==="double"){A[0]='"';A[A.length-1]='"';}else if(k===true){ce=A[A.length-1];A.pop();A.pop();A.push(ce);}i=w;if(u==="\n"){i=i-1;A.pop();}b=A.join("");if(d==='"'||d==="'"||d==="{{"||d==="{%"){b=pe(b);}if(d==="{%"||d==="{{"){_=Ae(b);e=_[0];Y(_[1]);return}if(S==="string"){e="string";if(f.language==="json"){b=b.replace(/\u0000/g,"\\u0000").replace(/\u0001/g,"\\u0001").replace(/\u0002/g,"\\u0002").replace(/\u0003/g,"\\u0003").replace(/\u0004/g,"\\u0004").replace(/\u0005/g,"\\u0005").replace(/\u0006/g,"\\u0006").replace(/\u0007/g,"\\u0007").replace(/\u0008/g,"\\u0008").replace(/\u0009/g,"\\u0009").replace(/\u000a/g,"\\u000a").replace(/\u000b/g,"\\u000b").replace(/\u000c/g,"\\u000c").replace(/\u000d/g,"\\u000d").replace(/\u000e/g,"\\u000e").replace(/\u000f/g,"\\u000f").replace(/\u0010/g,"\\u0010").replace(/\u0011/g,"\\u0011").replace(/\u0012/g,"\\u0012").replace(/\u0013/g,"\\u0013").replace(/\u0014/g,"\\u0014").replace(/\u0015/g,"\\u0015").replace(/\u0016/g,"\\u0016").replace(/\u0017/g,"\\u0017").replace(/\u0018/g,"\\u0018").replace(/\u0019/g,"\\u0019").replace(/\u001a/g,"\\u001a").replace(/\u001b/g,"\\u001b").replace(/\u001c/g,"\\u001c").replace(/\u001d/g,"\\u001d").replace(/\u001e/g,"\\u001e").replace(/\u001f/g,"\\u001f");}else if(d.indexOf("#!")===0){b=b.slice(0,b.length-1);r.linesSpace=2;}else if(r.structure[r.structure.length-1][0]!=="object"||r.structure[r.structure.length-1][0]==="object"&&C(1,false)!==":"&&l.token[r.count]!==","&&l.token[r.count]!=="{"){if(b.length>f.wrap&&f.wrap>0||f.wrap!==0&&l.token[r.count]==="+"&&(l.token[r.count-1].charAt(0)==='"'||l.token[r.count-1].charAt(0)==="'")){let K=b;let re="";let be=Z==="double"?'"':Z==="single"?"'":K.charAt(0);const oe=f.wrap;const ve=/u[0-9a-fA-F]{4}/;const Ce=/x[0-9a-fA-F]{2}/;K=K.slice(1,K.length-1);if(l.token[r.count]==="+"&&(l.token[r.count-1].charAt(0)==='"'||l.token[r.count-1].charAt(0)==="'")){r.pop(l);be=l.token[r.count].charAt(0);K=l.token[r.count].slice(1,l.token[r.count].length-1)+K;r.pop(l);}if(K.length>oe&&oe>0){do{re=K.slice(0,oe);if(re.charAt(oe-5)==="\\"&&ve.test(K.slice(oe-4,oe+1))){re=re.slice(0,oe-5);}else if(re.charAt(oe-4)==="\\"&&ve.test(K.slice(oe-3,oe+2))){re=re.slice(0,oe-4);}else if(re.charAt(oe-3)==="\\"&&(ve.test(K.slice(oe-2,oe+3))||Ce.test(K.slice(oe-2,oe+1)))){re=re.slice(0,oe-3);}else if(re.charAt(oe-2)==="\\"&&(ve.test(K.slice(oe-1,oe+4))||Ce.test(K.slice(oe-1,oe+2)))){re=re.slice(0,oe-2);}else if(re.charAt(oe-1)==="\\"){re=re.slice(0,oe-1);}re=be+re+be;K=K.slice(re.length-2);b=re;e="string";Y("");r.linesSpace=0;b="+";e="operator";Y("");}while(K.length>oe)}if(K===""){b=be+be;}else {b=be+K+be;}e="string";}}}else if(/\{\s*\?>$/.test(b)){e="template_start";}else {e=S;}if(b.length>0)Y("");}if(t>-1)z();if(p[i-1]==="\\"&&B(i-1)===true&&(p[i]==='"'||p[i]==="'")){r.pop(l);if(l.token[0]==="{"){if(p[i]==='"'){d='"';u='\\"';A=['"'];}else {d="'";u="\\'";A=["'"];}k=true;}else {if(p[i]==='"'){A=['\\"'];le();return}A=["\\'"];le();return}}w=te;if(w<v){do{if(l.token[0]!=="{"&&l.token[0]!=="["&&Z!=="none"&&(p[w]==='"'||p[w]==="'")){if(p[w-1]==="\\"){if(B(w-1)===true){if(Z==="double"&&p[w]==="'"){A.pop();}else if(Z==="single"&&p[w]==='"'){A.pop();}}}else if(Z==="double"&&p[w]==='"'&&p[i]==="'"){p[w]='\\"';}else if(Z==="single"&&p[w]==="'"&&p[i]==='"'){p[w]="\\'";}A.push(p[w]);}else if(w>ee){R=true;if(p[w]==="{"&&p[w+1]==="%"&&p[w+2]!==d){le();T("{%","%}","template");ue();}else if(p[w]==="{"&&p[w+1]==="{"&&p[w+2]!==d){le();T("{{","}}","template");ue();}else {R=false;A.push(p[w]);}}else {A.push(p[w]);}if((d==='"'||d==="'")&&(R===true||w>ee)&&f.language!=="json"&&p[w-1]!=="\\"&&p[w]!=='"'&&p[w]!=="'"&&(p[w]==="\n"||w===v-1)){r.error="Unterminated string in script on line number "+r.lineNumber;break}if(p[w]===U[H-1]&&(p[w-1]!=="\\"||B(w-1)===false)){if(H===1)break;if(A[w-te]===U[0]&&A.slice(w-te-H+2).join("")===u)break}w=w+1;}while(w<v)}le();}function se(){x(false);P();if(t>-1)z();W=r.wrapCommentLine({chars:p,end:v,lexer:"script",opening:"//",start:i,terminator:"\n"});i=W[1];if(W[0]!==""){b=W[0];e=/^(\/\/\s*@prettify-ignore-start)/.test(b)?"ignore":"comment";if(b.indexOf("# sourceMappingURL=")===2){o[0]=r.count+1;o[1]=b;}r.push(l,{begin:r.structure[r.structure.length-1][1],ender:-1,lexer:"script",lines:r.linesSpace,stack:r.structure[r.structure.length-1][0],token:b,types:e},"");}}function fe(){let d=0;let u=false;let S=false;let w=0;let k=0;let R=0;let A="";let _="";let U="";const H=[];const ee=h[h.length-1];const te="0123456789=<>+-*?|^:&.,;%(){}[]~";function Z(){if(b==="(")r.structure[r.structure.length-1]=["paren",r.count];F.lexers.markup(H.join(""));}if(t>-1)z();_=r.count>0?l.token[r.count-1]:"";U=r.count>0?l.types[r.count-1]:"";A=C(1,false);if(f.language!=="jsx"&&f.language!=="tsx"&&/\d/.test(A)===false&&(b==="function"||_==="=>"||_==="void"||_==="."||l.stack[r.count]==="arguments"||e==="type"&&_==="type"||e==="reference"&&(U==="operator"||_==="function"||_==="class"||_==="new")||e==="type"&&U==="operator"||b==="return"||e==="operator")){const ue=[];let le=0;let ce=0;d=i;do{ue.push(p[d]);if(p[d]==="<"){le=le+1;}else if(p[d]===">"){le=le-1;if(le<1)break}d=d+1;}while(d<v);ce=i;i=d;A=C(1,false);if(p[d]===">"&&(ee===true||_==="=>"||_==="."||U!=="operator"||U==="operator"&&(A==="("||A==="="))){e="generic";b=ue.join("").replace(/^<\s+/,"<").replace(/\s+>$/,">").replace(/,\s*/g,", ");Y("");return}i=ce;}d=r.count;if(l.types[d]==="comment"){do{d=d-1;}while(d>0&&l.types[d]==="comment")}if(ee===false&&C(1,false)!==">"&&(p[i]!=="<"&&te.indexOf(p[i+1])>-1||l.token[d]==="++"||l.token[d]==="--"||/\s/.test(p[i+1])===true||/\d/.test(p[i+1])===true&&(e==="operator"||e==="string"||e==="number"||e==="reference"||e==="word"&&b!=="return"))){e="operator";b=G();return Y("")}if(f.language!=="typescript"&&(l.token[d]==="return"||l.types[d]==="operator"||l.types[d]==="start"||l.types[d]==="separator"||l.types[d]==="jsx_attribute_start"||l.token[d]==="}"&&r.structure[r.structure.length-1][0]==="global")){e="markup";f.language="jsx";do{H.push(p[i]);if(p[i]==="{"){k=k+1;u=true;}else if(p[i]==="}"){k=k-1;if(k===0)u=false;}else if(p[i]==="<"&&u===false){if(p[i+1]==="<"){do{H.push(p[i]);i=i+1;}while(i<v&&p[i+1]==="<")}w=w+1;if(C(1,false)==="/")S=true;}else if(p[i]===">"&&u===false){if(p[i+1]===">"){do{H.push(p[i]);i=i+1;}while(p[i+1]===">")}w=w-1;if(S===true){R=R-1;}else if(p[i-1]!=="/"){R=R+1;}if(w===0&&k===0&&R<1){A=C(2,false);if(A.charAt(0)!=="<")return Z();if(A.charAt(0)==="<"&&te.indexOf(A.charAt(1))<0&&/\s/.test(A.charAt(1))===false){d=i+1;do{d=d+1;if(p[d]===">"||/\s/.test(p[d-1])&&te.indexOf(p[d])<0)break;if(te.indexOf(p[d])>-1)return Z()}while(d<v)}else {return Z()}}S=false;}i=i+1;}while(i<v);return Z()}e="operator";b=G();Y("");}function C(d,u){let S=u===true?i:i+1;let w="";if(typeof d!=="number"||d<1)d=1;if(p[i]==="/"){if(p[i+1]==="/"){w="\n";}else if(p[i+1]==="*"){w="/";}}if(S<v){do{if(/\s/.test(p[S])===false){if(p[S]==="/"){if(w===""){if(p[S+1]==="/"){w="\n";}else if(p[S+1]==="*"){w="/";}}else if(w==="/"&&p[S-1]==="*"){w="";}}if(w===""&&p[S-1]+p[S]!=="*/")return p.slice(S,S+d).join("")}else if(w==="\n"&&p[S]==="\n"){w="";}S=S+1;}while(S<v)}return ""}function ne(){const d=v;const u=[p[i]];let S=0;let w=/zz/;let k=u[0]===".";if(i<v-2&&p[i]==="0"){if(p[i+1]==="x"){w=/[0-9a-fA-F]/;}else if(p[i+1]==="o"){w=/[0-9]/;}else if(p[i+1]==="b"){w=/0|1/;}if(w.test(p[i+2])===true){u.push(p[i+1]);S=i+1;do{S=S+1;u.push(p[S]);}while(w.test(p[S+1])===true);i=S;return u.join("")}}S=i+1;if(S<d){do{if(/[0-9]/.test(p[S])||p[S]==="."&&k===false){u.push(p[S]);if(p[S]===".")k=true;}else {break}S=S+1;}while(S<d)}if(S<d-1&&(/\d/.test(p[S-1])===true||/\d/.test(p[S-2])===true&&(p[S-1]==="-"||p[S-1]==="+"))&&(p[S]==="e"||p[S]==="E")){u.push(p[S]);if(p[S+1]==="-"||p[S+1]==="+"){u.push(p[S+1]);S=S+1;}k=false;S=S+1;if(S<d){do{if(/[0-9]/.test(p[S])||p[S]==="."&&k===false){u.push(p[S]);if(p[S]===".")k=true;}else {break}S=S+1;}while(S<d)}}i=S-1;return u.join("")}function G(){let d=0;let u=0;let S=v;let w="";const k=["=","<",">","+","*","?","|","^",":","&","%","~"];const R=k.length;if(t>-1)z();if(p[i]==="/"&&(r.count>-1&&(e!=="word"&&e!=="reference"||b==="typeof"||b==="return"||b==="else")&&e!=="number"&&e!=="string"&&e!=="end")){if(b==="return"||b==="typeof"||b==="else"||e!=="word"){b=ye();e="regex";}else {b="/";e="operator";}Y("");return "regex"}if(p[i]==="?"&&("+-*/.?".indexOf(p[i+1])>-1||p[i+1]===":"&&k.join("").indexOf(p[i+2])<0)){if(p[i+1]==="."&&/\d/.test(p[i+2])===false){w="?.";}else if(p[i+1]==="?"){w="??";}if(w==="")return "?"}if(p[i]===":"&&"+-*/".indexOf(p[i+1])>-1)return ":";if(i<v-1){if(p[i]!=="<"&&p[i+1]==="<")return p[i];if(p[i]==="!"&&p[i+1]==="/")return "!";if(p[i]==="-"){h[h.length-1]=false;if(p[i+1]==="-"){w="--";}else if(p[i+1]==="="){w="-=";}else if(p[i+1]===">"){w="->";}if(w==="")return "-"}if(p[i]==="+"){h[h.length-1]=false;if(p[i+1]==="+"){w="++";}else if(p[i+1]==="="){w="+=";}if(w==="")return "+"}if(p[i]==="="&&p[i+1]!=="="&&p[i+1]!=="!"&&p[i+1]!==">"){h[h.length-1]=false;return "="}}if(p[i]===":"){if(f.language==="typescript"){if(l.stack[r.count]==="arguments"){if(l.token[r.count]==="?"){r.pop(l);w="?:";i=i-1;}h[h.length-1]=true;}else if(b===")"&&(l.token[l.begin[r.count]-1]==="function"||l.token[l.begin[r.count]-2]==="function")){h[h.length-1]=true;}else if(e==="reference"){d=r.count;let A=false;do{if(l.begin[d]===l.begin[r.count]){if(d<r.count&&l.token[d]===":"&&l.types[d+1]!=="type")A=true;if(l.token[d]==="?"&&A===false)break;if(l.token[d]===";"||l.token[d]==="x;")break;if(l.token[d]==="var"||l.token[d]==="let"||l.token[d]==="const"||l.types[d]==="type"){h[h.length-1]=true;break}}else {if(l.types[d]==="type_end"){h[h.length-1]=true;break}d=l.begin[d];}d=d-1;}while(d>l.begin[r.count])}}else if(l.token[r.count-1]==="["&&(l.types[r.count]==="word"||l.types[r.count]==="reference")){r.structure[r.structure.length-1][0]="attribute";l.stack[r.count]="attribute";}}if(w===""){if(p[i+1]==="+"&&p[i+2]==="+"||p[i+1]==="-"&&p[i+2]==="-"){w=p[i];}else {const A=[p[i]];d=i+1;if(d<S){do{if(p[d]==="+"&&p[d+1]==="+"||p[d]==="-"&&p[d+1]==="-")break;u=0;if(u<R){do{if(p[d]===k[u]){A.push(k[u]);break}u=u+1;}while(u<R)}if(u===R)break;d=d+1;}while(d<S)}w=A.join("");}}i=i+(w.length-1);if(w==="=>"&&b===")"){d=r.count;S=l.begin[d];do{if(l.begin[d]===S)l.stack[d]="method";d=d-1;}while(d>S-1)}return w}function M(){let d=true;let u="+";let S="";let w="";let k="";let R=0;let A=0;let _=0;let U="";const H=[];function ee(){_=l.begin[_]-1;if(l.types[_]==="end"){ee();}else if(l.token[_-1]==="."){te();}}function te(){_=_-2;if(l.types[_]==="end"){ee();}else if(l.token[_-1]==="."){te();}}function Z(){let le=0;const ce=H.length;if(le<ce){do{r.push(l,H[le],"");le=le+1;}while(le<ce)}}function ue(le){const ce=ie(null);ce.begin=l.begin[le];ce.ender=l.ender[le];ce.lexer=l.lexer[le];ce.lines=l.lines[le];ce.stack=l.stack[le];ce.token=l.token[le];ce.types=l.types[le];return ce}S=l.token[r.count];w=l.token[r.count-1];k=l.token[r.count-2];if(S!=="++"&&S!=="--"&&w!=="++"&&w!=="--"){_=r.count;if(l.types[_]==="end"){ee();}else if(l.token[_-1]==="."){te();}}if(l.token[_-1]==="++"||l.token[_-1]==="--"){if("startendoperator".indexOf(l.types[_-2])>-1)return;R=_;if(R<r.count+1){do{H.push(ue(R));R=R+1;}while(R<r.count+1);r.splice({data:l,howmany:r.count-_,index:_});}}else {if(f.script.correct===false||S!=="++"&&S!=="--"&&w!=="++"&&w!=="--"){return}U=C(1,false);if((S==="++"||S==="--")&&(p[i]===";"||U===";"||p[i]==="}"||U==="}"||p[i]===")"||U===")")){u=l.stack[r.count];if(u==="array"||u==="method"||u==="object"||u==="paren"||u==="notation"||l.token[l.begin[r.count]-1]==="while"&&u!=="while"){return}R=r.count;do{R=R-1;if(l.token[R]==="return")return;if(l.types[R]==="end"){do{R=l.begin[R]-1;}while(l.types[R]==="end"&&R>0)}}while(R>0&&(l.token[R]==="."||l.types[R]==="word"||l.types[R]==="reference"||l.types[R]==="end"));if(l.token[R]===","&&p[i]!==";"&&U!==";"&&p[i]!=="}"&&U!=="}"&&p[i]!==")"&&U!==")"){return}if(l.types[R]==="operator"){if(l.stack[R]==="switch"&&l.token[R]===":"){do{R=R-1;if(l.types[R]==="start"){A=A-1;if(A<0)break}else if(l.types[R]==="end"){A=A+1;}if(l.token[R]==="?"&&A===0)return}while(R>0)}else {return}}d=false;u=S==="--"?"-":"+";}else if(k==="["||k===";"||k==="x;"||k==="}"||k==="{"||k==="("||k===")"||k===","||k==="return"){if(S==="++"||S==="--"){if(k==="["||k==="("||k===","||k==="return")return;if(S==="--")u="-";d=false;}else if(w==="--"||S==="--"){u="-";}}else {return}if(d===false)n=r.pop(l);_=r.count;if(l.types[_]==="end"){ee();}else if(l.token[_-1]==="."){te();}R=_;if(R<r.count+1){do{H.push(ue(R));R=R+1;}while(R<r.count+1)}}if(d===true){r.splice({data:l,howmany:1,index:_-1});b="=";e="operator";Y("");Z();b=u;e="operator";Y("");b="1";e="number";Y("");}else {b="=";e="operator";Y("");Z();b=u;e="operator";Y("");b="1";e="number";Y("");}b=l.token[r.count];e=l.types[r.count];if(U==="}"&&p[i]!==";")x(false);}function Y(d){const u=ie(null);u.begin=r.structure[r.structure.length-1][1];u.ender=-1;u.lexer="script";u.lines=r.linesSpace;u.stack=r.structure[r.structure.length-1][0];u.token=b;u.types=e;r.push(l,u,d);}function ye(){let d=i+1;let u=0;let S=0;let w="";let k=false;const R=v;const A=["/"];if(d<R){do{A.push(p[d]);if(p[d-1]!=="\\"||p[d-2]==="\\"){if(p[d]==="["){k=true;}if(p[d]==="]"){k=false;}}if(p[d]==="/"&&k===false){if(p[d-1]==="\\"){S=0;u=d-1;if(u>0){do{if(p[u]==="\\"){S=S+1;}else {break}u=u-1;}while(u>0)}if(S%2===0){break}}else {break}}d=d+1;}while(d<R)}if(p[d+1]==="g"||p[d+1]==="i"||p[d+1]==="m"||p[d+1]==="y"||p[d+1]==="u"){A.push(p[d+1]);if(p[d+2]!==p[d+1]&&(p[d+2]==="g"||p[d+2]==="i"||p[d+2]==="m"||p[d+2]==="y"||p[d+2]==="u")){A.push(p[d+2]);if(p[d+3]!==p[d+1]&&p[d+3]!==p[d+2]&&(p[d+3]==="g"||p[d+3]==="i"||p[d+3]==="m"||p[d+3]==="y"||p[d+3]==="u")){A.push(p[d+3]);if(p[d+4]!==p[d+1]&&p[d+4]!==p[d+2]&&p[d+4]!==p[d+3]&&(p[d+4]==="g"||p[d+4]==="i"||p[d+4]==="m"||p[d+4]==="y"||p[d+4]==="u")){A.push(p[d+4]);if(p[d+5]!==p[d+1]&&p[d+5]!==p[d+2]&&p[d+5]!==p[d+3]&&p[d+5]!==p[d+4]&&(p[d+5]==="g"||p[d+5]==="i"||p[d+5]==="m"||p[d+5]==="y"||p[d+5]==="u")){A.push(p[d+4]);i=d+5;}else {i=d+4;}}else {i=d+3;}}else {i=d+2;}}else {i=d+1;}}else {i=d;}w=A.join("");return w}function B(d){const u=d;do{d=d-1;}while(p[d]==="\\"&&d>0);return (u-d)%2===1}function he(d){let u=r.count;let S="";let w="";let k="";let R=false;V.push(d);if(d==="{"&&(l.types[r.count]==="type"||l.types[r.count]==="type_end"||l.types[r.count]==="generic")){let A=0;if(l.types[r.count]==="type_end")u=l.begin[r.count];A=u;do{u=u-1;if(l.begin[u]!==A&&l.begin[u]!==-1)break;if(l.token[u]===":")break}while(u>l.begin[u]);if(l.token[u]===":"&&l.stack[u-1]==="arguments"){h.push(false);R=true;}else {h.push(h[h.length-1]);}u=r.count;}else if(d==="["&&l.types[r.count]==="type_end"){h.push(true);}else {h.push(h[h.length-1]);}if(t>-1){z();u=r.count;}if(O.len>-1)O.count[O.len]=O.count[O.len]+1;if(l.token[u-1]==="function"){N.push(["function",u+1]);}else {N.push([b,u+1]);}b=d;if(h[h.length-1]===true){e="type_start";}else {e="start";}if(d==="("||d==="x("){I();}else if(d==="{"){if(X>-1){if(l.begin[X-1]===l.begin[l.begin[u]-1]||l.token[l.begin[u]]==="x("){X=-1;if(f.script.correct===true){Q(")");}else {Q("x)");}I();b="{";e="start";}}else if(b===")"){I();}if(e==="comment"&&l.token[u-1]===")"){b=l.token[u];l.token[u]="{";e=l.types[u];l.types[u]="start";}}S=(()=>{let A=r.count;if(l.types[A]==="comment"){do{A=A-1;}while(A>0&&l.types[A]==="comment")}return l.token[A]})();w=l.stack[u]===void 0?"":(()=>{let A=r.count;if(l.types[A]==="comment"){do{A=A-1;}while(A>0&&l.types[A]==="comment")}return l.token[l.begin[A]-1]})();if(b==="{"&&(l.types[u]==="word"||l.token[u]==="]")){let A=u;if(l.token[A]==="]"){do{A=l.begin[A]-1;}while(l.token[A]==="]")}do{if(l.types[A]==="start"||l.types[A]==="end"||l.types[A]==="operator")break;A=A-1;}while(A>0);if(l.token[A]===":"&&l.stack[A-1]==="arguments"){k="function";J.push($);$=[];}}if(e==="type_start"){k="data_type";}else if(k===""&&(b==="{"||b==="x{")){if(S==="else"||S==="do"||S==="try"||S==="finally"||S==="switch"){k=S;}else if(D[D.length-1]===0&&S!=="return"){D.pop();k="class";}else if(l.token[u-1]==="class"){k="class";}else if(l.token[u]==="]"&&l.token[u-1]==="["){k="array";}else if((l.types[u]==="word"||l.types[u]==="reference")&&(l.types[u-1]==="word"||l.types[u-1]==="reference"||l.token[u-1]==="?"&&(l.types[u-2]==="word"||l.types[u-2]==="reference"))&&l.token[u]!=="in"&&l.token[u-1]!=="export"&&l.token[u-1]!=="import"){k="map";}else if(l.stack[u]==="method"&&l.types[u]==="end"&&(l.types[l.begin[u]-1]==="word"||l.types[l.begin[u]-1]==="reference")&&l.token[l.begin[u]-2]==="new"){k="initializer";}else if(b==="{"&&(S===")"||S==="x)")&&(l.types[l.begin[u]-1]==="word"||l.types[l.begin[u]-1]==="reference"||l.token[l.begin[u]-1]==="]")){if(w==="if"){k="if";}else if(w==="for"){k="for";}else if(w==="while"){k="while";}else if(w==="class"){k="class";}else if(w==="switch"||l.token[l.begin[u]-1]==="switch"){k="switch";}else if(w==="catch"){k="catch";}else {k="function";}}else if(b==="{"&&(S===";"||S==="x;")){k="block";}else if(b==="{"&&l.token[u]===":"&&l.stack[u]==="switch"){k="block";}else if(l.token[u-1]==="import"||l.token[u-2]==="import"||l.token[u-1]==="export"||l.token[u-2]==="export"){k="object";}else if(S===")"&&(a[0]==="function"||a[0]==="if"||a[0]==="for"||a[0]==="class"||a[0]==="while"||a[0]==="switch"||a[0]==="catch")){k=a[0];}else if(l.stack[u]==="notation"){k="function";}else if((l.types[u]==="number"||l.types[u]==="string"||l.types[u]==="word"||l.types[u]==="reference")&&(l.types[u-1]==="word"||l.types[u-1]==="reference")&&l.token[l.begin[u]-1]!=="for"){k="function";}else if(r.structure.length>0&&l.token[u]!==":"&&r.structure[r.structure.length-1][0]==="object"&&(l.token[l.begin[u]-2]==="{"||l.token[l.begin[u]-2]===",")){k="function";}else if(l.types[a[1]-1]==="markup"&&l.token[a[1]-3]==="function"){k="function";}else if(S==="=>"){k="function";}else if(R===true||l.types[r.count]==="type_end"&&l.stack[l.begin[r.count]-2]==="arguments"){k="function";}else if(S===")"&&l.stack[u]==="method"&&(l.types[l.begin[u]-1]==="word"||l.types[l.begin[u]-1]==="property"||l.types[l.begin[u]-1]==="reference")){k="function";}else if(l.types[u]==="word"&&b==="{"&&l.token[u]!=="return"&&l.token[u]!=="in"&&l.token[u]!=="import"&&l.token[u]!=="const"&&l.token[u]!=="let"&&l.token[u]!==""){k="block";}else if(b==="{"&&"if|else|for|while|function|class|switch|catch|finally".indexOf(l.stack[u])>-1&&(l.token[u]==="x}"||l.token[u]==="}")){k="block";}else if(l.stack[u]==="arguments"){k="function";}else if(l.types[u]==="generic"){do{u=u-1;if(l.token[u]==="function"||l.stack[u]==="arguments"){k="function";break}if(l.token[u]==="interface"){k="map";break}if(l.token[u]===";"){k="object";break}}while(u>l.begin[r.count])}else {k="object";}if(k!=="object"&&k!=="class"){if(k==="function"){J.push($);$=[];}else {J.push([]);}}}else if(b==="["){k="array";}else if(b==="("||b==="x("){if(S==="function"||l.token[u-1]==="function"||l.token[u-1]==="function*"||l.token[u-2]==="function"){k="arguments";}else if(l.token[u-1]==="."||l.token[l.begin[u]-2]==="."){k="method";}else if(l.types[u]==="generic"){k="method";}else if(l.token[u]==="}"&&l.stack[u]==="function"){k="method";}else if(S==="if"||S==="for"||S==="class"||S==="while"||S==="catch"||S==="finally"||S==="switch"||S==="with"){k="expression";}else if(l.types[u]==="word"||l.types[u]==="property"||l.types[u]==="reference"){k="method";}else {k="paren";}}Y(k);if(D.length>0)D[D.length-1]=D[D.length-1]+1;}function xe(){const d=[p[i]];i=i+1;if(i<v){do{d.push(p[i]);if(p[i]==="`"&&(p[i-1]!=="\\"||B(i-1)===false))break;if(p[i-1]==="$"&&p[i]==="{"&&(p[i-2]!=="\\"||B(i-2)===false))break;i=i+1;}while(i<v)}return d.join("")}function Ae(d){let u=2;let S=0;let w="";const k=d.slice(0,2);const R=d.length;if(d.charAt(2)==="-")u=u+1;if(/\s/.test(d.charAt(u))===true){do{u=u+1;}while(/\s/.test(d.charAt(u))===true&&u<R)}S=u;do{S=S+1;}while(/\s/.test(d.charAt(S))===false&&d.charAt(S)!=="("&&S<R);if(S===R)S=d.length-2;w=d.slice(u,S);if(w==="else"||k==="{%"&&(w==="elseif"||w==="when"||w==="elif"||w==="elsif")){return ["template_else",`template_${w}`]}if(k==="{{"){if(w==="end")return ["template_end",""];if(w==="block"&&/\{%\s*\w/.test(c)===false||w==="define"||w==="form"||w==="if"||w==="unless"||w==="range"||w==="with"){return ["template_start",`template_${w}`]}return ["template",""]}S=j.length-1;if(S>-1){do{if(w===j[S]&&(w!=="block"||/\{%\s*\w/.test(c)===false)){return ["template_start",`template_${w}`]}if(w==="end"+j[S]){return ["template_end",""]}S=S-1;}while(S>-1)}return ["template",""]}function we(){O.count.pop();O.index.pop();O.word.pop();O.len=O.len-1;}function z(){let d=t;let u=1;let S="";let w="";let k=b;let R=e;const A=[];function _(){V.push("x{");r.splice({data:l,howmany:1,index:r.count-3});}function U(H,ee,te){const Z=l.begin[H];let ue=0;do{if(l.token[H]===ee&&l.types[H]==="word"){if(te===true){l.types[H]="reference";}else if(l.begin[H]>Z&&l.token[l.begin[H]]==="{"&&l.stack[H]!=="object"&&l.stack[H]!=="class"&&l.stack[H]!=="data_type"){if(l.stack[H]==="function"){l.types[H]="reference";}else {ue=l.begin[H];do{if(l.stack[ue]==="function"){l.types[H]="reference";break}ue=l.begin[ue];}while(ue>Z)}}}H=H-1;}while(H>Z)}do{A.push(p[d]);if(p[d]==="\\"){r.error=`Illegal escape in JavaScript on line number ${r.lineNumber}`;}d=d+1;}while(d<i);if(b.charAt(0)==="\u201C"){r.error=`Quote looking character (\u201C, \\u201c) used instead of actual quotes on line number ${r.lineNumber}`;}else if(b.charAt(0)==="\u201D"){r.error=`Quote looking character (\u201D, \\u201d) used instead of actual quotes on line number ${r.lineNumber}`;}S=A.join("");t=-1;if(r.count>0&&S==="function"&&l.token[r.count]==="("&&(l.token[r.count-1]==="{"||l.token[r.count-1]==="x{")){l.types[r.count]="start";}if(r.count>1&&S==="function"&&b==="("&&(l.token[r.count-1]==="}"||l.token[r.count-1]==="x}")){if(l.token[r.count-1]==="}"){d=r.count-2;if(d>-1){do{if(l.types[d]==="end"){u=u+1;}else if(l.types[d]==="start"||l.types[d]==="end"){u=u-1;}if(u===0)break;d=d-1;}while(d>-1)}if(l.token[d]==="{"&&l.token[d-1]===")"){u=1;d=d-2;if(d>-1){do{if(l.types[d]==="end"){u=u+1;}else if(l.types[d]==="start"||l.types[d]==="end"){u=u-1;}if(u===0)break;d=d-1;}while(d>-1)}if(l.token[d-1]!=="function"&&l.token[d-2]!=="function"){l.types[r.count]="start";}}}else {l.types[r.count]="start";}}if(f.script.correct===true&&(S==="Object"||S==="Array")&&p[i+1]==="("&&p[i+2]===")"&&l.token[r.count-1]==="="&&l.token[r.count]==="new"){if(S==="Object"){l.token[r.count]="{";b="}";l.stack[r.count]="object";r.structure[r.structure.length-1][0]="object";}else {l.token[r.count]="[";b="]";l.stack[r.count]="array";r.structure[r.structure.length-1][0]="array";}l.types[r.count]="start";e="end";p[i+1]="";p[i+2]="";i=i+2;}else {u=r.count;d=u;if(f.script.variableList!=="none"&&(S==="var"||S==="let"||S==="const")){if(l.types[u]==="comment"){do{u=u-1;}while(u>0&&l.types[u]==="comment")}if(f.script.variableList==="list"&&O.len>-1&&O.index[O.len]===u&&S===O.word[O.len]){b=",";e="separator";l.token[u]=b;l.types[u]=e;O.count[O.len]=0;O.index[O.len]=u;O.word[O.len]=S;return}O.len=O.len+1;O.count.push(0);O.index.push(u);O.word.push(S);u=d;}else if(O.len>-1&&S!==O.word[O.len]&&r.count===O.index[O.len]&&l.token[O.index[O.len]]===";"&&b!==O.word[O.len]&&f.script.variableList==="list"){we();}if(S==="from"&&l.token[r.count]==="x;"&&l.token[r.count-1]==="}"){I();}if(S==="while"&&l.token[r.count]==="x;"&&l.token[r.count-1]==="}"){let H=0;let ee=r.count-2;if(ee>-1){do{if(l.types[ee]==="end"){H=H+1;}else if(l.types[ee]==="start"){H=H-1;}if(H<0){if(l.token[ee]==="{"&&l.token[ee-1]==="do")I();return}ee=ee-1;}while(ee>-1)}}if(R==="comment"){let H=r.count;do{H=H-1;}while(H>0&&l.types[H]==="comment");R=l.types[H];k=l.token[H];}w=C(2,false);if(S==="void"){if(k===":"&&l.stack[r.count-1]==="arguments"){e="type";}else {e="word";}}else if((r.structure[r.structure.length-1][0]==="object"||r.structure[r.structure.length-1][0]==="class"||r.structure[r.structure.length-1][0]==="data_type")&&(l.token[r.count]==="{"||l.token[l.begin[r.count]]==="{"&&l.token[r.count]===","||l.types[r.count]==="template_end"&&(l.token[l.begin[r.count]-1]==="{"||l.token[l.begin[r.count]-1]===","))){if(S==="return"||S==="break"){e="word";}else {e="property";}}else if(h[h.length-1]===true||(f.language==="typescript"||f.language==="flow")&&k==="type"){e="type";}else if(J.length>0&&(k==="function"||k==="class"||k==="const"||k==="let"||k==="var"||k==="new"||k==="void")){e="reference";J[J.length-1].push(S);if(f.language==="javascript"||f.language==="jsx"||f.language==="typescript"||f.language==="tsx"){if(k==="var"||k==="function"&&l.types[r.count-1]!=="operator"&&l.types[r.count-1]!=="start"&&l.types[r.count-1]!=="end"){U(r.count,S,true);}else {U(r.count,S,false);}}else {U(r.count,S,false);}}else if(r.structure[r.structure.length-1][0]==="arguments"&&e!=="operator"){e="reference";$.push(S);}else if(k===","&&l.stack[r.count]!=="method"&&(l.stack[r.count]!=="expression"||l.token[l.begin[r.count]-1]==="for")){let H=r.count;const ee=r.structure[r.structure.length-1][1];do{if(l.begin[H]===ee){if(l.token[H]===";")break;if(l.token[H]==="var"||l.token[H]==="let"||l.token[H]==="const"||l.token[H]==="type"){break}}else if(l.types[H]==="end"){H=l.begin[H];}H=H-1;}while(H>ee);if(J.length>0&&l.token[H]==="var"){e="reference";J[J.length-1].push(S);if(f.language==="javascript"||f.language==="jsx"||f.language==="typescript"||f.language==="tsx"){U(H,S,true);}else {U(H,S,false);}}else if(J.length>0&&(l.token[H]==="let"||l.token[H]==="const"||l.token[H]==="type"&&(f.language==="typescript"||f.language==="tsx"))){e="reference";J[J.length-1].push(S);U(H,S,false);}else {e="word";}}else if(r.structure[r.structure.length-1][0]!=="object"||r.structure[r.structure.length-1][0]==="object"&&b!==","&&b!=="{"){let H=J.length;let ee=0;if(H>0){do{H=H-1;ee=J[H].length;if(ee>0){do{ee=ee-1;if(S===J[H][ee])break}while(ee>0);if(S===J[H][ee])break}}while(H>0);if(J[H][ee]===S&&k!=="."){e="reference";}else {e="word";}}else {e="word";}}else {e="word";}b=S;if(S==="from"&&l.token[r.count]==="}")I();}Y("");if(S==="class")D.push(0);if(S==="do"){w=C(1,true);if(w!=="{"){b=f.script.correct===true?"{":"x{";e="start";V.push("x{");Y("do");}}if(S==="else"){w=C(2,true);let H=r.count-1;if(l.types[H]==="comment"){do{H=H-1;}while(H>0&&l.types[H]==="comment")}if(l.token[H]==="x}"){if(l.token[r.count]==="else"){if(l.stack[r.count-1]!=="if"&&l.types[r.count-1]!=="comment"&&l.stack[r.count-1]!=="else"){V.pop();r.splice({data:l,howmany:0,index:r.count-1,record:{begin:l.begin[l.begin[l.begin[r.count-1]-1]-1],ender:-1,lexer:"script",lines:0,stack:"if",token:f.script.correct===true?"}":"x}",types:"end"}});if(r.structure.length>1){r.structure.splice(r.structure.length-2,1);r.structure[r.structure.length-1][1]=r.count;}}else if(l.token[r.count-2]==="x}"&&m[0]!=="if"&&l.stack[r.count]==="else"){_();}else if(l.token[r.count-2]==="}"&&l.stack[r.count-2]==="if"&&m[0]==="if"&&l.token[m[1]-1]!=="if"&&l.token[l.begin[r.count-1]]==="x{"){_();}}else if(l.token[r.count]==="x}"&&l.stack[r.count]==="if"){_();}}if(w!=="if"&&w.charAt(0)!=="{"){b=f.script.correct===true?"{":"x{";e="start";V.push("x{");Y("else");}}if((S==="for"||S==="if"||S==="switch"||S==="catch")&&l.token[r.count-1]!=="."){w=C(1,true);if(w!=="("){X=r.count;if(f.script.correct===true){he("(");}else {he("x(");}}}}do{if(/\s/.test(p[i])){if(t>-1)z();i=r.spacer({array:p,end:v,index:i});if(r.linesSpace>1&&b!==";"&&g<r.count&&p[i+1]!=="}"){x(false);g=r.count;}}else if(p[i]==="{"&&p[i+1]==="%"){T("{%","%}","template");}else if(p[i]==="{"&&p[i+1]==="{"){T("{{","}}","template");}else if(p[i]==="<"&&p[i+1]==="!"&&p[i+2]==="-"&&p[i+3]==="-"){T("<!--","-->","comment");}else if(p[i]==="<"){fe();}else if(p[i]==="/"&&(i===v-1||p[i+1]==="*")){q();}else if((r.count<0||l.lines[r.count]>0)&&p[i]==="#"&&p[i+1]==="!"&&(p[i+2]==="/"||p[i+2]==="[")){T("#!"+p[i+2],"\n","string");}else if(p[i]==="/"&&(i===v-1||p[i+1]==="/")){se();}else if(p[i]==="`"||p[i]==="}"&&r.structure[r.structure.length-1][0]==="template_string"){if(t>-1)z();b=xe();if(b.charAt(0)==="}"&&b.slice(b.length-2)==="${"){e="template_string_else";Y("template_string");}else if(b.slice(b.length-2)==="${"){e="template_string_start";Y("template_string");}else if(b.charAt(0)==="}"){e="template_string_end";Y("");}else {e="string";Y("");}}else if(p[i]==='"'||p[i]==="'"){T(p[i],p[i],"string");}else if(p[i]==="-"&&(i<v-1&&p[i+1]!=="="&&p[i+1]!=="-")&&(e==="number"||e==="word"||e==="reference")&&b!=="return"&&(b===")"||b==="]"||e==="word"||e==="reference"||e==="number")){if(t>-1)z();b="-";e="operator";Y("");}else if(t===-1&&(p[i]!=="0"||p[i]==="0"&&p[i+1]!=="b")&&(/\d/.test(p[i])||i!==v-2&&p[i]==="-"&&p[i+1]==="."&&/\d/.test(p[i+2])||i!==v-1&&(p[i]==="-"||p[i]===".")&&/\d/.test(p[i+1]))){if(t>-1)z();if(e==="end"&&p[i]==="-"){b="-";e="operator";}else {b=ne();e="number";}Y("");}else if(p[i]===":"&&p[i+1]===":"){if(t>-1)z();if(f.script.correct===true)M();I();i=i+1;b="::";e="separator";Y("");}else if(p[i]===","){if(t>-1)z();if(f.script.correct===true)M();if(h[h.length-1]===true&&l.stack[r.count].indexOf("type")<0){h[h.length-1]=false;}if(e==="comment"){E();}else if(O.len>-1&&O.count[O.len]===0&&f.script.variableList==="each"){I();b=";";e="separator";Y("");b=O.word[O.len];e="word";Y("");O.index[O.len]=r.count;}else {b=",";e="separator";I();Y("");}}else if(p[i]==="."){if(t>-1)z();h[h.length-1]=false;if(p[i+1]==="."&&p[i+2]==="."){b="...";e="operator";i=i+2;}else {I();b=".";e="separator";}if(/\s/.test(p[i-1])===true)r.linesSpace=1;Y("");}else if(p[i]===";"){if(t>-1)z();if(h[h.length-1]===true&&l.stack[r.count].indexOf("type")<0){h[h.length-1]=false;}if(D[D.length-1]===0)D.pop();if(O.len>-1&&O.count[O.len]===0){if(f.script.variableList==="each"){we();}else {O.index[O.len]=r.count+1;}}if(f.script.correct===true)M();b=";";e="separator";if(l.token[r.count]==="x}"){y();}else {Y("");}P();}else if(p[i]==="("||p[i]==="["||p[i]==="{"){he(p[i]);}else if(p[i]===")"||p[i]==="]"||p[i]==="}"){Q(p[i]);}else if(p[i]==="*"&&l.stack[r.count]==="object"&&t<0&&/\s/.test(p[i+1])===false&&p[i+1]!=="="&&/\d/.test(p[i+1])===false){t=i;}else if(p[i]==="="||p[i]==="&"||p[i]==="<"||p[i]===">"||p[i]==="+"||p[i]==="-"||p[i]==="*"||p[i]==="/"||p[i]==="!"||p[i]==="?"||p[i]==="|"||p[i]==="^"||p[i]===":"||p[i]==="%"||p[i]==="~"){b=G();if(b==="regex"){b=l.token[r.count];}else if(b==="*"&&l.token[r.count]==="function"){l.token[r.count]="function*";}else {e="operator";if(b!=="!"&&b!=="++"&&b!=="--")I();Y("");}}else if(t<0&&p[i]!==""){t=i;}if(O.len>-1&&r.count===O.index[O.len]+1&&l.token[O.index[O.len]]===";"&&b!==O.word[O.len]&&e!=="comment"&&f.script.variableList==="list"){we();}i=i+1;}while(i<v);if(t>-1)z();if((l.token[r.count]!=="}"&&l.token[0]==="{"||l.token[0]!=="{")&&(l.token[r.count]!=="]"&&l.token[0]==="["||l.token[0]!=="[")){x(false);}if(o[0]===r.count){b="\n"+o[1];e="string";Y("");}if(l.token[r.count]==="x;"&&(l.token[r.count-1]==="}"||l.token[r.count-1]==="]")&&l.begin[r.count-1]===0){r.pop(l);}return l};F.lexers.markup=function s(c){const{options:f}=F;const{data:i}=r;const b=f.markup.attributeSortList.length;const e=ie(null);e.end=0;e.index=-1;e.start=0;const a=c.split("");const g=a.length;let t=0;const X=0;let $=false;let n="javascript";let m="html";let W=false;function l(x){const y=x.indexOf("{");const I=L(x[y+2],45)?x.slice(y+3).trimStart():x.slice(y+2).trimStart();return I.slice(0,I.search(/\s/))}function J(x){const y=x.indexOf("{");return L(x[y+1],123)}function v(x){const y=x.indexOf("{");if(L(x[y+1],37)){let I=L(x[y+2],45)?x.slice(y+3).trimStart():x.slice(y+2).trimStart();I=I.slice(0,I.search(/\s/));if(I.startsWith("end"))return false;return ge.liquid.tags.has(I)}return false}function p(x){let y=x;if(Array.isArray(x))y=x.join("");const I=y.indexOf("{");if(L(y[I+1],37)){if(L(y[I+2],45))return y.slice(I+3).trimStart().startsWith("end");return y.slice(I+2).trimStart().startsWith("end")}return false}function N(x,y){if(y===1){return L(x[0],123)&&(L(x[1],37)||L(x[1],123))}else if(y===2){return L(x[x.length-1],125)&&(L(x[x.length-2],37)||L(x[x.length-2],123))}else if(y===3){return L(x[0],123)&&(L(x[1],37)||L(x[1],123))&&(L(x[x.length-1],125)&&(L(x[x.length-2],37)||L(x[x.length-2],123)))}else if(y===4){return /{[{%}]/.test(x)}else if(y===5){return /{[{%]/.test(x)&&/[%}]}/.test(x)}}function V(x){if(f.language!=="xml"&&f.language!=="jsx"){const y=q=>q.replace(/\s*$/," ");const I=q=>q.replace(/^\s*/," ");if(/(?:{[=#/]|%[>\]])|\}%[>\]]/.test(x))return x;x=x.replace(/{[{%]-?\s*/g,y);x=x.replace(/\s*-?[%}]}/g,I);return x}return x}function D(x,y,I){if(x===i){if(y.types.indexOf("end")>-1){e.end=e.end+1;}else if(y.types.indexOf("start")>-1){e.start=e.start+1;}}r.push(x,y,I);}function o(x){let y=0;let I="";const q=/^(?:<|{%-?|{{-?)=?\s*/;if(typeof x!=="string")return "";y=x.replace(q,"%").replace(/\s+/," ").indexOf(" ");I=x.replace(q," ");I=y<0?I.slice(1,x.length-1):I.slice(1,y);if(m==="html")I=I.toLowerCase();I=I.replace(/-?[%}]}$/,"");if(I.indexOf("(")>0)I=I.slice(0,I.indexOf("("));if(I==="?xml?")return "xml";return I}function h(x,y){const I=o(x);const q=ie(null);q.begin=r.structure[r.structure.length-1][1];q.ender=-1;q.lexer="markup";q.lines=i.lines[r.count]>0?1:0;q.stack=r.structure[r.structure.length-1][0];q.token=`</${r.structure[r.structure.length-1][0]}>`;q.types="end";D(i,q,"");if(ge.html.tags.has(r.structure[r.structure.length-1][0])&&(y===true&&r.structure.length>1||y===false&&`/${r.structure[r.structure.length-1][0]}`!==I)){do{q.begin=r.structure[r.structure.length-1][1];q.stack=r.structure[r.structure.length-1][0];q.token=`</${r.structure[r.structure.length-1][0]}>`;D(i,q,"");}while(ge.html.tags.has(r.structure[r.structure.length-1][0])&&(y===true&&r.structure.length>1||y===false&&`/${r.structure[r.structure.length-1][0]}`!==I))}}function j(x){const y=ie(null);y.begin=r.structure[r.structure.length-1][1];y.ender=-1;y.lexer="markup";y.lines=r.linesSpace;y.stack=r.structure[r.structure.length-1][0];y.token="";y.types="";let I=0;let q="";let P="";let E="";let Q="";let T="";let se=false;let fe=false;let C=false;let ne=false;let G=false;let M=false;let Y=false;let B=[];let he=["",0];function xe(w){const k=w.indexOf("=");if(k>0&&(k<w.indexOf('"')&&w.indexOf('"')>0||k<w.indexOf("'")&&w.indexOf("'")>0)){return [w.slice(0,k),w.slice(k+1)]}return [w,""]}function Ae(){const w=r.count;const k=Q.replace(/(\/)$/,"");const R=f.markup.quoteConvert;let A=0;let _=0;let U=0;let ee="";let te="";let Z=[];let ue=B.length;function le(){if(C===true||R==="none"||y.types!=="attribute"||R==="single"&&y.token.indexOf('"')<0||R==="double"&&y.token.indexOf("'")<0){D(i,y,"");}else {let pe=0;let K=false;const re=y.token.split("");const be=y.token.indexOf("=");const oe=re.length-1;if(ae(re[be+1],34)&&ae(re[re.length-1],34)&&R==="single"){D(i,y,"");}else if(ae(re[be+1],39)&&ae(re[re.length-1],39)&&R==="double"){D(i,y,"");}else {pe=be+2;if(R==="double"){if(y.token.slice(be+2,oe).indexOf('"')>-1)K=true;re[be+1]='"';re[re.length-1]='"';}else {if(y.token.slice(be+2,oe).indexOf("'")>-1)K=true;re[be+1]="'";re[re.length-1]="'";}if(K===true){do{if(re[pe]==="'"&&R==="single"){re[pe]='"';}else if(re[pe]==='"'&&R==="double"){re[pe]="'";}pe=pe+1;}while(pe<oe)}y.token=re.join("");D(i,y,"");}}}function ce(pe,K){if(v(K)){const re=l(K);if(ge.liquid.tags.has(re)){y.types="template_attribute_start";y.stack=re;r.structure.push([y.stack,r.count]);}y.token=K;le();return}else if(p(K)){y.types="template_attribute_end";y.token=K;r.structure.pop();le();return}else if(N(pe,1)){y.types="template_attribute";}else if(L(pe[0],60)){y.types="template_attribute";}y.token=K;le();y.types="attribute";}if(B.length<1)return;if(L(B[B.length-1][0],45)){B.pop();q=q.replace(/>$/,"/>");}_=B.length;U=1;if(U<_){do{ee=B[U-1][0];if(ee.charAt(ee.length-1)==="="&&B[U][0].indexOf("=")<0){B[U-1][0]=ee+B[U][0];B.splice(U,1);_=_-1;U=U-1;}U=U+1;}while(U<_)}if(f.markup.attributeSort===true&&f.language!=="jsx"&&f.language!=="tsx"&&ne===false&&G===false){if(b>0){const pe=[];U=0;_=0;ue=B.length;do{_=0;do{ee=B[_][0].split("=")[0];if(f.markup.attributeSortList[U]===ee){pe.push(B[_]);B.splice(_,1);ue=ue-1;break}_=_+1;}while(_<ue);U=U+1;}while(U<b);B=r.safeSort(B,"",false);B=pe.concat(B);ue=B.length;}else {B=r.safeSort(B,"",false);}}y.begin=w;y.stack=k;y.types="attribute";Z=[];if(A<ue){do{if(B[A]===void 0)break;B[A][0]=B[A][0].replace(/\s+$/,"");y.lines=B[A][1];_=B[A][0].indexOf("=");U=B[A][0].indexOf('"');B[A][0].indexOf("'");if(/^\/(\/|\*)/.test(B[A][0])&&f.language==="jsx"){y.types="comment_attribute";y.token=B[A][0];le();}else if(_<0){if(N(B[A][0],5)){if(L(B[A][0][1],123)||J(B[A][0])){y.types="template_attribute";y.token=B[A][0];}else {if(p(B[A][0])){y.token=B[A][0];y.types="template_attribute_end";y.ender=y.begin;}else {const pe=l(B[A][0]);if(ge.liquid.tags.has(pe)){y.types="template_attribute_start";y.begin=r.count;y.token=B[A][0];}else if(ge.liquid.else.has(pe)){y.types="template_attribute_else";y.token=B[A][0];}}}D(i,y,"");}else {y.types="attribute";if(L(B[A][0],35)||L(B[A][0],91)||L(B[A][0],123)||L(B[A][0],40)||f.language==="jsx"||f.language==="tsx"){y.token=B[A][0];}else {y.token=B[A][0].toLowerCase();}le();}}else {ee=B[A][0].slice(0,_);te=B[A][0].slice(_+1);if(f.markup.correct&&(ae(te[0],60)||ae(te[0],123)||ae(te[0],61)||ae(te[0],34)||ae(te[0],39))){te='"'+te+'"';}if(f.language==="jsx"&&/^\s*\{/.test(te)){y.token=ee+"={";y.types="jsx_attribute_start";D(i,y,"jsx_attribute");F.lexers.script(te.slice(1,te.length-1));y.begin=r.count;if(/\s\}$/.test(te)){te=te.slice(0,te.length-1);te=/\s+$/.exec(te)[0];if(te.indexOf("\n")<0){y.lines=1;}else {y.lines=te.split("\n").length;}}else {y.lines=0;}y.begin=r.structure[r.structure.length-1][1];y.stack=r.structure[r.structure.length-1][0];y.token="}";y.types="jsx_attribute_end";le();y.types="attribute";y.begin=w;y.stack=k;}else if(N(ee,5)){ee=ee+"="+te;ce(te.replace(/^(["'])/,"").replace(/(["'])$/,""),ee.replace(/(\s+)$/,""));}else {y.types="attribute";if(L(B[A][0],35)||L(B[A][0],91)||L(B[A][0],123)||L(B[A][0],40)||f.language==="jsx"||f.language==="tsx"){y.token=B[A][0];}else {y.token=B[A][0].toLowerCase();}le();}}A=A+1;}while(A<ue)}if(Z.length>0){y.token=Z.join(" ");le();}}$=false;if(x==="---"){T="---";E="comment";}else if(L(a[t],60)){if(a[t+1]==="/"){x=">";E="end";}else if(a[t+1]==="!"){if((a[t+2]==="d"||a[t+2]==="D")&&(a[t+3]==="o"||a[t+3]==="O")&&(a[t+4]==="c"||a[t+4]==="C")&&(a[t+5]==="t"||a[t+5]==="T")&&(a[t+6]==="y"||a[t+6]==="Y")&&(a[t+7]==="p"||a[t+7]==="P")&&(a[t+8]==="e"||a[t+8]==="E")){x=">";E="doctype";M=true;}else if(a[t+2]==="-"&&a[t+3]==="-"){x="-->";E="comment";T="<!--";}else if(a[t+2]==="["&&a[t+3]==="C"&&a[t+4]==="D"&&a[t+5]==="A"&&a[t+6]==="T"&&a[t+7]==="A"&&a[t+8]==="["){x="]]>";E="cdata";M=true;}}else if(a[t+1]==="?"){x="?>";if(a[t+2]==="x"&&a[t+3]==="m"&&a[t+4]==="l"){E="xml";Y=true;}else {M=true;E="template";}}else if(L(a[t+1],37)){M=true;}else if((a[t+1]==="p"||a[t+1]==="P")&&(a[t+2]==="r"||a[t+2]==="R")&&(a[t+3]==="e"||a[t+3]==="E")&&(a[t+4]===">"||/\s/.test(a[t+4]))){x="</pre>";E="ignore";M=true;}else {Y=true;x=">";}}else if(L(a[t],123)){if(f.language==="jsx"){$=true;fe=true;y.token="{";y.types="script_start";r.structure.push(["script",r.count]);D(i,y,"");return}if(L(a[t+1],123)){M=true;x="}}";E="template";}else if(L(a[t+1],37)){M=true;x="%}";E="template";const w=a.indexOf("}",t+2);if(a[w-1].charCodeAt(0)===37){let k=a.slice(t+2,w-1).join("");if(k.charCodeAt(0)===45){T="{%-";k=k.slice(1).trimStart();}else {T="{%";k=k.trimStart();}if(k.charCodeAt(k.length-1)===45){x="-%}";k=k.slice(0,k.length-1).trimEnd();}else {x="%}";k=k.trimEnd();}if(k==="comment"){const R=c.indexOf("{%",w);let A=R;if(a[R+1].charCodeAt(0)===45)A=R+1;A=c.indexOf("endcomment",A);if(A>0){A=a.indexOf("}",A);if(A>0&&a[A-1].charCodeAt(0)===37){E="comment";T=a.slice(t,w+1).join("");x=a.slice(R,A+1).join("");}}}}else {M=true;x="%}";E="template";}}else {M=true;x=a[t+1]+"}";E="template";}}if(f.markup.preserveAttributes===true)M=true;if(fe)return;P=x.charAt(x.length-1);if(E==="comment"&&(L(a[t],60)||L(a[t],123)&&L(a[t+1],37))){he=r.wrapCommentBlock({chars:a,end:g,lexer:"markup",opening:T,start:t,terminator:x});q=he[0];t=he[1];if(q.replace(T,"").trimStart().indexOf("@prettify-ignore-start")===0){y.token=q;y.types="ignore";D(i,y,"");return}}else if(t<g){let re=function(){if(pe===false&&L(a[t-1],123)&&(L(a[t],123)||L(a[t],37))){return true}else if(pe===true&&L(a[t],125)&&(L(a[t-1],125)||L(a[t-1],37))){return false}return pe},be=function(){let ve=t;do{ve=ve-1;}while(a[ve]==="\\");ve=t-ve;return ve%2===1},oe=function(ve){let Ce;let de="";let Le=0;let qe=0;const Qe="data-prettify-ignore";if(ve===true){de=K.join("");Ce=xe(de);Z="";if(Ce[0]===Qe)C=true;}else {de=K.join("");if(f.language!=="jsx"||f.language==="jsx"&&de.charAt(de.length-1)!=="}"){de=de.replace(/\s+/g," ");}Ce=xe(de);if(Ce[0]===Qe)C=true;if(f.language==="jsx"&&K[0]==="{"&&K[K.length-1]==="}"){_=0;}}if(L(de[0],123)&&L(de[1],37))G=true;if(W===false&&v(de)){W=true;}else if(W===true&&p(de)){W=false;}de=de.replace(/^\u0020/,"").replace(/\u0020$/,"");K=de.replace(/\r\n/g,"\n").split("\n");qe=K.length;if(Le<qe){do{K[Le]=K[Le].replace(/(\s+)$/,"");Le=Le+1;}while(Le<qe)}de=K.join(f.crlf===true?"\r\n":"\n");de=V(de);if(W===true||L(de[0],123)&&(L(de[1],37)||L(de[1],123)));if(de==="="){B[B.length-1][0]=`${B[B.length-1][0]}=`;}else if(L(de[0],61)&&B.length>0&&B[B.length-1][0].indexOf("=")<0){B[B.length-1][0]=B[B.length-1][0]+de;}else if(ae(de[0],61)&&B.length>0&&B[B.length-1][0].indexOf("=")===B[B.length-1][0].length-1){B[B.length-1][0]=B[B.length-1][0]+de;}else if(de!==""&&de!==" "){B.push([de,te]);}if(B.length>0){const[We]=B[B.length-1];if(We.indexOf("=\u201C")>0){r.error=`Invalid quote character (\u201C, &#x201c) used on line number ${r.lineNumber}`;}else if(We.indexOf("=\u201D")>0){r.error=`Invalid quote character (\u201D, &#x201d) used on line number ${r.lineNumber}`;}}K=[];te=a[t]==="\n"?2:1;};const w=[];const k=[];let R=0;let _=0;let U=0;let H=0;let ee=0;let te=0;let Z="";let ue="";let le=false;let ce=false;let pe=false;let K=[];do{if(L(a[t],10)){te=te+1;r.lineNumber=r.lineNumber+1;}if(M===true||(me(a[t])===false&&ae(Z,125)||L(Z,125))){pe=re();k.push(a[t]);if(L(k[0],60)&&L(k[1],162)&&L(x,162)){y.token="<>";y.types="start";D(i,y,"(empty)");return}if(L(k[0],60)&&L(k[1],45)&&L(k[2],162)&&L(x,162)){y.token="</>";y.types="end";D(i,y,"");return}}if(E==="cdata"&&L(a[t],162)&&a[t-1]==="]"&&a[t-2]!=="]"){r.error=`CDATA tag (${k.join("")}) not properly terminated with "]]>"`;break}if(E==="comment"){Z="";if(a[t]===P&&k.length>x.length+1){H=k.length;U=x.length-1;if(U>-1){do{H=H-1;if(k[H]!==x.charAt(U))break;U=U-1;}while(U>-1)}if(U<0)break}}else {if(Z===""){if(L(k[0],60)&&L(k[1],33)&&E!=="cdata"){if(E==="doctype"&&L(a[t],162))break;if(a[t]==="["){if(L(a[t+1],60)){E="start";break}if(me(a[t+1])){do{t=t+1;if(a[t]==="\n"){te=te+1;}}while(t<g-1&&me(a[t+1]))}if(L(a[t+1],60)){E="start";break}}}if(f.language==="jsx"){if(L(a[t],123)){_=_+1;}else if(L(a[t],125)){_=_-1;}}if(L(a[t],60)&&M===false&&k.length>1&&x!==">>"&&x!==">>>"&&Y===true){r.error=`Parse error (line ${r.lineNumber}) on: ${k.join("")}`;}if(le===true&&me(a[t])===false&&a[t]!==P){le=false;Z=ue;I=0;k.pop();if(t<g){do{if(L(a[t],10))r.lineNumber=r.lineNumber+1;if(f.markup.preserveAttributes===true){k.push(a[t]);}else {K.push(a[t]);}if((f.language!=="jsx"||f.language!=="tsx")&&(L(a[t],60)||L(a[t],162))&&(Z===""||Z===">")){if(Z===""&&L(a[t],162)){Z=">";}else if(L(Z,162)){if(L(a[t],60));else if(a[t]===">");}}else if(Z===""){if(a[t+1]===P){if(L(K[K.length-1],45)||L(K[K.length-1],63)&&E==="xml"){K.pop();if(M===true)k.pop();t=t-1;}if(K.length>0)oe(false);break}if(M===false&&/^=?['"]?({{|{%|\/|\^|<)/.test(a[t]+a[t+1]+a[t+2]+a[t+3])){K.pop();if(K.length>0&&ae(a[t],61)&&ae(a[t],123)&&(ae(a[t+1],123)||ae(a[t+1],37))){oe(false);}Z="";do{K.push(a[t]);pe=re();if(a[t]===w[w.length-1]){w.pop();if(L(a[t],125)&&L(a[t+1],125)){K.push("}");t=t+1;}if(w.length<1){if(W===false&&L(a[t],125)&&ae(K[0],123)&&(ae(K[1],37)||ae(K[1],123))){oe(false);pe=!pe;break}if(W===true&&p(K)){if(me(a[t+1])){oe(false);break}else {t=t+1;break}}oe(false);a[t]=" ";break}}else if((L(a[t],34)||L(a[t],39))&&ae(w[w.length-1],34)&&ae(w[w.length-1],39)){w.push(a[t]);}else if(ae(w[w.length-1],125)&&L(a[t],123)&&(L(a[t+1],123)||L(a[t+1],37))){w.push("}");}else if(pe===false&&L(a[t],60)&&ae(w[w.length-1],162)){w.push(">");}t=t+1;}while(t<g)}else if(L(a[t],123)&&L(a[t-1],61)&&f.language!=="jsx"){Z="}";}else if(L(a[t],34)||L(a[t],39)){Z=a[t];if(L(a[t-1],61)&&(L(a[t+1],60)||L(a[t+1],123)&&L(a[t+2],37)||me(a[t+1])&&ae(a[t-1],61))){I=t;}}else if(L(a[t],40)){Z=")";ee=1;}else if(f.language==="jsx"){if((L(a[t-1],61)||me(a[t-1]))&&L(a[t],123)){Z="}";R=1;}else if(L(a[t],45)){if(a[t+1]==="*"){Z="*/";}else if(a[t+1]==="/"){Z="\n";}}}else if(L(k[0],123)&&L(a[t],123)&&(L(a[t+1],123)||L(a[t+1],37))){if(L(a[t+1],123)){Z="}}";}else {Z=a[t+1]+"}";}}if(me(a[t])&&Z===""){if(L(K[K.length-2],61)){U=t+1;if(U<g){do{if(me(a[U])===false){if(L(a[U],34)||L(a[U],39)){t=U-1;ce=true;K.pop();}break}U=U+1;}while(U<g)}}if(ce===true){ce=false;}else if(_===0||_===1&&L(K[0],123)){K.pop();oe(false);le=true;break}}}else if(L(a[t],40)&&L(Z,41)){ee=ee+1;}else if(L(a[t],41)&&L(Z,41)){ee=ee-1;if(ee===0){Z="";if(a[t+1]===x.charAt(0)){oe(false);break}}}else if(f.language==="jsx"&&(L(Z,125)||L(Z,10)&&L(a[t],10)||Z==="*/"&&L(a[t-1],42)&&L(a[t],45))){if(a[t]==="`"){t=t+1;do{K.push(a[t]);if(a[t]==="`")break;t=t+1;}while(t<a.length)}if(L(Z,125)){if(L(a[t],125)&&a[t]!==Z){R=R+1;}else if(a[t]===Z){R=R-1;if(R===0){_=0;Z="";q=K.join("");if(f.markup.preserveAttributes===false){if(f.language==="jsx"||f.language==="tsx"){if(/^\s*$/.test(q)===false)B.push([q,te]);}else {q=q.replace(/\s+/g," ");if(q!==" ")B.push([q,te]);}}K=[];te=1;break}}}else {ue="";ne=true;q=K.join("");if(q!==" ")B.push([q,te]);K=[];te=Z==="\n"?2:1;Z="";break}}else if(L(a[t],123)&&L(a[t+1],37)&&L(a[I-1],61)&&(L(Z,34)||L(Z,39))){Z=Z+"{%";I=0;}else if(L(a[t-1],37)&&L(a[t],125)&&(Z==='"{%'||Z==="'{%")){Z=Z.charAt(0);I=0;}else if(L(a[t],60)&&L(x,162)&&L(a[I-1],61)&&(L(Z,34)||L(Z,39))){Z=Z+"<";I=0;}else if(L(a[t],162)&&(Z==='"<'||Z==="'<")){Z=Z.charAt(0);I=0;}else if(I===0&&ae(Z,162)&&(Z.length<2||ae(Z[0],34)&&ae(Z[0],39))){H=0;if(k.length>1){Q=k[1]+k[2];Q=Q.toLowerCase();}U=Z.length-1;if(U>-1){do{if(a[t-H].charCodeAt(0)!==Z.charCodeAt(U))break;H=H+1;U=U-1;}while(U>-1)}if(U<0){oe(true);if(a[t+1]===P)break}}else if(I>0&&me(a[t])===false){I=0;}t=t+1;}while(t<g)}}else if(L(x,10)===false&&(L(a[t],34)||L(a[t],39))){Z=a[t];}else if(E!=="comment"&&L(x,10)===false&&L(a[t],60)&&L(a[t+1],33)&&L(a[t+2],45)&&L(a[t+3],45)&&i.types[r.count]!=="conditional"){Z="-->";}else if(L(a[t],123)&&ae(k[0],123)&&ae(x,10)&&(L(a[t+1],123)||L(a[t+1],37))){if(L(a[t+1],123)){Z="}}";}else {Z=a[t+1]+"}";if(K.length<1&&(B.length<1||me(a[t-1]))){k.pop();do{if(L(a[t],10))te=te+1;K.push(a[t]);t=t+1;}while(t<g&&a[t-1]+a[t]!==Z);K.push("}");B.push([K.join(""),te]);K=[];te=1;Z="";}}if(Z===x)Z="";}else if((Y===true||E==="sgml")&&ae(x,10)&&me(a[t])&&ae(a[t-1],60)){if(E==="sgml"){k.push(" ");}else {le=true;}}else if(Y===true&&f.language==="jsx"&&L(a[t],45)&&(L(a[t+1],42)||L(a[t+1],45))){le=true;k[k.length-1]=" ";K.push(a[t]);if(L(a[t+1],42)){ue="*/";}else {ue="\n";}}else if((a[t]===P||L(x,10)&&L(a[t+1],60))&&(k.length>x.length+1||k[0]==="]")&&(f.language!=="jsx"||_===0)){if(L(x,10)){if(me(k[k.length-1])){do{k.pop();t=t-1;}while(me(k[k.length-1]))}break}H=k.length;U=x.length-1;if(U>-1){do{H=H-1;if(k[H]!==x.charAt(U))break;U=U-1;}while(U>-1)}if(U<0)break}}else if(a[t].charCodeAt(0)===Z.charCodeAt(Z.length-1)&&(f.language==="jsx"&&L(x,125)&&(a[t-1]!=="\\"||be()===false)||f.language!=="jsx"||ae(x,125))){H=0;if(k.length>1){Q=k[1]+k[2];Q=Q.toLowerCase();}U=Z.length-1;if(U>-1){do{if(a[t-H]!==Z.charAt(U))break;H=H+1;U=U-1;}while(U>-1)}if(U<0)Z="";}}t=t+1;}while(t<g);if(f.markup.correct===true){if(L(a[t+1],162)&&L(k[0],60)&&ae(k[0],60)){do{t=t+1;}while(L(a[t+1],162))}else if(L(k[0],60)&&L(k[1],60)&&ae(a[t+1],162)&&ae(k[k.length-2],162)){do{k.splice(1,1);}while(k[1]==="<")}}I=0;q=k.join("");Q=o(q);q=V(q);if(Q==="xml"){m="xml";}else if(m===""&&Q==="html"){m="html";}else if(m==="liquid"){m="html";}}y.token=q;y.types=E;Q=o(q);if(M===false&&f.language!=="jsx")q=q.replace(/\s+/g," ");if(Q==="comment"&&N(q,2)){let U=function(ee){A=ee===""?0:ee.split("\n").length;return ""},H=function(ee){_=ee===""?0:ee.split("\n").length;return ""};const w=q.slice(0,q.indexOf("%}")+2);const k=q.slice(q.indexOf("%}")+2,q.lastIndexOf("{%"));const R=q.slice(q.lastIndexOf("{%"));let A=0;let _=0;y.begin=r.structure[r.structure.length-1][1];y.ender=r.count+3;y.stack=r.structure[r.structure.length-1][0];y.types="template_start";y.token=w;D(i,y,"comment");q=k.replace(/^\s*/,U);q=q.replace(/\s*$/,H);y.begin=r.count;y.lines=A;y.stack="comment";y.token=q;y.types="comment";D(i,y,"");y.types="template_end";y.stack="comment";y.lines=_;y.token=R;D(i,y,"");return}y.types=E;se=(()=>{const w=/(\/>)$/;function k(A,_){if(!ge.html.tags.has(A))return false;if(A===_)return true;if(A==="dd"&&_==="dt")return true;if(A==="dt"&&_==="dd")return true;if(A==="td"&&_==="th")return true;if(A==="th"&&_==="td")return true;if(A==="colgroup"&&(_==="tbody"||_==="tfoot"||_==="thead"||_==="tr"))return true;if(A==="tbody"&&(_==="colgroup"||_==="tfoot"||_==="thead"))return true;if(A==="tfoot"&&(_==="colgroup"||_==="tbody"||_==="thead"))return true;if(A==="thead"&&(_==="colgroup"||_==="tbody"||_==="tfoot"))return true;if(A==="tr"&&_==="colgroup")return true;return false}function R(A){y.lines=i.lines[r.count]>0?1:0;y.token=`</${r.structure[r.structure.length-1][0]}>`;y.types="end";D(i,y,"");if(A>0){do{y.begin=r.structure[r.structure.length-1][1];y.stack=r.structure[r.structure.length-1][0];y.token=`</${r.structure[r.structure.length-1][0]}>`;D(i,y,"");A=A-1;}while(A>0)}y.begin=r.structure[r.structure.length-1][1];y.lines=r.linesSpace;y.stack=r.structure[r.structure.length-1][0];y.token=q;y.types="end";i.lines[r.count-1]=0;}if(E==="end"){const A=i.token[r.count];if(i.types[r.count-1]==="singleton"&&A.charCodeAt(A.length-2)!==45&&"/"+o(A)===Q){i.types[r.count-1]="start";}}if(m==="html"){if(L(q[0],60)&&ae(q[1],33)&&ae(q[1],63)&&(r.count<0||i.types[r.count].indexOf("template")<0)){q=q.toLowerCase();}if(ge.html.tags.has(r.structure[r.structure.length-1][0])&&k(Q.slice(1),r.structure[r.structure.length-2][0])){R(0);}else if(r.structure.length>3&&ge.html.tags.has(r.structure[r.structure.length-1][0])&&ge.html.tags.has(r.structure[r.structure.length-2][0])&&ge.html.tags.has(r.structure[r.structure.length-3][0])&&k(Q,r.structure[r.structure.length-4][0])===true){R(3);}else if(r.structure.length>2&&ge.html.tags.has(r.structure[r.structure.length-1][0])&&ge.html.tags.has(r.structure[r.structure.length-2][0])&&k(Q,r.structure[r.structure.length-3][0])===true){R(2);}else if(r.structure.length>1&&ge.html.tags.has(r.structure[r.structure.length-1][0])&&k(Q,r.structure[r.structure.length-2][0])===true){R(1);}else if(k(Q,r.structure[r.structure.length-1][0])===true){R(0);}else if(L(Q[0],45)&&ge.html.tags.has(r.structure[r.structure.length-1][0])&&r.structure[r.structure.length-1][0]!==Q.slice(1)){h(q,false);y.begin=r.structure[r.structure.length-1][1];y.lines=r.linesSpace;y.stack=r.structure[r.structure.length-1][0];y.token=q;y.types="end";i.lines[r.count-1]=0;}if(ge.html.voids.has(Q)){if(f.markup.correct===true&&w.test(q)===false){q=q.slice(0,q.length-1)+" />";}return true}}return false})();if(/\bscript|style\b/.test(Q)&&q.slice(q.length-2)!=="/>"||/\bschema|style|stylesheet|javascript\b/.test(Q)&&q.slice(q.length-2)==="%}"){const w=N(q,3);let k=B.length-1;let R="";let A=[];if(k>-1){do{A=xe(B[k][0]);if(A[0]==="type"){R=A[1];if(R.charCodeAt(0)===34||R.charCodeAt(0)===39){R=R.slice(1,R.length-1);}break}k=k-1;}while(k>-1)}if(w===false&&Q==="script"){$=true;if(R===""||R==="text/javascript"||R==="babel"||R==="module"||R==="application/javascript"||R==="application/x-javascript"||R==="text/ecmascript"||R==="application/ecmascript"||R==="text/cjs"){n="javascript";}else if(R==="text/jsx"||R==="application/jsx"){n="jsx";}else if(R==="application/json"||R==="application/ld+json"){n="json";}}else if(Q==="style"&&f.language!=="jsx"&&(R===""||R==="text/css")){$=true;n="css";}else if(w===true){$=true;if(Q==="javascript"){n="javascript";}else if(Q==="style"||Q==="stylesheet"){n="javascript";}else if(Q==="schema"){n="json";}}if($===true){k=t+1;if(k<g){do{if(me(a[k])===false){if(L(a[k],60)){if(a.slice(k+1,k+4).join("")==="!--"){k=k+4;if(k<g){do{if(me(a[k])===false){$=false;break}if(a[k]==="\n"||a[k]==="\r")break;k=k+1;}while(k<g)}}else {$=false;}}break}k=k+1;}while(k<g)}}}if(Y&&C===false&&E!=="xml"){if(se===true||q.slice(q.length-2)==="/>"){E="singleton";}else {E="start";}y.types=E;}if(Y&&M===false&&C&&L(x,162)&&q.slice(q.length-2)!=="/>"){const w=[];const k=[];if(se===true){E="singleton";}else {B.forEach(R=>k.push(R[0]));M=true;E="ignore";t=t+1;if(t<g){let R="";let A=0;let _=0;let U=false;do{if(L(a[t],10))r.lineNumber=r.lineNumber+1;w.push(a[t]);if(R===""){if(L(a[t],34)){R='"';}else if(L(a[t],39)){R="'";}else if(ae(w[0],123)&&L(a[t],123)&&(L(a[t+1],123)||L(a[t+1],37))){if(L(a[t+1],123)){R="}}";}else {R=a[t+1]+"}";}}else if(L(a[t],60)&&Y===true){if(L(a[t+1],45)){U=true;}else {U=false;}}else if(a[t]===P&&ae(a[t-1],45)){if(U===true){I=I-1;if(I<0)break}else {I=I+1;}}}else if(L(a[t],R.charCodeAt(R.length-1))){_=0;A=R.length-1;if(A>-1){do{if(ae(a[t-_],R.charCodeAt(A)))break;_=_+1;A=A-1;}while(A>-1)}if(A<0)R="";}t=t+1;}while(t<g)}}q=q+w.join("");q=q.replace(">",` ${k.join(" ")}>`);y.token=q;y.types="content-ignore";B=[];}if(y.types.indexOf("template")>-1){if(L(q[0],123)&&L(q[1],37)){if((Q==="case"||Q==="default")&&(r.structure[r.structure.length-1][0]==="switch"||r.structure[r.structure.length-1][0]==="case")){y.types="template_else";}else if(Q==="else"||Q==="when"||Q==="elsif"){y.types="template_else";}else {if(ge.liquid.tags.has(Q)){y.types="template_start";}else if(Q[0]==="e"&&Q[1]==="n"&&Q[2]==="d"&&ge.liquid.tags.has(Q.slice(3))){y.types="template_end";}else if(Q[0]==="e"&&Q[1]==="n"&&Q[2]==="d"){y.types="template_end";y.stack=Q.slice(3);let w=0;do{if(i.types[w]==="template"&&i.stack[w]===y.stack){i.types[w]="template_start";e.start=e.start+1;break}else {w=i.stack.indexOf(y.stack,w+1);}}while(w>-1)}else {y.stack=Q;}}}else if(y.types==="template"){if(q.indexOf("else")>2)y.types="template_else";}if(y.types==="template_start"||y.types==="template_else"){if(Q===""||Q==="%"){Q=Q+q.slice(1).replace(Q,"").replace(/^\s+/,"");Q=Q.slice(0,Q.indexOf("(")).replace(/\s+/,"");}}}if(E==="cdata"&&(y.stack==="script"||y.stack==="style")){let w=r.count;let k=r.count;const R=y.stack;if(i.types[k]==="attribute"){do{w=w-1;k=k-1;}while(i.types[k]==="attribute"&&k>-1)}y.begin=w;y.token="<![CDATA[";y.types="cdata_start";q=q.replace(/^(\s*<!\[cdata\[)/i,"").replace(/(\]\]>\s*)$/,"");D(i,y,"");r.structure.push(["cdata",r.count]);if(R==="script"){F.lexers.script(q);}else {F.lexers.style(q);}y.begin=r.structure[r.structure.length-1][1];y.token="]]>";y.types="cdata_end";D(i,y,"");r.structure.pop();}else {D(i,y,Q);}Ae();if(f.wrap>0&&f.language==="jsx"){let w=0;let k=r.count;let R=0;if(i.types[k].indexOf("attribute")>-1){do{w=w+i.token[k].length+1;k=k-1;}while(i.lexer[k]!=="markup"||i.types[k].indexOf("attribute")>-1);if(i.lines[k]===1)w=w+i.token[k].length+1;}else if(i.lines[k]===1){w=i.token[k].length+1;}R=k-1;if(w>0&&i.types[R]!=="script_end"){if(i.types[R].indexOf("attribute")>-1){do{w=w+i.token[R].length+1;R=R-1;}while(i.lexer[R]!=="markup"||i.types[R].indexOf("attribute")>-1);if(i.lines[R]===1)w=w+i.token[R].length+1;}else if(i.lines[R]===1){w=i.token[R].length+1;}}}r.linesSpace=0;}function O(){let x="";let y=r.linesSpace;let I="";const q=[];const P=i.token[r.count]==="{";const E=t;if($===true){if(P===true){I="script";}else if(r.structure[r.structure.length-1][1]>-1){I=o(i.token[r.structure[r.structure.length-1][1]].toLowerCase());}else if(i.begin[r.count]>1){I=o(i.token[i.begin[r.count]].toLowerCase());}else {I=o(i.token[i.begin[r.count]].toLowerCase());}}const Q=i.types[r.count]==="template_start"&&i.token[r.count].indexOf("<!")===0&&i.token[r.count].indexOf("<![")<0&&i.token[r.count].charAt(i.token[r.count].length-1)==="[";const T=ie(null);T.begin=r.structure[r.structure.length-1][1];T.ender=-1;T.lexer="markup";T.lines=y;T.stack=r.structure[r.structure.length-1][0];T.token="";T.types="content";function se(){let C=t-1;let ne=0;if(a[t-1]!=="\\")return false;if(C>-1){do{if(a[C]!=="\\")break;ne=ne+1;C=C-1;}while(C>-1)}return ne%2===1}if(t<g){let C="";let ne="";let G=0;do{if(a[t]==="\n")r.lineNumber=r.lineNumber+1;if($===true){if(ne===""){if(a[t]==="/"){if(a[t+1]==="*"){ne="*";}else if(a[t+1]==="/"){ne="/";}else if(I==="script"&&"([{!=,;.?:&<>".indexOf(a[t-1])>-1){if(f.language!=="jsx"||a[t-1]!=="<")ne="reg";}}else if((a[t]==='"'||a[t]==="'"||a[t]==="`")&&se()===false){ne=a[t];}else if(a[t]==="{"&&P===true){G=G+1;}else if(a[t]==="}"&&P===true){if(G===0){F.lexers.script(q.join("").replace(/^(\s+)/,"").replace(/(\s+)$/,""));r.structure[r.structure.length-1][1]+=1;if(i.types[r.count]==="end"&&i.lexer[i.begin[r.count]-1]==="script"){T.lexer="script";T.token=f.markup.correct===true?";":"x;";T.types="separator";D(i,T,"");T.lexer="markup";}T.token="}";T.types="script_end";D(i,T,"");r.structure.pop();break}G=G-1;}if(N(i.token[r.count],3)===false){C=a.slice(t,t+10).join("").toLowerCase();if(I==="script"){C=t===g-9?C.slice(0,C.length-1):C.slice(0,C.length-2);if(C==="<\/script"){let M=q.join("").replace(/^(\s+)/,"").replace(/(\s+)$/,"");t=t-1;if(q.length<1)break;if(/^<!--+/.test(M)&&/--+>$/.test(M)){T.token="<!--";T.types="comment";D(i,T,"");M=M.replace(/^<!--+/,"").replace(/--+>$/,"");F.lexers.script(M);T.token="-->";D(i,T,"");}else {const Y=F.options.language;F.options.language=n;F.lexers.script(M);if(n==="json"&&f[n].objectSort===true||n!=="json"&&f.script.objectSort===true){r.sortCorrection(0,r.count+1);}F.options.language=Y;}break}}if(I==="style"){if(t===g-8){C=C.slice(0,C.length-1);}else if(t===g-9){C=C.slice(0,C.length-2);}else {C=C.slice(0,C.length-3);}if(C==="</style"){let M=q.join("").replace(/^(\s+)/,"").replace(/(\s+)$/,"");t=t-1;if(q.length<1)break;if(/^<!--+/.test(M)&&/--+>$/.test(M)){T.token="<!--";T.types="comment";D(i,T,"");M=M.replace(/^<!--+/,"").replace(/--+>$/,"");F.lexers.style(M);T.token="-->";D(i,T,"");}else {const Y=F.options.language;F.options.language=n;F.lexers.style(M);if(f.style.sortProperties===true)r.sortCorrection(0,r.count+1);F.options.language=Y;}break}}}else {if(I==="schema"){C=a.slice(t+3,t+14).join("").toLowerCase();if(t===g-12){C=C.slice(0,C.length-3);}else {C=C.slice(0,C.length-2);}if(C==="endschema"){let M=q.join("").replace(/^(\s+)/,"").replace(/(\s+)$/,"");t=t-1;if(q.length<1)break;if(/^<!--+/.test(M)&&/--+>$/.test(M)){T.token="<!--";T.types="comment";D(i,T,"");M=M.replace(/^<!--+/,"").replace(/--+>$/,"");F.lexers.script(M);T.token="-->";D(i,T,"");}else {F.options.language="json";F.lexers.script(M);if(f.json.objectSort===true)r.sortCorrection(0,r.count+1);F.options.language="liquid";}break}}else if(I==="style"){C=a.slice(t+4,t+14).join("").toLowerCase();if(t===g-14){C=C.slice(0,C.length-4);}else if(t===g-13){C=C.slice(0,C.length-3);}else {C=C.slice(0,C.length-2);}if(C==="endstyle"){let M=q.join("").replace(/^(\s+)/,"").replace(/(\s+)$/,"");t=t-1;if(q.length<1)break;if(/^<!--+/.test(M)&&/--+>$/.test(M)){T.token="<!--";T.types="comment";D(i,T,"");M=M.replace(/^<!--+/,"").replace(/--+>$/,"");F.lexers.style(M);T.token="-->";D(i,T,"");}else {F.lexers.style(M);}break}}else if(I==="javascript"){C=a.slice(t+4,t+19).join("").toLowerCase();if(t===g-19){C=C.slice(0,C.length-4);}else if(t===g-18){C=C.slice(0,C.length-3);}else {C=C.slice(0,C.length-2);}if(C==="endjavascript"){let M=q.join("").replace(/^(\s+)/,"").replace(/(\s+)$/,"");t=t-1;if(q.length<1)break;if(/^<!--+/.test(M)&&/--+>$/.test(M)){T.token="<!--";T.types="comment";D(i,T,"");M=M.replace(/^<!--+/,"").replace(/--+>$/,"");F.lexers.script(M);T.token="-->";D(i,T,"");}else {F.lexers.script(M);if(f.script.objectSort===true){r.sortCorrection(0,r.count+1);}}break}}}}else if(ne===a[t]&&(ne==='"'||ne==="'"||ne==="`"||ne==="*"&&a[t+1]==="/")&&se()===false){ne="";}else if(ne==="`"&&a[t]==="$"&&a[t+1]==="{"&&se()===false){ne="}";}else if(ne==="}"&&a[t]==="}"&&se()===false){ne="`";}else if(ne==="/"&&(a[t]==="\n"||a[t]==="\r")){ne="";}else if(ne==="reg"&&a[t]==="/"&&se()===false){ne="";}else if(ne==="/"&&a[t]===">"&&a[t-1]==="-"&&a[t-2]==="-"){C=a.slice(t+1,t+11).join("").toLowerCase();C=C.slice(0,C.length-2);if(I==="script"&&C==="<\/script")ne="";C=C.slice(0,C.length-1);if(I==="style"&&C==="</style")ne="";}}if(Q===true&&a[t]==="]"){t=t-1;x=q.join("");x=x.replace(/\s+$/,"");y=0;T.token=x;D(i,T,"");break}if($===false&&q.length>0&&(a[t]==="<"&&a[t+1]!=="="&&!/\s|\d/.test(a[t+1])||a[t]==="["&&a[t+1]==="%"||a[t]==="{"&&(f.language==="jsx"||a[t+1]==="{"||a[t+1]==="%"))){t=t-1;if(r.structure[r.structure.length-1][0]==="comment"){x=q.join("");}else {x=q.join("").replace(/\s+$/,"");}x=V(x);y=0;T.token=x;if(f.wrap>0&&f.markup.preserveText!==true){let Ae=function(){if(x.charAt(M)===" "){xe.push(x.slice(0,M));x=x.slice(M+1);Y=x.length;M=he;return}do{M=M-1;}while(M>0&&x.charAt(M)!==" ");if(M>0){xe.push(x.slice(0,M));x=x.slice(M+1);Y=x.length;M=he;}else {M=he;do{M=M+1;}while(M<Y&&x.charAt(M)!==" ");xe.push(x.slice(0,M));x=x.slice(M+1);Y=x.length;M=he;}};let M=f.wrap;let Y=x.length;const ye="";const B="";const he=f.wrap;const xe=[];if(i.token[i.begin[r.count]]==="<a>"&&i.token[i.begin[i.begin[r.count]]]==="<li>"&&i.lines[i.begin[r.count]]===0&&r.linesSpace===0&&x.length<f.wrap){D(i,T,"");break}if(Y<he){D(i,T,"");break}if(r.linesSpace<1){let we=r.count;do{M=M-i.token[we].length;if(i.types[we].indexOf("attribute")>-1)M=M-1;if(i.lines[we]>0&&i.types[we].indexOf("attribute")<0)break;we=we-1;}while(we>0&&M>0);if(M<1)M=x.indexOf(" ");}x=q.join("");x=x.replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ");do{Ae();}while(M<Y);if(x!==""&&x!==" ")xe.push(x);x=f.crlf===true?xe.join("\r\n"):xe.join("\n");x=ye+x+B;}y=0;T.token=x;D(i,T,"");break}q.push(a[t]);t=t+1;}while(t<g)}if(t>E&&t<g){if(/\s/.test(a[t])===true){let C=t;r.linesSpace=1;do{if(a[C]==="\n")r.linesSpace=r.linesSpace+1;C=C-1;}while(C>E&&/\s/.test(a[C])===true)}else {r.linesSpace=0;}}else if(t!==E||t===E&&$===false){x=q.join("").replace(/\s+$/,"");y=0;if(T.token!==x){T.token=x;D(i,T,"");r.linesSpace=0;}}$=false;}if(b>0){do{f.markup.attributeSortList[t]=f.markup.attributeSortList[t].replace(/^\s+/,"").replace(/\s+$/,"");t=t+1;}while(t<b);t=0;}if(f.language==="html"||f.language==="liquid")m="html";do{if(/\s/.test(a[t])){if(i.types[r.count]==="template_start"&&r.structure[r.structure.length-1][0]==="comment"){O();}else {t=r.spacer({array:a,end:g,index:t});}}else if($){O();}else if(a[t]==="<"){j("");}else if(a[t]==="["&&a[t+1]==="%"){j("%]");}else if(a[t]==="{"&&(f.language==="jsx"||a[t+1]==="{"||a[t+1]==="%")){j("");}else if(a[t]==="]"&&X>0){j("]>");}else if(a[t]==="-"&&a[t+1]==="-"&&a[t+2]==="-"){j("---");}else {O();}t=t+1;}while(t<g);if(i.token[r.count].charAt(0)!=="/"&&ge.html.tags.has(r.structure[r.structure.length-1][0])){h(i.token[r.count],true);}if(e.end!==e.start&&r.error===""){if(e.end>e.start){const x=e.end-e.start;const y=x===1?"":"s";r.error=`\u2716 Prettify Parse Error:

  ${x} more end type${y} than start types.

`;}else {const x=e.start-e.end;const y=x===1?"":"s";r.error=` \u2716 Prettify Parse Error:

  ${x} more start type${y} than end types.

`;}}return i};F.beautify.markup=s=>{const c=ie(null);const f=ie(null);const i=ie(null);const b="markup";const e=F.parsed;const a=s.crlf===true?String.fromCharCode(13,10):String.fromCharCode(10);const g=F.end<1||F.end>e.token.length?e.token.length:F.end+1;c.is=(l,J)=>e.types[l]===J;c.not=(l,J)=>e.types[l]!==J;c.idx=(l,J)=>l>-1&&e.types[l].indexOf(J);f.is=(l,J)=>e.token[l]===J;f.not=(l,J)=>e.token[l]!==J;let t=F.start;let X=-1;let $=0;let n=0;let m=isNaN(s.indentLevel)?0:Number(s.indentLevel);const W=(()=>{const l=F.start>0?Array(F.start).fill(0,0,F.start):[];function J(){let o=t+1;let h=0;if(c.is(o,void 0))return o-1;if(c.is(o,"comment")||t<g-1&&c.idx(o,"attribute")>-1){do{if(c.is(o,"jsx_attribute_start")){h=o;do{if(c.is(o,"jsx_attribute_end")&&e.begin[o]===h)break;o=o+1;}while(o<g)}else if(c.not(o,"comment")&&c.idx(o,"attribute")<0)return o;o=o+1;}while(o<g)}return o}function v(){const o=e.begin[t];let h=t;do{h=h-1;if(f.is(h,"</li>")&&f.is(h-1,"</a>")&&e.begin[e.begin[h]]===o&&e.begin[h-1]===e.begin[h]+1){h=e.begin[h];}else {return}}while(h>o+1);h=t;do{h=h-1;if(c.is(h+1,"attribute")){l[h]=-10;}else if(f.not(h,"</li>")){l[h]=-20;}}while(h>o+1)}function p(){let o=t;let h=false;if(e.lines[t+1]===0&&s.markup.forceIndent===false){do{if(e.lines[o]>0){h=true;break}o=o-1;}while(o>X);o=t;}else {h=true;}if(h===true){const j=c.is($,"comment")||c.is($,"end")||c.is($,"template_end")?m+1:m;do{l.push(j);o=o-1;}while(o>X);if(j===m+1)l[t]=m;if(c.is(o,"attribute")||c.is(o,"template_attribute")||c.is(o,"jsx_attribute_start")){l[e.begin[o]]=j;}else {l[o]=j;}}else {do{l.push(-20);o=o-1;}while(o>X);l[o]=-20;}X=-1;}function N(){let o=m;if(s.markup.forceIndent===true||s.markup.forceAttribute===true){l.push(m);return}if($<g&&(c.idx($,"end")>-1||c.idx($,"start")>-1)&&e.lines[$]>0){l.push(m);o=o+1;if(e.types[t]==="singleton"&&t>0&&c.idx(t-1,"attribute")>-1&&c.is(e.begin[t-1],"singleton")){if(e.begin[t]<0||c.is(e.begin[t-1],"singleton")&&e.begin[e.ender[t]-1]!==t){l[t-1]=m;}else {l[t-1]=m+1;}}}else if(t>0&&c.is(t,"singleton")&&c.idx(t-1,"attribute")>-1){l[t-1]=m;n=e.token[t].length;l.push(-10);}else if(e.lines[$]===0){l.push(-20);}else if((s.wrap===0||t<g-2&&c.idx(t+2,"attribute")>-1&&e.token[t].length+e.token[t+1].length>s.wrap||(e.token[t].length+e.token[t+1]?e.token[t+1].length:0)>s.wrap)&&(c.is(t+1,"singleton")||c.is(t+1,"template"))){l.push(m);}else {n=n+1;l.push(-10);}if(t>0&&c.idx(t-1,"attribute")>-1&&e.lines[t]<1){l[t-1]=-20;}if(n>s.wrap){let h=t;let j=Math.max(e.begin[t],0);if(c.is(t,"content")&&s.markup.preserveText===false){let O=0;const x=e.token[t].replace(/\s+/g," ").split(" ");do{h=h-1;if(l[h]<0){O=O+e.token[h].length;if(l[h]===-10)O=O+1;}else {break}}while(h>0);h=0;j=x.length;do{if(x[h].length+O>s.wrap){x[h]=a+x[h];O=x[h].length;}else {x[h]=` ${x[h]}`;O=O+x[h].length;}h=h+1;}while(h<j);if(x[0].charAt(0)===" "){e.token[t]=x.join("").slice(1);}else {l[t-1]=o;e.token[t]=x.join("").replace(a,"");}if(e.token[t].indexOf(a)>0){n=e.token[t].length-e.token[t].lastIndexOf(a);}}else {do{h=h-1;if(l[h]>-1){n=e.token[t].length;if(e.lines[t+1]>0)n=n+1;return}if(e.types[h].indexOf("start")>-1){n=0;return}if(e.lines[h+1]>0&&(c.not(h,"attribute")||c.is(h,"attribute")&&c.is(h+1,"attribute"))){if(c.not(h,"singleton")||c.is(h,"attribute")&&c.is(h+1,"attribute")){n=e.token[t].length;if(e.lines[t+1]>0)n=n+1;break}}}while(h>j);l[h]=o;}}}function V(){const o=t;if(e.types[o-1]==="script_start"&&e.token[o-1]==="{"){l[o-1]=-20;}do{if(e.lexer[t+1]===b&&e.begin[t+1]<o&&c.not(t+1,"start")&&c.not(t+1,"singleton"))break;l.push(0);t=t+1;}while(t<g);i[o]=t;if(e.types[t+1]==="script_end"&&e.token[t+1]==="}"){l.push(-20);}else {l.push(m-1);}$=J();if(e.lexer[$]===b&&e.stack[t].indexOf("attribute")<0&&(e.types[$]==="end"||e.types[$]==="template_end")){m=m-1;}}function D(){function o(T){const se=T.indexOf("=");if(se>0&&(se<T.indexOf('"')&&T.indexOf('"')>0||se<T.indexOf("'")&&T.indexOf("'")>0)){return [T.slice(0,se),T.slice(se+1)]}return [T,""]}function h(T){const se=o(T);if(se[1]===""||se[0]==="href"){return T}else if(s.markup.attributeValues==="preserve"){return se[0]+"="+se[1]}else if(s.markup.attributeValues==="strip"){return se[0].trimStart()+"="+se[1].replace(/\s+/g," ").replace(/^["']\s+/,'"')}const fe=s.markup.attributeValues;const C=[];const ne=s.wrap>0?se[1].length>s.wrap:false;let G;let M=false;let Y="";let ye="";let B=0;let he=0;if(fe==="collapse"){G=se[1].replace(/\s+/g," ");}else if(fe==="wrap"){G=se[1].replace(/\s+/g,xe=>/\n/.test(xe)?"\n":xe.replace(/\s+/," "));}do{if(L(G[B],123)&&(L(G[B+1],123)||L(G[B+1],37))){if(fe==="collapse"){if(me(G[B-1])===false&&C[C.length-1]!=="\n"){C.push("\n");}}if(L(G[B+1],37)){he=G.indexOf("%}",B+1);Y=G.slice(B,he+2);ye=L(Y[2],45)?Y.slice(3).trimStart():Y.slice(2).trimStart();B=he+2;if(ye.startsWith("end")){M=false;}else if(ge.liquid.tags.has(ye.slice(0,ye.search(/\s/)))){M=true;}C.push(Y);}else {he=G.indexOf("}}",B+1);Y=G.slice(B,he+2);B=he+2;C.push(Y);}if(fe==="collapse"){if(me(G[B])===false&&C[C.length-1]!=="\n"&&B<G.length-1){C.push("\n");}}}else {if(G[B]===" "){if(fe==="collapse"){if(C[C.length-1]!=="\n"){C.push("\n");}}else if(ne&&fe==="wrap"){if(M===false){C.push("\n");}}}else {C.push(G[B]);}B=B+1;}}while(B<G.length);return se[0]+"="+C.join("")}const j=t-1;function O(T){if(c.is(T,"attribute")||c.idx(T,"template_attribute")>-1){e.token[T]=h(e.token[T]);}else {const se=e.token[T].replace(/\s+/g," ").split(" ");const fe=se.length;let C=1;let ne=se[0].length;do{if(ne+se[C].length>s.wrap){ne=se[C].length;se[C]=a+se[C];}else {se[C]=` ${se[C]}`;ne=ne+se[C].length;}C=C+1;}while(C<fe);e.token[T]=se.join("");}}let x=t;let y=false;let I=false;let q=false;let P=0;let E=e.token[j].length+1;let Q=(()=>{if(c.idx(t,"start")>0){let T=t;do{if(e.types[T].indexOf("end")>0&&e.begin[T]===t){if(T<g-1&&c.idx(T+1,"attribute")>-1){y=true;break}}T=T+1;}while(T<g)}else if(t<g-1&&c.idx(t+1,"attribute")>-1){y=true;}if(c.is($,"end")||c.is($,"template_end")){return m+(c.is(j,"singleton")?2:1)}if(c.is(j,"singleton")){return m+1}return m})();if(y===false&&c.is(t,"comment_attribute")){l.push(m);if(e.types[j]==="singleton"){l[j]=m+1;}else {l[j]=m;}return}if(Q<1)Q=1;do{n=n+e.token[t].length+1;if(e.types[t].indexOf("attribute")>0){if(e.types[t]==="template_attribute_start"){if(s.markup.preserveAttributes===true){l.push(-10);}else {let T=1;do{if(T===0)break;E=E+e.token[t].length+1;if(s.markup.attributeChain==="inline"){l.push(-20);}else if(s.markup.attributeChain==="collapse"){l.push(Q);}else if(s.markup.attributeChain==="preserve"){if(e.lines[t]===0){l.push(-20);}else if(e.lines[t]===1){l.push(-10);}else if(e.lines[t]>s.preserveLine){l.push(s.preserveLine);}else {l.push(Q);}}t=t+1;if(c.is(t,"template_attribute_start")){T=T+1;}else if(c.is(t,"template_attribute_end")){T=T-1;}P=P+1;}while(t<g);if(E>s.wrap);}}else if(e.types[t]==="template_attribute"){l.push(-10);}else if(e.types[t]==="comment_attribute"){l.push(Q);}else if(e.types[t].indexOf("start")>0){q=true;if(t<g-2&&e.types[t+2].indexOf("attribute")>0){l.push(-20);t=t+1;i[t]=t;}else {if(j===t-1&&y===false){if(s.language==="jsx"||s.language==="tsx"){l.push(-20);}else {l.push(Q);}}else {if(s.language==="jsx"||s.language==="tsx"){l.push(-20);}else {l.push(Q+1);}}if(e.lexer[t+1]!==b){t=t+1;V();}}}else if(e.types[t].indexOf("end")>0&&e.types[t].indexOf("template")<0){if(l[t-1]!==-20)l[t-1]=l[e.begin[t]]-1;if(e.lexer[t+1]!==b){l.push(-20);}else {l.push(Q);}}else {l.push(Q);}I=true;}else if(c.is(t,"attribute")){E=E+e.token[t].length+1;if(s.markup.preserveAttributes===true){l.push(-10);}else if(s.markup.forceAttribute===true||s.markup.forceAttribute>=1||q===true||t<g-1&&c.not(t+1,"template_attribute")&&c.idx(t+1,"attribute")>0){e.token[t]=h(e.token[t]);l.push(Q);}else {l.push(-10);}}else if(e.begin[t]<j+1){break}t=t+1;P=P+1;}while(t<g);t=t-1;if(l[t-1]>0&&c.idx(t,"end")>0&&c.idx(t,"attribute")>0&&c.not(j,"singleton")&&y===true){l[t-1]=l[t-1]-1;}if(l[t]!==-20){if(s.language==="jsx"&&c.idx(j,"start")>-1&&c.is(t+1,"script_start")){l[t]=Q;}else {if(f.is(t,"/")&&l[t-1]!==10){l[t-1]=-10;}else {l[t]=l[j];}}}if(s.markup.forceAttribute===true){n=0;l[j]=Q;}else if(s.markup.forceAttribute>=1){if(P>=s.markup.forceAttribute){l[j]=Q;}else {l[j]=-10;}}else {l[j]=-10;}if(I===true||s.markup.preserveAttributes===true||f.is(j,"<%xml%>")||f.is(j,"<?xml?>")){n=0;return}x=t;if(x>j+1){if(s.markup.selfCloseSpace===false)E=E-1;if(E>s.wrap&&s.wrap>0&&s.markup.forceAttribute===false){n=e.token[t].length;do{if(e.token[x].length>s.wrap&&me(e.token[x]))O(x);l[x]=Q;x=x-1;}while(x>j)}}else if(s.wrap>0&&c.is(t,"attribute")&&e.token[t].length>s.wrap&&me(e.token[t])){O(t);}}do{if(e.lexer[t]===b){if(e.token[t].toLowerCase().indexOf("<!doctype")===0)l[t-1]=m;if(e.types[t].indexOf("attribute")>-1){D();}else if(c.is(t,"comment")){if(X<0)X=t;if(c.not(t+1,"comment")||t>0&&c.idx(t-1,"end")>-1)p();}else if(c.not(t,"comment")){$=J();if(c.is($,"end")||c.is($,"template_end")){m=m-1;if(c.is($,"template_end")&&c.is(e.begin[$]+1,"template_else")){m=m-1;}if(f.is(t,"</ol>")||f.is(t,"</ul>")||f.is(t,"</dl>")){v();}}if(c.is(t,"script_end")&&c.is(t+1,"end")){if(e.lines[$]<1){l.push(-20);}else if(e.lines[$]>1){l.push(m);}else {l.push(-10);}}else if((s.markup.forceIndent===false||s.markup.forceIndent&&c.is($,"script_start"))&&(c.is(t,"content")||c.is(t,"singleton")||c.is(t,"template"))){n=n+e.token[t].length;if(c.is(t,"template")){l.push(m);const o=e.token[t].indexOf(a);if(o>0){const h=l[t-1]*s.indentSize+(e.token[t].charCodeAt(2)===45?s.indentSize:s.indentSize-1);const j=[];let O=0;do{j.push(" ");O=O+1;}while(O<h);e.token[t]=e.token[t].replace(/^\s+/gm,"").replace(/\n/g,x=>`${x}${j.join("")}`);}}else if(e.lines[$]>0&&c.is($,"script_start")){l.push(-10);}else if(s.wrap>0&&(c.idx(t,"template")<0||$<g&&c.idx(t,"template")>-1&&c.idx(t,"template")<0)){N();}else if($<g&&(c.idx($,"end")>-1||c.idx($,"start")>-1)&&(e.lines[$]>0||c.idx(t,"template_")>-1)){l.push(m);}else if(e.lines[$]===0){l.push(-20);}else {l.push(m);}}else if(c.is(t,"start")||c.is(t,"template_start")){m=m+1;if(c.is(t,"template_start")&&c.is(t+1,"template_else")){m=m+1;}if(s.language==="jsx"&&f.is(t+1,"{")){if(e.lines[$]===0){l.push(-20);}else if(e.lines[$]>1){l.push(m);}else {l.push(-10);}}else if(c.is(t,"start")&&c.is($,"end")){l.push(-20);}else if(c.is(t,"start")&&c.is($,"script_start")){l.push(-10);}else if(s.markup.forceIndent===true){l.push(m);}else if(c.is(t,"template_start")&&c.is($,"template_end")){l.push(-20);}else if(e.lines[$]===0&&(c.is($,"content")||c.is($,"singleton")||c.is($,"start")&&c.is($,"template"))){l.push(-20);}else {l.push(m);}}else if(s.markup.forceIndent===false&&e.lines[$]===0&&(c.is($,"content")||c.is($,"singleton"))){l.push(-20);}else if(c.is(t+2,"script_end")){l.push(-20);}else if(c.is(t,"template_else")){if(c.is($,"template_end")){l[t-1]=m+1;}else {l[t-1]=m-1;}l.push(m);}else {l.push(m);}}if(c.not(t,"content")&&c.not(t,"singleton")&&c.not(t,"template")&&c.not(t,"attribute")){n=0;}}else {n=0;V();}t=t+1;}while(t<g);return l})();return (()=>{const l=[];const J=(()=>{const D=[s.indentChar];const o=s.indentSize-1;let h=0;if(h<o){do{D.push(s.indentChar);h=h+1;}while(h<o)}return D.join("")})();function v(D){const o=[];const h=s.preserveLine+1;const j=Math.min(e.lines[t+1]-1,h);let O=0;if(D<0)D=0;do{o.push(a);O=O+1;}while(O<j);if(D>0){O=0;do{o.push(J);O=O+1;}while(O<D)}return o.join("")}function p(){let D=e.token[t].split(a);const o=e.lines[t+1];if(c.is(t,"comment"))D=D.map(x=>x.trimStart());const h=W[t-1]>-1?c.is(t,"attribute")?W[t-1]+1:W[t-1]:(()=>{let x=t-1;let y=x>-1&&c.idx(x,"start")>-1;if(W[t]>-1&&c.is(t,"attribute")){return W[t]+1}do{x=x-1;if(W[x]>-1){if(c.is(t,"content")&&y===false){return W[x]}else {return W[x]+1}}if(c.idx(x,"start")>-1)y=true;}while(x>0);return 1})();e.lines[t+1]=0;let j=0;const O=D.length-1;do{if(c.is(t,"comment")){if(D[j]!==""){if(D[j+1].trimStart()!==""){l.push(D[j],v(h));}else {l.push(D[j],"\n");}}else {if(D[j+1].trimStart()===""){l.push("\n");}else {l.push(v(h));}}}else {l.push(D[j],v(h));}j=j+1;}while(j<O);e.lines[t+1]=o;l.push(D[O]);if(W[t]===-10){l.push(" ");}else if(W[t]>1){l.push(v(W[t]));}}function N(){const D=e.token[t];const o=/(\/|\?)?>$/;const h=o.exec(D);let j=t+1;let O=false;let x=s.markup.selfCloseSpace===true&&h!==null&&h[0]==="/>"?" ":"";if(h===null)return;e.token[t]=D.replace(o,"");do{if(c.is(j,"jsx_attribute_end")&&e.begin[e.begin[j]]===t){O=false;}else if(e.begin[j]===t){if(c.is(j,"jsx_attribute_start")){O=true;}else if(c.idx(j,"attribute")<0&&O===false){break}}else if(O===false&&(e.begin[j]<t||c.idx(j,"attribute")<0)){break}j=j+1;}while(j<g);if(c.is(j-1,"comment_attribute"))x=v(W[j-2]-1);e.token[j-1]=e.token[j-1]+x+h[0];if(c.is(j,"comment")&&e.lines[t+1]<2)W[t]=-10;}t=F.start;let V;V=s.indentLevel;do{if(e.lexer[t]===b){if((c.is(t,"start")||c.is(t,"singleton")||c.is(t,"xml")||c.is(t,"sgml"))&&c.idx(t,"attribute")<0&&t<g-1&&e.types[t+1]!==void 0&&c.idx(t+1,"attribute")>-1){N();}if(f.not(t,void 0)&&e.token[t].indexOf(a)>0&&(c.is(t,"content")&&s.markup.preserveText===false||c.is(t,"comment")||c.is(t,"attribute"))){p();}else {l.push(e.token[t]);if(W[t]===-10&&t<g-1){l.push(" ");}else if(W[t]>-1){V=W[t];l.push(v(W[t]));}}}else {if(i[t]===t&&c.not(t,"reference")){l.push(e.token[t]);}else {F.end=i[t];s.indentLevel=V;F.start=t;l.push(F.beautify[e.lexer[t]](s).replace(/\s+$/,""));if(W[F.iterator]>-1&&i[t]>t){l.push(v(W[F.iterator]));}t=F.iterator;s.indentLevel=0;}}t=t+1;}while(t<g);F.iterator=g-1;if(l[0]===a||l[0]===" ")l[0]="";return l.join("")})()};F.beautify.style=s=>{const c=[];const f=F.parsed;const i=s.crlf===true?"\r\n":"\n";const b=F.end>0?F.end+1:f.token.length;const e=function m(){let W=0;const l=[];do{l.push(s.indentChar);W=W+1;}while(W<s.indentSize);return l.join("")}();const a=s.preserveLine+1;let g=s.indentLevel;let t=F.start;let X=["",""];const $=function m(W){const l=[];const J=function p(){if(t===b-1){return 1}if(f.lines[t+1]-1>a){return a}if(f.lines[t+1]>1){return f.lines[t+1]-1}return 1}();let v=0;if(W<0)W=0;do{l.push(i);v=v+1;}while(v<J);if(W>0){v=0;do{l.push(e);v=v+1;}while(v<W)}c.push(l.join(""));};const n=function m(){const W=f.begin[t];const l=f.token[W];const J=f.token[t];const v=[];let p=t;let N=0;let V;let D=0;if(W<0||p<=W)return;do{p=p-1;if(f.begin[p]===W){if(f.token[p]===":"){V=[p-1,0];do{p=p-1;if((f.token[p]===";"&&l==="{"||f.token[p]===","&&l==="(")&&f.begin[p]===W||f.token[p]===J&&f.begin[f.begin[p]]===W){break}if(f.types[p]!=="comment"&&f.types[p]!=="selector"&&f.token[p]!==l&&f.begin[p]===W){V[1]=f.token[p].length+V[1];}}while(p>W+1);if(V[1]>D)D=V[1];v.push(V);}}else if(f.types[p]==="end"){if(p<f.begin[p])break;p=f.begin[p];}}while(p>W);p=v.length;if(p<2)return;do{p=p-1;if(v[p][1]<D){N=v[p][1];do{f.token[v[p][0]]=f.token[v[p][0]]+" ";N=N+1;}while(N<D)}}while(p>0)};if(s.script.vertical===true&&s.style.compressCSS===false){t=b;do{t=t-1;if(f.token[t]==="}"||f.token[t]===")")n();}while(t>0);t=F.start;}do{if(f.types[t+1]==="end"||f.types[t+1]==="template_end"||f.types[t+1]==="template_else"){g=g-1;}if(f.types[t]==="template"&&f.lines[t]>0){c.push(f.token[t]);if(f.types[t-2]!=="property"&&f.types[t-1]!=="colon")$(g);}else if(f.types[t]==="template_else"){c.push(f.token[t]);g=g+1;$(g);}else if(f.types[t]==="start"||f.types[t]==="template_start"){g=g+1;c.push(f.token[t]);if(f.types[t+1]!=="end"&&f.types[t+1]!=="template_end"&&(s.style.compressCSS===false||s.style.compressCSS===true&&f.types[t+1]==="selector")){$(g);}}else if(f.token[t]===";"&&(s.style.compressCSS===false||s.style.compressCSS===true&&f.types[t+1]==="selector")||f.types[t]==="end"||f.types[t]==="template_end"||f.types[t]==="comment"){c.push(f.token[t]);if(f.types[t+1]==="value"){if(f.lines[t+1]===1){c.push(" ");}else if(f.lines[t+1]>1){$(g);}}else if(f.types[t+1]!=="separator"){if(f.types[t+1]!=="comment"||f.types[t+1]==="comment"&&f.lines[t+1]>1){$(g);}else {c.push(" ");}}}else if(f.token[t]===":"){c.push(f.token[t]);if(s.style.compressCSS===false)c.push(" ");}else if(f.types[t]==="selector"){if(s.style.classPadding===true&&f.types[t-1]==="end"&&f.lines[t]<3){c.push(i);}if(f.token[t].indexOf("and(")>0){f.token[t]=f.token[t].replace(/and\(/,"and (");c.push(f.token[t]);}else if(f.token[t].indexOf("when(")>0){X=f.token[t].split("when(");c.push(X[0].replace(/\s+$/,""));$(g+1);c.push(`when (${X[1]}`);}else {c.push(f.token[t]);}if(f.types[t+1]==="start"){if(s.script.braceAllman===true){$(g);}else if(s.style.compressCSS===false){c.push(" ");}}}else if(f.token[t]===","){c.push(f.token[t]);if(f.types[t+1]==="selector"||f.types[t+1]==="property"){$(g);}else if(s.style.compressCSS===false){c.push(" ");}}else if(f.stack[t]==="map"&&f.token[t+1]===")"&&t-f.begin[t]>5){c.push(f.token[t]);$(g);}else if(f.token[t]==="x;"){$(g);}else if((f.types[t]==="variable"||f.types[t]==="function")&&s.style.classPadding===true&&f.types[t-1]==="end"&&f.lines[t]<3){c.push(i);c.push(f.token[t]);}else if(f.token[t]!==";"||f.token[t]===";"&&(s.style.compressCSS===false||s.style.compressCSS===true&&f.token[t+1]!=="}")){c.push(f.token[t]);}t=t+1;}while(t<b);F.iterator=b-1;return c.join("")};F.beautify.script=s=>{const c=new Set(["ActiveXObject","ArrayBuffer","AudioContext","Canvas","CustomAnimation","DOMParser","DataView","Date","Error","EvalError","FadeAnimation","FileReader","Flash","Float32Array","Float64Array","FormField","Frame","Generator","HotKey","Image","Iterator","Intl","Int16Array","Int32Array","Int8Array","InternalError","Loader","Map","MenuItem","MoveAnimation","Notification","ParallelArray","Point","Promise","Proxy","RangeError","Rectangle","ReferenceError","Reflect","RegExp","ResizeAnimation","RotateAnimation","Set","SQLite","ScrollBar","Set","Shadow","StopIteration","Symbol","SyntaxError","Text","TextArea","Timer","TypeError","URL","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","URIError","WeakMap","WeakSet","Web","Window","XMLHttpRequest"]);const b=ie(null);const e=F.parsed;const a="script";const g=F.scopes;const t=F.end<1||F.end>e.token.length?e.token.length:F.end+1;const X=(()=>{let n=F.start;let m=isNaN(s.indentLevel)?0:Number(s.indentLevel);let W=false;let l=false;let J="";let v="";let p=e.types[0];let N=e.token[0];const V=[-1];const D=[];const o=F.start>0?Array(F.start).fill(0,0,F.start):[];const h=[];const j=[[]];const O=[];const x=[];const y=[];const I=[false];const q=[];const P=[];function E(){Q(false,false);const z=s.commentIndent===true?m:0;if(W===false&&/\/\u002a\s*global\s/.test(e.token[n])){const d=e.token[n].replace(/\/\u002a\s*global\s+/,"").replace(/\s*\u002a\/$/,"").split(",");let u=d.length;do{u=u-1;d[u]=d[u].replace(/\s+/g,"");if(d[u]!=="")g.push([d[u],-1]);}while(u>0)}if(e.types[n-1]==="comment"||e.types[n+1]==="comment"){o[n-1]=z;}else if(e.lines[n]<2){let d=n+1;if(e.types[d]==="comment"){do{d=d+1;}while(d<t&&e.types[d]==="comment")}if(n<t-1&&e.stack[d]!=="block"&&(e.token[d]==="{"||e.token[d]==="x{")){let u=g.length;e.begin.splice(n,0,e.begin[d]);e.ender.splice(n,0,e.ender[d]);e.lexer.splice(n,0,e.lexer[d]);e.lines.splice(n,0,e.lines[d]);e.stack.splice(n,0,e.stack[d]);e.token.splice(n,0,e.token[d]);e.types.splice(n,0,e.types[d]);if(u>0){do{u=u-1;if(g[u][1]===d){g[u][1]=n;}else if(g[u][1]<n){break}}while(u>0)}d=d+1;e.begin.splice(d,1);e.ender.splice(d,1);e.lexer.splice(d,1);e.lines.splice(d,1);e.stack.splice(d,1);e.token.splice(d,1);e.types.splice(d,1);u=n+1;do{e.begin[u]=n;e.stack[u]=e.stack[d];u=u+1;}while(u<d);u=u+1;do{if(e.begin[u]===e.begin[d]){e.begin[u]=n;if(e.types[u]==="end"){break}}u=u+1;}while(u<t-1);e.begin[d]=n;n=n-1;}else {o[n-1]=-10;if(e.stack[n]==="paren"||e.stack[n]==="method"){o.push(m+2);}else {o.push(m);}if(s.commentIndent===true&&o[n]>-1&&e.lines[n]<3){e.lines[n]=3;}}if(e.types[n+1]!=="comment")W=true;return}else if(e.token[n-1]===","){o[n-1]=z;}else if(N==="="&&e.types[n-1]!=="comment"&&/^(\/\*\*\s*@[a-z_]+\s)/.test(v)===true){o[n-1]=-10;}else if(N==="{"&&e.types[n-1]!=="comment"&&e.lines[0]<2){if(e.stack[n]==="function"){o[n-1]=z;}else {o[n-1]=/\n/.test(v)?z:-10;}}else {o[n-1]=z;}if(e.types[n+1]!=="comment")W=true;if(e.token[e.begin[n]]==="("){o.push(m+1);}else {o.push(m);}if(o[n]>-1&&e.lines[n]<3){if(e.types[n-1]==="comment"&&v.startsWith("//")){e.lines[n]=2;}else {e.lines[n]=3;}}if(s.script.commentNewline===true&&v.startsWith("//")===false&&e.lines[n]>=3){e.lines[n]=2;}}function Q(z,d){let u=n-1;let S=z===true?0:1;const w=j[j.length-1]===void 0?[]:j[j.length-1];const k=d===false&&e.stack[n]==="array"&&z===true&&v!=="[";if(x[x.length-1]===false||e.stack[n]==="array"&&s.script.arrayFormat==="inline"||e.stack[n]==="object"&&s.script.objectIndent==="inline"){return}x[x.length-1]=false;do{if(e.types[u]==="end"){S=S+1;}else if(e.types[u]==="start"){S=S-1;}if(e.stack[u]==="global")break;if(S===0){if(e.stack[n]==="class"||e.stack[n]==="map"||k===false&&(z===false&&e.token[u]!=="("&&e.token[u]!=="x("||z===true&&e.token[u]===",")){if(e.types[u+1]==="template_start"){if(e.lines[u]<1){o[u]=-20;}else {o[u]=m-1;}}else if(w.length>0&&w[w.length-1]>-1){o[u]=m-1;}else {o[u]=m;}}else if(e.stack[n]==="array"&&e.types[n]==="operator"){if(e.token[u]===",")o[u]=m;if(u===e.begin[n])break}if(z===false)break}if(S<0){if(e.types[u+1]==="template_start"||e.types[u+1]==="template_string_start"){if(e.lines[u]<1){o[u]=-20;}else {o[u]=m-1;}}else if(w.length>0&&w[w.length-1]>-1){o[u]=m-1;}else {o[u]=m;}break}u=u-1;}while(u>-1)}function T(){const z=j[j.length-1]===void 0?[]:j[j.length-1];const d=()=>{let u=n;let S=false;const w=e.begin[u];do{u=u-1;if(e.lexer[u]==="markup"){S=true;break}if(e.begin[u]!==w)u=e.begin[u];}while(u>w);if(S===true){u=n;do{u=u-1;if(e.begin[u]!==w){u=e.begin[u];}else if(e.token[u]===","){o[u]=m+1;}}while(u>w);o[w]=m+1;o[n-1]=m;}else {o[n-1]=-20;}};if(v===")"&&e.token[n+1]==="."&&z[z.length-1]>-1&&e.token[z[0]]!==":"){let u=e.begin[n];let S=false;let w=false;do{u=u-1;}while(u>0&&o[u]<-9);S=o[u]===m;u=n+1;do{u=u+1;if(e.token[u]==="{"){w=true;break}if(e.begin[u]===e.begin[n+1]&&(e.types[u]==="separator"||e.types[u]==="end")){break}}while(u<t);if(S===false&&w===true&&j.length>1){j[j.length-2].push(e.begin[n]);m=m+1;}}if(p!=="separator")C();if(e.token[n+1]===","&&(e.stack[n]==="object"||e.stack[n]==="array")){Q(true,false);}if(e.token[e.begin[n]-1]===","&&(e.token[n+1]==="}"||e.token[n+1]==="]")&&(e.stack[n]==="object"||e.stack[n]==="array")){Q(true,false);}if(e.stack[n]!=="attribute"){if(v!==")"&&v!=="x)"&&(e.lexer[n-1]!=="markup"||e.lexer[n-1]==="markup"&&e.token[n-2]!=="return")){m=m-1;}if(v==="}"&&e.stack[n]==="switch"&&s.script.noCaseIndent===false){m=m-1;}}if(v==="}"||v==="x}"){if(e.types[n-1]!=="comment"&&N!=="{"&&N!=="x{"&&p!=="end"&&p!=="string"&&p!=="number"&&p!=="separator"&&N!=="++"&&N!=="--"&&(n<2||e.token[n-2]!==";"||e.token[n-2]!=="x;"||N==="break"||N==="return")){let u=n-1;let S=false;const w=e.begin[n];const k=D.length;do{if(e.begin[u]===w){if(e.token[u]==="="||e.token[u]===";"||e.token[u]==="x;"){S=true;}if(e.token[u]==="."&&o[u-1]>-1){x[x.length-1]=false;o[w]=m+1;o[n-1]=m;break}if(u>0&&e.token[u]==="return"&&(e.token[u-1]===")"||e.token[u-1]==="x)"||e.token[u-1]==="{"||e.token[u-1]==="x{"||e.token[u-1]==="}"||e.token[u-1]==="x}"||e.token[u-1]===";"||e.token[u-1]==="x;")){m=m-1;o[n-1]=m;break}if(e.token[u]===":"&&h.length===0||e.token[u]===","&&S===false){break}if(u===0||e.token[u-1]==="{"||e.token[u-1]==="x{"||e.token[u]==="for"||e.token[u]==="if"||e.token[u]==="do"||e.token[u]==="function"||e.token[u]==="while"||e.token[u]==="var"||e.token[u]==="let"||e.token[u]==="const"||e.token[u]==="with"){if(D[k-1]===false&&k>1&&(n===t-1||e.token[n+1]!==")"&&e.token[n+1]!=="x)")&&e.stack[n]!=="object"){m=m-1;}break}}else {u=e.begin[u];}u=u-1;}while(u>w)}V.pop();}if(s.script.bracePadding===false&&v!=="}"&&p!=="markup"){o[n-1]=-20;}if(s.script.bracePadding===true&&p!=="start"&&N!==";"&&(o[e.begin[n]]<-9||x[x.length-1]===true)){o[e.begin[n]]=-10;o[n-1]=-10;o.push(-20);}else if(e.stack[n]==="attribute"){o[n-1]=-20;o.push(m);}else if(e.stack[n]==="array"&&(z.length>0||O[O.length-1]===true)){se();x[x.length-1]=false;o[e.begin[n]]=m+1;o[n-1]=m;o.push(-20);}else if((e.stack[n]==="object"||e.begin[n]===0&&v==="}")&&z.length>0){se();x[x.length-1]=false;o[e.begin[n]]=m+1;o[n-1]=m;o.push(-20);}else if(v===")"||v==="x)"){const u=v===")"&&N!=="("&&P.length>0?P.pop()+1:0;const S=e.token[e.begin[n]-1]==="if"?(()=>{let w=n;do{w=w-1;if(e.token[w]===")"&&o[w-1]>-1)return u}while(w>e.begin[n]);return u+5})():u;if(u>0&&(s.language!=="jsx"||s.language==="jsx"&&e.token[e.begin[n]-1]!=="render")){const w=s.wrap;const k=e.begin[n];const R=P.length;let A=n-2;if(S>w){o[e.begin[n]]=m+1;o[n-1]=m;do{if(e.begin[A]===k){if(e.token[A]==="&&"||e.token[A]==="||"){o[A]=m+1;}else if(o[A]>-1&&e.types[A]!=="comment"&&e.token[A+1]!=="."){o[A]=o[A]+1;}}else if(o[A]>-1&&e.token[A+1]!=="."){o[A]=o[A]+1;}A=A-1;}while(A>k)}else if(R>0){P[R-1]=P[R-1]+u;}}else if(v===")"&&n>e.begin[n]+2&&e.lexer[e.begin[n]+1]===a&&e.token[e.begin[n]+1]!=="function"){const w=e.begin[n]<0?0:e.begin[n];const k=s.wrap;const R=z.length;let A=0;let _=0;let U=0;let H=0;let ee=0;let te=false;let Z=false;let ue=m+1;let le=false;let ce=false;let pe=false;if(o[w]<-9){_=w;do{_=_+1;}while(_<n&&o[_]<-9);H=_;do{A=A+e.token[_].length;if(o[_]===-10)A=A+1;if(e.token[_]==="("&&U>0&&U<k-1&&H===n){U=-1;}if(e.token[_]===")"){ee=ee-1;}else if(e.token[_]==="("){ee=ee+1;}if(_===w&&ee>0)U=A;_=_-1;}while(_>w&&o[_]<-9);if(e.token[_+1]===".")ue=o[_]+1;if(A>k-1&&k>0&&N!=="("&&U!==-1&&x[x.length-2]===false){if(e.token[w-1]==="if"&&D[D.length-1]===true||e.token[w-1]!=="if"){o[w]=ue;if(e.token[w-1]==="for"){_=w;do{_=_+1;if(e.token[_]===";"&&e.begin[_]===w){o[_]=ue;}}while(_<n)}}}}_=n;A=0;do{_=_-1;if(e.stack[_]==="function"){_=e.begin[_];}else if(e.begin[_]===w){if(e.token[_]==="?"){pe=true;}else if(e.token[_]===","&&te===false){te=true;if(A>=k&&k>0)le=true;}else if(e.types[_]==="markup"&&ce===false){ce=true;}if(o[_]>-9&&e.token[_]!==","&&e.types[_]!=="markup"){A=0;}else {if(o[_]===-10)A=A+1;A=A+e.token[_].length;if(A>=k&&k>0&&(te===true||ce===true)){le=true;}}}else {if(o[_]>-9){A=0;}else {A=A+e.token[_].length;if(A>=k&&k>0&&(te===true||ce===true)){le=true;}}}}while(_>w&&le===false);if(te===false&&e.token[e.begin[n]+1].charAt(0)==="`"){o[e.begin[n]]=-20;o[n-1]=-20;}else if((te===true||ce===true)&&A>=k&&k>0||o[w]>-9){if(pe===true){ue=o[w];if(e.token[w-1]==="["){_=n;do{_=_+1;if(e.types[_]==="end"||e.token[_]===","||e.token[_]===";"){break}}while(_<t);if(e.token[_]==="]"){ue=ue-1;Z=true;}}}else if(R>0&&z[R-1]>_){ue=ue-R;}x[x.length-1]=false;_=n;do{_=_-1;if(e.begin[_]===w){if(e.token[_].indexOf("=")>-1&&e.types[_]==="operator"&&e.token[_].indexOf("!")<0&&e.token[_].indexOf("==")<0&&e.token[_]!=="<="&&e.token[_].indexOf(">")<0){A=_;do{A=A-1;if(e.begin[A]===w&&(e.token[A]===";"||e.token[A]===","||A===w)){break}}while(A>w)}else if(e.token[_]===","){o[_]=ue;}else if(o[_]>-9&&Z===false&&(e.token[w-1]!=="for"||e.token[_+1]==="?"||e.token[_+1]===":")&&(e.token[e.begin[n]]!=="("||e.token[_]!=="+")){o[_]=o[_]+1;}}else if(o[_]>-9&&Z===false){o[_]=o[_]+1;}}while(_>w);o[w]=ue;o[n-1]=ue-1;}else {o[n-1]=-20;}if(e.token[e.begin[n]-1]==="+"&&o[e.begin[n]]>-9){o[e.begin[n]-1]=-10;}}else if(s.language==="jsx"){d();}else {o[n-1]=-20;}o.push(-20);}else if(x[x.length-1]===true){if(v==="]"&&e.begin[n]-1>0&&e.token[e.begin[e.begin[n]-1]]==="["){x[x.length-2]=false;}if(e.begin[n]<o.length)o[e.begin[n]]=-20;if(s.language==="jsx"){d();}else if(v==="]"&&o[e.begin[n]]>-1){o[n-1]=o[e.begin[n]]-1;}else {o[n-1]=-20;}o.push(-20);}else if(e.types[n-1]==="comment"&&e.token[n-1].substring(0,2)==="//"){if(e.token[n-2]==="x}")o[n-3]=m+1;o[n-1]=m;o.push(-20);}else if(e.types[n-1]!=="comment"&&(N==="{"&&v==="}"||N==="["&&v==="]")){o[n-1]=-20;o.push(-20);}else if(v==="]"){if(D[D.length-1]===true&&x[x.length-1]===false&&s.script.arrayFormat!=="inline"||N==="]"&&o[n-2]===m+1){o[n-1]=m;o[e.begin[n]]=m+1;}else if(o[n-1]===-10){o[n-1]=-20;}if(e.token[e.begin[n]+1]==="function"){o[n-1]=m;}else if(D[D.length-1]===false){if(N==="}"||N==="x}")o[n-1]=m;let u=n-1;let S=1;do{if(e.token[u]==="]")S=S+1;if(e.token[u]==="["){S=S-1;if(S===0){if(u>0&&(e.token[u+1]==="{"||e.token[u+1]==="x{"||e.token[u+1]==="[")){o[u]=m+1;break}if(e.token[u+1]!=="["||l===false){o[u]=-20;break}break}}if(S===1&&e.token[u]==="+"&&o[u]>1){o[u]=o[u]-1;}u=u-1;}while(u>-1)}else if(s.language==="jsx"){d();}if(s.script.arrayFormat==="inline"){let u=n;const S=e.begin[n];do{u=u-1;if(e.types[u]==="end")break}while(u>S);if(u>S){o[e.begin[n]]=m+1;o[n-1]=m;}else {o[e.begin[n]]=-20;o[n-1]=-20;}}else if(o[e.begin[n]]>-1){o[n-1]=o[e.begin[n]]-1;}o.push(-20);}else if(v==="}"||v==="x}"||D[D.length-1]===true){if(v==="}"&&N==="x}"&&e.token[n+1]==="else"){o[n-2]=m+2;o.push(-20);}else {o.push(m);}o[n-1]=m;}else {o.push(-20);}if(e.types[n-1]==="comment")o[n-1]=m;if(s.script.inlineReturn&&s.script.correct===false&&v==="x}"&&(e.stack[n]==="if"||e.stack[n]==="else")&&e.token[e.begin[e.begin[n-1]-1]-2]!=="else"){o[n-1]=-20;}se();l=D[D.length-1];D.pop();j.pop();O.pop();y.pop();q.pop();x.pop();I.pop();}function se(){let z=0;const d=j[j.length-1];if(d===void 0)return;z=d.length-1;if(z<1&&d[z]<0&&(v===";"||v==="x;"||v===")"||v==="x)"||v==="}"||v==="x}")){d.pop();return}if(z<0||d[z]<0)return;if(v===":"){if(e.token[d[z]]!=="?"){do{d.pop();z=z-1;m=m-1;}while(z>-1&&d[z]>-1&&e.token[d[z]]!=="?")}d[z]=n;o[n-1]=m;}else {do{d.pop();z=z-1;m=m-1;}while(z>-1&&d[z]>-1)}if((e.stack[n]==="array"||v===",")&&d.length<1)d.push(-1);}function fe(){const z=n;do{if(e.lexer[n+1]===a&&e.begin[n+1]<z)break;if(e.token[z-1]==="return"&&e.types[n]==="end"&&e.begin[n]===z)break;o.push(0);n=n+1;}while(n<t);b[z]=n;o.push(m-1);}function C(){let z=n-1;const d=e.begin[n];if(m<1)return;do{if(d!==e.begin[z]){z=e.begin[z];}else {if(e.types[z]==="separator"||e.types[z]==="operator"){if(e.token[z]==="."&&o[z-1]>0){if(e.token[d-1]==="if"){m=m-2;}else {m=m-1;}}break}}z=z-1;}while(z>0&&z>d)}function ne(){if(e.token[n+1]!==","&&v.indexOf("/>")!==v.length-2||e.token[n+1]===","&&e.token[e.begin[n]-3]!=="React"){Q(false,false);}if(N==="return"||N==="?"||N===":"){o[n-1]=-10;o.push(-20);}else if(p==="start"||e.token[n-2]==="return"&&e.stack[n-1]==="method"){o.push(m);}else {o.push(-20);}}function G(){const z=j[j.length-1]===void 0?[]:j[j.length-1];function d(){const u=e.token[n+1];let S=0;let w=0;let k=n;let R=v==="+"?m+2:m;let A=0;if(s.wrap<1){o.push(-10);return}do{k=k-1;if(e.token[e.begin[n]]==="("){if(k===e.begin[n]){A=S;}if(e.token[k]===","&&e.begin[k]===e.begin[n]&&D[D.length-1]===true){break}}if(S>s.wrap-1)break;if(o[k]>-9)break;if(e.types[k]==="operator"&&e.token[k]!=="="&&e.token[k]!=="+"&&e.begin[k]===e.begin[n]){break}S=S+e.token[k].length;if(k===e.begin[n]&&e.token[k]==="["&&S<s.wrap-1){break}if(e.token[k]==="."&&o[k]>-9)break;if(o[k]===-10)S=S+1;}while(k>0);if(A>0)A=A+u.length;S=S+u.length;w=k;if(S>s.wrap-1&&o[k]<-9){do{w=w-1;}while(w>0&&o[w]<-9)}if(e.token[w+1]==="."&&e.begin[n]<=e.begin[w]){R=R+1;}else if(e.types[w]==="operator"){R=o[w];}w=u.length;if(S+w<s.wrap){o.push(-10);return}if(e.token[e.begin[n]]==="("&&(e.token[z[0]]===":"||e.token[z[0]]==="?")){R=m+3;}else if(e.stack[n]==="method"){o[e.begin[n]]=m;if(D[D.length-1]===true){R=m+3;}else {R=m+1;}}else if(e.stack[n]==="object"||e.stack[n]==="array"){Q(true,false);}if(e.token[k]==="var"||e.token[k]==="let"||e.token[k]==="const"){S=S-s.indentSize*s.indentChar.length*2;}if(A>0){k=s.wrap-A;}else {k=s.wrap-S;}if(k>0&&k<5){o.push(R);if(e.token[n].charAt(0)==='"'||e.token[n].charAt(0)==="'"){n=n+1;o.push(-10);}return}if(e.token[e.begin[n]]!=="("||A>s.wrap-1||A===0){if(A>0)S=A;if(S-u.length<s.wrap-1&&(u.charAt(0)==='"'||u.charAt(0)==="'")){n=n+1;S=S+3;if(S-u.length>s.wrap-4){o.push(R);return}o.push(-10);return}o.push(R);return}o.push(-10);}C();if(z.length>0&&z[z.length-1]>-1&&e.stack[n]==="array"){O[O.length-1]=true;}if(v!==":"){if(e.token[e.begin[n]]!=="("&&e.token[e.begin[n]]!=="x("&&x.length>0){Q(true,false);}if(v!=="?"&&e.token[z[z.length-1]]==="."){let u=0;let S=n;const w=e.begin[S];do{if(e.begin[S]===w){if(e.token[S+1]==="{"||e.token[S+1]==="["||e.token[S]==="function"){break}if(e.token[S]===","||e.token[S]===";"||e.types[S]==="end"||e.token[S]===":"){z.pop();m=m-1;break}if(e.token[S]==="?"||e.token[S]===":"){if(e.token[z[z.length-1]]==="."&&u<2)z[z.length-1]=w+1;break}if(e.token[S]===".")u=u+1;}S=S+1;}while(S<t)}}if(v==="!"||v==="..."){if(N==="}"||N==="x}")o[n-1]=m;o.push(-20);return}if(N===";"||N==="x;"){if(e.token[e.begin[n]-1]!=="for")o[n-1]=m;o.push(-20);return}if(v==="*"){if(N==="function"||N==="yield"){o[n-1]=-20;}else {o[n-1]=-10;}o.push(-10);return}if(v==="?"){if(e.lines[n]===0&&e.types[n-2]==="word"&&e.token[n-2]!=="return"&&e.token[n-2]!=="in"&&e.token[n-2]!=="instanceof"&&e.token[n-2]!=="typeof"&&(p==="reference"||p==="word")){if(e.types[n+1]==="word"||e.types[n+1]==="reference"||(e.token[n+1]==="("||e.token[n+1]==="x(")&&e.token[n-2]==="new"){o[n-1]=-20;if(e.types[n+1]==="word"||e.types[n+1]==="reference"){o.push(-10);return}o.push(-20);return}}if(e.token[n+1]===":"){o[n-1]=-20;o.push(-20);return}h.push(n);if(s.script.ternaryLine===true){o[n-1]=-10;}else {let u=n-1;do{u=u-1;}while(u>-1&&o[u]<-9);z.push(n);m=m+1;if(o[u]===m&&e.token[u+1]!==":"){m=m+1;z.push(n);}o[n-1]=m;if(e.token[e.begin[n]]==="("&&(z.length<2||z[0]===z[1])){x[x.length-1]=false;if(n-2===e.begin[n]){o[e.begin[n]]=m-1;}else {o[e.begin[n]]=m;}u=n-2;do{if(e.types[u]==="end"&&o[u-1]>-1)break;if(o[u]>-1)o[u]=o[u]+1;u=u-1;}while(u>e.begin[n])}}o.push(-10);return}if(v===":"){if(e.stack[n]==="map"||e.types[n+1]==="type"||e.types[n+1]==="type_start"){o[n-1]=-20;o.push(-10);return}if(h.length>0&&e.begin[h[h.length-1]]===e.begin[n]){let u=n;const S=e.begin[n];do{u=u-1;if(e.begin[u]===S){if(e.token[u]===","||e.token[u]===";"){o[n-1]=-20;break}if(e.token[u]==="?"){h.pop();se();if(s.script.ternaryLine===true)o[n-1]=-10;o.push(-10);return}}else if(e.types[u]==="end"){u=e.begin[u];}}while(u>S)}if(e.token[n-2]==="where"&&e.stack[n-2]===e.stack[n]){o[n-1]=-10;o.push(-10);return}if(p==="reference"&&e.token[e.begin[n]]!=="("&&e.token[e.begin[n]]!=="x("){o[n-1]=-20;o.push(-10);return}if((N===")"||N==="x)")&&e.token[e.begin[n-1]-2]==="function"){o[n-1]=-20;o.push(-10);return}if(e.stack[n]==="attribute"){o[n-1]=-20;o.push(-10);return}if(e.token[e.begin[n]]!=="("&&e.token[e.begin[n]]!=="x("&&(p==="reference"||N===")"||N==="]"||N==="?")&&(e.stack[n]==="map"||e.stack[n]==="class"||e.types[n+1]==="reference")&&(h.length===0||h[h.length-1]<e.begin[n])&&("mapclassexpressionmethodglobalparen".indexOf(e.stack[n])>-1||e.types[n-2]==="word"&&e.stack[n]!=="switch")){o[n-1]=-20;o.push(-10);return}if(e.stack[n]==="switch"&&(h.length<1||h[h.length-1]<e.begin[n])){o[n-1]=-20;if(s.script.caseSpace===true){o.push(-10);}else {o.push(m);}return}if(e.stack[n]==="object"){o[n-1]=-20;}else if(h.length>0){o[n-1]=m;}else {o[n-1]=-10;}o.push(-10);return}if(v==="++"||v==="--"){if(p==="number"||p==="reference"){o[n-1]=-20;o.push(-10);}else if(n<t-1&&(e.types[n+1]==="number"||e.types[n+1]==="reference")){o.push(-20);}else {o.push(-10);}return}if(v==="+"){if(p==="start"){o[n-1]=-20;}else {o[n-1]=-10;}if(s.wrap<1||e.token[e.begin[n]]==="x("){o.push(-10);return}const u=e.token[n+1];if(u===void 0){o.push(-10);return}if(e.types[n-1]==="operator"||e.types[n-1]==="start"){if(e.types[n+1]==="reference"||u==="("||u==="["){o.push(-20);return}if(Number(u.slice(1,-1))>-1&&(/\d/.test(u.charAt(1))===true||u.charAt(1)==="."||u.charAt(1)==="-"||u.charAt(1)==="+")){o.push(-20);return}}return d()}if(e.types[n-1]!=="comment"){if(N==="("){o[n-1]=-20;}else if(v==="*"&&e.stack[n]==="object"&&e.types[n+1]==="reference"&&(N==="{"||N===",")){o[n-1]=m;}else if(v!=="?"||h.length===0){o[n-1]=-10;}}if(v.indexOf("=")>-1&&v!=="=="&&v!=="==="&&v!=="!="&&v!=="!=="&&v!==">="&&v!=="<="&&v!=="=>"&&e.stack[n]!=="method"&&e.stack[n]!=="object"){let u=n+1;let S=0;let w=false;let k="";if((e.token[e.begin[n]]==="("||e.token[e.begin[n]]==="x(")&&e.token[n+1]!=="function"){return}do{if(e.types[u]==="start"){if(w===true&&e.token[u]!=="["){if(I[I.length-1]===true){I[I.length-1]=false;}break}S=S+1;}if(e.types[u]==="end")S=S-1;if(S<0){if(I[I.length-1]===true){I[I.length-1]=false;}break}if(S===0){k=e.token[u];if(w===true){if(e.types[u]==="operator"||e.token[u]===";"||e.token[u]==="x;"||e.token[u]==="?"||e.token[u]==="var"||e.token[u]==="let"||e.token[u]==="const"){if(k!==void 0&&(k==="?"||k.indexOf("=")>-1&&k!=="=="&&k!=="==="&&k!=="!="&&k!=="!=="&&k!==">="&&k!=="<=")){if(I[I.length-1]===false){I[I.length-1]=true;}}if((k===";"||k==="x;"||k==="var"||k==="let"||k==="const")&&I[I.length-1]===true){I[I.length-1]=false;}break}if(I[I.length-1]===true&&(k==="return"||k==="break"||k==="continue"||k==="throw")){I[I.length-1]=false;}}if(k===";"||k==="x;"||k===",")w=true;}u=u+1;}while(u<t);o.push(-10);return}if(v==="-"&&N==="return"||N==="="){o.push(-20);return}if(p==="operator"&&e.types[n+1]==="reference"&&N!=="--"&&N!=="++"&&v!=="&&"&&v!=="||"){o.push(-20);return}return d()}function M(){const z=()=>{let d=e.begin[n];if(d<0){g.push([e.token[n],-1]);}else {if(e.stack[d+1]!=="function"){do{d=e.begin[d];}while(d>-1&&e.stack[d+1]!=="function")}g.push([e.token[n],d]);}};if(e.types[n-1]==="comment"){o[n-1]=m;}else if(p==="end"&&N!==")"&&e.token[e.begin[n-1]-1]!==")"){o[n-1]=-10;}else if(p!=="separator"&&p!=="start"&&p!=="end"&&p.indexOf("template_string")<0){if(p==="word"||p==="operator"||p==="property"||p==="type"||p==="reference"){o[n-1]=-10;}else {o[n-1]=-20;}}if(N==="var"&&e.lexer[n-1]===a){z();}else if(N==="function"){g.push([e.token[n],n]);}else if(N==="let"||N==="const"){g.push([e.token[n],n]);}else if(e.stack[n]==="arguments"){g.push([e.token[n],n]);}else if(N===","){let d=n;do{d=d-1;}while(d>e.begin[n]&&e.token[d]!=="var"&&e.token[d]!=="let"&&e.token[d]!=="const");if(e.token[d]==="var"){z();}else if(e.token[d]==="let"||e.token[d]==="const"){g.push([e.token[n],n]);}}o.push(-10);}function Y(){const z=j[j.length-1]===void 0?[]:j[j.length-1];const d=()=>{if(s.script.methodChain>0){let u=n;let S=e.begin[n];const w=[n];const k=e.token[S-1]==="if";do{u=u-1;if(e.types[u]==="end")u=e.begin[u];if(e.begin[u]===S){if(e.types[u]==="string"&&e.token[u].indexOf("${")===e.token[u].length-2){break}if(e.token[u]==="."){if(o[u-1]>0){o[n-1]=k===true?m+1:m;return}w.push(u);}else if(e.token[u]===";"||e.token[u]===","||e.types[u]==="operator"||(e.types[u]==="word"||e.types[u]==="reference")&&(e.types[u-1]==="word"||e.types[u-1]==="reference")){break}}}while(u>S);if(w.length<s.script.methodChain){o[n-1]=-20;return}u=0;S=w.length;do{o[w[u]-1]=k===true?m+1:m;u=u+1;}while(u<S);u=w[w.length-1]-1;do{if(o[u]>-1)o[u]=o[u]+1;u=u+1;}while(u<n);m=k===true?m+2:m+1;}o[n-1]=m;};if(v==="::"){o[n-1]=-20;o.push(-20);return}if(v==="."){if(e.token[e.begin[n]]!=="("&&e.token[e.begin[n]]!=="x("&&z.length>0){if(e.stack[n]==="object"||e.stack[n]==="array"){Q(true,false);}else {Q(false,false);}}if(s.script.methodChain===0){o[n-1]=-20;}else if(s.script.methodChain<0){if(e.lines[n]>0){d();}else {o[n-1]=-20;}}else {d();}o.push(-20);return}if(v===","){C();if(D[D.length-1]===false&&(e.stack[n]==="object"||e.stack[n]==="array"||e.stack[n]==="paren"||e.stack[n]==="expression"||e.stack[n]==="method")){D[D.length-1]=true;if(e.token[e.begin[n]]==="("){let u=n;do{u=u-1;if(e.begin[u]===e.begin[n]&&e.token[u]==="+"&&o[u]>-9){o[u]=o[u]+2;}}while(u>e.begin[n])}}if(e.stack[n]==="array"&&s.script.arrayFormat==="indent"){o[n-1]=-20;o.push(m);return}if(e.stack[n]==="array"&&s.script.arrayFormat==="inline"){o[n-1]=-20;o.push(-10);return}if(e.stack[n]==="object"&&s.script.objectIndent==="indent"){o[n-1]=-20;o.push(m);return}if(e.stack[n]==="object"&&s.script.objectIndent==="inline"){o[n-1]=-20;o.push(-10);return}if(z.length>0){if(z[z.length-1]>-1)se();o[n-1]=-20;o.push(m);return}if(e.token[n-2]===":"&&e.token[n-4]==="where"){o[n-1]=-20;o.push(-10);return}o[n-1]=-20;if(e.types[n+1]!=="end"){y[y.length-1]=y[y.length-1]+1;}if((e.token[e.begin[n]]==="("||e.token[e.begin[n]]==="x(")&&s.language!=="jsx"&&e.stack[n]!=="global"&&(e.types[n-1]!=="string"&&e.types[n-1]!=="number"||e.token[n-2]!=="+"||e.types[n-1]==="string"&&e.types[n-1]!=="number"&&e.token[n-2]==="+"&&e.types[n-3]!=="string"&&e.types[n-3]!=="number")){o.push(-10);return}if(p==="reference"&&e.types[n-2]==="word"&&"var-let-const-from".indexOf(e.token[n-2])<0&&(e.types[n-3]==="end"||e.token[n-3]===";")){q[q.length-1]=true;o.push(-10);return}if(q[q.length-1]===true||e.stack[n]==="notation"){o.push(-10);return}if(y[y.length-1]>3&&(e.stack[n]==="array"||e.stack[n]==="object")){if(x[x.length-1]===true)Q(true,true);o[n-1]=-20;if(O[O.length-1]===true){o.push(m);return}const u=e.begin[n];let S=n;do{if(e.types[S]==="end"){S=e.begin[S];}else {if(e.token[S]===","&&e.types[S+1]!=="comment"){o[S]=m;}}S=S-1;}while(S>u);o[u]=m;O[O.length-1]=true;return}if(e.stack[n]==="object"){if(x[x.length-1]===true&&e.types[e.begin[n]-1]!=="word"&&e.types[e.begin[n]-1]!=="reference"&&e.token[e.begin[n]-1]!=="("&&e.token[e.begin[n]-1]!=="x("){const u=e.begin[n];let S=n-1;do{if(e.begin[S]===u){if(e.token[S]===",")break;if(e.token[S]===":"){Q(true,false);break}}S=S-1;}while(S>u)}}if(x[x.length-1]===false||e.token[n-2]==="+"&&(p==="string"||p==="number")&&o[n-2]>0&&(N.charAt(0)==='"'||N.charAt(0)==="'")){if(e.stack[n]==="method"){if(e.token[n-2]==="+"&&(N.charAt(0)==='"'||N.charAt(0)==="'")&&(e.token[n-3].charAt(0)==='"'||e.token[n-3].charAt(0)==="'")){o.push(m+2);return}if(e.token[n-2]!=="+"){o.push(-10);return}}o.push(m);return}if(x[x.length-1]===true&&e.stack[n]!=="object"){o.push(-10);return}if(y[y.length-1]<4&&(e.stack[n]==="array"||e.stack[n]==="object")){o.push(-10);return}o.push(m);return}if(v===";"||v==="x;"){C();if(e.token[n+1]!==void 0&&e.types[n+1].indexOf("attribute")>0&&e.types[n+1].indexOf("end")>0){o[n-1]=-20;o.push(m-1);return}if(V[V.length-1]>-1&&e.stack[V[V.length-1]]!=="expression"){let u=n;do{u=u-1;if(e.token[u]===";")break;if(e.token[u]===","){m=m-1;break}if(e.types[u]==="end")u=e.begin[u];}while(u>0&&u>e.begin[n])}V[V.length-1]=-1;se();if(e.token[e.begin[n]-1]!=="for")Q(false,false);q[q.length-1]=false;o[n-1]=-20;if(e.begin[n]>0&&e.token[e.begin[n]-1]==="for"&&e.stack[n]!=="for"){o.push(-10);return}o.push(m);return}o.push(-20);}function ye(){const z=e.stack[n+1];const d=n===0?e.stack[n]:e.stack[n-1];if(N===")"||(d==="object"||d==="array")&&N!=="]"){if(z!=="method"||z==="method"&&e.token[n+1]!==")"&&e.token[n+2]!==")"){if(N===")"&&(z!=="function"||e.token[e.begin[e.begin[n-1]-1]]==="("||e.token[e.begin[e.begin[n-1]-1]]==="x(")){Q(false,false);}else if(e.types[n+1]!=="end"&&e.types[n+2]!=="end"){Q(true,false);}}}D.push(false);j.push([]);I.push(false);O.push(false);q.push(false);y.push(0);if(s.script.neverFlatten===true||z==="array"&&s.script.arrayFormat==="indent"||z==="attribute"||p==="generic"||z==="class"&&N!=="("&&N!=="x("||v==="["&&e.token[n+1]==="function"){x.push(false);}else {if(z==="expression"||z==="method"){x.push(true);}else if((z==="object"||z==="class")&&(N==="("||N==="x("||p==="word"||p==="reference")){x.push(true);}else if(z==="array"||v==="("||v==="x("){x.push(true);}else if(v==="{"&&z==="object"&&p!=="operator"&&p!=="start"&&p!=="string"&&p!=="number"&&d!=="object"&&d!=="array"&&n>0){x.push(true);}else {x.push(false);}}if(v!=="("&&v!=="x("&&e.stack[n+1]!=="attribute"){m=m+1;}if(v==="{"||v==="x{"){V.push(-1);if(e.types[n-1]!=="comment"){if(p==="markup"){o[n-1]=m;}else if(s.script.braceAllman===true&&p!=="operator"&&N!=="return"){o[n-1]=m-1;}else if(e.stack[n+1]!=="block"&&(z==="function"||N===")"||N==="x)"||N===","||N==="}"||p==="markup")){o[n-1]=-10;}else if(N==="{"||N==="x{"||N==="["||N==="}"||N==="x}"){o[n-1]=m-1;}}if(z==="object"){if(s.script.objectIndent==="indent"){x[x.length-1]=false;o.push(m);return}if(s.script.objectIndent==="inline"){x[x.length-1]=true;o.push(-20);return}}if(z==="switch"){if(s.script.noCaseIndent===true){o.push(m-1);return}m=m+1;o.push(m);return}if(x[x.length-1]===true){if(p!=="word"&&p!=="reference"){o.push(-20);return}}o.push(m);return}if(v==="("||v==="x("){if(s.wrap>0&&v==="("&&e.token[n+1]!==")"){P.push(1);}if(N==="-"&&(e.token[n-2]==="("||e.token[n-2]==="x(")){o[n-2]=-20;}if(p==="end"&&d!=="if"&&d!=="for"&&d!=="catch"&&d!=="else"&&d!=="do"&&d!=="try"&&d!=="finally"&&d!=="catch"){if(e.types[n-1]==="comment"){o[n-1]=m;}else {o[n-1]=-20;}}if(N==="async"){o[n-1]=-10;}else if(z==="method"||e.token[n-2]==="function"&&p==="reference"){if(N==="import"||N==="in"||s.script.functionNameSpace===true){o[n-1]=-10;}else if(N==="}"&&e.stack[n-1]==="function"||p==="word"||p==="reference"||p==="property"){o[n-1]=-20;}else if(d!=="method"&&z!=="method"){o[n-1]=m;}}if(N==="+"&&(e.token[n-2].charAt(0)==='"'||e.token[n-2].charAt(0)==="'")){o.push(m);return}if(N==="}"||N==="x}"){o.push(-20);return}if(N==="-"&&(n<2||e.token[n-2]!==")"&&e.token[n-2]!=="x)"&&e.token[n-2]!=="]"&&e.types[n-2]!=="reference"&&e.types[n-2]!=="string"&&e.types[n-2]!=="number")||s.script.functionSpace===false&&N==="function"){o[n-1]=-20;}o.push(-20);return}if(v==="["){if(N==="[")D[D.length-2]=true;if(N==="return"||N==="var"||N==="let"||N==="const"){o[n-1]=-10;}else if(e.types[n-1]!=="comment"&&e.stack[n-1]!=="attribute"&&(p==="end"||p==="word"||p==="reference")){o[n-1]=-20;}else if(N==="["||N==="{"||N==="x{"){o[n-1]=m-1;}if(e.stack[n]==="attribute"){o.push(-20);return}if(s.script.arrayFormat==="indent"){x[x.length-1]=false;o.push(m);return}if(s.script.arrayFormat==="inline"){x[x.length-1]=true;o.push(-20);return}if(z==="method"||x[x.length-1]===true){o.push(-20);return}let u=n+1;do{if(e.token[u]==="]"){o.push(-20);return}if(e.token[u]===","){o.push(m);return}u=u+1;}while(u<t);o.push(-20);}}function B(){if(v.length===1){o.push(-20);if(e.lines[n]===0)o[n-1]=-20;}else if(v.indexOf("#!/")===0){o.push(m);}else {o.push(-10);}if((N===","||p==="start")&&(e.stack[n]==="object"||e.stack[n]==="array")&&x[x.length-1]===false&&n>0){o[n-1]=m;}}function he(){if(J==="template_else"){o[n-1]=m-1;o.push(m);}else if(J==="template_start"){m=m+1;if(e.lines[n-1]<1)o[n-1]=-20;if(e.lines[n]>0||N.length===1&&p==="string"){o.push(m);}else {o.push(-20);}}else if(J==="template_end"){m=m-1;if(p==="template_start"||e.lines[n-1]<1){o[n-1]=-20;}else {o[n-1]=m;}if(e.lines[n]>0){o.push(m);}else {o.push(-20);}}else if(J==="template"){if(e.lines[n]>0){o.push(m);}else {o.push(-20);}}}function xe(){if(J==="template_string_start"){m=m+1;o.push(m);}else if(J==="template_string_else"){C();o[n-1]=m-1;o.push(m);}else {C();m=m-1;o[n-1]=m;o.push(-10);}if(n>2&&(e.types[n-2]==="template_string_else"||e.types[n-2]==="template_string_start")){if(s.script.bracePadding===true){o[n-2]=-10;o[n-1]=-10;}else {o[n-2]=-20;o[n-1]=-20;}}}function Ae(){if(e.token[n-1]===","||e.token[n-1]===":"&&e.stack[n-1]!=="data_type"){o[n-1]=-10;}else {o[n-1]=-20;}if(e.types[n]==="type"||e.types[n]==="type_end"){o.push(-10);}if(e.types[n]==="type_start"){o.push(-20);}}function we(){if((N===")"||N==="x)")&&e.stack[n]==="class"&&(e.token[e.begin[n-1]-1]==="static"||e.token[e.begin[n-1]-1]==="final"||e.token[e.begin[n-1]-1]==="void")){o[n-1]=-10;o[e.begin[n-1]-1]=-10;}if(N==="]")o[n-1]=-10;if(v==="else"&&N==="}"){if(e.token[n-2]==="x}")o[n-3]=o[n-3]-1;if(s.script.braceAllman===true||s.script.elseNewline===true){o[n-1]=m;}}if(v==="new"&&c.has(e.token[n+1]));if(v==="from"&&p==="end"&&n>0&&(e.token[e.begin[n-1]-1]==="import"||e.token[e.begin[n-1]-1]===",")){o[n-1]=-10;}if(v==="function"){if(s.script.functionSpace===false&&n<t-1&&(e.token[n+1]==="("||e.token[n+1]==="x(")){o.push(-20);return}o.push(-10);return}if(N==="-"&&n>1){if(e.types[n-2]==="operator"||e.token[n-2]===","){o[n-1]=-20;}else if(e.types[n-2]==="start"){o[n-2]=-20;o[n-1]=-20;}}else if(v==="while"&&(N==="}"||N==="x}")){let z=n-1;let d=0;do{if(e.token[z]==="}"||e.token[z]==="x}")d=d+1;if(e.token[z]==="{"||e.token[z]==="x{")d=d-1;if(d===0){if(e.token[z-1]==="do"){o[n-1]=-10;break}o[n-1]=m;break}z=z-1;}while(z>-1)}else if(v==="in"||(v==="else"&&s.script.elseNewline===false&&s.script.braceAllman===false||v==="catch")&&(N==="}"||N==="x}")){o[n-1]=-10;}else if(v==="var"||v==="let"||v==="const"){V[V.length-1]=n;if(p==="end")o[n-1]=m;if(e.token[e.begin[n]-1]!=="for"){let z=n+1;let d=0;do{if(e.types[z]==="end")d=d-1;if(e.types[z]==="start")d=d+1;if(d<0||d===0&&(e.token[z]===";"||e.token[z]===",")){break}z=z+1;}while(z<t);if(e.token[z]===",")m=m+1;}o.push(-10);return}if((v==="default"||v==="case")&&p!=="word"&&e.stack[n]==="switch"){o[n-1]=m-1;o.push(-10);return}if(v==="catch"&&N==="."){o[n-1]=-20;o.push(-20);return}if(v==="catch"||v==="finally"){o[n-1]=-10;o.push(-10);return}if(s.script.bracePadding===false&&n<t-1&&e.token[n+1].charAt(0)==="}"){o.push(-20);return}if(e.stack[n]==="object"&&(N==="{"||N===",")&&(e.token[n+1]==="("||e.token[n+1]==="x(")){o.push(-20);return}if(e.types[n-1]==="comment"&&e.token[e.begin[n]]==="("){o[n-1]=m+1;}if(s.script.inlineReturn){if(e.stack[n]==="if"&&v==="return"&&(N==="x{"||N==="{")){const z=e.begin.lastIndexOf(e.begin[n-1],n-3);if(e.token[z-2]==="else"){if(N==="x{")e.token[n-1]="{";if(e.token[e.ender[n]]==="x}")e.token[e.ender[n]]="}";e.lines[e.ender[n]]=e.lines[e.ender[n]]-1;}else {if(e.token[e.ender[n-1]+2]!=="if"&&e.token[e.ender[n-1]+1]!=="else"){o[n-1]=-20;if(N==="{")e.token[n-1]="x{";if(e.token[e.ender[n]]==="}")e.token[e.ender[n]]="x}";}else if(e.token[e.ender[n-1]+2]!=="if"&&e.token[e.ender[n-1]+1]!=="x{"){o[n-1]=-20;e.lines[e.ender[n-1]+2]=e.lines[e.ender[n-1]+2]-1;if(e.token[n-1]==="{")e.token[n-1]="x{";if(e.token[e.ender[n]]==="}")e.token[e.ender[n]]="x}";if(e.token[e.ender[n-1]+2]==="{")e.token[e.ender[n-1]+2]="x{";}}}if((N==="x}"||N==="}")&&(e.stack[n-1]==="if"&&v==="else"&&(e.token[n+1]==="{"||e.token[n+1]==="x{")&&e.token[n+2]==="return")){if(e.token[n-2]==="x;")e.token[n-2]=";";}if(N==="x{"&&v==="return"&&e.stack[n]==="else"){o[n-1]=-20;if(e.token[e.ender[n-1]-1]==="x;")e.token[e.ender[n-1]-1]=";";e.lines[e.ender[n-1]]=e.lines[e.ender[n-1]]-1;e.lines[e.ender[n]+1]=e.lines[e.ender[n]+1]-1;}if(N==="x}"&&v==="else"&&e.token[n+1]==="x{"&&e.token[n+2]==="return"&&e.token[e.ender[n]-1]==="}"){e.token[e.ender[n]-1]="x}";}}o.push(-10);}do{if(e.lexer[n]===a){J=e.types[n];v=e.token[n];if(J==="comment"){E();}else if(J==="regex"){o.push(-20);}else if(J==="string"){B();}else if(J.indexOf("template_string")===0){xe();}else if(J==="separator"){Y();}else if(J==="start"){ye();}else if(J==="end"){T();}else if(J==="type"||J==="type_start"||J==="type_end"){Ae();}else if(J==="operator"){G();}else if(J==="word"){we();}else if(J==="reference"){M();}else if(J==="markup"){ne();}else if(J.indexOf("template")===0){he();}else if(J==="generic"){if(N!=="return"&&N.charAt(0)!=="#"&&p!=="operator"&&N!=="public"&&N!=="private"&&N!=="static"&&N!=="final"&&N!=="implements"&&N!=="class"&&N!=="void"){o[n-1]=-20;}if(e.token[n+1]==="("||e.token[n+1]==="x("){o.push(-20);}else {o.push(-10);}}else {o.push(-10);}if(J!=="comment"){p=J;N=v;}if(P.length>0&&e.token[n]!==")"){if(e.types[n]==="comment"&&P[P.length-1]>-1){P[P.length-1]=s.wrap+1;}else if(o[n]>-1||e.token[n].charAt(0)==="`"&&e.token[n].indexOf("\n")>0){P[P.length-1]=-1;}else if(P[P.length-1]>-1){P[P.length-1]=P[P.length-1]+e.token[n].length;if(o[n]===-10)P[P.length-1]=P[P.length-1]+1;}}}else {fe();}n=n+1;}while(n<t);return o})();const $=(()=>{const n=[];const m=(()=>{const o=[];const h=s.indentChar;let j=s.indentSize;if(typeof j!=="number"||j<1)return "";do{o.push(h);j=j-1;}while(j>0);return o.join("")})();const W=s.crlf===true?"\r\n":"\n";const l=s.preserveLine+1;const J=["x;","x}","x{","x(","x)"];let v=F.start;let p="";let N=s.indentLevel;function V(o){const h=[];const j=(()=>{if(v===t-1)return 1;if(e.lines[v+1]-1>l)return l;if(e.lines[v+1]>1)return e.lines[v+1]-1;return 1})();let O=0;if(o<0)o=0;do{h.push(W);O=O+1;}while(O<j);if(o>0){O=0;do{h.push(m);O=O+1;}while(O<o)}return h.join("")}if(s.script.vertical===true){let o=function(h){let j=0;let O=0;let x=h-1;let y=0;let I=0;const q=e.begin[v];const P=[];do{if((e.begin[x]===q||e.token[x]==="]"||e.token[x]===")")&&(e.token[x+1]===":"&&e.stack[x]==="object"||e.token[x+1]==="=")){y=x;O=0;do{if(e.begin[y]===q){if(e.token[y]===","||e.token[y]===";"||e.token[y]==="x;"||X[y]>-1&&e.types[y]!=="comment"){if(e.token[y+1]==="."){O=O+s.indentSize*s.indentChar.length;}break}}else if(X[y]>-1){break}if(e.types[y]!=="comment"){if(X[y-1]===-10)O=O+1;O=e.token[y].length+O;}y=y-1;}while(y>q);I=y;if(e.token[I]===","&&e.token[x+1]==="="){do{if(e.types[I]==="end")I=e.begin[I];if(e.begin[I]===q){if(e.token[I]===";"||e.token[I]==="x;")break;if(e.token[I]==="var"||e.token[I]==="const"||e.token[I]==="let"){O=O+s.indentSize*s.indentChar.length;break}}I=I-1;}while(I>q)}if(O>j)j=O;P.push([x,O]);x=y;}else if(e.types[x]==="end"){x=e.begin[x];}x=x-1;}while(x>q);x=P.length;if(x>0){do{x=x-1;y=P[x][1];if(y<j){do{e.token[P[x][0]]=e.token[P[x][0]]+" ";y=y+1;}while(y<j)}}while(x>0)}};v=t;do{v=v-1;if(e.lexer[v]==="script"){if(e.token[v]==="}"&&e.token[v-1]!=="{"&&X[e.begin[v]]>0){o(v);}}else {v=e.begin[v];}}while(v>0)}v=F.start;do{if(e.lexer[v]===a||F.beautify[e.lexer[v]]===void 0){if(e.types[v]==="comment"&&s.commentIndent===true){if(/\n/.test(e.token[v])){const o=e.begin[v]>-1?e.token[v].charAt(2)==="*"?Ie(X[v],m)+s.indentChar:Ie(X[v],m):s.indentChar;const h=e.token[v].split(/\n/);let j=1;do{h[j]=o+h[j].trimStart();j=j+1;}while(j<h.length);e.token.splice(v,1,h.join("\n"));}}if(J.indexOf(e.token[v])<0){if(e.token[v]!==";"||s.script.noSemicolon===false){n.push(e.token[v]);}else if(X[v]<0&&e.types[v+1]!=="comment"){n.push(";");}}if(v<t-1&&e.lexer[v+1]!==a&&e.begin[v]===e.begin[v+1]&&e.types[v+1].indexOf("end")<0&&e.token[v]!==","){n.push(" ");}else if(X[v]>-1){if((X[v]>-1&&e.token[v]==="{"||X[v]>-1&&e.token[v+1]==="}")&&e.lines[v]<3&&s.script.braceNewline===true){if(e.lines[v+1]<3)n.push(V(0));}n.push(V(X[v]));N=X[v];}else if(X[v]===-10){n.push(" ");if(e.lexer[v+1]!==a)N=N+1;}}else {if(b[v]===v){n.push(e.token[v]);}else {F.end=b[v];F.start=v;s.indentLevel=N;p=F.beautify[e.lexer[v]](s);n.push(p.replace(/\s+$/,""));v=F.iterator;if(X[v]===-10){n.push(" ");}else if(X[v]>-1){n.push(V(X[v]));}s.indentLevel=0;}}v=v+1;}while(v<t);F.iterator=t-1;return n.join("")})();return $};var Je={};Ve(Je,{format:()=>Ee,language:()=>_e,options:()=>Pe,parse:()=>et});var Me=function(){const s=ie(null);s.markup="markup";s.html="markup";s.liquid="markup";s.xml="markup";s.javascript="script";s.typescript="script";s.jsx="script";s.tsx="script";s.json="script";s.less="style";s.scss="style";s.sass="style";s.css="style";s.text="text";return s}();var Ue=function(){const s=ie(null);s.html="HTML";s.xhtml="XHTML";s.liquid="Liquid";s.xml="XML";s.jsx="JSX";s.tsx="TSX";s.json="JSON";s.yaml="YAML";s.css="CSS";s.scss="SCSS";s.sass="SASS";s.less="LESS";s.text="Plain Text";s.javascript="JavaScript";s.typescript="TypeScript";return s}();function Re(s){if(typeof s!=="string")return "markup";if(s.indexOf("html")>-1)return "markup";if(Me[s]===void 0)return "script";return Me[s]}function Ye(s){if(typeof s!=="string"||Ue[s]===void 0)return s.toUpperCase();return Ue[s]}function ke(s){const c=ie(null);if(s==="unknown"){c.language=s;c.languageName="Unknown";c.lexer="markup";}else if(s==="xhtml"||s==="markup"){c.language="xml";c.languageName="XHTML";c.lexer="markup";}else {c.language=s;c.languageName=Ye(s);c.lexer=Re(s);}if(F.hooks.language.length>0){for(const f of F.hooks.language){const i=f(c);if(typeof i==="object")Oe(c,i);}}return c}_e.reference=ke;_e.listen=function(s){F.hooks.language.push(s);};function _e(s){let c=[];let f=0;const i=/(((var)|(let)|(const)|(function)|(import))\s+(\w|\$)+[a-zA-Z0-9]*)/.test(s)&&/@import/.test(s)===false;const b=/((((final)|(public)|(private))\s+static)|(static\s+void))/.test(s);function e(){if(/\n\s*#+\s+/.test(s)||/^#+\s+/.test(s))return ke("markdown");if(/\$[a-zA-Z]/.test(s)||/\{\s*(\w|\.|\$|#)+\s*\{/.test(s)||/^[.#]?[\w][\w-]+\s+\{(?:\s+[a-z][a-z-]+:\s*\S+;)+\s+[&>+]?\s+[.#:]?[\w][\w-]\s+\{/.test(s)&&/:\s*@[a-zA-Z];/.test(s)===false)return ke("scss");if(/@[a-zA-Z]:/.test(s)||/\.[a-zA-Z]\(\);/.test(s))return ke("less");return ke("css")}function a(){let t=1;let X="";let $=false;let n=false;const m=/((public)|(private))\s+(static\s+)?(((v|V)oid)|(class)|(final))/.test(s);function W(){if(s.indexOf("(")>-1||s.indexOf("=")>-1||s.indexOf(";")>-1&&s.indexOf("{")>-1){if(b===true||/\w<\w+(,\s+\w+)*>/.test(s))return ke("typescript");if(/(?:var|let|const)\s+\w+\s*:/.test(s)||/=\s*<\w+/.test(s))return ke("typescript");return ke("javascript")}return ke("unknown")}function l(){if(/:\s*(?:number|string|boolean|any|unknown)(?:\[\])?/.test(s)||/(?:public|private)\s+/.test(s)||/(?:export|declare)\s+type\s+\w+\s*=/.test(s)||/(?:namespace|interface|enum|implements|declare)\s+\w+/.test(s)||/(?:typeof|keyof|as)\s+\w+/.test(s)||/\w+\s+as\s+\w+/.test(s)||/\[\w+(?:(?::\s*\w+)|(?:\s+in\s+\w+))\]:/.test(s)||/\):\s*\w+(?:\[\])?\s*(?:=>|\{)\s+/.test(s)||/(var|const|let)\s+\w+:\s*(string|number|boolean|string|any)(\[\])?/.test(s))return ke("typescript");if(/\s(class|var|const|let)\s+\w/.test(s)===false&&/<[a-zA-Z](?:-[a-zA-Z])?/.test(s)&&/<\/[a-zA-Z-](?:-[a-zA-Z])?/.test(s)&&(/\s?\{%/.test(s)||/{{/.test(s)))return ke("liquid");if(/^(\s*[$@])/.test(s)===false&&/([}\]];?\s*)$/.test(s)){if(/^\s*import\s+\*\s+as\s+\w+\s+from\s+['"]/.test(s)||/module\.export\s+=\s+/.test(s)||/export\s+default\s+\{/.test(s)||/[?:]\s*[{[]/.test(s)||/^(?:\s*return;?(?:\s+[{[])?)/.test(s)){return ke("javascript")}}if(/{%/.test(s)&&/{{/.test(s)&&/<\w/.test(s))return ke("liquid");if(/{\s*(?:\w|\.|@|#)+\s*\{/.test(s))return ke("less");if(/\$(\w|-)/.test(s))return ke("scss");if(/[;{:]\s*@\w/.test(s)===true)return ke("less");return ke("css")}if(t<f){do{if($===false){if(c[t]==="*"&&c[t-1]==="/"){c[t-1]="";$=true;}else if(n===false&&c[t]==="f"&&t<f-6&&c[t+1]==="i"&&c[t+2]==="l"&&c[t+3]==="t"&&c[t+4]==="e"&&c[t+5]==="r"&&c[t+6]===":"){n=true;}}else if($===true&&c[t]==="*"&&t!==f-1&&c[t+1]==="/"){$=false;c[t]="";c[t+1]="";}else if(n===true&&c[t]===";"){n=false;c[t]="";}if($===true||n===true)c[t]="";t=t+1;}while(t<f)}X=c.join("");if(/\s\/\//.test(s)===false&&/\/\/\s/.test(s)===false&&/^(\s*(\{|\[)(?!%))/.test(s)===true&&/((\]|\})\s*)$/.test(s)&&s.indexOf(",")!==-1)return ke("json");if(/((\}?(\(\))?\)*;?\s*)|([a-z0-9]("|')?\)*);?(\s*\})*)$/i.test(s)===true&&(i===true||m===true||/console\.log\(/.test(s)===true||/export\s+default\s+class\s+/.test(s)===true||/export\s+(const|var|let|class)s+/.test(s)===true||/document\.get/.test(s)===true||/((=|(\$\())\s*function)|(\s*function\s+(\w*\s+)?\()/.test(s)===true||s.indexOf("{")===-1||/^(\s*if\s+\()/.test(s)===true))return W();if(s.indexOf("{")>-1&&(/^(\s*[\u007b\u0024\u002e#@a-z0-9])/i.test(s)||/^(\s*\/(\*|\/))/.test(s)||/^(\s*\*\s*\{)/.test(s))&&/^(\s*if\s*\()/.test(s)===false&&/=\s*(\{|\[|\()/.test(X)===false&&(/(\+|-|=|\?)=/.test(X)===false||/\/\/\s*=+/.test(X)||/=+('|")?\)/.test(s)&&/;\s*base64/.test(s))&&/function(\s+\w+)*\s*\(/.test(X)===false)return l();return s.indexOf("{%")>-1?ke("liquid"):ke("unknown")}function g(){function t(){return /{%-?\s*(schema|for|if|unless|render|include)/.test(s)||/{%-?\s*end\w+/.test(s)||/{{-?\s*content_for/.test(s)||/{{-?\s*[a-zA-Z0-9_'".[\]]+\s*-?}}/.test(s)||/{%/.test(s)&&/%}/.test(s)&&/{{/.test(s)&&/}}/.test(s)?ke("liquid"):ke("html")}return /^(\s*<!doctype\s+html>)/i.test(s)||/^(\s*<html)/i.test(s)||/<form\s/i.test(s)&&/<label\s/i.test(s)&&/<input\s/i.test(s)||(/<img(\s+\w+=['"]?\S+['"]?)*\s+src\s*=/.test(s)||/<a(\s+\w+=['"]?\S+['"]?)*\s+href\s*=/.test(s))||/<ul\s/i.test(s)&&/<li\s/i.test(s)&&/<\/li>/i.test(s)&&/<\/ul>/i.test(s)||/<head\s*>/.test(s)&&/<\/head>/.test(s)||/^(\s*<!DOCTYPE\s+((html)|(HTML))\s+PUBLIC\s+)/.test(s)&&/XHTML\s+1\.1/.test(s)===false&&/XHTML\s+1\.0\s+(S|s)((trict)|(TRICT))/.test(s)===false?t():/\s?{[{%]-?/.test(s)?ke("liquid"):ke("xml")}if(s===null||s.replace(/\s+/g,"")==="")return ke("unknown");if((/\n\s*#{1,6}\s+/.test(s)||/\n\s*(?:\*|-|(?:\d+\.))\s/.test(s))&&(/\[( |x|X)\]/.test(s)||/\s[*_~]{1,2}\w+[*_~]{1,2}/.test(s)||/\n\s*```[a-zA-Z]*?\s+/.test(s)||/-+\|(-+\|)+/.test(s)))return ke("markdown");if(/^(\s*<!DOCTYPE\s+html>)/i.test(s))return g();if(/^\s*@(?:charset|import|include|keyframes|media|namespace|page)\b/.test(s))return e();if(b===false&&/=(>|=|-|\+|\*)/.test(s)===false&&/^(?:\s*((if)|(for)|(function))\s*\()/.test(s)===false&&/(?:\s|;|\})((if)|(for)|(function\s*\w*))\s*\(/.test(s)===false&&i===false&&/return\s*\w*\s*(;|\})/.test(s)===false&&(s===void 0||/^(?:\s*#(?!(!\/)))/.test(s)||/\n\s*(\.|@)\w+(\(|(\s*:))/.test(s)&&/>\s*<\w/.test(s)===false||(/^\s*:root\s*\{/.test(s)||/-{2}\w+\s*\{/.test(s)||/^\s*(?:body|button|hr|section|h[1-6]|p|strong|\*)\s+\{\s+/.test(s))))return e();c=s.replace(/\[[a-zA-Z][\w-]*=['"]?[a-zA-Z][\w-]*['"]?\]/g,"").split("");f=c.length;if(/^(\s*({{|{%|<))/.test(s))return g();if(b===true||/^(?:[\s\w-]*<)/.test(s)===false&&/(?:>[\s\w-]*)$/.test(s)===false)return a();return (/^(?:\s*<\?xml)/.test(s)||/(?:>[\w\s:]*)?<(?:\/|!|#)?[\w\s:\-[]+/.test(s)||/^\s*</.test(s)&&/<\/\w+(\w|\d)+>\s*$/.test(s))&&(/^(?:[\s\w]*<)/.test(s)||/(?:>[\s\w]*)$/.test(s))||/^(?:\s*<s((cript)|(tyle)))/i.test(s)&&/(?:<\/s((cript)|(tyle))>\s*)$/i.test(s)?/^(?:[\s\w]*<)/.test(s)===false||/(?:>[\s\w]*)$/.test(s)===false?a():g():ke("unknown")}function Xe(s){const c=s.source.search(/((\/(\*|\/))|{%-?\s*comment\s*-?%}|<!--)\s*@prettify\s+(\w+)?\s*{\s+/);const f=s.source.search(/((\/(\*|\/))|{%-?\s*comment\s*-?%}|<!--)\s*@prettify-ignore\b/);const i=je(Se);const b=i.length;let e=0;if(f>-1&&s.source.slice(0,f).trimStart()==="")return false;if(c>-1&&(c===0||`"':`.indexOf(s.source.charAt(c-1))<0)){let h=function(){if($.charAt(m-1)!=="\\")return false;let j=m;do{j=j-1;}while(j>0&&$.charAt(j)==="\\");return (m-j)%2===0};const t=[];const X=c;const $=s.source;const n=$.length;let m=X;let W=0;let l="";let J="";let v="";let p="";let N=[];let V=[];let D;let o;if($.charAt(m)==="<"){o="<!--";}else if($.charAt(m+1)==="/"){o="//";}else if($.charAt(m+1)==="%"){D=$.indexOf("}",m+1);if($[D-1].charCodeAt(0)===37)o=$.slice(m,D+1);}else {o="/*";}do{if($.slice(m-9,m)==="@prettify")break;m=m+1;}while(m<n);do{if(h()===false){if(l===""){if($.charAt(m)==='"'||$.charAt(m)==="'"||$.charAt(m)==="`"){l=$.charAt(m);if(t.length>0&&t[t.length-1].charAt(t[t.length-1].length-1)===":")W=m;}else if(/\s/.test($.charAt(m))===false&&W===0){W=m;}else if($.charAt(m)===","||/\s/.test($.charAt(m))===true&&W>0){J=$.slice(W,m);if(t.length>0){if(t.length>0&&J===":"&&t[t.length-1].indexOf(":")<0){t[t.length-1]=t[t.length-1]+J;W=m;}else if(t.length>0&&t[t.length-1].charAt(t[t.length-1].length-1)===":"){t[t.length-1]=t[t.length-1]+J;W=0;}else {t.push(J);W=0;}}else {t.push(J);W=0;}}if(o==="<!--"&&$.slice(m-2,m+1)==="-->")break;if(o==="//"&&$.charAt(m)==="\n")break;if(o==="/*"&&$.slice(m-1,m+1)==="*/")break;if(o.charCodeAt(1)===37&&$.slice(m-1,m+1)==="%"&&$.indexOf("endcomment",$.indexOf("{%",D))>0)break}else if($.charAt(m)===l&&l!=="${"){l="";}else if(l==="`"&&$.slice(m,m+2)==="${"){l="${";}else if(l==="${"&&$.charAt(m)==="}"){l="`";}}m=m+1;}while(m<n);if(W>0){l=$.slice(W,m+1);if(o==="<!--")l=l.replace(/\s*-+>$/,"");else if(o==="//")l=l.replace(/\s+$/,"");else l=l.replace(/\s*\u002a\/$/,"");t.push(l);}m=t.length;if(m>0){do{m=m-1;if(t[m].indexOf(":")>0){V=[t[m].slice(0,t[m].indexOf(":")),t[m].slice(t[m].indexOf(":")+1)];}else if(Se[t[m]]!==void 0&&Se[t[m]].type==="boolean"){s.options[t[m]]=true;}if(V.length===2&&Se[V[0]]!==void 0){if(V[1].charAt(V[1].length-1)===V[1].charAt(0)&&(V[1].charAt(0)==='"'||V[1].charAt(0)==="'"||V[1].charAt(0)==="`")){V[1]=V[1].slice(1,V[1].length-1);}if(Se[V[0]].type==="number"&&isNaN(Number(V[1]))===false){s.options[V[0]]=Number(V[1]);}else if(Se[V[0]].type==="boolean"){s.options[V[0]]=V[1]==="true";}else {if(Se[V[0]].values!==void 0){N=je(Se[V[0]].values);W=N.length;do{W=W-1;if(N[W]===V[1]){s.options[V[0]]=V[1];break}}while(W>0)}else {if(V[0]==="language"){v=V[1];}else if(V[0]==="lexer"){p=V[1];}s.options[V[0]]=V[1];}}}}while(m>0);if(p===""&&v!=="")p=Re(v);}}if(s.options.lexer==="script"){if(s.options.script.styleGuide!==void 0){switch(s.options.script.styleGuide){case"airbnb":s.options.wrap=80;s.options.indentChar=" ";s.options.indentSize=2;s.options.preserveLine=1;s.options.script.correct=true;s.options.script.quoteConvert="single";s.options.script.variableList="each";s.options.script.endComma="always";s.options.script.bracePadding=true;break;case"crockford":s.options.indentChar=" ";s.options.indentSize=4;s.options.script.correct=true;s.options.script.bracePadding=false;s.options.script.elseNewline=false;s.options.script.endComma="never";s.options.script.noCaseIndent=true;s.options.script.functionSpace=true;s.options.script.variableList="each";s.options.script.vertical=false;break;case"google":s.options.wrap=-1;s.options.indentChar=" ";s.options.indentSize=4;s.options.preserveLine=1;s.options.script.correct=true;s.options.script.quoteConvert="single";s.options.script.vertical=false;break;case"jquery":s.options.wrap=80;s.options.indentChar="	";s.options.indentSize=1;s.options.script.correct=true;s.options.script.bracePadding=true;s.options.script.quoteConvert="double";s.options.script.variableList="each";break;case"jslint":s.options.indentChar=" ";s.options.indentSize=4;s.options.script.correct=true;s.options.script.bracePadding=false;s.options.script.elseNewline=false;s.options.script.endComma="never";s.options.script.noCaseIndent=true;s.options.script.functionSpace=true;s.options.script.variableList="each";s.options.script.vertical=false;break;case"standard":s.options.wrap=0;s.options.indentChar=" ";s.options.indentSize=2;s.options.endNewline=false;s.options.preserveLine=1;s.options.script.correct=true;s.options.script.noSemicolon=true;s.options.script.endComma="never";s.options.script.braceNewline=false;s.options.script.bracePadding=false;s.options.script.braceAllman=false;s.options.script.quoteConvert="single";s.options.script.functionSpace=true;s.options.script.ternaryLine=false;s.options.script.variableList="each";s.options.script.vertical=false;break;case"yandex":s.options.script.correct=true;s.options.script.bracePadding=false;s.options.script.quoteConvert="single";s.options.script.variableList="each";s.options.script.vertical=false;break}}if(s.options.script.braceStyle!==void 0){switch(s.options.script.braceStyle){case"collapse":s.options.script.braceNewline=false;s.options.script.bracePadding=false;s.options.script.braceAllman=false;s.options.script.objectIndent="indent";s.options.script.neverFlatten=true;break;case"collapse-preserve-inline":s.options.script.braceNewline=false;s.options.script.bracePadding=true;s.options.script.braceAllman=false;s.options.script.objectIndent="indent";s.options.script.neverFlatten=false;break;case"expand":s.options.script.braceNewline=false;s.options.script.bracePadding=false;s.options.script.braceAllman=true;s.options.script.objectIndent="indent";s.options.script.neverFlatten=true;break}}if(s.options.language==="json")s.options.wrap=0;}do{if(s.options[je[e]]!==void 0){Se[je[e]].lexer.length;}e=e+1;}while(e<b)}function Ke(s){const c=s.options.language;const f=s.options.lexer;r.count=-1;r.linesSpace=0;r.lineNumber=1;r.data.begin=[];r.data.ender=[];r.data.lexer=[];r.data.lines=[];r.data.stack=[];r.data.token=[];r.data.types=[];r.datanames=["begin","ender","lexer","lines","stack","token","types"];r.structure=[["global",-1]];r.structure.pop=function g(){const t=r.structure.length-1;const X=r.structure[t];if(t>0)r.structure.splice(t,1);return X};if(s.options.language==="auto"||s.options.lexer==="auto"){const g=_e(s.source);if(s.options.language==="auto")s.options.language=g.language;if(s.options.lexer==="auto")s.options.lexer=g.lexer;}if(typeof s.lexers[s.options.lexer]==="function"){r.references=[[]];r.error="";for(const g of je(s.lexers)){if(s.options.language==="json"){s.options.json=s.options.json||ie(null);}else {s.options[g]=s.options[g]||ie(null);}}s.lexers[s.options.lexer](`${s.source} `);}else {r.error=`Specified lexer, ${s.options.lexer}, is not a function.`;}let i=0;let b=0;const e=je(r.data);const a=e.length;do{b=i+1;do{if(r.data[e[i]].length!==r.data[e[b]].length){r.error=`"${e[i]}" array is of different length than "${e[b]}"`;break}b=b+1;}while(b<a);i=i+1;}while(i<a-1);if(r.data.begin.length>0){if(s.options.lexer==="script"&&s.options[s.options.lexer].objectSort){r.sortCorrection(0,r.count+1);}else if(s.options.lexer==="style"&&s.options[s.options.lexer].sortProperties){r.sortCorrection(0,r.count+1);}}s.options.language=c;s.options.lexer=f;return r.data}function Te(s){const c=Date.now();const f=s.mode;const i=s.options.crlf===true?"\r\n":"\n";let b="";if(s.source.trimStart()===""){const g=new RegExp(`\\n{${s.options.preserveLine},}`);b=s.source;b=s.source.replace(g,"\n\n");b=s.options.endNewline===true?b.replace(/\s*$/,i):b.replace(/\s+$/,"");s.stats.chars=b.length;s.stats.language=s.options.languageName;s.stats.size=Ne(b.length);s.stats.time=(Date.now()-c).toFixed(1);return b}if(s.options.language==="text"){s.options.language="auto";}if(s.options.lexer==="text"){s.options.lexer="auto";}if(s.options.language==="text"||s.options.lexer==="text"){s.options.language="text";s.options.languageName="Plain Text";s.options.lexer="text";}else if(s.options.language==="auto"&&s.options.lexer==="auto"){const g=_e(s.source);if(s.options.lexer==="auto"){s.options.lexer=g.lexer;}if(s.options.language==="auto"){s.options.language=g.language;s.options.languageName=g.languageName;}}else {s.options.lexer=Re(s.options.language);}s.stats.language=s.options.languageName;const e=Xe(s);if(e===false){s.stats.time=-1;s.stats.chars=s.source.length;s.stats.size=Ne(s.stats.chars);return s.source}s.parsed=Ke(s);if(f==="parse"){s.stats.time=(Date.now()-c).toFixed(1);s.stats.chars=s.source.length;s.stats.size=Ne(s.stats.chars);return s.parsed}b=s.beautify[s.options.lexer](s.options);b=s.options.endNewline===true?b.replace(/\s*$/,i):b.replace(/\s+$/,"");const a=b.length;s.stats.chars=a;s.stats.size=Ne(a);s.stats.time=(Date.now()-c).toFixed(1);s.end=0;s.start=0;return b}Ee.before=s=>F.hooks.before.push(s);Ee.after=s=>F.hooks.after.push(s);Pe.listen=s=>F.hooks.rules.push(s);Object.defineProperty(Ee,"stats",{get(){return F.stats}});Object.defineProperty(Pe,"rules",{get(){return F.options}});function Ee(s,c){F.source=s;if(typeof c==="object")F.options=Pe(c);if(F.hooks.before.length>0){for(const i of F.hooks.before){if(i(F.options,s)===false)return s}}const f=Te(F);if(F.hooks.after.length>0){for(const i of F.hooks.after){if(i.call(F.parsed,f,F.options)===false)return s}}return new Promise((i,b)=>{if(r.error.length)return b(r.error);return i(f)})}function Pe(s){var c,f,i,b,e,a,g,t,X;for(const $ of je(s)){if(((f=(c=Se)==null?void 0:c[$])==null?void 0:f.lexer)==="auto"){F.options[$]=s[$];}else if($==="markup"){Oe(F.options.markup,s.markup);}else if($==="script"){Oe(F.options.script,s.script);}else if($==="style"){Oe(F.options.style,s.style);}else if($==="json"){Oe(F.options.json,s.json);}else if($==="grammar"){if((b=(i=s.grammar)==null?void 0:i.html)==null?void 0:b.voids){Oe(F.options.grammar.html,s.grammar.html);for(const n of s.grammar.html.voids)ge.html.voids.add(n);}if((e=s.grammar)==null?void 0:e.liquid){if((g=(a=s.grammar)==null?void 0:a.liquid)==null?void 0:g.tags){F.options.grammar.liquid.tags=s.grammar.liquid.tags;for(const n of s.grammar.liquid.tags)ge.liquid.tags.add(n);}if((X=(t=s.grammar)==null?void 0:t.liquid)==null?void 0:X.singletons){F.options.grammar.liquid.singletons=s.grammar.liquid.singletons;for(const n of s.grammar.liquid.singletons)ge.liquid.singletons.add(n);}}}else if($ in F.options){F.options[$]=s[$];}}if(F.hooks.rules.length>0){for(const $ of F.hooks.rules)$(F.options);}return F.options}function et(s,c){F.source=s;F.mode="parse";if(typeof c==="object")F.options=Pe(c);const f=Te(F);return new Promise((i,b)=>{if(r.error.length)return b(r.error);return i(f)})}

export { Je as default, Se as definitions };
